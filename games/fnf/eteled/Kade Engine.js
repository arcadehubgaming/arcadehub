var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.arrayIteratorImpl=function(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}},$jscomp.arrayIterator=function(t){return{next:$jscomp.arrayIteratorImpl(t)}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.ISOLATE_POLYFILLS=!1,$jscomp.FORCE_POLYFILL_PROMISE=!1,$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t},$jscomp.getGlobal=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")},$jscomp.global=$jscomp.getGlobal(this),$jscomp.IS_SYMBOL_NATIVE="function"==typeof Symbol&&"symbol"==typeof Symbol("x"),$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE,$jscomp.polyfills={},$jscomp.propertyToPolyfillSymbol={},$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(t,e){var n=$jscomp.propertyToPolyfillSymbol[e];return null!=n&&void 0!==(n=t[n])?n:t[e]};$jscomp.polyfill=function(t,e,n,s){e&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(t,e,n,s):$jscomp.polyfillUnisolated(t,e,n,s))},$jscomp.polyfillUnisolated=function(t,e,n,s){for(n=$jscomp.global,t=t.split("."),s=0;s<t.length-1;s++){var i=t[s];if(!(i in n))return;n=n[i]}(e=e(s=n[t=t[t.length-1]]))!=s&&null!=e&&$jscomp.defineProperty(n,t,{configurable:!0,writable:!0,value:e})},$jscomp.polyfillIsolated=function(t,e,n,s){var i=t.split(".");t=1===i.length,s=i[0],s=!t&&s in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var a=0;a<i.length-1;a++){var r=i[a];if(!(r in s))return;s=s[r]}i=i[i.length-1],null!=(e=e(n=$jscomp.IS_SYMBOL_NATIVE&&"es6"===n?s[i]:null))&&(t?$jscomp.defineProperty($jscomp.polyfills,i,{configurable:!0,writable:!0,value:e}):e!==n&&(void 0===$jscomp.propertyToPolyfillSymbol[i]&&(n=1e9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[i]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(i):$jscomp.POLYFILL_PREFIX+n+"$"+i),$jscomp.defineProperty(s,$jscomp.propertyToPolyfillSymbol[i],{configurable:!0,writable:!0,value:e})))},$jscomp.initSymbol=function(){},$jscomp.polyfill("Symbol",function(t){if(t)return t;function e(t,e){this.$jscomp$symbol$id_=t,$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:e})}e.prototype.toString=function(){return this.$jscomp$symbol$id_};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",s=0,i=function(t){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return new e(n+(t||"")+"_"+s++,t)};return i},"es6","es3"),$jscomp.polyfill("Symbol.iterator",function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var e="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<e.length;n++){var s=$jscomp.global[e[n]];"function"==typeof s&&"function"!=typeof s.prototype[t]&&$jscomp.defineProperty(s.prototype,t,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return t},"es6","es3"),$jscomp.iteratorPrototype=function(t){return(t={next:t})[Symbol.iterator]=function(){return this},t},$jscomp.iteratorFromArray=function(e,n){e instanceof String&&(e+="");var s=0,i=!1,t={next:function(){if(!i&&s<e.length){var t=s++;return{value:n(t,e[t]),done:!1}}return{done:i=!0,value:void 0}}};return t[Symbol.iterator]=function(){return t},t},$jscomp.polyfill("Array.prototype.keys",function(t){return t||function(){return $jscomp.iteratorFromArray(this,function(t){return t})}},"es6","es3"),$jscomp.checkStringArgs=function(t,e,n){if(null==t)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return t+""},$jscomp.polyfill("String.prototype.startsWith",function(t){return t||function(t,e){var n=$jscomp.checkStringArgs(this,t,"startsWith"),s=n.length,i=(t+="").length;e=Math.max(0,Math.min(0|e,n.length));for(var a=0;a<i&&e<s;)if(n[e++]!=t[a++])return!1;return i<=a}},"es6","es3"),$jscomp.polyfill("String.prototype.endsWith",function(t){return t||function(t,e){var n=$jscomp.checkStringArgs(this,t,"endsWith");t+="",void 0===e&&(e=n.length),e=Math.max(0,Math.min(0|e,n.length));for(var s=t.length;0<s&&0<e;)if(n[--e]!=t[--s])return!1;return s<=0}},"es6","es3"),$jscomp.polyfill("Array.prototype.fill",function(t){return t||function(t,e,n){var s=this.length||0;for(e<0&&(e=Math.max(0,s+e)),(null==n||s<n)&&(n=s),(n=Number(n))<0&&(n=Math.max(0,s+n)),e=Number(e||0);e<n;e++)this[e]=t;return this}},"es6","es3"),$jscomp.typedArrayFill=function(t){return t||Array.prototype.fill},$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5"),$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5"),$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5"),$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5"),$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5"),$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5"),$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5"),$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5"),$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5"),$jscomp.polyfill("String.fromCodePoint",function(t){return t||function(t){for(var e="",n=0;n<arguments.length;n++){var s=Number(arguments[n]);if(s<0||1114111<s||s!==Math.floor(s))throw new RangeError("invalid_code_point "+s);s<=65535?e+=String.fromCharCode(s):(s-=65536,e+=String.fromCharCode(s>>>10&1023|55296),e+=String.fromCharCode(1023&s|56320))}return e}},"es6","es3"),$jscomp.polyfill("Array.prototype.entries",function(t){return t||function(){return $jscomp.iteratorFromArray(this,function(t,e){return[t,e]})}},"es6","es3"),$jscomp.polyfill("Array.prototype.values",function(t){return t||function(){return $jscomp.iteratorFromArray(this,function(t,e){return e})}},"es8","es3"),$jscomp.polyfill("String.prototype.repeat",function(t){return t||function(t){var e=$jscomp.checkStringArgs(this,null,"repeat");if(t<0||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var n="";t;)1&t&&(n+=e),(t>>>=1)&&(e+=e);return n}},"es6","es3"),function(Sa,P){Sa.lime=Sa.lime||{},Sa.lime.$scripts=Sa.lime.$scripts||{},Sa.lime.$scripts["Kade Engine"]=function(la,qa){!function(ia,Ka){function E(t,e){for(var n in t=Object.create(t),e)t[n]=e[n];return e.toString!==Object.prototype.toString&&(t.toString=e.toString),t}function Ua(t){return t instanceof Array?new Tf(t):t.iterator()}function z(t,e){return null==e?null:(null==e.__id__&&(e.__id__=Ka.$haxeUID++),null==t.hx__closures__?t.hx__closures__={}:n=t.hx__closures__[e.__id__],null==n&&(n=e.bind(t),t.hx__closures__[e.__id__]=n),n);var n}ia.lime=ia.lime||{};var r={},v=function(){return za.__string_rec(this,"")},G=G||{},D,ba=function(){};r["flixel.util.IFlxDestroyable"]=ba,ba.__name__="flixel.util.IFlxDestroyable",ba.__isInterface__=!0,ba.prototype={destroy:null,__class__:ba};var ca=function(){this.flixelType=0,this.active=this.visible=this.alive=this.exists=!0,this.ID=ca.idEnumerator++};r["flixel.FlxBasic"]=ca,ca.__name__="flixel.FlxBasic",ca.__interfaces__=[ba],ca.prototype={ID:null,active:null,visible:null,alive:null,exists:null,flixelType:null,_cameras:null,destroy:function(){this.set_exists(!1),this._cameras=null},kill:function(){this.set_alive(!1),this.set_exists(!1)},revive:function(){this.set_alive(!0),this.set_exists(!0)},update:function(t){},draw:function(){},toString:function(){var t=this.active,e=Rb._pool.get();e.label="active",e.value=t;var t=this.visible,n=Rb._pool.get();n.label="visible",n.value=t,t=this.alive;var s=Rb._pool.get();s.label="alive",s.value=t,t=this.exists;var i=Rb._pool.get();return i.label="exists",i.value=t,Pb.getDebugString([e,n,s,i])},set_visible:function(t){return this.visible=t},set_active:function(t){return this.active=t},set_exists:function(t){return this.exists=t},set_alive:function(t){return this.alive=t},get_camera:function(){return(null==this._cameras||0==this._cameras.length?gc._defaultCameras:this._cameras)[0]},set_camera:function(t){return null==this._cameras?this._cameras=[t]:this._cameras[0]=t,t},get_cameras:function(){return null==this._cameras?gc._defaultCameras:this._cameras},set_cameras:function(t){return this._cameras=t},__class__:ca,__properties__:{set_cameras:"set_cameras",get_cameras:"get_cameras",set_camera:"set_camera",get_camera:"get_camera",set_exists:"set_exists",set_alive:"set_alive",set_visible:"set_visible",set_active:"set_active"}};var fa=function(){};r["flixel.util.IFlxPooled"]=fa,fa.__name__="flixel.util.IFlxPooled",fa.__isInterface__=!0,fa.__interfaces__=[ba],fa.prototype={put:null,_inPool:null,__class__:fa};var xa=function(){};r["flixel.util.IFlxPool"]=xa,xa.__name__="flixel.util.IFlxPool",xa.__isInterface__=!0,xa.prototype={preAllocate:null,clear:null,__class__:xa};var Wa=function(t){this._count=0,this._pool=[],this._class=t};r["flixel.util.FlxPool_flixel_math_FlxRect"]=Wa,Wa.__name__="flixel.util.FlxPool_flixel_math_FlxRect",Wa.__interfaces__=[xa],Wa.prototype={_pool:null,_class:null,_count:null,get:function(){return 0==this._count?Jb.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){var e;null==t||(-1==(e=this._pool.indexOf(t))||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;0<t--;)this._pool[this._count++]=Jb.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:Wa,__properties__:{get_length:"get_length"}};var ta=function(t,e,n,s){null==s&&(s=0),null==n&&(n=0),null==e&&(e=0),null==t&&(t=0),this._weak=this._inPool=!1,null==s&&(s=0),null==n&&(n=0),null==e&&(e=0),this.x=t=null==t?0:t,this.y=e,this.width=n,this.height=s};r["flixel.math.FlxRect"]=ta,ta.__name__="flixel.math.FlxRect",ta.__interfaces__=[fa],ta.__properties__={get_pool:"get_pool"},ta.get=function(t,e,n,s){null==s&&(s=0),null==n&&(n=0),null==e&&(e=0),null==t&&(t=0);var i=ta._pool.get();return null==s&&(s=0),null==n&&(n=0),null==e&&(e=0),i.x=t=null==t?0:t,i.y=e,i.width=n,i.height=s,i._inPool=!1,i},ta.weak=function(t,e,n,s){null==(s=null==s?0:s)&&(s=0),null==(n=null==n?0:n)&&(n=0),null==(e=null==e?0:e)&&(e=0),null==(t=null==t?0:t)&&(t=0);var i=ta._pool.get();return null==s&&(s=0),null==n&&(n=0),null==e&&(e=0),i.x=t=null==t?0:t,i.y=e,i.width=n,i.height=s,i._inPool=!1,i._weak=!0,i},ta.get_pool=function(){return ta._pool},ta.prototype={x:null,y:null,width:null,height:null,_weak:null,_inPool:null,put:function(){this._inPool||(this._inPool=!0,this._weak=!1,ta._pool.putUnsafe(this))},putWeak:function(){this._weak&&!this._inPool&&(this._inPool=!0,this._weak=!1,ta._pool.putUnsafe(this))},setSize:function(t,e){return this.width=t,this.height=e,this},setPosition:function(t,e){return this.x=t,this.y=e,this},set:function(t,e,n,s){return null==s&&(s=0),null==n&&(n=0),null==e&&(e=0),this.x=t=null==t?0:t,this.y=e,this.width=n,this.height=s,this},copyFrom:function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,t._weak&&!t._inPool&&(t._inPool=!0,t._weak=!1,ta._pool.putUnsafe(t)),this},copyTo:function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t._weak&&!t._inPool&&(t._inPool=!0,t._weak=!1,ta._pool.putUnsafe(t)),t},copyFromFlash:function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},copyToFlash:function(t){return(t=null==t?new ua:t).x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},overlaps:function(t){var e=t.x+t.width>this.x&&t.x<this.x+this.width&&t.y+t.height>this.y&&t.y<this.y+this.height;return t._weak&&!t._inPool&&(t._inPool=!0,t._weak=!1,ta._pool.putUnsafe(t)),e},containsPoint:function(t){var e=Mb.pointInFlxRect(t.x,t.y,this);return t._weak&&t.put(),e},union:function(t){var e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),s=Math.max(this.x+this.width,t.x+t.width),i=Math.max(this.y+this.height,t.y+t.height);t._weak&&!t._inPool&&(t._inPool=!0,t._weak=!1,ta._pool.putUnsafe(t));var a=n;return null==(n=i-n)&&(n=0),null==(e=s-(t=e))&&(e=0),null==a&&(a=0),this.x=t=null==t?0:t,this.y=a,this.width=e,this.height=n,this},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.width=Math.round(this.width),this.height=Math.round(this.height),this},fromTwoPoints:function(t,e){var n=Math.min(t.x,e.x),s=Math.min(t.y,e.y),i=Math.max(t.x,e.x),a=Math.max(t.y,e.y);return t._weak&&t.put(),e._weak&&e.put(),null==(s=a-(e=s))&&(s=0),null==(n=i-(t=n))&&(n=0),null==e&&(e=0),this.x=t=null==t?0:t,this.y=e,this.width=n,this.height=s,this},unionWithPoint:function(t){var e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),s=Math.max(this.x+this.width,t.x),i=Math.max(this.y+this.height,t.y);t._weak&&t.put();var a=n;return null==(n=i-n)&&(n=0),null==(e=s-(t=e))&&(e=0),null==a&&(a=0),this.x=t=null==t?0:t,this.y=a,this.width=e,this.height=n,this},offset:function(t,e){return this.x+=t,this.y+=e,this},destroy:function(){},equals:function(t){var e=Math.abs(this.x-t.x)<=1e-7&&Math.abs(this.y-t.y)<=1e-7&&Math.abs(this.width-t.width)<=1e-7&&Math.abs(this.height-t.height)<=1e-7;return t._weak&&!t._inPool&&(t._inPool=!0,t._weak=!1,ta._pool.putUnsafe(t)),e},intersection:function(t,e){var n,s;null==e&&(null==(r=i=s=n=0)&&(r=0),null==i&&(i=0),null==s&&(s=0),(e=ta._pool.get()).x=n=null==n?0:n,e.y=s,e.width=i,e.height=r,e._inPool=!1);var i=(this.x<t.x?t:this).x,a=this.x+this.width>t.x+t.width?t.x+t.width:this.x+this.width;if(a<=i)return t._weak&&!t._inPool&&(t._inPool=!0,t._weak=!1,ta._pool.putUnsafe(t)),e;var r=(this.y<t.y?t:this).y,l=this.y+this.height>t.y+t.height?t.y+t.height:this.y+this.height;return l<=r?t._weak&&!t._inPool&&(t._inPool=!0,t._weak=!1,ta._pool.putUnsafe(t)):(t._weak&&!t._inPool&&(t._inPool=!0,t._weak=!1,ta._pool.putUnsafe(t)),null==(r=l-(s=r))&&(r=0),null==(i=a-(n=i))&&(i=0),null==s&&(s=0),e.x=n=null==n?0:n,e.y=s,e.width=i,e.height=r),e},toString:function(){var t=this.x,e=Rb._pool.get();e.label="x",e.value=t;var t=this.y,n=Rb._pool.get();n.label="y",n.value=t,t=this.width;var s=Rb._pool.get();s.label="w",s.value=t,t=this.height;var i=Rb._pool.get();return i.label="h",i.value=t,Pb.getDebugString([e,n,s,i])},get_left:function(){return this.x},set_left:function(t){return this.width-=t-this.x,this.x=t},get_right:function(){return this.x+this.width},set_right:function(t){return this.width=t-this.x,t},get_top:function(){return this.y},set_top:function(t){return this.height-=t-this.y,this.y=t},get_bottom:function(){return this.y+this.height},set_bottom:function(t){return this.height=t-this.y,t},get_isEmpty:function(){return 0==this.width||0==this.height},__class__:ta,__properties__:{get_isEmpty:"get_isEmpty",set_bottom:"set_bottom",get_bottom:"get_bottom",set_top:"set_top",get_top:"get_top",set_right:"set_right",get_right:"get_right",set_left:"set_left",get_left:"get_left"}};var Ja=function(t,e,n,s){null==s&&(s=0),null==n&&(n=0),null==e&&(e=0),null==t&&(t=0);var i=ta._pool.get();i.x=0,i.y=0,i.width=0,i.height=0,i._inPool=!1,this._rect=i,(i=ka._pool.get().set(0,0))._inPool=!1,this._point=i,this.path=null,this.collisonXDrag=!0,this.allowCollisions=4369,this.touching=this.wasTouching=0,this.health=1,this.maxAngular=1e4,this.elasticity=this.angularVelocity=this.angularAcceleration=this.angularDrag=0,this.mass=1,this.immovable=!1,this.moves=!0,this.angle=0,this.pixelPerfectPosition=!0,this.x=this.y=0,ca.call(this),this.set_x(t),this.set_y(e),this.set_width(n),this.set_height(s),this.initVars()};r["flixel.FlxObject"]=Ja,Ja.__name__="flixel.FlxObject",Ja.separate=function(t,e){var n=Ja.separateX(t,e);return t=Ja.separateY(t,e),!!n||t},Ja.updateTouchingFlags=function(t,e){var n=Ja.updateTouchingFlagsX(t,e);return t=Ja.updateTouchingFlagsY(t,e),!!n||t},Ja.computeOverlapX=function(t,e,n){null==n&&(n=!0);var s,i,a,r,l,o,h,_,u=0,c=t.x-t.last.x,d=e.x-e.last.x;return c!=d&&(s=0<c?c:-c,i=0<d?d:-d,r=Ja._firstSeparateFlxRect,l=t.x-(0<c?c:0),o=t.last.y,h=t.get_width()+s,null==(_=t.get_height())&&(_=0),null==h&&(h=0),null==o&&(o=0),r.x=l=null==l?0:l,r.y=o,r.width=h,r.height=_,a=r,r=Ja._secondSeparateFlxRect,l=e.x-(0<d?d:0),o=e.last.y,h=e.get_width()+i,null==(_=e.get_height())&&(_=0),null==h&&(h=0),null==o&&(o=0),r.x=l=null==l?0:l,r.y=o,r.width=h,r.height=_,a.x+a.width>r.x&&a.x<r.x+r.width&&a.y+a.height>r.y&&a.y<r.y+r.height&&(s=n?s+i+Ja.SEPARATE_BIAS:0,d<c?(u=t.x+t.get_width()-e.x,n&&s<u||0==(16&t.allowCollisions)||0==(1&e.allowCollisions)?u=0:(t.touching|=16,e.touching|=1)):c<d&&(u=t.x-e.get_width()-e.x,n&&s<-u||0==(1&t.allowCollisions)||0==(16&e.allowCollisions)?u=0:(t.touching|=1,e.touching|=16)))),u},Ja.separateX=function(t,e){var n=t.immovable,s=e.immovable;if(n&&s)return!1;if(3==t.flixelType)return t.overlapsWithCallback(e,Ja.separateX);if(3==e.flixelType)return e.overlapsWithCallback(t,Ja.separateX,!0);var i=Ja.computeOverlapX(t,e);if(0==i)return!1;var a=t.velocity.x,r=e.velocity.x;return n||s?n?s||((n=e).set_x(n.x+i),e.velocity.set_x(a-r*e.elasticity)):(t.set_x(t.x-i),t.velocity.set_x(r-a*t.elasticity)):(t.set_x(t.x-(i*=.5)),(n=e).set_x(n.x+i),i=Math.sqrt(r*r*e.mass/t.mass)*(0<r?1:-1),a=Math.sqrt(a*a*t.mass/e.mass)*(0<a?1:-1),a-=r=.5*(i+a),t.velocity.set_x(r+(i-r)*t.elasticity),e.velocity.set_x(r+a*e.elasticity)),!0},Ja.updateTouchingFlagsX=function(t,e){return 3==t.flixelType?t.overlapsWithCallback(e,Ja.updateTouchingFlagsX):3==e.flixelType?e.overlapsWithCallback(t,Ja.updateTouchingFlagsX,!0):0!=Ja.computeOverlapX(t,e,!1)},Ja.computeOverlapY=function(t,e,n){null==n&&(n=!0);var s,i,a,r,l,o,h,_,u=0,c=t.y-t.last.y,d=e.y-e.last.y;return c!=d&&(s=0<c?c:-c,i=0<d?d:-d,r=Ja._firstSeparateFlxRect,l=t.x,o=t.y-(0<c?c:0),h=t.get_width(),null==(_=t.get_height()+s)&&(_=0),null==h&&(h=0),null==o&&(o=0),r.x=l=null==l?0:l,r.y=o,r.width=h,r.height=_,a=r,r=Ja._secondSeparateFlxRect,l=e.x,o=e.y-(0<d?d:0),h=e.get_width(),null==(_=e.get_height()+i)&&(_=0),null==h&&(h=0),null==o&&(o=0),r.x=l=null==l?0:l,r.y=o,r.width=h,r.height=_,a.x+a.width>r.x&&a.x<r.x+r.width&&a.y+a.height>r.y&&a.y<r.y+r.height&&(s=n?s+i+Ja.SEPARATE_BIAS:0,d<c?(u=t.y+t.get_height()-e.y,n&&s<u||0==(4096&t.allowCollisions)||0==(256&e.allowCollisions)?u=0:(t.touching|=4096,e.touching|=256)):c<d&&(u=t.y-e.get_height()-e.y,n&&s<-u||0==(256&t.allowCollisions)||0==(4096&e.allowCollisions)?u=0:(t.touching|=256,e.touching|=4096)))),u},Ja.separateY=function(t,e){var n=t.immovable,s=e.immovable;if(n&&s)return!1;if(3==t.flixelType)return t.overlapsWithCallback(e,Ja.separateY);if(3==e.flixelType)return e.overlapsWithCallback(t,Ja.separateY,!0);var i=Ja.computeOverlapY(t,e);if(0==i)return!1;var a=t.y-t.last.y,r=e.y-e.last.y,l=t.velocity.y,o=e.velocity.y;return n||s?n?s||((n=e).set_y(n.y+i),e.velocity.set_y(l-o*e.elasticity),e.collisonXDrag&&t.active&&t.moves&&a<r&&(n=e).set_x(n.x+(t.x-t.last.x))):(t.set_y(t.y-i),t.velocity.set_y(o-l*t.elasticity),t.collisonXDrag&&e.active&&e.moves&&r<a&&(n=t).set_x(n.x+(e.x-e.last.x))):(t.set_y(t.y-(i*=.5)),(n=e).set_y(n.y+i),i=Math.sqrt(o*o*e.mass/t.mass)*(0<o?1:-1),l=Math.sqrt(l*l*t.mass/e.mass)*(0<l?1:-1),l-=a=.5*(i+l),t.velocity.set_y(a+(i-a)*t.elasticity),e.velocity.set_y(a+l*e.elasticity)),!0},Ja.updateTouchingFlagsY=function(t,e){return 3==t.flixelType?t.overlapsWithCallback(e,Ja.updateTouchingFlagsY):3==e.flixelType?e.overlapsWithCallback(t,Ja.updateTouchingFlagsY,!0):0!=Ja.computeOverlapY(t,e,!1)},Ja.__super__=ca,Ja.prototype=E(ca.prototype,{x:null,y:null,width:null,height:null,pixelPerfectRender:null,pixelPerfectPosition:null,angle:null,moves:null,immovable:null,scrollFactor:null,velocity:null,acceleration:null,drag:null,maxVelocity:null,last:null,mass:null,elasticity:null,angularVelocity:null,angularAcceleration:null,angularDrag:null,maxAngular:null,health:null,touching:null,wasTouching:null,allowCollisions:null,collisonXDrag:null,path:null,_point:null,_rect:null,initVars:function(){this.flixelType=1;var t=this.x,e=this.y;null==e&&(e=0),null==t&&(t=0),(t=ka._pool.get().set(t,e))._inPool=!1,this.last=t,null==(e=t=1)&&(e=0),null==t&&(t=0),(t=ka._pool.get().set(t,e))._inPool=!1,this.scrollFactor=t,this.pixelPerfectPosition=Ja.defaultPixelPerfectPosition,(t=ka._pool.get().set(0,0))._inPool=!1,this.velocity=t,(t=ka._pool.get().set(0,0))._inPool=!1,this.acceleration=t,(t=ka._pool.get().set(0,0))._inPool=!1,this.drag=t,null==(e=t=1e4)&&(e=0),null==t&&(t=0),(t=ka._pool.get().set(t,e))._inPool=!1,this.maxVelocity=t},initMotionVars:function(){var t=ka._pool.get().set(0,0);t._inPool=!1,this.velocity=t,(t=ka._pool.get().set(0,0))._inPool=!1,this.acceleration=t,(t=ka._pool.get().set(0,0))._inPool=!1,this.drag=t;var e=t=1e4;null==t&&(e=0),null==t&&(t=0),(t=ka._pool.get().set(t,e))._inPool=!1,this.maxVelocity=t},destroy:function(){ca.prototype.destroy.call(this),this.velocity=Da.put(this.velocity),this.acceleration=Da.put(this.acceleration),this.drag=Da.put(this.drag),this.maxVelocity=Da.put(this.maxVelocity),this.scrollFactor=Da.put(this.scrollFactor),this.last=Da.put(this.last),this._point=Da.put(this._point),this._rect=Da.put(this._rect)},update:function(t){this.last.set(this.x,this.y),null!=this.path&&this.path.active&&this.path.update(t),this.moves&&this.updateMotion(t),this.wasTouching=this.touching,this.touching=0},updateMotion:function(t){var e=.5*(ag.computeVelocity(this.angularVelocity,this.angularAcceleration,this.angularDrag,this.maxAngular,t)-this.angularVelocity);this.angularVelocity+=e;var n=this;n.set_angle(n.angle+this.angularVelocity*t),this.angularVelocity+=e,e=.5*(ag.computeVelocity(this.velocity.x,this.acceleration.x,this.drag.x,this.maxVelocity.x,t)-this.velocity.x),(n=this.velocity).set_x(n.x+e);var s=this.velocity.x*t;(n=this.velocity).set_x(n.x+e),(n=this).set_x(n.x+s),e=.5*(ag.computeVelocity(this.velocity.y,this.acceleration.y,this.drag.y,this.maxVelocity.y,t)-this.velocity.y),(n=this.velocity).set_y(n.y+e),s=this.velocity.y*t,(n=this.velocity).set_y(n.y+e),(n=this).set_y(n.y+s)},draw:function(){},overlaps:function(t,e,s){null==e&&(e=!1);var i=yb.resolveGroup(t);return null!=i?yb.overlaps(z(this,this.overlapsCallback),i,0,0,e,s):3==t.flixelType?t.overlaps(this,e,s):e?(null==s&&(s=n.camera),e=t.getScreenPosition(null,s),this.getScreenPosition(this._point,s),e.x+t.get_width()>this._point.x&&e.x<this._point.x+this.get_width()&&e.y+t.get_height()>this._point.y&&e.y<this._point.y+this.get_height()):t.x+t.get_width()>this.x&&t.x<this.x+this.get_width()&&t.y+t.get_height()>this.y&&t.y<this.y+this.get_height()},overlapsCallback:function(t,e,n,s,i){return this.overlaps(t,s,i)},overlapsAt:function(t,e,s,i,a){null==i&&(i=!1);var r=yb.resolveGroup(s);return null!=r?yb.overlaps(z(this,this.overlapsAtCallback),r,t,e,i,a):3==s.flixelType?s.overlapsAt(s.x-(t-this.x),s.y-(e-this.y),this,i,a):i?(null==a&&(a=n.camera),t=s.getScreenPosition(null,a),this.getScreenPosition(this._point,a),t.x+s.get_width()>this._point.x&&t.x<this._point.x+this.get_width()&&t.y+s.get_height()>this._point.y&&t.y<this._point.y+this.get_height()):s.x+s.get_width()>t&&s.x<t+this.get_width()&&s.y+s.get_height()>e&&s.y<e+this.get_height()},overlapsAtCallback:function(t,e,n,s,i){return this.overlapsAt(e,n,t,s,i)},overlapsPoint:function(t,e,s){if(!(e=null==e?!1:e))return t.x>=this.x&&t.x<this.x+this.get_width()&&t.y>=this.y&&t.y<this.y+this.get_height();null==s&&(s=n.camera),e=t.x-s.scroll.x;var i=t.y-s.scroll.y;return this.getScreenPosition(this._point,s),t._weak&&t.put(),e>=this._point.x&&e<this._point.x+this.get_width()&&i>=this._point.y&&i<this._point.y+this.get_height()},inWorldBounds:function(){var t;return!!((t=this.x+this.get_width()>n.worldBounds.x&&(t=n.worldBounds,this.x<t.x+t.width))&&this.y+this.get_height()>n.worldBounds.y)&&(t=n.worldBounds,this.y<t.y+t.height)},getScreenPosition:function(t,e){null==t&&((t=ka._pool.get().set(0,0))._inPool=!1),null==e&&(e=n.camera),t.set(this.x,this.y),this.pixelPerfectPosition&&(t.set_x(Math.floor(t.x)),t.set_y(Math.floor(t.y)));var s=e.scroll.x*this.scrollFactor.x;null==(e=e.scroll.y*this.scrollFactor.y)&&(e=0);var i=t;return i.set_x(i.x-(s=null==s?0:s)),(i=t).set_y(i.y-e),t},getPosition:function(t){return null==t&&((t=ka._pool.get().set(0,0))._inPool=!1),t.set(this.x,this.y)},getMidpoint:function(t){return null==t&&((t=ka._pool.get().set(0,0))._inPool=!1),t.set(this.x+.5*this.get_width(),this.y+.5*this.get_height())},getHitbox:function(t){var e,n,s,i;return null==t&&(null==(i=s=n=e=0)&&(i=0),null==s&&(s=0),null==n&&(n=0),(t=ta._pool.get()).x=e=null==e?0:e,t.y=n,t.width=s,t.height=i,t._inPool=!1),e=this.x,n=this.y,s=this.get_width(),null==(i=this.get_height())&&(i=0),null==s&&(s=0),null==n&&(n=0),t.x=e=null==e?0:e,t.y=n,t.width=s,t.height=i,t},reset:function(t,e){this.wasTouching=this.touching=0,this.setPosition(t,e),this.last.set(this.x,this.y),this.velocity.set(),this.revive()},isOnScreen:function(t){null==t&&(t=n.camera),this.getScreenPosition(this._point,t);var e=this._point,s=this.get_width(),i=this.get_height();return null==i&&(i=0),e.x+(s=null==s?0:s)>t.viewOffsetX&&e.x<t.viewOffsetWidth&&e.y+i>t.viewOffsetY&&e.y<t.viewOffsetHeight},isPixelPerfectRender:function(t){return null==t&&(t=n.camera),(null==this.pixelPerfectRender?t:this).pixelPerfectRender},isTouching:function(t){return 0<(this.touching&t)},justTouched:function(t){return 0<(this.touching&t)&&(this.wasTouching&t)<=0},hurt:function(t){this.health-=t,this.health<=0&&this.kill()},screenCenter:function(t){return(t=null==t?Ce.XY:t)!=Ce.Y&&this.set_x(n.width/2-this.get_width()/2),t!=Ce.X&&this.set_y(n.height/2-this.get_height()/2),this},setPosition:function(t,e){null==e&&(e=0),this.set_x(t=null==t?0:t),this.set_y(e)},setSize:function(t,e){this.set_width(t),this.set_height(e)},getBoundingBox:function(t){this.getScreenPosition(this._point,t);var e=this._rect,n=this._point.x,s=this._point.y,i=this.get_width(),a=this.get_height();return null==a&&(a=0),null==i&&(i=0),null==s&&(s=0),e.x=n=null==n?0:n,e.y=s,e.width=i,e.height=a,this._rect=t.transformRect(this._rect),this.isPixelPerfectRender(t)&&((e=this._rect).x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height)),this._rect},toString:function(){var t=this.x,e=Rb._pool.get();e.label="x",e.value=t;var t=this.y,n=Rb._pool.get();n.label="y",n.value=t,t=this.get_width();var s=Rb._pool.get();s.label="w",s.value=t,t=this.get_height();var i=Rb._pool.get();i.label="h",i.value=t,t=this.visible;var a=Rb._pool.get();a.label="visible",a.value=t,t=this.velocity;var r=Rb._pool.get();return r.label="velocity",r.value=t,Pb.getDebugString([e,n,s,i,a,r])},set_x:function(t){return this.x=t},set_y:function(t){return this.y=t},set_width:function(t){return this.width=t},set_height:function(t){return this.height=t},get_width:function(){return this.width},get_height:function(){return this.height},get_solid:function(){return 0<(4369&this.allowCollisions)},set_solid:function(t){return this.set_allowCollisions(t?4369:0),t},set_angle:function(t){return this.angle=t},set_moves:function(t){return this.moves=t},set_immovable:function(t){return this.immovable=t},set_pixelPerfectRender:function(t){return this.pixelPerfectRender=t},set_allowCollisions:function(t){return this.allowCollisions=t},set_path:function(t){return this.path==t?t:(null!=this.path&&(this.path.object=null),null!=t&&(t.object=this),this.path=t)},__class__:Ja,__properties__:E(ca.prototype.__properties__,{set_path:"set_path",set_allowCollisions:"set_allowCollisions",set_solid:"set_solid",get_solid:"get_solid",set_immovable:"set_immovable",set_moves:"set_moves",set_angle:"set_angle",set_pixelPerfectRender:"set_pixelPerfectRender",set_height:"set_height",get_height:"get_height",set_width:"set_width",get_width:"get_width",set_y:"set_y",set_x:"set_x"})});var O=function(t,e,s){null==e&&(e=0),null==t&&(t=0),this._facingFlip=new ld,this._angleChanged=!0,this._cosAngle=1,this._sinAngle=0,this._facingHorizontalMult=this._facingVerticalMult=1,this.useColorTransform=!1,this.color=16777215,this.flipX=this.flipY=!1,this.facing=16,this.alpha=1,this.frameWidth=this.frameHeight=this.numFrames=this.bakedRotationAngle=0,this.dirty=!0,this.antialiasing=!1,this.useFramePixels=!0,Ja.call(this,t,e),this.set_useFramePixels(n.renderBlit),null!=s&&this.loadGraphic(s)};r["flixel.FlxSprite"]=O,O.__name__="flixel.FlxSprite",O.__super__=Ja,O.prototype=E(Ja.prototype,{animation:null,framePixels:null,useFramePixels:null,antialiasing:null,dirty:null,frame:null,frameWidth:null,frameHeight:null,numFrames:null,frames:null,graphic:null,bakedRotationAngle:null,alpha:null,facing:null,flipX:null,flipY:null,origin:null,offset:null,scale:null,blend:null,color:null,colorTransform:null,useColorTransform:null,clipRect:null,shader:null,_frame:null,_frameGraphic:null,_facingHorizontalMult:null,_facingVerticalMult:null,_flashPoint:null,_flashRect:null,_flashRect2:null,_flashPointZero:null,_matrix:null,_halfSize:null,_sinAngle:null,_cosAngle:null,_angleChanged:null,_facingFlip:null,initVars:function(){Ja.prototype.initVars.call(this),this.animation=new Um(this),this._flashPoint=new sb,this._flashRect=new ua,this._flashRect2=new ua,this._flashPointZero=new sb;var t=ka._pool.get().set(0,0);t._inPool=!1,this.offset=t,(t=ka._pool.get().set(0,0))._inPool=!1,this.origin=t;var e=t=1;null==t&&(e=0),null==t&&(t=0),(t=ka._pool.get().set(t,e))._inPool=!1,this.scale=t,(t=ka._pool.get().set(0,0))._inPool=!1,this._halfSize=t,this._matrix=new Vh,this.colorTransform=new Wc},destroy:function(){Ja.prototype.destroy.call(this),this.animation=Da.destroy(this.animation),this.offset=Da.put(this.offset),this.origin=Da.put(this.origin),this.scale=Da.put(this.scale),this._halfSize=Da.put(this._halfSize),this.framePixels=Da.dispose(this.framePixels),this.colorTransform=this._matrix=this._flashPointZero=this._flashRect2=this._flashRect=this._flashPoint=null,this.set_blend(null),this.set_frames(null),this.set_graphic(null),this._frame=Da.destroy(this._frame),this._frameGraphic=Da.destroy(this._frameGraphic),this.shader=null},clone:function(){return(new O).loadGraphicFromSprite(this)},loadGraphicFromSprite:function(t){return this.set_frames(t.frames),this.bakedRotationAngle=t.bakedRotationAngle,0<this.bakedRotationAngle&&(this.set_width(t.get_width()),this.set_height(t.get_height()),this.centerOffsets()),this.set_antialiasing(t.antialiasing),this.animation.copyFrom(t.animation),this.graphicLoaded(),this.set_clipRect(t.clipRect),this},loadGraphic:function(t,e,s,i,a,r){return null==i&&(i=0),null==s&&(s=0),null==e&&(e=!1),null==(t=n.bitmap.add(t,a=null==a?!1:a,r))||(0!=s||(s=e?t.height:t.width)>t.width&&(s=t.width),0!=i||(i=e?s:t.height)>t.height&&(i=t.height),e?(null==i&&(i=0),null==(e=s)&&(e=0),(i=ka._pool.get().set(e,i))._inPool=!1,this.set_frames(yd.fromGraphic(t,i))):this.set_frames(t.get_imageFrame())),this},loadRotatedGraphic:function(t,e,s,i,a,r){return null==a&&(a=!1),null==i&&(i=!1),null==s&&(s=-1),null==e&&(e=16),null==(r=n.bitmap.add(t,!1,r))||(t=r.bitmap,r=r.key,0<=s&&(l=t.height,(o=t.width/l|0)<=s&&(s%=o),r+=":"+s,o=t,t=new ea(l,l,!0,0),this._flashRect.setTo(s*l,0,l,l),t.copyPixels(o,this._flashRect,this._flashPointZero)),null==(s=n.bitmap._cache.h[r+=":"+e+":"+(null==a?"null":""+a)])&&(i=De.generateRotations(t,e,i,a),s=Yc.fromBitmapData(i,!1,r)),r=t.height>t.width?t.height:t.width,null==(i=r=a?1.5*r|0:r)&&(r=0),null==i&&(i=0),(i=ka._pool.get().set(i,r))._inPool=!1,this.set_frames(yd.fromGraphic(s,i)),a&&(this.set_width(t.width),this.set_height(t.height),this.centerOffsets()),this.bakedRotationAngle=360/e,this.animation.createPrerotated()),this;var l,o},loadRotatedFrame:function(t,e,s,i){null==i&&(i=!1),null==s&&(s=!1),null==e&&(e=16);var a,r,l,o,h,_=t.parent.key;return null!=t.name?_+=":"+t.name:(l=(a=t.frame).x,(r=Rb._pool.get()).label="x",r.value=l,l=a.y,(o=Rb._pool.get()).label="y",o.value=l,l=a.width,(h=Rb._pool.get()).label="w",h.value=l,l=a.height,(a=Rb._pool.get()).label="h",a.value=l,_+=":"+Pb.getDebugString([r,o,h,a])),null==(a=n.bitmap._cache.h[_])&&(a=Yc.fromBitmapData(t.paint(),!1,_)),this.loadRotatedGraphic(a,e,-1,s,i)},makeGraphic:function(t,e,s,i,a){return t=n.bitmap.create(t,e,s=null==s?-1:s,i=null==i?!1:i,a),this.set_frames(t.get_imageFrame()),this},graphicLoaded:function(){},resetSize:function(){this._flashRect.x=0,this._flashRect.y=0,this._flashRect.width=this.frameWidth,this._flashRect.height=this.frameHeight},resetFrameSize:function(){null!=this.frame&&(this.frameWidth=0|this.frame.sourceSize.x,this.frameHeight=0|this.frame.sourceSize.y),this._halfSize.set(.5*this.frameWidth,.5*this.frameHeight),this._flashRect.x=0,this._flashRect.y=0,this._flashRect.width=this.frameWidth,this._flashRect.height=this.frameHeight},resetSizeFromFrame:function(){this.set_width(this.frameWidth),this.set_height(this.frameHeight)},resetFrame:function(){this.set_frame(this.frame)},setGraphicSize:function(t,e){var n,s;null==e&&(e=0),(t=null==t?0:t)<=0&&e<=0||(n=t/this.frameWidth,s=e/this.frameHeight,this.scale.set(n,s),t<=0?this.scale.set_x(s):e<=0&&this.scale.set_y(n))},updateHitbox:function(){this.set_width(Math.abs(this.scale.x)*this.frameWidth),this.set_height(Math.abs(this.scale.y)*this.frameHeight),this.offset.set(-.5*(this.get_width()-this.frameWidth),-.5*(this.get_height()-this.frameHeight)),this.origin.set(.5*this.frameWidth,.5*this.frameHeight)},resetHelpers:function(){null!=this.frame&&(this.frameWidth=0|this.frame.sourceSize.x,this.frameHeight=0|this.frame.sourceSize.y),this._halfSize.set(.5*this.frameWidth,.5*this.frameHeight),this._flashRect.x=0,this._flashRect.y=0,this._flashRect.width=this.frameWidth,this._flashRect.height=this.frameHeight,this.set_width(this.frameWidth),this.set_height(this.frameHeight),this._flashRect2.x=0,this._flashRect2.y=0,null!=this.graphic&&(this._flashRect2.width=this.graphic.width,this._flashRect2.height=this.graphic.height),this.origin.set(.5*this.frameWidth,.5*this.frameHeight),n.renderBlit&&(this.dirty=!0,this.updateFramePixels())},update:function(t){Ja.prototype.update.call(this,t),this.updateAnimation(t)},updateAnimation:function(t){this.animation.update(t)},checkEmptyFrame:function(){null==this._frame&&this.loadGraphic("flixel/images/logo/default.png")},draw:function(){if(this.checkEmptyFrame(),0!=this.alpha&&2!=this._frame.type){this.dirty&&this.calcFrame(this.useFramePixels);for(var t=0,e=this.get_cameras();t<e.length;){var n=e[t];++t,n.visible&&n.exists&&this.isOnScreen(n)&&(this.getScreenPosition(this._point,n).subtractPoint(this.offset),this.isSimpleRender(n)?this.drawSimple(n):this.drawComplex(n))}}},drawSimple:function(t){this.isPixelPerfectRender(t)&&((e=this._point).set_x(Math.floor(e.x)),e.set_y(Math.floor(e.y)));var e=this._point,n=this._flashPoint;(n=null==n?new sb:n).x=e.x,n.y=e.y,t.copyPixels(this._frame,this.framePixels,this._flashRect,this._flashPoint,this.colorTransform,this.blend,this.antialiasing)},drawComplex:function(t){var e,n,s=this.flipX!=this._frame.flipX,i=this.flipY!=this._frame.flipY;this._frame.prepareMatrix(this._matrix,0,null!=this.animation._curAnim?s!=this.animation._curAnim.flipX:s,null!=this.animation._curAnim?i!=this.animation._curAnim.flipY:i),this._matrix.translate(-this.origin.x,-this.origin.y),this._matrix.scale(this.scale.x,this.scale.y),this.bakedRotationAngle<=0&&(this._angleChanged&&(s=Math.PI/180*this.angle,this._sinAngle=Math.sin(s),this._cosAngle=Math.cos(s),this._angleChanged=!1),0!=this.angle)&&(s=this._matrix,i=this._cosAngle,e=this._sinAngle,n=s.a*i-s.b*e,s.b=s.a*e+s.b*i,s.a=n,n=s.c*i-s.d*e,s.d=s.c*e+s.d*i,s.c=n,n=s.tx*i-s.ty*e,s.ty=s.tx*e+s.ty*i,s.tx=n),s=this._point,i=this.origin.x,null==(e=this.origin.y)&&(e=0),(n=s).set_x(n.x+(i=null==i?0:i)),(n=s).set_y(n.y+e),this._matrix.translate(this._point.x,this._point.y),this.isPixelPerfectRender(t)&&(this._matrix.tx=Math.floor(this._matrix.tx),this._matrix.ty=Math.floor(this._matrix.ty)),t.drawPixels(this._frame,this.framePixels,this._matrix,this.colorTransform,this.blend,this.antialiasing,this.shader)},stamp:function(t,e,s){if(null==s&&(s=0),null==e&&(e=0),t.drawFrame(),null==this.graphic||null==t.graphic)throw H.thrown("Cannot stamp to or from a FlxSprite with no graphics.");var i=t.framePixels;this.isSimpleRenderBlit()?(this._flashPoint.x=e+this.frame.frame.x,this._flashPoint.y=s+this.frame.frame.y,this._flashRect2.width=i.width,this._flashRect2.height=i.height,this.graphic.bitmap.copyPixels(i,this._flashRect2,this._flashPoint,null,null,!0),this._flashRect2.width=this.graphic.bitmap.width,this._flashRect2.height=this.graphic.bitmap.height):(this._matrix.identity(),this._matrix.translate(-t.origin.x,-t.origin.y),this._matrix.scale(t.scale.x,t.scale.y),0!=t.angle&&this._matrix.rotate(Math.PI/180*t.angle),this._matrix.translate(e+this.frame.frame.x+t.origin.x,s+this.frame.frame.y+t.origin.y),this.graphic.bitmap.draw(i,this._matrix,null,t.blend,null,t.antialiasing)),n.renderBlit&&(this.dirty=!0,this.calcFrame())},drawFrame:function(t){null==t&&(t=!1),n.renderBlit?(t||this.dirty)&&(this.dirty=!0,this.calcFrame()):(this.dirty=!0,this.calcFrame(!0))},centerOffsets:function(t){null==t&&(t=!1),this.offset.set_x(.5*(this.frameWidth-this.get_width())),this.offset.set_y(.5*(this.frameHeight-this.get_height())),t&&((t=this).set_x(t.x+this.offset.x),(t=this).set_y(t.y+this.offset.y))},centerOrigin:function(){this.origin.set(.5*this.frameWidth,.5*this.frameHeight)},replaceColor:function(t,e,n){return null!=(t=De.replaceColor(this.graphic.bitmap,t,e,n=null==n?!1:n))&&(this.dirty=!0),t},setColorTransform:function(t,e,n,s,i,a,r,l){null==l&&(l=0),null==r&&(r=0),null==a&&(a=0),null==i&&(i=0),null==s&&(s=1),null==n&&(n=1),null==e&&(e=1),null==t&&(t=1);var o=qb._new(),h=1;null==h&&(h=1);var _=Math.round(255*t);o=-256&(o=-65281&(o=-16711681&o|(255<_?255:_<0?0:_)<<16)|(255<(_=Math.round(255*e))?255:_<0?0:_)<<8)|(255<(_=Math.round(255*n))?255:_<0?0:_),_=Math.round(255*h),this.set_color(16777215&(16777215&o|(255<_?255:_<0?0:_)<<24)),this.set_alpha(s),Ff.setMultipliers(this.colorTransform,t,e,n,s),Ff.setOffsets(this.colorTransform,i,a,r,l),this.useColorTransform=1!=this.alpha||16777215!=this.color||Ff.hasRGBOffsets(this.colorTransform),this.dirty=!0},updateColorTransform:function(){null==this.colorTransform&&(this.colorTransform=new Wc),(this.useColorTransform=1!=this.alpha||16777215!=this.color)?Ff.setMultipliers(this.colorTransform,(this.color>>16&255)/255,(this.color>>8&255)/255,(255&this.color)/255,this.alpha):Ff.setMultipliers(this.colorTransform,1,1,1,1),this.dirty=!0},pixelsOverlapPoint:function(t,e,s){return null==e&&(e=255),null==s&&(s=n.camera),this.getScreenPosition(this._point,s),this._point.subtractPoint(this.offset),this._flashPoint.x=t.x-s.scroll.x-this._point.x,this._flashPoint.y=t.y-s.scroll.y-this._point.y,t._weak&&t.put(),!(this._flashPoint.x<0||this._flashPoint.x>this.frameWidth||this._flashPoint.y<0||this._flashPoint.y>this.frameHeight)&&(this.updateFramePixels().getPixel32(0|this._flashPoint.x,0|this._flashPoint.y)>>24&255)*this.alpha>=e},calcFrame:function(t){null==t&&(t=!1),this.checkEmptyFrame(),n.renderTile&&!t||this.updateFramePixels()},updateFramePixels:function(){if(null==this._frame||!this.dirty)return this.framePixels;if(n.renderTile&&null!=this._frameGraphic)return this.dirty=!1,this.framePixels;var t=this.flipX!=this._frame.flipX,t=null!=this.animation._curAnim?t!=this.animation._curAnim.flipX:t,e=this.flipY!=this._frame.flipY,e=null!=this.animation._curAnim?e!=this.animation._curAnim.flipY:e;return this.framePixels=t||e||0!=this._frame.type?this._frame.paintRotatedAndFlipped(this.framePixels,this._flashPointZero,0,t,e,!1,!0):this._frame.paint(this.framePixels,this._flashPointZero,!1,!0),this.useColorTransform&&this.framePixels.colorTransform(this._flashRect,this.colorTransform),n.renderTile&&this.useFramePixels&&(this._frameGraphic=Da.destroy(this._frameGraphic),this._frameGraphic=Yc.fromBitmapData(this.framePixels,!1,null,!1),this._frame=this._frameGraphic.get_imageFrame().get_frame().copyTo(this._frame)),this.dirty=!1,this.framePixels},getGraphicMidpoint:function(t){return null==t&&((t=ka._pool.get().set(0,0))._inPool=!1),t.set(this.x+.5*this.frameWidth,this.y+.5*this.frameHeight)},isOnScreen:function(t){null==t&&(t=n.camera);var e=this.x-this.offset.x-t.scroll.x*this.scrollFactor.x,s=this.y-this.offset.y-t.scroll.y*this.scrollFactor.y;if((0==this.angle||0<this.bakedRotationAngle)&&1==this.scale.x&&1==this.scale.y){this._point.set(e,s);var e=this._point,s=this.frameWidth,i=this.frameHeight;return null==i&&(i=0),e.x+(s=null==s?0:s)>t.viewOffsetX&&e.x<t.viewOffsetWidth&&e.y+i>t.viewOffsetY&&e.y<t.viewOffsetHeight}var a=this._halfSize.x,r=this._halfSize.y;(i=this.origin.x)!=a&&(a=Math.max(Math.abs(this.frameWidth-i),Math.abs(i)));var l=this.origin.y;return l!=r&&(r=Math.max(Math.abs(this.frameHeight-l),Math.abs(l))),a*=Math.abs(this.scale.x),r*=Math.abs(this.scale.y),r=Math.max(a,r),a=2*(r*=1.41421356237),this._point.set(e+(i-r),s+(l-r)),null==(i=s=a)&&(i=0),(e=this._point).x+(s=null==s?0:s)>t.viewOffsetX&&e.x<t.viewOffsetWidth&&e.y+i>t.viewOffsetY&&e.y<t.viewOffsetHeight},isSimpleRender:function(t){return!n.renderTile&&this.isSimpleRenderBlit(t)},isSimpleRenderBlit:function(t){var e=(0==this.angle||0<this.bakedRotationAngle)&&1==this.scale.x&&1==this.scale.y&&null==this.blend;return e&&(null!=t?this.isPixelPerfectRender(t):this.pixelPerfectRender)},setFacingFlip:function(t,e,n){this._facingFlip.h[t]={x:e,y:n}},setFrames:function(t,e){var n,s,i,a;return(e=null==e?!0:e)?(e=this.animation._animations,n=!1,s=0,i=this.animation.frameIndex,(a=null)!=this.animation._curAnim&&(n=this.animation._curAnim.reversed,s=this.animation._curAnim.curFrame,a=this.animation._curAnim.name),this.animation._animations=null,this.set_frames(t),this.set_frame(this.frames.frames[i]),this.animation._animations=e,null!=a&&this.animation.play(a,!1,n,s)):this.set_frames(t),this},get_pixels:function(){return null==this.graphic?null:this.graphic.bitmap},set_pixels:function(t){var e=n.bitmap.findKeyForBitmap(t);return null==e?(e=n.bitmap.getUniqueKey(),this.set_graphic(n.bitmap.add(t,!1,e))):this.set_graphic(n.bitmap._cache.h[e]),this.set_frames(this.graphic.get_imageFrame()),t},set_frame:function(t){if(this.frame=t,null!=this.frame)null!=this.frame&&(this.frameWidth=0|this.frame.sourceSize.x,this.frameHeight=0|this.frame.sourceSize.y),this._halfSize.set(.5*this.frameWidth,.5*this.frameHeight),this._flashRect.x=0,this._flashRect.y=0,this._flashRect.width=this.frameWidth,this._flashRect.height=this.frameHeight,this.dirty=!0;else{if(!(null!=this.frames&&null!=this.frames.frames&&0<this.numFrames))return null;this.frame=this.frames.frames[0],this.dirty=!0}return n.renderTile&&(this._frameGraphic=Da.destroy(this._frameGraphic)),this._frame=null!=this.clipRect?this.frame.clipTo(this.clipRect,this._frame):this.frame.copyTo(this._frame),this.frame},set_facing:function(t){var e=this._facingFlip.h[t];return null!=e&&(this.set_flipX(e.x),this.set_flipY(e.y)),this.facing=t},set_alpha:function(t){return this.alpha==t?t:(this.alpha=1<(t=t<0?0:t)?1:t,this.updateColorTransform(),this.alpha)},set_color:function(t){return this.color==t?t:(this.color=t,this.updateColorTransform(),this.color)},set_angle:function(t){var e=this.angle!=t;return t=Ja.prototype.set_angle.call(this,t),e&&(this._angleChanged=!0,this.animation.update(0)),t},updateTrig:function(){var t;this._angleChanged&&(t=Math.PI/180*this.angle,this._sinAngle=Math.sin(t),this._cosAngle=Math.cos(t),this._angleChanged=!1)},set_blend:function(t){return this.blend=t},set_graphic:function(t){var e,n=this.graphic;return this.graphic!=t&&null!=t&&(e=t).set_useCount(e.get_useCount()+1),null!=n&&n!=t&&(e=n).set_useCount(e.get_useCount()-1),this.graphic=t},set_clipRect:function(t){return null!=t?(t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=Math.round(t.width),t.height=Math.round(t.height),this.clipRect=t):this.clipRect=null,null!=this.frames&&this.set_frame(this.frames.frames[this.animation.frameIndex]),t},set_frames:function(t){return null!=this.animation&&this.animation.destroyAnimations(),null!=t?(this.set_graphic(t.parent),this.frames=t,this.set_frame(this.frames.frames[0]),this.numFrames=this.frames.frames.length,this.resetHelpers(),this.bakedRotationAngle=0,this.animation.set_frameIndex(0),this.graphicLoaded()):(this.frames=null,this.set_frame(null),this.set_graphic(null)),t},set_flipX:function(t){return n.renderTile&&(this._facingHorizontalMult=t?-1:1),this.dirty=this.flipX!=t||this.dirty,this.flipX=t},set_flipY:function(t){return n.renderTile&&(this._facingVerticalMult=t?-1:1),this.dirty=this.flipY!=t||this.dirty,this.flipY=t},set_antialiasing:function(t){return this.antialiasing=t},set_useFramePixels:function(t){return n.renderTile?(t!=this.useFramePixels&&(this.useFramePixels=t,this.set_frame(this.frame),t&&this.updateFramePixels()),t):this.useFramePixels=!0},checkFlipX:function(){var t=this.flipX!=this._frame.flipX;return null!=this.animation._curAnim?t!=this.animation._curAnim.flipX:t},checkFlipY:function(){var t=this.flipY!=this._frame.flipY;return null!=this.animation._curAnim?t!=this.animation._curAnim.flipY:t},__class__:O,__properties__:E(Ja.prototype.__properties__,{set_clipRect:"set_clipRect",set_color:"set_color",set_blend:"set_blend",set_flipY:"set_flipY",set_flipX:"set_flipX",set_facing:"set_facing",set_alpha:"set_alpha",set_graphic:"set_graphic",set_frames:"set_frames",set_frame:"set_frame",set_pixels:"set_pixels",get_pixels:"get_pixels",set_antialiasing:"set_antialiasing",set_useFramePixels:"set_useFramePixels"})});var lb=function(t,e,n){null==n&&(n=0),null==e&&(e=0),null==t&&(t=0),this.directAlpha=this._skipTransformChildren=!1,O.call(this,t,e),this.group=new yb(n),this._sprites=this.group.members};r["flixel.group.FlxTypedSpriteGroup"]=lb,lb.__name__="flixel.group.FlxTypedSpriteGroup",lb.__super__=O,lb.prototype=E(O.prototype,{transformChildren_flixel_math_FlxRect:function(t,e){if(null!=this.group)for(var n=0,s=this._sprites;n<s.length;){var i=s[n];++n,null!=i&&t(i,e)}},transformChildren_flash_display_BlendMode:function(t,e){if(null!=this.group)for(var n=0,s=this._sprites;n<s.length;){var i=s[n];++n,null!=i&&t(i,e)}},transformChildren_flixel_FlxCamera:function(t,e){if(null!=this.group)for(var n=0,s=this._sprites;n<s.length;){var i=s[n];++n,null!=i&&t(i,e)}},multiTransformChildren_Float:function(t,e){if(null!=this.group){var n=t.length;if(!(n>e.length))for(var s=0,i=this._sprites;s<i.length;){var a=i[s];if(++s,null!=a&&a.exists)for(var r=0,l=n;r<l;){var o=r++;(0,t[o])(a,e[o])}}}},transformChildren_flixel_math_FlxPoint:function(t,e){if(null!=this.group)for(var n=0,s=this._sprites;n<s.length;){var i=s[n];++n,null!=i&&t(i,e)}},transformChildren_Int:function(t,e){if(null!=this.group)for(var n=0,s=this._sprites;n<s.length;){var i=s[n];++n,null!=i&&t(i,e)}},transformChildren_Float:function(t,e){if(null!=this.group)for(var n=0,s=this._sprites;n<s.length;){var i=s[n];++n,null!=i&&t(i,e)}},transformChildren_Array_flixel_FlxCamera:function(t,e){if(null!=this.group)for(var n=0,s=this._sprites;n<s.length;){var i=s[n];++n,null!=i&&t(i,e)}},transformChildren_Bool:function(t,e){if(null!=this.group)for(var n=0,s=this._sprites;n<s.length;){var i=s[n];++n,null!=i&&t(i,e)}},group:null,directAlpha:null,_skipTransformChildren:null,_sprites:null,initVars:function(){this.flixelType=4,this.offset=new Nj(z(this,this.offsetCallback)),this.origin=new Nj(z(this,this.originCallback)),this.scale=new Nj(z(this,this.scaleCallback)),this.scrollFactor=new Nj(z(this,this.scrollFactorCallback)),this.scale.set(1,1),this.scrollFactor.set(1,1);var t=ka._pool.get().set(0,0);t._inPool=!1,this.velocity=t,(t=ka._pool.get().set(0,0))._inPool=!1,this.acceleration=t,(t=ka._pool.get().set(0,0))._inPool=!1,this.drag=t;var e=t=1e4;null==t&&(e=0),null==t&&(t=0),(t=ka._pool.get().set(t,e))._inPool=!1,this.maxVelocity=t},destroy:function(){this.offset=Da.destroy(this.offset),this.origin=Da.destroy(this.origin),this.scale=Da.destroy(this.scale),this.scrollFactor=Da.destroy(this.scrollFactor),this.group=Da.destroy(this.group),this._sprites=null,O.prototype.destroy.call(this)},clone:function(){for(var t=new lb(this.x,this.y,this.group.maxSize),e=0,n=this.group.members;e<n.length;){var s=n[e];++e,null!=s&&t.add(s.clone())}return t},isOnScreen:function(t){for(var e=0,n=this._sprites;e<n.length;){var s=n[e];if(++e,null!=s&&s.exists&&s.visible&&s.isOnScreen(t))return!0}return!1},overlapsPoint:function(t,e,n){null==e&&(e=!1);for(var s=!1,i=0,a=this._sprites;i<a.length;){var r=a[i];++i,null!=r&&r.exists&&r.visible&&(s=s||r.overlapsPoint(t,e,n))}return s},pixelsOverlapPoint:function(t,e,n){null==e&&(e=255);for(var s=!1,i=0,a=this._sprites;i<a.length;){var r=a[i];++i,null!=r&&r.exists&&r.visible&&(s=s||r.pixelsOverlapPoint(t,e,n))}return s},update:function(t){this.group.update(t),this.moves&&this.updateMotion(t)},draw:function(){this.group.draw()},replaceColor:function(t,e,n){var s=null;(n=null==n?!1:n)&&(s=[]);for(var i,a=0,r=this._sprites;a<r.length;)i=r[a],++a,null!=i&&(i=i.replaceColor(t,e,n),n&&(s=s.concat(i)));return s},add:function(t){return this.preAdd(t),this.group.add(t)},insert:function(t,e){return this.preAdd(e),this.group.insert(t,e)},preAdd:function(t){(i=t).set_x(i.x+this.x),(i=t).set_y(i.y+this.y),(i=t).set_alpha(i.alpha*this.alpha);var e,n,s,i=t.scrollFactor,a=this.scrollFactor;i.set_x(a.x),i.set_y(a.y),a._weak&&a.put(),t.set_cameras(this._cameras),null!=this.clipRect&&(null==(i=this.clipRect)?t.set_clipRect(null):(e=i.x-t.x+this.x,n=i.y-t.y+this.y,a=i.width,null==e&&(e=0),null==(s=null==(s=i.height)?0:s)&&(s=0),null==(a=null==a?0:a)&&(a=0),null==(n=null==n?0:n)&&(n=0),(i=ta._pool.get()).x=e=null==e?0:e,i.y=n,i.width=a,i.height=s,i._inPool=!1,t.set_clipRect(i)))},recycle:function(t,e,n,s){return this.group.recycle(t,e,n=null==n?!1:n,s=null==s?!0:s)},remove:function(t,e){null==e&&(e=!1);var n=t;return n.set_x(n.x-this.x),(n=t).set_y(n.y-this.y),t.set_cameras(null),this.group.remove(t,e)},replace:function(t,e){return this.group.replace(t,e)},sort:function(n,t){var s=t=null==(t=null==t?-1:t)?-1:t;this.group.members.sort(function(t,e){return n(s,t,e)})},getFirstAvailable:function(t,e){return this.group.getFirstAvailable(t,e=null==e?!1:e)},getFirstNull:function(){return this.group.getFirstNull()},getFirstExisting:function(){return this.group.getFirstExisting()},getFirstAlive:function(){return this.group.getFirstAlive()},getFirstDead:function(){return this.group.getFirstDead()},countLiving:function(){return this.group.countLiving()},countDead:function(){return this.group.countDead()},getRandom:function(t,e){return this.group.getRandom(t=null==t?0:t,e=null==e?0:e)},iterator:function(t){return new me(this.group.members,t)},forEach:function(t,e){this.group.forEach(t,e=null==e?!1:e)},forEachAlive:function(t,e){this.group.forEachAlive(t,e=null==e?!1:e)},forEachDead:function(t,e){this.group.forEachDead(t,e=null==e?!1:e)},forEachExists:function(t,e){this.group.forEachExists(t,e=null==e?!1:e)},forEachOfType:function(t,e,n){this.group.forEachOfType(t,e,n=null==n?!1:n)},clear:function(){this.group.clear()},kill:function(){O.prototype.kill.call(this),this.group.kill()},revive:function(){O.prototype.revive.call(this),this.group.revive()},reset:function(t,e){this.revive(),this.setPosition(t,e);for(var n=0,s=this._sprites;n<s.length;){var i=s[n];++n,null!=i&&i.reset(t,e)}},setPosition:function(t,e){var n=(t=null==t?0:t)-this.x,s=(e=null==e?0:e)-this.y;this.multiTransformChildren_Float([z(this,this.xTransform),z(this,this.yTransform)],[n,s]),this._skipTransformChildren=!0,this.set_x(t),this.set_y(e),this._skipTransformChildren=!1},set_camera:function(t){return this.get_camera()!=t&&this.transformChildren_flixel_FlxCamera(z(this,this.cameraTransform),t),O.prototype.set_camera.call(this,t)},set_cameras:function(t){return this.get_cameras()!=t&&this.transformChildren_Array_flixel_FlxCamera(z(this,this.camerasTransform),t),O.prototype.set_cameras.call(this,t)},set_exists:function(t){return this.exists!=t&&this.transformChildren_Bool(z(this,this.existsTransform),t),O.prototype.set_exists.call(this,t)},set_visible:function(t){return this.exists&&this.visible!=t&&this.transformChildren_Bool(z(this,this.visibleTransform),t),O.prototype.set_visible.call(this,t)},set_active:function(t){return this.exists&&this.active!=t&&this.transformChildren_Bool(z(this,this.activeTransform),t),O.prototype.set_active.call(this,t)},set_alive:function(t){return this.alive!=t&&this.transformChildren_Bool(z(this,this.aliveTransform),t),O.prototype.set_alive.call(this,t)},set_x:function(t){var e;return!this._skipTransformChildren&&this.exists&&this.x!=t&&(e=t-this.x,this.transformChildren_Float(z(this,this.xTransform),e)),this.x=t},set_y:function(t){var e;return!this._skipTransformChildren&&this.exists&&this.y!=t&&(e=t-this.y,this.transformChildren_Float(z(this,this.yTransform),e)),this.y=t},set_angle:function(t){var e;return this.exists&&this.angle!=t&&(e=t-this.angle,this.transformChildren_Float(z(this,this.angleTransform),e)),this.angle=t},set_alpha:function(t){var e;return t=1<(t=t<0?0:t)?1:t,this.exists&&this.alpha!=t&&(e=0<this.alpha?t/this.alpha:0,this.directAlpha||0==this.alpha?this.transformChildren_Float(z(this,this.directAlphaTransform),t):this.transformChildren_Float(z(this,this.alphaTransform),e)),this.alpha=t},set_facing:function(t){return this.exists&&this.facing!=t&&this.transformChildren_Int(z(this,this.facingTransform),t),this.facing=t},set_flipX:function(t){return this.exists&&this.flipX!=t&&this.transformChildren_Bool(z(this,this.flipXTransform),t),this.flipX=t},set_flipY:function(t){return this.exists&&this.flipY!=t&&this.transformChildren_Bool(z(this,this.flipYTransform),t),this.flipY=t},set_moves:function(t){return this.exists&&this.moves!=t&&this.transformChildren_Bool(z(this,this.movesTransform),t),this.moves=t},set_immovable:function(t){return this.exists&&this.immovable!=t&&this.transformChildren_Bool(z(this,this.immovableTransform),t),this.immovable=t},set_solid:function(t){return this.exists&&0<(4369&this.allowCollisions)!=t&&this.transformChildren_Bool(z(this,this.solidTransform),t),O.prototype.set_solid.call(this,t)},set_color:function(t){return this.exists&&this.color!=t&&this.transformChildren_Int(z(this,this.gColorTransform),t),this.color=t},set_blend:function(t){return this.exists&&this.blend!=t&&this.transformChildren_flash_display_BlendMode(z(this,this.blendTransform),t),this.blend=t},set_clipRect:function(t){return this.exists&&this.transformChildren_flixel_math_FlxRect(z(this,this.clipRectTransform),t),O.prototype.set_clipRect.call(this,t)},set_pixelPerfectRender:function(t){return this.exists&&this.pixelPerfectRender!=t&&this.transformChildren_Bool(z(this,this.pixelPerfectTransform),t),O.prototype.set_pixelPerfectRender.call(this,t)},set_width:function(t){return t},get_width:function(){if(0==this.group.length)return 0;for(var t=1/0,e=-1/0,n=0,s=this._sprites;n<s.length;){var i,a=s[n];++n,null!=a&&(e<(a=(i=a.x)+a.get_width())&&(e=a),i<t&&(t=i))}return e-t},set_height:function(t){return t},get_height:function(){if(0==this.group.length)return 0;for(var t=1/0,e=-1/0,n=0,s=this._sprites;n<s.length;){var i,a=s[n];++n,null!=a&&(e<(a=(i=a.y)+a.get_height())&&(e=a),i<t&&(t=i))}return e-t},get_length:function(){return this.group.length},get_maxSize:function(){return this.group.maxSize},set_maxSize:function(t){return this.group.set_maxSize(t)},get_members:function(){return this.group.members},xTransform:function(t,e){t.set_x(t.x+e)},yTransform:function(t,e){t.set_y(t.y+e)},angleTransform:function(t,e){t.set_angle(t.angle+e)},alphaTransform:function(t,e){0!=t.alpha||0==e?t.set_alpha(t.alpha*e):t.set_alpha(1/e)},directAlphaTransform:function(t,e){t.set_alpha(e)},facingTransform:function(t,e){t.set_facing(e)},flipXTransform:function(t,e){t.set_flipX(e)},flipYTransform:function(t,e){t.set_flipY(e)},movesTransform:function(t,e){t.set_moves(e)},pixelPerfectTransform:function(t,e){t.set_pixelPerfectRender(e)},gColorTransform:function(t,e){t.set_color(e)},blendTransform:function(t,e){t.set_blend(e)},immovableTransform:function(t,e){t.set_immovable(e)},visibleTransform:function(t,e){t.set_visible(e)},activeTransform:function(t,e){t.set_active(e)},solidTransform:function(t,e){t.set_solid(e)},aliveTransform:function(t,e){t.set_alive(e)},existsTransform:function(t,e){t.set_exists(e)},cameraTransform:function(t,e){t.set_camera(e)},camerasTransform:function(t,e){t.set_cameras(e)},offsetTransform:function(t,e){(t=t.offset).set_x(e.x),t.set_y(e.y),e._weak&&e.put()},originTransform:function(t,e){(t=t.origin).set_x(e.x),t.set_y(e.y),e._weak&&e.put()},scaleTransform:function(t,e){(t=t.scale).set_x(e.x),t.set_y(e.y),e._weak&&e.put()},scrollFactorTransform:function(t,e){(t=t.scrollFactor).set_x(e.x),t.set_y(e.y),e._weak&&e.put()},clipRectTransform:function(t,e){var n,s,i,a;null==e?t.set_clipRect(null):(n=e.x-t.x+this.x,s=e.y-t.y+this.y,i=e.width,null==n&&(n=0),null==(a=null==(a=e.height)?0:a)&&(a=0),null==(i=null==i?0:i)&&(i=0),null==(s=null==s?0:s)&&(s=0),(e=ta._pool.get()).x=n=null==n?0:n,e.y=s,e.width=i,e.height=a,e._inPool=!1,t.set_clipRect(e))},offsetCallback:function(t){this.transformChildren_flixel_math_FlxPoint(z(this,this.offsetTransform),t)},originCallback:function(t){this.transformChildren_flixel_math_FlxPoint(z(this,this.originTransform),t)},scaleCallback:function(t){this.transformChildren_flixel_math_FlxPoint(z(this,this.scaleTransform),t)},scrollFactorCallback:function(t){this.transformChildren_flixel_math_FlxPoint(z(this,this.scrollFactorTransform),t)},loadGraphicFromSprite:function(t){return this},loadGraphic:function(t,e,n,s,i,a){return this},loadRotatedGraphic:function(t,e,n,s,i,a){return this},makeGraphic:function(t,e,n,s,i){return this},set_pixels:function(t){return t},set_frame:function(t){return t},get_pixels:function(){return null},calcFrame:function(t){},resetHelpers:function(){},stamp:function(t,e,n){},set_frames:function(t){return t},updateColorTransform:function(){},__class__:lb,__properties__:E(O.prototype.__properties__,{set_maxSize:"set_maxSize",get_maxSize:"get_maxSize",get_length:"get_length",get_members:"get_members"})});var $b=function(t,e,s,i,a,r){null==a&&(a=!1),null==i&&(i=!1),null==s&&(s=""),this.personTalking="gf",this.pastX=this.pastY=0,this.isBold=!1,this.splitWords=[],this.listOAlphabets=new S,this.xPosResetted=this.lastWasSpace=!1,this.yMulti=1,this.widthOfWords=n.width,this.text=this._finalText=this._curText="",this.isMenuItem=!1,this.targetY=0,this.paused=!1,this.delay=.05,this.pastX=t,this.pastY=e,lb.call(this,t,e),this.text=this._finalText=s,this.isBold=i,""!=s&&(a?this.startTypedText():this.addText())};r.Alphabet=$b,$b.__name__="Alphabet",$b.__super__=lb,$b.prototype=E(lb.prototype,{delay:null,paused:null,targetY:null,isMenuItem:null,text:null,_finalText:null,_curText:null,widthOfWords:null,yMulti:null,lastSprite:null,xPosResetted:null,lastWasSpace:null,listOAlphabets:null,splitWords:null,isBold:null,pastX:null,pastY:null,reType:function(t){for(var e=this.listOAlphabets.h;null!=e;){var n=e.item,e=e.next;this.remove(n)}this.text=this._finalText=t,this.lastSprite=null,this.updateHitbox(),this.listOAlphabets.clear(),this.set_x(this.pastX),this.set_y(this.pastY),this.addText()},addText:function(){this.doSplitWords();for(var t=0,e=0,n=this.splitWords;e<n.length;){var s,i=n[e];++e," "!=i&&"-"!=i||(this.lastWasSpace=!0),-1!=Oc.alphabet.indexOf(i.toLowerCase())&&(null!=this.lastSprite&&(t=this.lastSprite.x+this.lastSprite.get_width()),this.lastWasSpace&&(t+=40,this.lastWasSpace=!1),s=new Oc(t,0),this.listOAlphabets.add(s),this.isBold?s.createBold(i):s.createLetter(i),this.add(s),this.lastSprite=s)}},doSplitWords:function(){this.splitWords=this._finalText.split("")},personTalking:null,startTypedText:function(){var a=this;this._finalText=this.text,this.doSplitWords();var r=0,l=0,o=0;(new Tc).start(.05,function(t){10==a._finalText.charCodeAt(r)&&(a.yMulti+=1,a.xPosResetted=!0,l=0,o+=1)," "==a.splitWords[r]&&(a.lastWasSpace=!0);var e,s=-1!=Oc.numbers.indexOf(a.splitWords[r]),i=-1!=Oc.symbols.indexOf(a.splitWords[r]);(-1!=Oc.alphabet.indexOf(a.splitWords[r].toLowerCase())||s||i)&&(null==a.lastSprite||a.xPosResetted?a.xPosResetted=!1:(a.lastSprite.updateHitbox(),l+=a.lastSprite.get_width()+3),a.lastWasSpace&&(l+=20,a.lastWasSpace=!1),e=new Oc(l,55*a.yMulti),a.listOAlphabets.add(e),e.row=o,a.isBold?e.createBold(a.splitWords[r]):(s?e.createNumber(a.splitWords[r]):i?e.createSymbol(a.splitWords[r]):e.createLetter(a.splitWords[r]),e.set_x(e.x+90)),null==(s=40)&&(s=50),n.random.float(0,100)<s&&n.sound.play(K.sound("GF_"+n.random.int(1,4),null)),a.add(e),a.lastSprite=e),r+=1,t.time=n.random.float(.04,.09)},this.splitWords.length)},update:function(t){var e,s;this.isMenuItem&&(e=Mb.remapToRange(this.targetY,0,1,0,1.3),s=this.y,this.set_y(s+.3*(120*e+.48*n.height-s)),s=this.x,this.set_x(s+.3*(20*this.targetY+90-s))),lb.prototype.update.call(this,t)},__class__:$b});var Oc=function(t,e){this.row=0,O.call(this,t,e),t=La.fromSparrow(K.getPath("images/alphabet.png","IMAGE",null),K.getPath("images/alphabet.xml","TEXT",null)),this.set_frames(t),n.save.data.antialiasing&&this.set_antialiasing(!0)};r.AlphaCharacter=Oc,Oc.__name__="AlphaCharacter",Oc.__super__=O,Oc.prototype=E(O.prototype,{row:null,createBold:function(t){this.animation.addByPrefix(t,t.toUpperCase()+" bold",24),this.animation.play(t),this.updateHitbox()},createLetter:function(t){var e="lowercase";t.toLowerCase()!=t&&(e="capital"),this.animation.addByPrefix(t,t+" "+e,24),this.animation.play(t),this.updateHitbox(),this.set_y(110-this.get_height()),this.set_y(this.y+60*this.row)},createNumber:function(t){this.animation.addByPrefix(t,t,24),this.animation.play(t),this.updateHitbox()},createSymbol:function(t){switch(t){case" ":this.animation.addByPrefix(t,"space",24),this.animation.play(t);break;case"!":this.animation.addByPrefix(t,"exclamation point",24),this.animation.play(t);break;case'"':this.animation.addByPrefix(t,'"',24),this.animation.play(t),(t=this).set_y(t.y);break;case"#":this.animation.addByPrefix(t,"#",24),this.animation.play(t);break;case"$":this.animation.addByPrefix(t,"$",24),this.animation.play(t);break;case"%":this.animation.addByPrefix(t,"%",24),this.animation.play(t);break;case"&":this.animation.addByPrefix(t,"&",24),this.animation.play(t);break;case"'":this.animation.addByPrefix(t,"apostraphie",24),this.animation.play(t),(t=this).set_y(t.y);break;case"(":this.animation.addByPrefix(t,"(",24),this.animation.play(t);break;case")":this.animation.addByPrefix(t,")",24),this.animation.play(t);break;case"+":this.animation.addByPrefix(t,"+",24),this.animation.play(t);break;case"-":this.animation.addByPrefix(t,"-",24),this.animation.play(t);break;case".":this.animation.addByPrefix(t,"period",24),this.animation.play(t),(t=this).set_y(t.y+50);break;case"?":this.animation.addByPrefix(t,"question mark",24),this.animation.play(t);break;case"@":this.animation.addByPrefix(t,"@",24),this.animation.play(t);break;case"^":this.animation.addByPrefix(t,"^",24),this.animation.play(t),(t=this).set_y(t.y);break;case"_":this.animation.addByPrefix(t,"_",24),this.animation.play(t),(t=this).set_y(t.y+50)}this.updateHitbox()},__class__:Oc});var oa=function(){};r["lime.app.IModule"]=oa,oa.__name__="lime.app.IModule",oa.__isInterface__=!0,oa.prototype={__registerLimeModule:null,__unregisterLimeModule:null,__class__:oa};var $a=function(){this.onExit=new Oj};r["lime.app.Module"]=$a,$a.__name__="lime.app.Module",$a.__interfaces__=[oa],$a.prototype={onExit:null,__registerLimeModule:function(t){},__unregisterLimeModule:function(t){},__class__:$a};var ab=function(t){this.gameDeviceCache=new ld,this.parent=t,this.nextUpdate=this.lastUpdate=this.currentUpdate=0,this.framePeriod=-1,cf.init(),this.accelerometer=Gg.registerSensor(ru.ACCELEROMETER,0)};r["lime._internal.backend.html5.HTML5Application"]=ab,ab.__name__="lime._internal.backend.html5.HTML5Application",ab.prototype={accelerometer:null,currentUpdate:null,deltaTime:null,framePeriod:null,gameDeviceCache:null,hidden:null,lastUpdate:null,nextUpdate:null,parent:null,convertKeyCode:function(t){if(65<=t&&t<=90)return t+32;switch(t){case 12:return 1073741980;case 16:return 1073742049;case 17:return 1073742048;case 18:return 1073742050;case 19:return 1073741896;case 20:return 1073741881;case 33:return 1073741899;case 34:return 1073741902;case 35:return 1073741901;case 36:return 1073741898;case 37:return 1073741904;case 38:return 1073741906;case 39:return 1073741903;case 40:return 1073741905;case 41:return 1073741943;case 43:return 1073741940;case 44:return 1073741894;case 45:return 1073741897;case 46:return 127;case 91:return 1073742051;case 92:case 93:return 1073742055;case 95:return 1073742106;case 96:return 1073741922;case 97:return 1073741913;case 98:return 1073741914;case 99:return 1073741915;case 100:return 1073741916;case 101:return 1073741917;case 102:return 1073741918;case 103:return 1073741919;case 104:return 1073741920;case 105:return 1073741921;case 106:return 1073741909;case 107:return 1073741911;case 108:return 1073741923;case 109:return 1073741910;case 110:return 1073741923;case 111:return 1073741908;case 112:return 1073741882;case 113:return 1073741883;case 114:return 1073741884;case 115:return 1073741885;case 116:return 1073741886;case 117:return 1073741887;case 118:return 1073741888;case 119:return 1073741889;case 120:return 1073741890;case 121:return 1073741891;case 122:return 1073741892;case 123:return 1073741893;case 124:return 1073741928;case 125:return 1073741929;case 126:return 1073741930;case 127:return 1073741931;case 128:return 1073741932;case 129:return 1073741933;case 130:return 1073741934;case 131:return 1073741935;case 132:return 1073741936;case 133:return 1073741937;case 134:return 1073741938;case 135:return 1073741939;case 144:return 1073741907;case 145:return 1073741895;case 160:return 94;case 161:return 33;case 163:return 35;case 164:return 36;case 166:return 1073742094;case 167:return 1073742095;case 168:return 1073742097;case 169:return 41;case 170:return 42;case 171:return 96;case 172:return 1073741898;case 173:return 45;case 174:return 1073741953;case 175:return 1073741952;case 176:return 1073742082;case 177:return 1073742083;case 178:return 1073742084;case 179:return 1073742085;case 180:return 1073742089;case 181:return 1073742086;case 182:return 1073741953;case 183:return 1073741952;case 186:return 59;case 187:return 61;case 188:return 44;case 189:return 45;case 190:return 46;case 191:return 47;case 192:return 96;case 193:return 63;case 194:return 1073741923;case 219:return 91;case 220:return 92;case 221:return 93;case 222:return 39;case 223:return 96;case 224:return 1073742051;case 226:return 92}return t},exec:function(){var t;window.addEventListener("keydown",z(this,this.handleKeyEvent),!1),window.addEventListener("keyup",z(this,this.handleKeyEvent),!1),window.addEventListener("focus",z(this,this.handleWindowEvent),!1),window.addEventListener("blur",z(this,this.handleWindowEvent),!1),window.addEventListener("resize",z(this,this.handleWindowEvent),!1),window.addEventListener("beforeunload",z(this,this.handleWindowEvent),!1),window.addEventListener("devicemotion",z(this,this.handleSensorEvent),!1),CanvasRenderingContext2D.prototype.isPointInStroke||(CanvasRenderingContext2D.prototype.isPointInStroke=function(t,e,n){return!1}),CanvasRenderingContext2D.prototype.isPointInPath||(CanvasRenderingContext2D.prototype.isPointInPath=function(t,e,n){return!1}),0=="performance"in window&&(window.performance={}),0=="now"in window.performance&&(t=Date.now(),performance.timing&&performance.timing.navigationStart&&(t=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-t});for(var i=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];return window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var n=(new Date).getTime(),s=Math.max(0,16-(n-i));return e=window.setTimeout(function(){t(n+s)},s),i=n+s,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),window.requestAnimFrame=window.requestAnimationFrame,this.lastUpdate=(new Date).getTime(),this.handleApplicationEvent(),0},exit:function(){},handleApplicationEvent:function(t){t=0;for(var e=this.parent.__windows;t<e.length;){var n=e[t];++t,n.__backend.updateSize()}if(this.updateGameDevices(),this.currentUpdate=(new Date).getTime(),this.currentUpdate>=this.nextUpdate){for(this.deltaTime=this.currentUpdate-this.lastUpdate,t=0,e=this.parent.__windows;t<e.length;)n=e[t],++t,this.parent.onUpdate.dispatch(0|this.deltaTime),null!=n.context&&n.onRender.dispatch(n.context);this.nextUpdate=this.framePeriod<0?this.currentUpdate:this.currentUpdate-this.currentUpdate%this.framePeriod+this.framePeriod,this.lastUpdate=this.currentUpdate}window.requestAnimationFrame(z(this,this.handleApplicationEvent))},handleKeyEvent:function(t){var e,n;null!=this.parent.__window&&(e=this.convertKeyCode(null!=t.keyCode?t.keyCode:t.which),n=(t.shiftKey?3:0)|(t.ctrlKey?192:0)|(t.altKey?768:0)|(t.metaKey?3072:0),"keydown"==t.type?(this.parent.__window.onKeyDown.dispatch(e,n),this.parent.__window.onKeyDown.canceled&&t.cancelable&&t.preventDefault()):(this.parent.__window.onKeyUp.dispatch(e,n),this.parent.__window.onKeyUp.canceled&&t.cancelable&&t.preventDefault()))},handleSensorEvent:function(t){this.accelerometer.onUpdate.dispatch(t.accelerationIncludingGravity.x,t.accelerationIncludingGravity.y,t.accelerationIncludingGravity.z)},handleWindowEvent:function(t){if(null!=this.parent.__window)switch(t.type){case"blur":this.hidden||(this.parent.__window.onFocusOut.dispatch(),this.parent.__window.onDeactivate.dispatch(),this.hidden=!0);break;case"focus":this.hidden&&(this.parent.__window.onFocusIn.dispatch(),this.parent.__window.onActivate.dispatch(),this.hidden=!1);break;case"resize":this.parent.__window.__backend.handleResizeEvent(t);break;case"visibilitychange":window.document.hidden?this.hidden||(this.parent.__window.onFocusOut.dispatch(),this.parent.__window.onDeactivate.dispatch(),this.hidden=!0):this.hidden&&(this.parent.__window.onFocusIn.dispatch(),this.parent.__window.onActivate.dispatch(),this.hidden=!1)}},updateGameDevices:function(){var t=Dd.__getDeviceData();if(null!=t)for(var e,n,s,i,a,r=0,l=t.length;r<l;)if(null!=(i=t[e=r++])){if(!this.gameDeviceCache.h.hasOwnProperty(e)){for((a=new ar).id=e,a.connected=i.connected,n=0,s=i.buttons.length;n<s;){var o=n++;a.buttons.push(i.buttons[o].value)}for(n=0,s=i.axes.length;n<s;)o=n++,a.axes.push(i.axes[o]);"standard"==i.mapping&&(a.isGamepad=!0),this.gameDeviceCache.h[e]=a,i.connected&&(Dd.__connect(e),a.isGamepad&&ne.__connect(e))}if(a=this.gameDeviceCache.h[e],s=Dd.devices.h[e],n=ne.devices.h[e],i.connected){for(var h=0,_=i.buttons.length;h<_;){var u=h++;if((o=i.buttons[u].value)!=a.buttons[u]){if(6==u)s.onAxisMove.dispatch(i.axes.length,o),null!=n&&n.onAxisMove.dispatch(4,o);else if(7==u)s.onAxisMove.dispatch(i.axes.length+1,o),null!=n&&n.onAxisMove.dispatch(5,o);else if((0<o?s.onButtonDown:s.onButtonUp).dispatch(u),null!=n){switch(u){case 0:e=0;break;case 1:e=1;break;case 2:e=2;break;case 3:e=3;break;case 4:e=9;break;case 5:e=10;break;case 8:e=4;break;case 9:e=6;break;case 10:e=7;break;case 11:e=8;break;case 12:e=11;break;case 13:e=12;break;case 14:e=13;break;case 15:e=14;break;case 16:e=5;break;default:continue}(0<o?n.onButtonDown:n.onButtonUp).dispatch(e)}a.buttons[u]=o}}for(e=0,o=i.axes.length;e<o;)h=e++,i.axes[h]!=a.axes[h]&&(s.onAxisMove.dispatch(h,i.axes[h]),null!=n&&n.onAxisMove.dispatch(h,i.axes[h]),a.axes[h]=i.axes[h])}else a.connected&&(a.connected=!1,Dd.__disconnect(e),ne.__disconnect(e))}},__class__:ab};var Xa=function(){this.onCreateWindow=new br,this.onUpdate=new Oj,this.onExit=new Oj,null==Xa.current&&(Xa.current=this),this.meta=new ya,this.modules=[],this.__windowByID=new ld,this.__windows=[],this.__backend=new ab(this),this.__registerLimeModule(this),this.__preloader=new cr,this.__preloader.onProgress.add(z(this,this.onPreloadProgress)),this.__preloader.onComplete.add(z(this,this.onPreloadComplete))};r["lime.app.Application"]=Xa,Xa.__name__="lime.app.Application",Xa.current=null,Xa.__super__=$a,Xa.prototype=E($a.prototype,{meta:null,modules:null,onUpdate:null,onCreateWindow:null,preloader:null,window:null,windows:null,__backend:null,__preloader:null,__window:null,__windowByID:null,__windows:null,addModule:function(t){t.__registerLimeModule(this),this.modules.push(t)},createWindow:function(t){return t=this.__createWindow(t),this.__addWindow(t),t},exec:function(){return(Xa.current=this).__backend.exec()},onGamepadAxisMove:function(t,e,n){},onGamepadButtonDown:function(t,e){},onGamepadButtonUp:function(t,e){},onGamepadConnect:function(t){},onGamepadDisconnect:function(t){},onJoystickAxisMove:function(t,e,n){},onJoystickButtonDown:function(t,e){},onJoystickButtonUp:function(t,e){},onJoystickConnect:function(t){},onJoystickDisconnect:function(t){},onJoystickHatMove:function(t,e,n){},onJoystickTrackballMove:function(t,e,n,s){},onKeyDown:function(t,e){},onKeyUp:function(t,e){},onModuleExit:function(t){},onMouseDown:function(t,e,n){},onMouseMove:function(t,e){},onMouseMoveRelative:function(t,e){},onMouseUp:function(t,e,n){},onMouseWheel:function(t,e,n){},onPreloadComplete:function(){},onPreloadProgress:function(t,e){},onRenderContextLost:function(){},onRenderContextRestored:function(t){},onTextEdit:function(t,e,n){},onTextInput:function(t){},onTouchCancel:function(t){},onTouchEnd:function(t){},onTouchMove:function(t){},onTouchStart:function(t){},onWindowActivate:function(){},onWindowClose:function(){},onWindowCreate:function(){},onWindowDeactivate:function(){},onWindowDropFile:function(t){},onWindowEnter:function(){},onWindowExpose:function(){},onWindowFocusIn:function(){},onWindowFocusOut:function(){},onWindowFullscreen:function(){},onWindowLeave:function(){},onWindowMove:function(t,e){},onWindowMinimize:function(){},onWindowResize:function(t,e){},onWindowRestore:function(){},removeModule:function(t){null!=t&&(t.__unregisterLimeModule(this),ma.remove(this.modules,t))},render:function(t){},update:function(t){},__addWindow:function(t){var e;null!=t&&(this.__windows.push(t),this.__windowByID.h[t.id]=t,e=z(this,this.__onWindowClose),t.onClose.add(function(){e(t)},!1,-1e4),null==this.__window&&((this.__window=t).onActivate.add(z(this,this.onWindowActivate)),t.onRenderContextLost.add(z(this,this.onRenderContextLost)),t.onRenderContextRestored.add(z(this,this.onRenderContextRestored)),t.onDeactivate.add(z(this,this.onWindowDeactivate)),t.onDropFile.add(z(this,this.onWindowDropFile)),t.onEnter.add(z(this,this.onWindowEnter)),t.onExpose.add(z(this,this.onWindowExpose)),t.onFocusIn.add(z(this,this.onWindowFocusIn)),t.onFocusOut.add(z(this,this.onWindowFocusOut)),t.onFullscreen.add(z(this,this.onWindowFullscreen)),t.onKeyDown.add(z(this,this.onKeyDown)),t.onKeyUp.add(z(this,this.onKeyUp)),t.onLeave.add(z(this,this.onWindowLeave)),t.onMinimize.add(z(this,this.onWindowMinimize)),t.onMouseDown.add(z(this,this.onMouseDown)),t.onMouseMove.add(z(this,this.onMouseMove)),t.onMouseMoveRelative.add(z(this,this.onMouseMoveRelative)),t.onMouseUp.add(z(this,this.onMouseUp)),t.onMouseWheel.add(z(this,this.onMouseWheel)),t.onMove.add(z(this,this.onWindowMove)),t.onRender.add(z(this,this.render)),t.onResize.add(z(this,this.onWindowResize)),t.onRestore.add(z(this,this.onWindowRestore)),t.onTextEdit.add(z(this,this.onTextEdit)),t.onTextInput.add(z(this,this.onTextInput)),this.onWindowCreate()),this.onCreateWindow.dispatch(t))},__createWindow:function(t){return-1==(t=new zk(this,t)).id?null:t},__registerLimeModule:function(t){for(t.onUpdate.add(z(this,this.update)),t.onExit.add(z(this,this.onModuleExit),!1,0),t.onExit.add(z(this,this.__onModuleExit),!1,0),t=ne.devices.iterator();t.hasNext();){var e=t.next();this.__onGamepadConnect(e)}for(ne.onConnect.add(z(this,this.__onGamepadConnect)),t=Dd.devices.iterator();t.hasNext();)e=t.next(),this.__onJoystickConnect(e);Dd.onConnect.add(z(this,this.__onJoystickConnect)),Xd.onCancel.add(z(this,this.onTouchCancel)),Xd.onStart.add(z(this,this.onTouchStart)),Xd.onMove.add(z(this,this.onTouchMove)),Xd.onEnd.add(z(this,this.onTouchEnd))},__removeWindow:function(t){null!=t&&this.__windowByID.h.hasOwnProperty(t.id)&&(this.__window==t&&(this.__window=null),ma.remove(this.__windows,t),this.__windowByID.remove(t.id),t.close(),0==this.__windows.length&&ob.exit(0))},__onGamepadConnect:function(n){this.onGamepadConnect(n);var s=z(this,this.onGamepadAxisMove);n.onAxisMove.add(function(t,e){s(n,t,e)});var e=z(this,this.onGamepadButtonDown);n.onButtonDown.add(function(t){e(n,t)});var i=z(this,this.onGamepadButtonUp);n.onButtonUp.add(function(t){i(n,t)});var t=z(this,this.onGamepadDisconnect);n.onDisconnect.add(function(){t(n)})},__onJoystickConnect:function(s){this.onJoystickConnect(s);var n=z(this,this.onJoystickAxisMove);s.onAxisMove.add(function(t,e){n(s,t,e)});var e=z(this,this.onJoystickButtonDown);s.onButtonDown.add(function(t){e(s,t)});var i=z(this,this.onJoystickButtonUp);s.onButtonUp.add(function(t){i(s,t)});var t=z(this,this.onJoystickDisconnect);s.onDisconnect.add(function(){t(s)});var a=z(this,this.onJoystickHatMove);s.onHatMove.add(function(t,e){a(s,t,e)});var r=z(this,this.onJoystickTrackballMove);s.onTrackballMove.add(function(t,e,n){r(s,t,e,n)})},__onModuleExit:function(t){this.__backend.exit()},__onWindowClose:function(t){this.__window==t&&this.onWindowClose(),this.__removeWindow(t)},__unregisterLimeModule:function(t){t.onUpdate.remove(z(this,this.update)),t.onExit.remove(z(this,this.__onModuleExit)),t.onExit.remove(z(this,this.onModuleExit)),ne.onConnect.remove(z(this,this.__onGamepadConnect)),Dd.onConnect.remove(z(this,this.__onJoystickConnect)),Xd.onCancel.remove(z(this,this.onTouchCancel)),Xd.onStart.remove(z(this,this.onTouchStart)),Xd.onMove.remove(z(this,this.onTouchMove)),Xd.onEnd.remove(z(this,this.onTouchEnd)),this.onModuleExit(0)},get_preloader:function(){return this.__preloader},get_window:function(){return this.__window},get_windows:function(){return this.__windows},__class__:Xa,__properties__:{get_windows:"get_windows",get_window:"get_window",get_preloader:"get_preloader"}});var ib=function(){};r.ApplicationMain=ib,ib.__name__="ApplicationMain",ib.main=function(){ob.__registerEntryPoint("Kade Engine",ib.create)},ib.create=function(t){var e=new xl;df.init(t),e.meta.h.build="3",e.meta.h.company="kadedev",e.meta.h.file="Kade Engine",e.meta.h.name="Friday Night Funkin': Kade Engine",e.meta.h.packageName="com.kadedev.kadeengine";var n={allowHighDPI:!(e.meta.h.version="0.2.7.1"),alwaysOnTop:!1,borderless:!1,element:null,frameRate:null,height:720,hidden:!1,maximized:!1,minimized:!1,parameters:{},resizable:!0,title:"Friday Night Funkin': Kade Engine",width:1280,x:null,y:null,context:{antialiasing:0,background:0,colorDepth:32,depth:!0,hardware:!0,stencil:!0,type:null,vsync:!1}};if(null==e.__window&&null!=t)for(var s=0,i=Z.fields(t);s<i.length;){var a=i[s];++s,Object.prototype.hasOwnProperty.call(n,a)?n[a]=Z.field(t,a):Object.prototype.hasOwnProperty.call(n.context,a)&&(n.context[a]=Z.field(t,a))}e.createWindow(n);var r=new Vm(new Wm);e.__preloader.onProgress.add(function(t,e){r.update(t,e)}),e.__preloader.onComplete.add(function(){r.start()});var l=e.__window.stage;for(r.onComplete.add(function(){ib.start(l)}),s=0,i=df.preloadLibraries;s<i.length;)t=i[s],++s,e.__preloader.addLibrary(t);for(s=0,i=df.preloadLibraryNames;s<i.length;)t=i[s],++s,e.__preloader.addLibraryName(t);e.__preloader.load(),e.exec()},ib.start=function(e){try{xb.main(),e.dispatchEvent(new Oa("resize",!1,!1)),e.window.__fullscreen&&e.dispatchEvent(new gi("fullScreen",!1,!1,!0,!0))}catch(t){tb.lastError=t;var n=H.caught(t).unwrap();e.__handleError(n)}};var uc=function(){};r["openfl.events.IEventDispatcher"]=uc,uc.__name__="openfl.events.IEventDispatcher",uc.__isInterface__=!0,uc.prototype={addEventListener:null,dispatchEvent:null,hasEventListener:null,removeEventListener:null,willTrigger:null,__class__:uc};var Db=function(t){null!=t&&(this.__targetDispatcher=t)};r["openfl.events.EventDispatcher"]=Db,Db.__name__="openfl.events.EventDispatcher",Db.__interfaces__=[uc],Db.prototype={__eventMap:null,__iterators:null,__targetDispatcher:null,addEventListener:function(t,e,n,s,i){if(null==s&&(s=0),null==n&&(n=!1),null!=e)if(null==this.__eventMap&&(this.__eventMap=new ya,this.__iterators=new ya),Object.prototype.hasOwnProperty.call(this.__eventMap.h,t)){i=0;for(var a=(r=this.__eventMap.h[t]).length;i<a;)if(r[i++].match(e,n))return;for(t=this.__iterators.h[t],i=0;i<t.length;)a=t[i],++i,a.active&&a.copy();this.__addListenerByPriority(r,new yl(e,n,s))}else{var r=[];r.push(new yl(e,n,s)),a=new zl(r),this.__eventMap.h[t]=r,this.__iterators.h[t]=[a]}},dispatchEvent:function(t){return t.target=null!=this.__targetDispatcher?this.__targetDispatcher:this,this.__dispatchEvent(t)},hasEventListener:function(t){return null!=this.__eventMap&&Object.prototype.hasOwnProperty.call(this.__eventMap.h,t)},removeEventListener:function(t,e,n){if(null==n&&(n=!1),null!=this.__eventMap&&null!=e){var s=this.__eventMap.h[t];if(null!=s){for(var i=this.__iterators.h[t],a=0,r=s.length;a<r;){var l=a++;if(s[l].match(e,n)){for(e=0;e<i.length;)n=i[e],++e,n.remove(s[l],l);s.splice(l,1);break}}0==s.length&&(s=this.__eventMap,Object.prototype.hasOwnProperty.call(s.h,t)&&delete s.h[t],s=this.__iterators,Object.prototype.hasOwnProperty.call(s.h,t)&&delete s.h[t]),ya.valueIterator(this.__eventMap.h).hasNext()||(this.__iterators=this.__eventMap=null)}}},toString:function(){return"[object "+za.getClass(this).__name__.split(".").pop()+"]"},willTrigger:function(t){return this.hasEventListener(t)},__dispatchEvent:function(t){if(null==this.__eventMap||null==t)return!0;var e=t.type,n=this.__eventMap.h[e];if(null==n)return!0;null==t.target&&(t.target=null!=this.__targetDispatcher?this.__targetDispatcher:this),t.currentTarget=this;var s=1==t.eventPhase,i=(e=this.__iterators.h[e])[0];i.active&&(i=new zl(n),e.push(i)),i.start();for(var a=i;a.hasNext();){var r=a.next();if(null!=r&&r.useCapture==s&&(r.callback(t),t.__isCanceledNow))break}return i.stop(),i!=e[0]?ma.remove(e,i):i.reset(n),!t.isDefaultPrevented()},__removeAllListeners:function(){this.__iterators=this.__eventMap=null},__addListenerByPriority:function(t,e){for(var n=t.length,s=n,i=0;i<n;){var a=i++;if(t[a].priority<e.priority){s=a;break}}t.splice(s,0,e)},__class__:Db};var Uc=function(){};r["openfl.display.IBitmapDrawable"]=Uc,Uc.__name__="openfl.display.IBitmapDrawable",Uc.__isInterface__=!0,Uc.prototype={__blendMode:null,__drawableType:null,__isMask:null,__renderable:null,__renderTransform:null,__transform:null,__worldAlpha:null,__worldColorTransform:null,__worldTransform:null,__getBounds:null,__update:null,__updateTransforms:null,__mask:null,__scrollRect:null,__class__:Uc};var Sb={__properties__:{set_length:"set_length",get_length:"get_length",set_fixed:"set_fixed",get_fixed:"get_fixed"},ofArray_Float:function(t){for(var e=Sb.toFloatVector(null),n=0,s=t.length;n<s;){var i=n++;e.set(i,t[i])}return e},ofArray_Int:function(t){for(var e=Sb.toIntVector(null),n=0,s=t.length;n<s;){var i=n++;e.set(i,t[i])}return e},concat:function(t,e){return t.concat(e)},copy:function(t){return t.copy()},filter:function(t,e){return t.filter(e)},get:function(t,e){return t.get(e)},indexOf:function(t,e,n){return t.indexOf(e,n=null==n?0:n)},insertAt:function(t,e,n){t.insertAt(e,n)},iterator:function(t){return t.iterator()},join:function(t,e){return t.join(e=null==e?",":e)},lastIndexOf:function(t,e,n){return t.lastIndexOf(e,n)},pop:function(t){return t.pop()},push:function(t,e){return t.push(e)},removeAt:function(t,e){return t.removeAt(e)},reverse:function(t){return t.reverse()},set:function(t,e,n){return t.set(e,n)},shift:function(t){return t.shift()},slice:function(t,e,n){return t.slice(e=null==e?0:e,n)},sort:function(t,e){t.sort(e)},splice:function(t,e,n){return t.splice(e,n)},toString:function(t){return null!=t?t.toString():null},unshift:function(t,e){t.unshift(e)},convert:function(t){return t},toBoolVector:function(t,e,n,s){return new ah(e,n,s)},toIntVector:function(t,e,n,s){return new bh(e,n,s)},toFloatVector:function(t,e,n,s){return new ch(e,n,s,!0)},toFunctionVector:function(t,e,n,s){return new dh(e,n,s)},toObjectVector:function(t,e,n,s){return new Hg(e,n,s,!0)},toNullVector:function(t,e,n,s){return new Hg(e,n,s,!0)},fromBoolVector:function(t){return t},fromIntVector:function(t){return t},fromFloatVector:function(t){return t},fromFunctionVector:function(t){return t},fromObjectVector:function(t){return t},get_fixed:function(t){return t.fixed},set_fixed:function(t,e){return t.fixed=e},get_length:function(t){return t.get_length()},set_length:function(t,e){return t.set_length(e)}},Ic=function(t,e,n){this.__pool=new Ed,this.inactiveObjects=this.activeObjects=0,this.__inactiveObject1=this.__inactiveObject0=null,this.__inactiveObjectList=new S,null!=t&&(this.create=t),null!=e&&(this.clean=e),null!=n&&this.set_size(n)};r["lime.utils.ObjectPool"]=Ic,Ic.__name__="lime.utils.ObjectPool",Ic.prototype={activeObjects:null,inactiveObjects:null,__inactiveObject0:null,__inactiveObject1:null,__inactiveObjectList:null,__pool:null,__size:null,add:function(t){this.__pool.exists(t)||(this.__pool.set(t,!1),this.clean(t),null==this.__inactiveObject0?this.__inactiveObject0=t:null==this.__inactiveObject1?this.__inactiveObject1=t:this.__inactiveObjectList.add(t),this.inactiveObjects++)},clean:function(t){},clear:function(){this.__pool=new Ed,this.inactiveObjects=this.activeObjects=0,this.__inactiveObject1=this.__inactiveObject0=null,this.__inactiveObjectList.clear()},create:function(){return null},get:function(){var t=null;return 0<this.inactiveObjects?(null!=this.__inactiveObject0?(t=this.__inactiveObject0,this.__inactiveObject0=null):null!=this.__inactiveObject1?(t=this.__inactiveObject1,this.__inactiveObject1=null):(t=this.__inactiveObjectList.pop(),0<this.__inactiveObjectList.length&&(this.__inactiveObject0=this.__inactiveObjectList.pop()),0<this.__inactiveObjectList.length&&(this.__inactiveObject1=this.__inactiveObjectList.pop())),this.inactiveObjects--,this.activeObjects++):!(null==this.__size||this.activeObjects<this.__size)||null!=(t=this.create())&&(this.__pool.set(t,!0),this.activeObjects++),t},release:function(t){this.activeObjects--,null==this.__size||this.activeObjects+this.inactiveObjects<this.__size?(this.clean(t),null==this.__inactiveObject0?this.__inactiveObject0=t:null==this.__inactiveObject1?this.__inactiveObject1=t:this.__inactiveObjectList.add(t),this.inactiveObjects++):this.__pool.remove(t)},remove:function(t){this.__pool.exists(t)&&(this.__pool.remove(t),this.__inactiveObject0==t?(this.__inactiveObject0=null,this.inactiveObjects--):this.__inactiveObject1==t?(this.__inactiveObject1=null,this.inactiveObjects--):this.__inactiveObjectList.remove(t)?this.inactiveObjects--:this.activeObjects--)},__addInactive:function(t){null==this.__inactiveObject0?this.__inactiveObject0=t:null==this.__inactiveObject1?this.__inactiveObject1=t:this.__inactiveObjectList.add(t),this.inactiveObjects++},__getInactive:function(){var t;return null!=this.__inactiveObject0?(t=this.__inactiveObject0,this.__inactiveObject0=null):null!=this.__inactiveObject1?(t=this.__inactiveObject1,this.__inactiveObject1=null):(t=this.__inactiveObjectList.pop(),0<this.__inactiveObjectList.length&&(this.__inactiveObject0=this.__inactiveObjectList.pop()),0<this.__inactiveObjectList.length&&(this.__inactiveObject1=this.__inactiveObjectList.pop())),this.inactiveObjects--,this.activeObjects++,t},__removeInactive:function(t){if(!(t<=0||0==this.inactiveObjects)&&(null!=this.__inactiveObject0&&(this.__pool.remove(this.__inactiveObject0),this.__inactiveObject0=null,this.inactiveObjects--,--t),0!=t&&0!=this.inactiveObjects&&(null!=this.__inactiveObject1&&(this.__pool.remove(this.__inactiveObject1),this.__inactiveObject1=null,this.inactiveObjects--,--t),0!=t&&0!=this.inactiveObjects)))for(var e=this.__inactiveObjectList.h;null!=e;){var n=e.item,e=e.next;if(this.__pool.remove(n),this.__inactiveObjectList.remove(n),this.inactiveObjects--,0==--t||0==this.inactiveObjects)break}},get_size:function(){return this.__size},set_size:function(t){if(null==t)this.__size=null;else{var e=this.inactiveObjects+this.activeObjects;if((this.__size=t)<e)this.__removeInactive(e-t);else if(e<t)for(var n=0,s=t-e;n<s&&(n++,null!=(e=this.create()));)this.__pool.set(e,!1),this.__inactiveObjectList.add(e),this.inactiveObjects++}return t},__class__:Ic,__properties__:{set_size:"set_size",get_size:"get_size"}};var hc=function(){};r["haxe.IMap"]=hc,hc.__name__="haxe.IMap",hc.__isInterface__=!0,hc.prototype={get:null,set:null,exists:null,remove:null,keys:null,iterator:null,keyValueIterator:null,__class__:hc};var Ed=function(){this.h={__keys__:{}}};r["haxe.ds.ObjectMap"]=Ed,Ed.__name__="haxe.ds.ObjectMap",Ed.__interfaces__=[hc],Ed.count=null,Ed.prototype={h:null,set:function(t,e){var n=t.__id__;null==n&&(n=t.__id__=Ka.$haxeUID++),this.h[n]=e,this.h.__keys__[n]=t},get:function(t){return this.h[t.__id__]},exists:function(t){return null!=this.h.__keys__[t.__id__]},remove:function(t){return t=t.__id__,null!=this.h.__keys__[t]&&(delete this.h[t],delete this.h.__keys__[t],!0)},keys:function(){var t,e=[];for(t in this.h.__keys__)this.h.hasOwnProperty(t)&&e.push(this.h.__keys__[t]);return new Tf(e)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var t=this.it.next();return this.ref[t.__id__]}}},keyValueIterator:function(){return new Wh(this)},toString:function(){for(var t="{",e=this.keys();e.hasNext();){var n=e.next();t+=U.string(U.string(n)),t+=" => ",t+=U.string(U.string(this.h[n.__id__])),e.hasNext()&&(t+=", ")}return t+"}"},__class__:Ed};var S=function(){this.length=0};r["haxe.ds.List"]=S,S.__name__="haxe.ds.List",S.prototype={h:null,q:null,length:null,add:function(t){t=new Xm(t,null),null==this.h?this.h=t:this.q.next=t,this.q=t,this.length++},push:function(t){this.h=t=new Xm(t,this.h),null==this.q&&(this.q=t),this.length++},pop:function(){if(null==this.h)return null;var t=this.h.item;return this.h=this.h.next,null==this.h&&(this.q=null),this.length--,t},clear:function(){this.q=this.h=null,this.length=0},remove:function(t){for(var e=null,n=this.h;null!=n;){if(n.item==t)return null==e?this.h=n.next:e.next=n.next,this.q==n&&(this.q=e),this.length--,!0;n=(e=n).next}return!1},iterator:function(){return new dr(this.h)},__class__:S};var pb=function(){Db.call(this),this.__alpha=this.__drawableType=1,this.__blendMode=10,this.__cacheAsBitmap=!1,this.__transform=new jb,this.__visible=!0,this.__rotationSine=this.__rotation=0,this.__worldAlpha=this.__scaleY=this.__scaleX=this.__rotationCosine=1,this.__worldBlendMode=10,this.__worldTransform=new jb,this.__worldColorTransform=new Wc,this.__renderTransform=new jb,this.__worldVisible=!0,this.set_name("instance"+ ++pb.__instanceCount),null!=pb.__initStage&&(this.stage=pb.__initStage,pb.__initStage=null,this.stage.addChild(this))};r["openfl.display.DisplayObject"]=pb,pb.__name__="openfl.display.DisplayObject",pb.__interfaces__=[Uc],pb.__initStage=null,pb.__supportDOM=null,pb.__calculateAbsoluteTransform=function(t,e,n){n.a=t.a*e.a+t.b*e.c,n.b=t.a*e.b+t.b*e.d,n.c=t.c*e.a+t.d*e.c,n.d=t.c*e.b+t.d*e.d,n.tx=t.tx*e.a+t.ty*e.c+e.tx,n.ty=t.tx*e.b+t.ty*e.d+e.ty},pb.__super__=Db,pb.prototype=E(Db.prototype,{opaqueBackground:null,parent:null,stage:null,__alpha:null,__blendMode:null,__cacheAsBitmap:null,__cacheAsBitmapMatrix:null,__cacheBitmap:null,__cacheBitmapBackground:null,__cacheBitmapColorTransform:null,__cacheBitmapData:null,__cacheBitmapData2:null,__cacheBitmapData3:null,__cacheBitmapMatrix:null,__cacheBitmapRenderer:null,__cairo:null,__children:null,__customRenderClear:null,__customRenderEvent:null,__drawableType:null,__filters:null,__graphics:null,__interactive:null,__isCacheBitmapRender:null,__isMask:null,__loaderInfo:null,__mask:null,__maskTarget:null,__name:null,__objectTransform:null,__renderable:null,__renderDirty:null,__renderParent:null,__renderTransform:null,__renderTransformCache:null,__renderTransformChanged:null,__rotation:null,__rotationCosine:null,__rotationSine:null,__scale9Grid:null,__scaleX:null,__scaleY:null,__scrollRect:null,__shader:null,__tempPoint:null,__transform:null,__transformDirty:null,__visible:null,__worldAlpha:null,__worldAlphaChanged:null,__worldBlendMode:null,__worldClip:null,__worldClipChanged:null,__worldColorTransform:null,__worldShader:null,__worldScale9Grid:null,__worldTransform:null,__worldVisible:null,__worldVisibleChanged:null,__worldTransformInvalid:null,__worldZ:null,__canvas:null,__context:null,__style:null,addEventListener:function(t,e,n,s,i){switch(null==i&&(i=!1),null==s&&(s=0),null==n&&(n=!1),t){case"activate":case"deactivate":case"enterFrame":case"exitFrame":case"frameConstructed":case"render":Object.prototype.hasOwnProperty.call(pb.__broadcastEvents.h,t)||(pb.__broadcastEvents.h[t]=[]);var a=pb.__broadcastEvents.h[t];-1==a.indexOf(this)&&a.push(this);break;case"clearDOM":case"renderCairo":case"renderCanvas":case"renderDOM":case"renderOpenGL":null==this.__customRenderEvent&&(this.__customRenderEvent=new hi(null),this.__customRenderEvent.objectColorTransform=new Wc,this.__customRenderEvent.objectMatrix=new jb,this.__customRenderClear=!0)}Db.prototype.addEventListener.call(this,t,e,n,s,i)},dispatchEvent:function(t){var e;return(t instanceof ic||t instanceof Ee)&&(e=this.__getRenderTransform(),t.stageX=t.localX*e.a+t.localY*e.c+e.tx,e=this.__getRenderTransform(),t.stageY=t.localX*e.b+t.localY*e.d+e.ty),(t.target=this).__dispatchWithCapture(t)},getBounds:function(t){var e,n=jb.__pool.get();return null!=t&&t!=this?(n.copyFrom(this.__getWorldTransform()),(e=jb.__pool.get()).copyFrom(t.__getWorldTransform()),e.invert(),n.concat(e),jb.__pool.release(e)):n.identity(),t=new ua,this.__getBounds(t,n),jb.__pool.release(n),t},getRect:function(t){return this.getBounds(t)},globalToLocal:function(t){return this.__globalToLocal(t,new sb)},hitTestObject:function(t){if(null==t||null==t.parent||null==this.parent)return!1;var e=this.getBounds(this);return t=t.getBounds(this),e.intersects(t)},hitTestPoint:function(t,e,n){return null==n&&(n=!1),null!=this.stage&&this.__hitTest(t,e,n,null,!1,this)},invalidate:function(){this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty())},localToGlobal:function(t){return this.__getRenderTransform().transformPoint(t)},removeEventListener:function(t,e,n){switch(Db.prototype.removeEventListener.call(this,t,e,n=null==n?!1:n),t){case"activate":case"deactivate":case"enterFrame":case"exitFrame":case"frameConstructed":case"render":this.hasEventListener(t)||Object.prototype.hasOwnProperty.call(pb.__broadcastEvents.h,t)&&ma.remove(pb.__broadcastEvents.h[t],this);break;case"clearDOM":case"renderCairo":case"renderCanvas":case"renderDOM":case"renderOpenGL":this.hasEventListener("clearDOM")||this.hasEventListener("renderCairo")||this.hasEventListener("renderCanvas")||this.hasEventListener("renderDOM")||this.hasEventListener("renderOpenGL")||(this.__customRenderEvent=null)}},__cleanup:function(){(this.__context=this.__canvas=this.__cairo=null)!=this.__graphics&&this.__graphics.__cleanup(),null!=this.__cacheBitmap&&(this.__cacheBitmap.__cleanup(),this.__cacheBitmap=null),null!=this.__cacheBitmapData&&(this.__cacheBitmapData.dispose(),this.__cacheBitmapData=null)},__dispatch:function(t){if(null!=this.__eventMap&&this.hasEventListener(t.type)){var e=Db.prototype.__dispatchEvent.call(this,t);return!!t.__isCanceled||e}return!0},__dispatchChildren:function(t){},__dispatchEvent:function(t){var e=t.bubbles?this.parent:null,n=Db.prototype.__dispatchEvent.call(this,t);return!!t.__isCanceled||(null!=e&&e!=this&&(t.eventPhase=3,null==t.target&&(t.target=this),e.__dispatchEvent(t)),n)},__dispatchWithCapture:function(t){if(null==t.target&&(t.target=this),null!=this.parent)if(t.eventPhase=1,this.parent==this.stage)this.parent.__dispatch(t);else{for(var e=pb.__tempStack.get(),n=this.parent,s=0;null!=n;)e.set(s,n),n=n.parent,++s;for(var n=0,i=s;n<i;){var a=n++;e.get(s-a-1).__dispatch(t)}pb.__tempStack.release(e)}return t.eventPhase=2,this.__dispatchEvent(t)},__enterFrame:function(t){},__getBounds:function(t,e){null!=this.__graphics&&this.__graphics.__getBounds(t,e)},__getCursor:function(){return null},__getFilterBounds:function(t,e){if(this.__getRenderBounds(t,e),null!=this.__filters){e=ua.__pool.get();for(var n=0,s=this.__filters;n<s.length;){var i=s[n];++n,e.__expand(-i.__leftExtension,-i.__topExtension,i.__leftExtension+i.__rightExtension,i.__topExtension+i.__bottomExtension)}t.width+=e.width,t.height+=e.height,t.x+=e.x,t.y+=e.y,ua.__pool.release(e)}},__getInteractive:function(t){return!1},__getLocalBounds:function(t){this.__getBounds(t,this.__transform),t.x-=this.__transform.tx,t.y-=this.__transform.ty},__getRenderBounds:function(t,e){var n;null==this.__scrollRect?this.__getBounds(t,e):((n=ua.__pool.get()).copyFrom(this.__scrollRect),n.__transform(n,e),t.__expand(n.x,n.y,n.width,n.height),ua.__pool.release(n))},__getRenderTransform:function(){return this.__getWorldTransform(),this.__renderTransform},__getWorldTransform:function(){if(this.__transformDirty||this.__worldTransformInvalid){var t=[],e=this;if(null==this.parent)this.__update(!0,!1);else for(;e!=this.stage&&(t.push(e),null!=(e=e.parent)););for(var n=t.length;0<=--n;)(e=t[n]).__update(!0,!1)}return this.__worldTransform},__globalToLocal:function(t,e){var n,s,i;return this.__getRenderTransform(),t==e?0==(s=(n=this.__renderTransform).a*n.d-n.b*n.c)?(t.x=-n.tx,t.y=-n.ty):(i=1/s*(n.c*(n.ty-t.y)+n.d*(t.x-n.tx)),t.y=1/s*(n.a*(t.y-n.ty)+n.b*(n.tx-t.x)),t.x=i):(s=(n=this.__renderTransform).a*n.d-n.b*n.c,e.x=0==s?-n.tx:1/s*(n.c*(n.ty-t.y)+n.d*(t.x-n.tx)),s=(n=this.__renderTransform).a*n.d-n.b*n.c,e.y=0==s?-n.ty:1/s*(n.a*(t.y-n.ty)+n.b*(n.tx-t.x))),e},__hitTest:function(t,e,n,s,i,a){if(null!=this.__graphics){if(!a.__visible||this.__isMask||null!=this.get_mask()&&!this.get_mask().__hitTestMask(t,e))return!1;if(this.__graphics.__hitTest(t,e,n,this.__getRenderTransform()))return null==s||i||s.push(a),!0}return!1},__hitTestMask:function(t,e){return!(null==this.__graphics||!this.__graphics.__hitTest(t,e,!0,this.__getRenderTransform()))},__readGraphicsData:function(t,e){null!=this.__graphics&&this.__graphics.__readGraphicsData(t)},__setParentRenderDirty:function(){var t=null!=this.__renderParent?this.__renderParent:this.parent;null==t||t.__renderDirty||(t.__renderDirty=!0,t.__setParentRenderDirty())},__setRenderDirty:function(){this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty())},__setStageReference:function(t){this.stage=t},__setTransformDirty:function(){this.__transformDirty||(this.__transformDirty=!0,this.__setWorldTransformInvalid(),this.__setParentRenderDirty())},__setWorldTransformInvalid:function(){this.__worldTransformInvalid=!0},__stopAllMovieClips:function(){},__update:function(t,e){var n,s=null!=this.__renderParent?this.__renderParent:this.parent;this.__isMask&&null==s&&(s=this.__maskTarget),this.__renderable=this.__visible&&0!=this.__scaleX&&0!=this.__scaleY&&!this.__isMask&&(null==s||!s.__isMask),this.__updateTransforms(),this.__worldTransformInvalid=this.__transformDirty=!1,t||(pb.__supportDOM&&(this.__renderTransformChanged=!this.__renderTransform.equals(this.__renderTransformCache),null==this.__renderTransformCache?this.__renderTransformCache=this.__renderTransform.clone():this.__renderTransformCache.copyFrom(this.__renderTransform)),null!=s?(pb.__supportDOM?(n=s.__worldVisible&&this.__visible,this.__worldVisibleChanged=this.__worldVisible!=n,this.__worldVisible=n,n=this.get_alpha()*s.__worldAlpha,this.__worldAlphaChanged=this.__worldAlpha!=n,this.__worldAlpha=n):this.__worldAlpha=this.get_alpha()*s.__worldAlpha,null!=this.__objectTransform?(this.__worldColorTransform.__copyFrom(this.__objectTransform.__colorTransform),this.__worldColorTransform.__combine(s.__worldColorTransform)):this.__worldColorTransform.__copyFrom(s.__worldColorTransform),this.__worldBlendMode=null==this.__blendMode||10==this.__blendMode?s.__worldBlendMode:this.__blendMode,this.__worldShader=(null==this.__shader?s:this).__shader,this.__worldScale9Grid=(null==this.__scale9Grid?s:this).__scale9Grid):(this.__worldAlpha=this.get_alpha(),pb.__supportDOM&&(this.__worldVisibleChanged=this.__worldVisible!=this.__visible,this.__worldVisible=this.__visible,this.__worldAlphaChanged=this.__worldAlpha!=this.get_alpha()),null!=this.__objectTransform?this.__worldColorTransform.__copyFrom(this.__objectTransform.__colorTransform):this.__worldColorTransform.__identity(),this.__worldBlendMode=this.__blendMode,this.__worldShader=this.__shader,this.__worldScale9Grid=this.__scale9Grid)),e&&null!=this.get_mask()&&this.get_mask().__update(t,!0)},__updateTransforms:function(t){var e=null!=t;t=e?t:this.__transform,null==this.__worldTransform&&(this.__worldTransform=new jb),null==this.__renderTransform&&(this.__renderTransform=new jb);var n,s,i=null!=this.__renderParent?this.__renderParent:this.parent;e||null==this.parent?this.__worldTransform.copyFrom(t):(n=this.parent.__worldTransform,(s=this.__worldTransform).a=t.a*n.a+t.b*n.c,s.b=t.a*n.b+t.b*n.d,s.c=t.c*n.a+t.d*n.c,s.d=t.c*n.b+t.d*n.d,s.tx=t.tx*n.a+t.ty*n.c+n.tx,s.ty=t.tx*n.b+t.ty*n.d+n.ty),e||null==i?this.__renderTransform.copyFrom(t):(n=i.__renderTransform,(s=this.__renderTransform).a=t.a*n.a+t.b*n.c,s.b=t.a*n.b+t.b*n.d,s.c=t.c*n.a+t.d*n.c,s.d=t.c*n.b+t.d*n.d,s.tx=t.tx*n.a+t.ty*n.c+n.tx,s.ty=t.tx*n.b+t.ty*n.d+n.ty),null!=this.__scrollRect&&(e=this.__renderTransform,t=-this.__scrollRect.x,i=-this.__scrollRect.y,e.tx=t*e.a+i*e.c+e.tx,e.ty=t*e.b+i*e.d+e.ty)},get_alpha:function(){return this.__alpha},set_alpha:function(t){return(t=(t=1<t?1:t)<0?0:t)==this.__alpha||this.get_cacheAsBitmap()||this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty()),this.__alpha=t},get_blendMode:function(){return this.__blendMode},set_blendMode:function(t){return(t=null==t?10:t)==this.__blendMode||this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty()),this.__blendMode=t},get_cacheAsBitmap:function(){return null!=this.__filters||this.__cacheAsBitmap},set_cacheAsBitmap:function(t){return t==this.__cacheAsBitmap||this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty()),this.__cacheAsBitmap=t},get_cacheAsBitmapMatrix:function(){return this.__cacheAsBitmapMatrix},set_cacheAsBitmapMatrix:function(t){return this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty()),this.__cacheAsBitmapMatrix=null!=t?t.clone():t},get_filters:function(){return null==this.__filters?[]:this.__filters.slice()},set_filters:function(t){return null!=t&&0<t.length?(this.__filters=t,this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty())):null!=this.__filters&&(this.__filters=null,this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty())),t},get_height:function(){var t=ua.__pool.get();this.__getLocalBounds(t);var e=t.height;return ua.__pool.release(t),e},set_height:function(t){var e=ua.__pool.get(),n=jb.__pool.get();return n.identity(),this.__getBounds(e,n),t!=e.height?this.set_scaleY(t/e.height):this.set_scaleY(1),ua.__pool.release(e),jb.__pool.release(n),t},get_loaderInfo:function(){return null!=this.stage?ud.current.__loaderInfo:null},get_mask:function(){return this.__mask},set_mask:function(t){return t==this.__mask?t:(t!=this.__mask&&(this.__setTransformDirty(),this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty())),null!=this.__mask&&(this.__mask.__isMask=!1,this.__mask.__maskTarget=null,this.__mask.__setTransformDirty(),(e=this.__mask).__renderDirty||(e.__renderDirty=!0,e.__setParentRenderDirty())),null!=t&&(t.__isMask=!0,t.__maskTarget=this,t.__setWorldTransformInvalid()),null!=this.__cacheBitmap&&this.__cacheBitmap.get_mask()!=t&&this.__cacheBitmap.set_mask(t),this.__mask=t);var e},get_mouseX:function(){var t=(null!=this.stage?this:ud.current).stage.__mouseX,e=(null!=this.stage?this:ud.current).stage.__mouseY,n=this.__getRenderTransform(),s=n.a*n.d-n.b*n.c;return 0==s?-n.tx:1/s*(n.c*(n.ty-e)+n.d*(t-n.tx))},get_mouseY:function(){var t=(null!=this.stage?this:ud.current).stage.__mouseX,e=(null!=this.stage?this:ud.current).stage.__mouseY,n=this.__getRenderTransform(),s=n.a*n.d-n.b*n.c;return 0==s?-n.ty:1/s*(n.a*(e-n.ty)+n.b*(n.tx-t))},get_name:function(){return this.__name},set_name:function(t){return this.__name=t},get_root:function(){return null!=this.stage?ud.current:null},get_rotation:function(){return this.__rotation},set_rotation:function(t){var e;return t!=this.__rotation&&(this.__rotation=t,e=Math.PI/180*this.__rotation,this.__rotationSine=Math.sin(e),this.__rotationCosine=Math.cos(e),this.__transform.a=this.__rotationCosine*this.__scaleX,this.__transform.b=this.__rotationSine*this.__scaleX,this.__transform.c=-this.__rotationSine*this.__scaleY,this.__transform.d=this.__rotationCosine*this.__scaleY,this.__setTransformDirty()),t},get_scale9Grid:function(){return null==this.__scale9Grid?null:this.__scale9Grid.clone()},set_scale9Grid:function(t){return null==t&&null==this.__scale9Grid||null!=t&&null!=this.__scale9Grid&&this.__scale9Grid.equals(t)||(null!=t?(null==this.__scale9Grid&&(this.__scale9Grid=new ua),this.__scale9Grid.copyFrom(t)):this.__scale9Grid=null,this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty())),t},get_scaleX:function(){return this.__scaleX},set_scaleX:function(t){var e,n;return t!=this.__scaleX&&(this.__scaleX=t,0==this.__transform.b?(t!=this.__transform.a&&this.__setTransformDirty(),this.__transform.a=t):(e=this.__rotationCosine*t,n=this.__rotationSine*t,this.__transform.a==e&&this.__transform.b==n||this.__setTransformDirty(),this.__transform.a=e,this.__transform.b=n)),t},get_scaleY:function(){return this.__scaleY},set_scaleY:function(t){var e,n;return t!=this.__scaleY&&(this.__scaleY=t,0==this.__transform.c?(t!=this.__transform.d&&this.__setTransformDirty(),this.__transform.d=t):(e=-this.__rotationSine*t,n=this.__rotationCosine*t,this.__transform.d==n&&this.__transform.c==e||this.__setTransformDirty(),this.__transform.c=e,this.__transform.d=n)),t},get_scrollRect:function(){return null==this.__scrollRect?null:this.__scrollRect.clone()},set_scrollRect:function(t){return null==t&&null==this.__scrollRect||null!=t&&null!=this.__scrollRect&&this.__scrollRect.equals(t)||(null!=t?(null==this.__scrollRect&&(this.__scrollRect=new ua),this.__scrollRect.copyFrom(t)):this.__scrollRect=null,this.__setTransformDirty(),pb.__supportDOM&&!this.__renderDirty&&(this.__renderDirty=!0,this.__setParentRenderDirty())),t},get_shader:function(){return this.__shader},set_shader:function(t){return this.__shader=t,this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty()),t},get_transform:function(){return null==this.__objectTransform&&(this.__objectTransform=new Ym(this)),this.__objectTransform},set_transform:function(t){if(null==t)throw H.thrown(new Al("Parameter transform must be non-null."));return null==this.__objectTransform&&(this.__objectTransform=new Ym(this)),this.__setTransformDirty(),this.__objectTransform.set_matrix(t.get_matrix()),this.__objectTransform.__colorTransform.__equals(t.__colorTransform,!0)&&(this.get_cacheAsBitmap()||this.__objectTransform.__colorTransform.alphaMultiplier==t.__colorTransform.alphaMultiplier)||(this.__objectTransform.__colorTransform.__copyFrom(t.get_colorTransform()),this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty())),this.__objectTransform},get_visible:function(){return this.__visible},set_visible:function(t){return t==this.__visible||this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty()),this.__visible=t},get_width:function(){var t=ua.__pool.get();this.__getLocalBounds(t);var e=t.width;return ua.__pool.release(t),e},set_width:function(t){var e=ua.__pool.get(),n=jb.__pool.get();return n.identity(),this.__getBounds(e,n),t!=e.width?this.set_scaleX(t/e.width):this.set_scaleX(1),ua.__pool.release(e),jb.__pool.release(n),t},get_x:function(){return this.__transform.tx},set_x:function(t){return t!=this.__transform.tx&&this.__setTransformDirty(),this.__transform.tx=t},get_y:function(){return this.__transform.ty},set_y:function(t){return t!=this.__transform.ty&&this.__setTransformDirty(),this.__transform.ty=t},__class__:pb,__properties__:{set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x",set_width:"set_width",get_width:"get_width",set_visible:"set_visible",get_visible:"get_visible",set_transform:"set_transform",get_transform:"get_transform",set_shader:"set_shader",get_shader:"get_shader",set_scrollRect:"set_scrollRect",get_scrollRect:"get_scrollRect",set_scaleY:"set_scaleY",get_scaleY:"get_scaleY",set_scaleX:"set_scaleX",get_scaleX:"get_scaleX",set_scale9Grid:"set_scale9Grid",get_scale9Grid:"get_scale9Grid",set_rotation:"set_rotation",get_rotation:"get_rotation",get_root:"get_root",set_name:"set_name",get_name:"get_name",get_mouseY:"get_mouseY",get_mouseX:"get_mouseX",set_mask:"set_mask",get_mask:"get_mask",get_loaderInfo:"get_loaderInfo",set_height:"set_height",get_height:"get_height",set_filters:"set_filters",get_filters:"get_filters",set_cacheAsBitmapMatrix:"set_cacheAsBitmapMatrix",get_cacheAsBitmapMatrix:"get_cacheAsBitmapMatrix",set_cacheAsBitmap:"set_cacheAsBitmap",get_cacheAsBitmap:"get_cacheAsBitmap",set_blendMode:"set_blendMode",get_blendMode:"get_blendMode",set_alpha:"set_alpha",get_alpha:"get_alpha"}});var mc=function(){pb.call(this),this.doubleClickEnabled=!1,this.mouseEnabled=!0,this.needsSoftKeyboard=!1,this.__tabEnabled=null,this.__tabIndex=-1};r["openfl.display.InteractiveObject"]=mc,mc.__name__="openfl.display.InteractiveObject",mc.__super__=pb,mc.prototype=E(pb.prototype,{doubleClickEnabled:null,focusRect:null,mouseEnabled:null,needsSoftKeyboard:null,softKeyboardInputAreaOfInterest:null,__tabEnabled:null,__tabIndex:null,requestSoftKeyboard:function(){return ud.notImplemented({fileName:"openfl/display/InteractiveObject.hx",lineNumber:1251,className:"openfl.display.InteractiveObject",methodName:"requestSoftKeyboard"}),!1},__allowMouseFocus:function(){return this.get_tabEnabled()},__getInteractive:function(t){return null!=t&&(t.push(this),null!=this.parent&&this.parent.__getInteractive(t)),!0},__hitTest:function(t,e,n,s,i,a){return!(!a.get_visible()||this.__isMask||i&&!this.mouseEnabled)&&pb.prototype.__hitTest.call(this,t,e,n,s,i,a)},__tabTest:function(t){this.get_tabEnabled()&&t.push(this)},get_tabEnabled:function(){return 1==this.__tabEnabled},set_tabEnabled:function(t){return this.__tabEnabled!=t&&(this.__tabEnabled=t,this.dispatchEvent(new Oa("tabEnabledChange",!0,!1))),this.__tabEnabled},get_tabIndex:function(){return this.__tabIndex},set_tabIndex:function(t){if(this.__tabIndex!=t){if(t<-1)throw H.thrown(new Pj("Parameter tabIndex must be a non-negative number; got "+t));this.__tabIndex=t,this.dispatchEvent(new Oa("tabIndexChange",!0,!1))}return this.__tabIndex},__class__:mc,__properties__:E(pb.prototype.__properties__,{set_tabIndex:"set_tabIndex",get_tabIndex:"get_tabIndex",set_tabEnabled:"set_tabEnabled",get_tabEnabled:"get_tabEnabled"})});var Eb=function(){mc.call(this),this.__tabChildren=this.mouseChildren=!0,this.__children=[],this.__removedChildren=Sb.toObjectVector(null)};r["openfl.display.DisplayObjectContainer"]=Eb,Eb.__name__="openfl.display.DisplayObjectContainer",Eb.__super__=mc,Eb.prototype=E(mc.prototype,{mouseChildren:null,__removedChildren:null,__tabChildren:null,addChild:function(t){return this.addChildAt(t,this.get_numChildren())},addChildAt:function(t,e){if(null==t)throw(t=new Al("Error #2007: Parameter child must be non-null.")).errorID=2007,H.thrown(t);if(t.stage==t)throw(t=new Qj("Error #3783: A Stage object cannot be added as the child of another object.")).errorID=3783,H.thrown(t);if(e>this.__children.length||e<0)throw H.thrown("Invalid index position "+e);var n;return t.parent==this?this.__children[e]!=t&&(ma.remove(this.__children,t),this.__children.splice(e,0,t),this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty())):(null!=t.parent&&t.parent.removeChild(t),this.__children.splice(e,0,t),(e=null!=(t.parent=this).stage&&null==t.stage)&&t.__setStageReference(this.stage),t.__setTransformDirty(),t.__renderDirty||(t.__renderDirty=!0,t.__setParentRenderDirty()),this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty()),(n=new Oa("added")).bubbles=!0,(n.target=t).__dispatchWithCapture(n),e&&(n=new Oa("addedToStage",!1,!1),t.__dispatchWithCapture(n),t.__dispatchChildren(n))),t},areInaccessibleObjectsUnderPoint:function(t){return!1},contains:function(t){for(;t!=this&&null!=t;)t=t.parent;return t==this},getChildAt:function(t){return 0<=t&&t<this.__children.length?this.__children[t]:null},getChildByName:function(t){for(var e=0,n=this.__children;e<n.length;){var s=n[e];if(++e,s.get_name()==t)return s}return null},getChildIndex:function(t){for(var e=0,n=this.__children.length;e<n;){var s=e++;if(this.__children[s]==t)return s}return-1},getObjectsUnderPoint:function(t){var e=[];return this.__hitTest(t.x,t.y,!1,e,!1,this),e.reverse(),e},removeChild:function(t){var e;return null!=t&&t.parent==this&&(t.__setTransformDirty(),t.__renderDirty||(t.__renderDirty=!0,t.__setParentRenderDirty()),this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty()),e=new Oa("removed",!0),t.__dispatchWithCapture(e),null!=this.stage&&(null!=t.stage&&this.stage.get_focus()==t&&this.stage.set_focus(null),e=new Oa("removedFromStage",!1,!1),t.__dispatchWithCapture(e),t.__dispatchChildren(e),t.__setStageReference(null)),t.parent=null,ma.remove(this.__children,t),this.__removedChildren.push(t),t.__setTransformDirty()),t},removeChildAt:function(t){return 0<=t&&t<this.__children.length?this.removeChild(this.__children[t]):null},removeChildren:function(t,e){if(null==t&&(t=0),!(2147483647==(e=null==e?2147483647:e)&&(e=this.__children.length-1)<0||t>this.__children.length-1)){if(e<t||t<0||e>this.__children.length)throw H.thrown(new Pj("The supplied index is out of bounds."));for(e-=t;0<=e;)this.removeChildAt(t),--e}},resolve:function(t){if(null==this.__children)return null;for(var e=0,n=this.__children;e<n.length;){var s=n[e];if(++e,s.get_name()==t)return s}return null},setChildIndex:function(t,e){0<=e&&e<=this.__children.length&&t.parent==this&&(ma.remove(this.__children,t),this.__children.splice(e,0,t))},stopAllMovieClips:function(){this.__stopAllMovieClips()},swapChildren:function(t,e){var n,s;t.parent==this&&e.parent==this&&(n=this.__children.indexOf(t),s=this.__children.indexOf(e),this.__children[n]=e,this.__children[s]=t,this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty()))},swapChildrenAt:function(t,e){var n=this.__children[t];this.__children[t]=this.__children[e],this.__children[e]=n,this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty())},__cleanup:function(){mc.prototype.__cleanup.call(this);for(var t=0,e=this.__children;t<e.length;){var n=e[t];++t,n.__cleanup()}for(t=this.__removedChildren.iterator();t.hasNext();)null==(e=t.next()).stage&&e.__cleanup();this.__removedChildren.set_length(0)},__cleanupRemovedChildren:function(){for(var t=this.__removedChildren.iterator();t.hasNext();){var e=t.next();null==e.stage&&e.__cleanup()}this.__removedChildren.set_length(0)},__dispatchChildren:function(t){if(null!=this.__children)for(var e=0,n=this.__children;e<n.length;){var s=n[e];if(++e,!(t.target=s).__dispatchWithCapture(t))break;s.__dispatchChildren(t)}},__enterFrame:function(t){for(var e=0,n=this.__children;e<n.length;){var s=n[e];++e,s.__enterFrame(t)}},__getBounds:function(t,e){if(mc.prototype.__getBounds.call(this,t,e),0!=this.__children.length){for(var n=jb.__pool.get(),s=0,i=this.__children;s<i.length;){var a,r=i[s];++s,0!=r.__scaleX&&0!=r.__scaleY&&(a=r.__transform,n.a=a.a*e.a+a.b*e.c,n.b=a.a*e.b+a.b*e.d,n.c=a.c*e.a+a.d*e.c,n.d=a.c*e.b+a.d*e.d,n.tx=a.tx*e.a+a.ty*e.c+e.tx,n.ty=a.tx*e.b+a.ty*e.d+e.ty,r.__getBounds(t,n))}jb.__pool.release(n)}},__getFilterBounds:function(t,e){if(mc.prototype.__getFilterBounds.call(this,t,e),null==this.__scrollRect&&0!=this.__children.length){for(var n=jb.__pool.get(),s=0,i=this.__children;s<i.length;){var a,r=i[s];++s,0==r.__scaleX||0==r.__scaleY||r.__isMask||(a=r.__transform,n.a=a.a*e.a+a.b*e.c,n.b=a.a*e.b+a.b*e.d,n.c=a.c*e.a+a.d*e.c,n.d=a.c*e.b+a.d*e.d,n.tx=a.tx*e.a+a.ty*e.c+e.tx,n.ty=a.tx*e.b+a.ty*e.d+e.ty,a=ua.__pool.get(),r.__getFilterBounds(a,n),t.__expand(a.x,a.y,a.width,a.height),ua.__pool.release(a))}jb.__pool.release(n)}},__getRenderBounds:function(t,e){if(null!=this.__scrollRect)mc.prototype.__getRenderBounds.call(this,t,e);else if(mc.prototype.__getBounds.call(this,t,e),0!=this.__children.length){for(var n=jb.__pool.get(),s=0,i=this.__children;s<i.length;){var a,r=i[s];++s,0==r.__scaleX||0==r.__scaleY||r.__isMask||(a=r.__transform,n.a=a.a*e.a+a.b*e.c,n.b=a.a*e.b+a.b*e.d,n.c=a.c*e.a+a.d*e.c,n.d=a.c*e.b+a.d*e.d,n.tx=a.tx*e.a+a.ty*e.c+e.tx,n.ty=a.tx*e.b+a.ty*e.d+e.ty,r.__getRenderBounds(t,n))}jb.__pool.release(n)}},__hitTest:function(t,e,n,s,i,a){if(!a.get_visible()||this.__isMask||i&&!this.mouseEnabled&&!this.mouseChildren||null!=this.get_mask()&&!this.get_mask().__hitTestMask(t,e))return!1;if(null!=this.__scrollRect){var r=sb.__pool.get();r.setTo(t,e);var l,o=this.__getRenderTransform(),h=o.a*o.d-o.b*o.c;if(0==h?(r.x=-o.tx,r.y=-o.ty):(l=1/h*(o.c*(o.ty-r.y)+o.d*(r.x-o.tx)),r.y=1/h*(o.a*(r.y-o.ty)+o.b*(o.tx-r.x)),r.x=l),!this.__scrollRect.containsPoint(r))return sb.__pool.release(r),!1;sb.__pool.release(r)}if(r=this.__children.length,!i){for(h=!1;0<=--r&&(!this.__children[r].__hitTest(t,e,n,s,!1,this.__children[r])||(h=!0,null!=s)););return h}if(null!=s&&this.mouseChildren){if(null!=s){for(i=s.length,h=!1;0<=--r&&!(((o=this.__children[r].__getInteractive(null))||this.mouseEnabled&&!h)&&this.__children[r].__hitTest(t,e,n,s,!0,this.__children[r])&&(h=!0,o&&s.length>i)););if(h)return s.splice(i,0,a),!0}}else for(;0<=--r;)if(this.__children[r].__hitTest(t,e,n,null,!0,this.__children[r]))return null!=s&&s.push(a),!0;return!1},__hitTestMask:function(t,e){for(var n=this.__children.length;0<=--n;)if(this.__children[n].__hitTestMask(t,e))return!0;return!1},__readGraphicsData:function(t,e){if(mc.prototype.__readGraphicsData.call(this,t,e),e)for(var n=0,s=this.__children;n<s.length;){var i=s[n];++n,i.__readGraphicsData(t,e)}},__setStageReference:function(t){if(mc.prototype.__setStageReference.call(this,t),null!=this.__children)for(var e=0,n=this.__children;e<n.length;){var s=n[e];++e,s.__setStageReference(t)}},__setWorldTransformInvalid:function(){if(!this.__worldTransformInvalid&&(this.__worldTransformInvalid=!0,null!=this.__children))for(var t=0,e=this.__children;t<e.length;){var n=e[t];++t,n.__setWorldTransformInvalid()}},__stopAllMovieClips:function(){for(var t=0,e=this.__children;t<e.length;){var n=e[t];++t,n.__stopAllMovieClips()}},__tabTest:function(t){if(mc.prototype.__tabTest.call(this,t),this.get_tabChildren())for(var e=0,n=this.__children;e<n.length;){var s=n[e];++e,s.__getInteractive(null)&&s.__tabTest(t)}},__update:function(t,e){if(mc.prototype.__update.call(this,t,e),e){e=0;for(var n=this.__children;e<n.length;){var s=n[e];++e,s.__update(t,!0)}}},get_numChildren:function(){return this.__children.length},get_tabChildren:function(){return this.__tabChildren},set_tabChildren:function(t){return this.__tabChildren!=t&&(this.__tabChildren=t,this.dispatchEvent(new Oa("tabChildrenChange",!0,!1))),this.__tabChildren},__class__:Eb,__properties__:E(mc.prototype.__properties__,{set_tabChildren:"set_tabChildren",get_tabChildren:"get_tabChildren",get_numChildren:"get_numChildren"})});var Ya=function(){Eb.call(this),this.__drawableType=4,this.__buttonMode=!1,this.useHandCursor=!0};r["openfl.display.Sprite"]=Ya,Ya.__name__="openfl.display.Sprite",Ya.__super__=Eb,Ya.prototype=E(Eb.prototype,{dropTarget:null,hitArea:null,useHandCursor:null,__buttonMode:null,startDrag:function(t,e){null==t&&(t=!1),null!=this.stage&&this.stage.__startDrag(this,t,e)},stopDrag:function(){null!=this.stage&&this.stage.__stopDrag(this)},__getCursor:function(){return this.__buttonMode&&this.useHandCursor?"button":null},__hitTest:function(t,e,n,s,i,a){if(i&&!this.mouseEnabled&&!this.mouseChildren)return!1;if(!a.get_visible()||this.__isMask||null!=this.get_mask()&&!this.get_mask().__hitTestMask(t,e))return this.__hitTestHitArea(t,e,n,s,i,a);if(null!=this.__scrollRect){var r=sb.__pool.get();r.setTo(t,e);var l,o=this.__getRenderTransform(),h=o.a*o.d-o.b*o.c;if(0==h?(r.x=-o.tx,r.y=-o.ty):(l=1/h*(o.c*(o.ty-r.y)+o.d*(r.x-o.tx)),r.y=1/h*(o.a*(r.y-o.ty)+o.b*(o.tx-r.x)),r.x=l),!this.__scrollRect.containsPoint(r))return sb.__pool.release(r),this.__hitTestHitArea(t,e,n,s,!0,a);sb.__pool.release(r)}return Eb.prototype.__hitTest.call(this,t,e,n,s,i,a)?null==s||i:null==this.hitArea&&null!=this.__graphics&&this.__graphics.__hitTest(t,e,n,this.__getRenderTransform())?(null==s||i&&!this.mouseEnabled||s.push(a),!0):this.__hitTestHitArea(t,e,n,s,i,a)},__hitTestHitArea:function(t,e,n,s,i,a){return null!=this.hitArea&&!this.hitArea.mouseEnabled&&(this.hitArea.mouseEnabled=!0,t=this.hitArea.__hitTest(t,e,n,null,!0,a),this.hitArea.mouseEnabled=!1,null!=s&&t&&(s[s.length]=a),t)},__hitTestMask:function(t,e){return!!(Eb.prototype.__hitTestMask.call(this,t,e)||null!=this.__graphics&&this.__graphics.__hitTest(t,e,!0,this.__getRenderTransform()))},get_graphics:function(){return null==this.__graphics&&(this.__graphics=new Gf(this)),this.__graphics},get_tabEnabled:function(){return null==this.__tabEnabled?this.__buttonMode:this.__tabEnabled},get_buttonMode:function(){return this.__buttonMode},set_buttonMode:function(t){return this.__buttonMode=t},__class__:Ya,__properties__:E(Eb.prototype.__properties__,{get_graphics:"get_graphics",set_buttonMode:"set_buttonMode",get_buttonMode:"get_buttonMode"})});var xb=function(){this.startFullscreen=!1,this.skipSplash=!0,this.framerate=120,this.zoom=-1,this.initialState=Ci,this.gameHeight=720,this.gameWidth=1280,Ya.call(this),null!=this.stage?this.init():this.addEventListener("addedToStage",z(this,this.init))};r.Main=xb,xb.__name__="Main",xb.main=function(){Fa.get_current().addChild(new xb)},xb.webmHandler=null,xb.__super__=Ya,xb.prototype=E(Ya.prototype,{gameWidth:null,gameHeight:null,initialState:null,zoom:null,framerate:null,skipSplash:null,startFullscreen:null,init:function(t){this.hasEventListener("addedToStage")&&this.removeEventListener("addedToStage",z(this,this.init)),this.setupGame()},setupGame:function(){var t=Fa.get_current().stage.stageWidth,e=Fa.get_current().stage.stageHeight;-1==this.zoom&&(this.zoom=Math.min(t/this.gameWidth,e/this.gameHeight),this.gameWidth=Math.ceil(t/this.zoom),this.gameHeight=Math.ceil(e/this.zoom)),this.framerate=60,this.game=new Zm(this.gameWidth,this.gameHeight,this.initialState,this.zoom,this.framerate,this.framerate,this.skipSplash,this.startFullscreen),this.addChild(this.game),(t=new er).init1(),t.video.set_name("HTML CRAP"),this.addChild(t.video),t.init2(),cc.setVid(t),t.source("assets/videos/DO NOT DELETE OR GAME WILL CRASH/dontDelete.webm"),this.fpsCounter=new $m(10,3,16777215),this.addChild(this.fpsCounter),this.toggleFPS(n.save.data.fps)},game:null,fpsCounter:null,toggleFPS:function(t){this.fpsCounter.set_visible(t)},changeFPSColor:function(t){this.fpsCounter.set_textColor(t)},setFPSCap:function(t){Fa.get_current().stage.set_frameRate(t)},getFPSCap:function(){return Fa.get_current().stage.get_frameRate()},getFPS:function(){return this.fpsCounter.currentFPS},__class__:xb});var Nb=function(t){t.addChild(this),xb.call(this),this.dispatchEvent(new Oa("addedToStage",!1,!1))};r.DocumentClass=Nb,Nb.__name__="DocumentClass",Nb.__super__=xb,Nb.prototype=E(xb.prototype,{__class__:Nb});var Qa=function(t,e){this.danceDir=!1,O.call(this,t,e),this.set_frames(La.fromSparrow(K.getPath("images/limo/limoDancer.png","IMAGE","week4"),K.getPath("images/limo/limoDancer.xml","TEXT","week4"))),this.animation.addByIndices("danceLeft","bg dancer sketch PINK",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],"",24,!1),this.animation.addByIndices("danceRight","bg dancer sketch PINK",[15,16,17,18,19,20,21,22,23,24,25,26,27,28,29],"",24,!1),this.animation.play("danceLeft"),n.save.data.antialiasing&&this.set_antialiasing(!0)};r.BackgroundDancer=Qa,Qa.__name__="BackgroundDancer",Qa.__super__=O,Qa.prototype=E(O.prototype,{danceDir:null,dance:function(){(this.danceDir=!this.danceDir)?this.animation.play("danceRight",!0):this.animation.play("danceLeft",!0)},__class__:Qa});var Pa=function(t,e){this.danceDir=!1,O.call(this,t,e),this.set_frames(La.fromSparrow(K.getPath("images/weeb/bgFreaks.png","IMAGE","week6"),K.getPath("images/weeb/bgFreaks.xml","TEXT","week6"))),this.animation.addByIndices("danceLeft","BG girls group",cd.numberArray(14),"",24,!1),this.animation.addByIndices("danceRight","BG girls group",cd.numberArray(30,15),"",24,!1),this.animation.play("danceLeft")};r.BackgroundGirls=Pa,Pa.__name__="BackgroundGirls",Pa.__super__=O,Pa.prototype=E(O.prototype,{danceDir:null,getScared:function(){this.animation.addByIndices("danceLeft","BG fangirls dissuaded",cd.numberArray(14),"",24,!1),this.animation.addByIndices("danceRight","BG fangirls dissuaded",cd.numberArray(30,15),"",24,!1),this.dance()},dance:function(){(this.danceDir=!this.danceDir)?this.animation.play("danceRight",!0):this.animation.play("danceLeft",!0)},__class__:Pa});var Fd=function(t,e,s,i,a){switch(null==a&&(a=!1),null==i&&(i=!1),null==s&&(s="bf"),this.danced=!1,this.noteSkin="normal",this.iconColor="FF50a5eb",this.holdTimer=0,this.curCharacter="bf",this.debugMode=this.isPlayer=!1,O.call(this,t,e),this.animOffsets=new ya,this.curCharacter=s,this.isPlayer=i,n.save.data.antialiasing&&this.set_antialiasing(!0),this.curCharacter){case"austin":this.noteSkin="austin",this.iconColor="FF6A0200",t=a?(t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/austinglitch_assets.png","IMAGE","shared"),K.getPath("images/characters/austinglitch_assets.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/austinglitch_assets.png","IMAGE","shared"),K.getPath("images/austinglitch_assets.xml","TEXT","shared")):(t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/austin_assets.png","IMAGE","shared"),K.getPath("images/characters/austin_assets.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/austin_assets.png","IMAGE","shared"),K.getPath("images/austin_assets.xml","TEXT","shared")),this.set_frames(t),this.animation.addByPrefix("idle","austin idle dance",24),this.animation.addByPrefix("singUP","austin Sing Note UP",24),this.animation.addByPrefix("singRIGHT","austin Sing Note RIGHT",24),this.animation.addByPrefix("singDOWN","austin Sing Note DOWN",24),this.animation.addByPrefix("singLEFT","austin Sing Note LEFT",24),this.animation.addByPrefix("singUPmiss","austin miss up",24),this.animation.addByPrefix("singRIGHTmiss","austin miss right",24),this.animation.addByPrefix("singDOWNmiss","austin miss down",24),this.animation.addByPrefix("singLEFTmiss","austin miss left",24),this.animation.addByPrefix("firstDeath","austin fucking dies",24,!1),this.animation.addByPrefix("deathLoop","austin fucking dies loop",24,!1),this.animation.addByPrefix("deathConfirm","austin fucking dies confirm",24,!1),this.setGraphicSize(2*this.get_width()|0),this.loadOffsetFile(this.curCharacter),this.playAnim("idle");break;case"bf":this.noteSkin="bf",t=(t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/BOYFRIEND.png","IMAGE","shared"),K.getPath("images/characters/BOYFRIEND.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/BOYFRIEND.png","IMAGE","shared"),K.getPath("images/BOYFRIEND.xml","TEXT","shared")),this.set_frames(t),Ea.trace(t.frames.length,{fileName:"source/Character.hx",lineNumber:235,className:"Character",methodName:"new"}),this.animation.addByPrefix("idle","BF idle dance",24,!1),this.animation.addByPrefix("singUP","BF NOTE UP0",24,!1),this.animation.addByPrefix("singLEFT","BF NOTE LEFT0",24,!1),this.animation.addByPrefix("singRIGHT","BF NOTE RIGHT0",24,!1),this.animation.addByPrefix("singDOWN","BF NOTE DOWN0",24,!1),this.animation.addByPrefix("singUPmiss","BF NOTE UP MISS",24,!1),this.animation.addByPrefix("singLEFTmiss","BF NOTE LEFT MISS",24,!1),this.animation.addByPrefix("singRIGHTmiss","BF NOTE RIGHT MISS",24,!1),this.animation.addByPrefix("singDOWNmiss","BF NOTE DOWN MISS",24,!1),this.animation.addByPrefix("hey","BF HEY",24,!1),this.animation.addByPrefix("firstDeath","BF dies",24,!1),this.animation.addByPrefix("deathLoop","BF Dead Loop",24,!1),this.animation.addByPrefix("deathConfirm","BF Dead confirm",24,!1),this.animation.addByPrefix("scared","BF idle shaking",24),this.loadOffsetFile(this.curCharacter),this.playAnim("idle"),this.set_flipX(!0);break;case"bf-austin":this.noteSkin="austin",this.iconColor="FF6A0200",t=(t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/austin_assets.png","IMAGE","shared"),K.getPath("images/characters/austin_assets.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/austin_assets.png","IMAGE","shared"),K.getPath("images/austin_assets.xml","TEXT","shared")),this.set_frames(t),this.animation.addByPrefix("idle","austin idle dance",24),this.animation.addByPrefix("singUP","austin Sing Note UP",24),this.animation.addByPrefix("singRIGHT","austin Sing Note LEFT",24),this.animation.addByPrefix("singDOWN","austin Sing Note DOWN",24),this.animation.addByPrefix("singLEFT","austin Sing Note RIGHT",24),this.animation.addByPrefix("singUPmiss","austin miss up",24),this.animation.addByPrefix("singRIGHTmiss","austin miss left",24),this.animation.addByPrefix("singDOWNmiss","austin miss down",24),this.animation.addByPrefix("singLEFTmiss","austin miss right",24),this.animation.addByPrefix("firstDeath","austin fucking dies",24,!1),this.animation.addByPrefix("deathLoop","austin fucking dies loop",24,!1),this.animation.addByPrefix("deathConfirm","austin fucking dies confirm",24,!1),this.setGraphicSize(2*this.get_width()|0),this.loadOffsetFile(this.curCharacter),this.playAnim("idle");break;case"bf-car":t=(t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/bfCar.png","IMAGE","shared"),K.getPath("images/characters/bfCar.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/bfCar.png","IMAGE","shared"),K.getPath("images/bfCar.xml","TEXT","shared")),this.set_frames(t),this.animation.addByPrefix("idle","BF idle dance",24,!1),this.animation.addByPrefix("singUP","BF NOTE UP0",24,!1),this.animation.addByPrefix("singLEFT","BF NOTE LEFT0",24,!1),this.animation.addByPrefix("singRIGHT","BF NOTE RIGHT0",24,!1),this.animation.addByPrefix("singDOWN","BF NOTE DOWN0",24,!1),this.animation.addByPrefix("singUPmiss","BF NOTE UP MISS",24,!1),this.animation.addByPrefix("singLEFTmiss","BF NOTE LEFT MISS",24,!1),this.animation.addByPrefix("singRIGHTmiss","BF NOTE RIGHT MISS",24,!1),this.animation.addByPrefix("singDOWNmiss","BF NOTE DOWN MISS",24,!1),this.loadOffsetFile(this.curCharacter),this.playAnim("idle"),this.set_flipX(!0);break;case"bf-christmas":t=(t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/bfChristmas.png","IMAGE","shared"),K.getPath("images/characters/bfChristmas.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/bfChristmas.png","IMAGE","shared"),K.getPath("images/bfChristmas.xml","TEXT","shared")),this.set_frames(t),this.animation.addByPrefix("idle","BF idle dance",24,!1),this.animation.addByPrefix("singUP","BF NOTE UP0",24,!1),this.animation.addByPrefix("singLEFT","BF NOTE LEFT0",24,!1),this.animation.addByPrefix("singRIGHT","BF NOTE RIGHT0",24,!1),this.animation.addByPrefix("singDOWN","BF NOTE DOWN0",24,!1),this.animation.addByPrefix("singUPmiss","BF NOTE UP MISS",24,!1),this.animation.addByPrefix("singLEFTmiss","BF NOTE LEFT MISS",24,!1),this.animation.addByPrefix("singRIGHTmiss","BF NOTE RIGHT MISS",24,!1),this.animation.addByPrefix("singDOWNmiss","BF NOTE DOWN MISS",24,!1),this.animation.addByPrefix("hey","BF HEY",24,!1),this.loadOffsetFile(this.curCharacter),this.playAnim("idle"),this.set_flipX(!0);break;case"bf-mii":this.noteSkin="bf",t=(t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/BOYFRIENDMII.png","IMAGE","shared"),K.getPath("images/characters/BOYFRIENDMII.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/BOYFRIENDMII.png","IMAGE","shared"),K.getPath("images/BOYFRIENDMII.xml","TEXT","shared")),this.set_frames(t),Ea.trace(t.frames.length,{fileName:"source/Character.hx",lineNumber:265,className:"Character",methodName:"new"}),this.animation.addByPrefix("idle","BF idle dance",24,!1),this.animation.addByPrefix("singUP","BF NOTE UP0",24,!1),this.animation.addByPrefix("singLEFT","BF NOTE LEFT0",24,!1),this.animation.addByPrefix("singRIGHT","BF NOTE RIGHT0",24,!1),this.animation.addByPrefix("singDOWN","BF NOTE DOWN0",24,!1),this.animation.addByPrefix("singUPmiss","BF NOTE UP MISS",24,!1),this.animation.addByPrefix("singLEFTmiss","BF NOTE LEFT MISS",24,!1),this.animation.addByPrefix("singRIGHTmiss","BF NOTE RIGHT MISS",24,!1),this.animation.addByPrefix("singDOWNmiss","BF NOTE DOWN MISS",24,!1),this.animation.addByPrefix("hey","BF HEY",24,!1),this.animation.addByPrefix("firstDeath","BF dies",24,!1),this.animation.addByPrefix("deathLoop","BF Dead Loop",24,!1),this.animation.addByPrefix("deathConfirm","BF Dead confirm",24,!1),this.animation.addByPrefix("scared","BF idle shaking",24),this.loadOffsetFile(this.curCharacter),this.playAnim("idle"),this.set_flipX(!0);break;case"bf-pixel":this.set_frames((t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/bfPixel.png","IMAGE","shared"),K.getPath("images/characters/bfPixel.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/bfPixel.png","IMAGE","shared"),K.getPath("images/bfPixel.xml","TEXT","shared"))),this.animation.addByPrefix("idle","BF IDLE",24,!1),this.animation.addByPrefix("singUP","BF UP NOTE",24,!1),this.animation.addByPrefix("singLEFT","BF LEFT NOTE",24,!1),this.animation.addByPrefix("singRIGHT","BF RIGHT NOTE",24,!1),this.animation.addByPrefix("singDOWN","BF DOWN NOTE",24,!1),this.animation.addByPrefix("singUPmiss","BF UP MISS",24,!1),this.animation.addByPrefix("singLEFTmiss","BF LEFT MISS",24,!1),this.animation.addByPrefix("singRIGHTmiss","BF RIGHT MISS",24,!1),this.animation.addByPrefix("singDOWNmiss","BF DOWN MISS",24,!1),this.loadOffsetFile(this.curCharacter),this.setGraphicSize(6*this.get_width()|0),this.updateHitbox(),this.playAnim("idle"),(t=this).set_width(t.get_width()-100),(t=this).set_height(t.get_height()-100),this.set_antialiasing(!1),this.set_flipX(!0);break;case"bf-pixel-dead":this.set_frames((t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/bfPixelsDEAD.png","IMAGE","shared"),K.getPath("images/characters/bfPixelsDEAD.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/bfPixelsDEAD.png","IMAGE","shared"),K.getPath("images/bfPixelsDEAD.xml","TEXT","shared"))),this.animation.addByPrefix("singUP","BF Dies pixel",24,!1),this.animation.addByPrefix("firstDeath","BF Dies pixel",24,!1),this.animation.addByPrefix("deathLoop","Retry Loop",24,!1),this.animation.addByPrefix("deathConfirm","RETRY CONFIRM",24,!1),this.animation.play("firstDeath"),this.loadOffsetFile(this.curCharacter),this.playAnim("firstDeath"),this.setGraphicSize(6*this.get_width()|0),this.updateHitbox(),this.set_antialiasing(!1),this.set_flipX(!0);break;case"dad":t=(t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/DADDY_DEAREST.png","IMAGE","shared"),K.getPath("images/characters/DADDY_DEAREST.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/DADDY_DEAREST.png","IMAGE","shared"),K.getPath("images/DADDY_DEAREST.xml","TEXT","shared")),this.set_frames(t),this.animation.addByPrefix("idle","Dad idle dance",24),this.animation.addByPrefix("singUP","Dad Sing Note UP",24),this.animation.addByPrefix("singRIGHT","Dad Sing Note RIGHT",24),this.animation.addByPrefix("singDOWN","Dad Sing Note DOWN",24),this.animation.addByPrefix("singLEFT","Dad Sing Note LEFT",24),this.loadOffsetFile(this.curCharacter),this.playAnim("idle");break;case"eteled1":this.noteSkin="eteled",this.iconColor="FFFFFFFF",t=(t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/eteled1_assets.png","IMAGE","shared"),K.getPath("images/characters/eteled1_assets.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/eteled1_assets.png","IMAGE","shared"),K.getPath("images/eteled1_assets.xml","TEXT","shared")),this.set_frames(t),this.animation.addByPrefix("idle","eteled idle dance",24),this.animation.addByPrefix("singUP","eteled Sing Note UP",24),this.animation.addByPrefix("singRIGHT","eteled Sing Note RIGHT",24),this.animation.addByPrefix("singDOWN","eteled Sing Note DOWN",24),this.animation.addByPrefix("singLEFT","eteled Sing Note LEFT",24),this.animation.addByPrefix("intro","eteled INTRO",24),this.loadOffsetFile(this.curCharacter),this.playAnim("idle");break;case"eteled2":this.noteSkin="eteled",this.iconColor="FF181A22",t=(t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/eteled2_assets.png","IMAGE","shared"),K.getPath("images/characters/eteled2_assets.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/eteled2_assets.png","IMAGE","shared"),K.getPath("images/eteled2_assets.xml","TEXT","shared")),this.set_frames(t),this.animation.addByPrefix("idle","eteled idle dance",24),this.animation.addByPrefix("singUP","eteled Sing Note UP",24),this.animation.addByPrefix("singRIGHT","eteled Sing Note RIGHT",24),this.animation.addByPrefix("singDOWN","eteled Sing Note DOWN",24),this.animation.addByPrefix("singLEFT","eteled Sing Note LEFT",24),this.animation.addByPrefix("scream","eteled SCREAM",24),this.loadOffsetFile(this.curCharacter),this.playAnim("idle");break;case"eteled3":this.noteSkin="eteled",this.iconColor="FF181A22",t=(t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/eteled3_assets.png","IMAGE","shared"),K.getPath("images/characters/eteled3_assets.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/eteled3_assets.png","IMAGE","shared"),K.getPath("images/eteled3_assets.xml","TEXT","shared")),this.set_frames(t),this.animation.addByPrefix("idle","eteled idle dance",24),this.animation.addByPrefix("singUP","eteled Sing Note UP",24),this.animation.addByPrefix("singRIGHT","eteled Sing Note RIGHT",24),this.animation.addByPrefix("singDOWN","eteled Sing Note DOWN",24),this.animation.addByPrefix("singLEFT","eteled Sing Note LEFT",24),this.animation.addByPrefix("scream","eteled SCREAM",24),this.loadOffsetFile(this.curCharacter),this.playAnim("idle");break;case"gf":t=(t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/GF_assets.png","IMAGE","shared"),K.getPath("images/characters/GF_assets.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/GF_assets.png","IMAGE","shared"),K.getPath("images/GF_assets.xml","TEXT","shared")),this.set_frames(t),this.animation.addByPrefix("cheer","GF Cheer",24,!1),this.animation.addByPrefix("singLEFT","GF left note",24,!1),this.animation.addByPrefix("singRIGHT","GF Right Note",24,!1),this.animation.addByPrefix("singUP","GF Up Note",24,!1),this.animation.addByPrefix("singDOWN","GF Down Note",24,!1),this.animation.addByIndices("sad","gf sad",[0,1,2,3,4,5,6,7,8,9,10,11,12],"",24,!1),this.animation.addByIndices("danceLeft","GF Dancing Beat",[30,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],"",24,!1),this.animation.addByIndices("danceRight","GF Dancing Beat",[15,16,17,18,19,20,21,22,23,24,25,26,27,28,29],"",24,!1),this.animation.addByIndices("hairBlow","GF Dancing Beat Hair blowing",[0,1,2,3],"",24),this.animation.addByIndices("hairFall","GF Dancing Beat Hair Landing",[0,1,2,3,4,5,6,7,8,9,10,11],"",24,!1),this.animation.addByPrefix("scared","GF FEAR",24),this.loadOffsetFile(this.curCharacter),this.playAnim("danceRight");break;case"gf-car":t=(t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/gfCar.png","IMAGE","shared"),K.getPath("images/characters/gfCar.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/gfCar.png","IMAGE","shared"),K.getPath("images/gfCar.xml","TEXT","shared")),this.set_frames(t),this.animation.addByIndices("singUP","GF Dancing Beat Hair blowing CAR",[0],"",24,!1),this.animation.addByIndices("danceLeft","GF Dancing Beat Hair blowing CAR",[30,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],"",24,!1),this.animation.addByIndices("danceRight","GF Dancing Beat Hair blowing CAR",[15,16,17,18,19,20,21,22,23,24,25,26,27,28,29],"",24,!1),this.loadOffsetFile(this.curCharacter),this.playAnim("danceRight");break;case"gf-christmas":t=(t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/gfChristmas.png","IMAGE","shared"),K.getPath("images/characters/gfChristmas.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/gfChristmas.png","IMAGE","shared"),K.getPath("images/gfChristmas.xml","TEXT","shared")),this.set_frames(t),this.animation.addByPrefix("cheer","GF Cheer",24,!1),this.animation.addByPrefix("singLEFT","GF left note",24,!1),this.animation.addByPrefix("singRIGHT","GF Right Note",24,!1),this.animation.addByPrefix("singUP","GF Up Note",24,!1),this.animation.addByPrefix("singDOWN","GF Down Note",24,!1),this.animation.addByIndices("sad","gf sad",[0,1,2,3,4,5,6,7,8,9,10,11,12],"",24,!1),this.animation.addByIndices("danceLeft","GF Dancing Beat",[30,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],"",24,!1),this.animation.addByIndices("danceRight","GF Dancing Beat",[15,16,17,18,19,20,21,22,23,24,25,26,27,28,29],"",24,!1),this.animation.addByIndices("hairBlow","GF Dancing Beat Hair blowing",[0,1,2,3],"",24),this.animation.addByIndices("hairFall","GF Dancing Beat Hair Landing",[0,1,2,3,4,5,6,7,8,9,10,11],"",24,!1),this.animation.addByPrefix("scared","GF FEAR",24),this.loadOffsetFile(this.curCharacter),this.playAnim("danceRight");break;case"gf-mii":t=(t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/GF_MII_assets.png","IMAGE","shared"),K.getPath("images/characters/GF_MII_assets.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/GF_MII_assets.png","IMAGE","shared"),K.getPath("images/GF_MII_assets.xml","TEXT","shared")),this.set_frames(t),this.animation.addByIndices("sad","gf sad",[0,1,2,3,4,5,6,7,8,9,10,11,12],"",24,!1),this.animation.addByIndices("danceLeft","GF Dancing Beat",[30,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],"",24,!1),this.animation.addByIndices("danceRight","GF Dancing Beat",[15,16,17,18,19,20,21,22,23,24,25,26,27,28,29],"",24,!1),this.loadOffsetFile(this.curCharacter),this.playAnim("danceRight");break;case"gf-pixel":t=(t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/gfPixel.png","IMAGE","shared"),K.getPath("images/characters/gfPixel.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/gfPixel.png","IMAGE","shared"),K.getPath("images/gfPixel.xml","TEXT","shared")),this.set_frames(t),this.animation.addByIndices("singUP","GF IDLE",[2],"",24,!1),this.animation.addByIndices("danceLeft","GF IDLE",[30,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],"",24,!1),this.animation.addByIndices("danceRight","GF IDLE",[15,16,17,18,19,20,21,22,23,24,25,26,27,28,29],"",24,!1),this.loadOffsetFile(this.curCharacter),this.playAnim("danceRight"),this.setGraphicSize(this.get_width()*y.daPixelZoom|0),this.updateHitbox(),this.set_antialiasing(!1);break;case"mom":t=(t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/Mom_Assets.png","IMAGE","shared"),K.getPath("images/characters/Mom_Assets.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/Mom_Assets.png","IMAGE","shared"),K.getPath("images/Mom_Assets.xml","TEXT","shared")),this.set_frames(t),this.animation.addByPrefix("idle","Mom Idle",24,!1),this.animation.addByPrefix("singUP","Mom Up Pose",24,!1),this.animation.addByPrefix("singDOWN","MOM DOWN POSE",24,!1),this.animation.addByPrefix("singLEFT","Mom Left Pose",24,!1),this.animation.addByPrefix("singRIGHT","Mom Pose Left",24,!1),this.loadOffsetFile(this.curCharacter),this.playAnim("idle");break;case"mom-car":t=(t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/momCar.png","IMAGE","shared"),K.getPath("images/characters/momCar.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/momCar.png","IMAGE","shared"),K.getPath("images/momCar.xml","TEXT","shared")),this.set_frames(t),this.animation.addByPrefix("idle","Mom Idle",24,!1),this.animation.addByPrefix("singUP","Mom Up Pose",24,!1),this.animation.addByPrefix("singDOWN","MOM DOWN POSE",24,!1),this.animation.addByPrefix("singLEFT","Mom Left Pose",24,!1),this.animation.addByPrefix("singRIGHT","Mom Pose Left",24,!1),this.loadOffsetFile(this.curCharacter),this.playAnim("idle");break;case"monster":t=(t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/Monster_Assets.png","IMAGE","shared"),K.getPath("images/characters/Monster_Assets.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/Monster_Assets.png","IMAGE","shared"),K.getPath("images/Monster_Assets.xml","TEXT","shared")),this.set_frames(t),this.animation.addByPrefix("idle","monster idle",24,!1),this.animation.addByPrefix("singUP","monster up note",24,!1),this.animation.addByPrefix("singDOWN","monster down",24,!1),this.animation.addByPrefix("singLEFT","Monster left note",24,!1),this.animation.addByPrefix("singRIGHT","Monster Right note",24,!1),this.loadOffsetFile(this.curCharacter),this.playAnim("idle");break;case"monster-christmas":t=(t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/monsterChristmas.png","IMAGE","shared"),K.getPath("images/characters/monsterChristmas.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/monsterChristmas.png","IMAGE","shared"),K.getPath("images/monsterChristmas.xml","TEXT","shared")),this.set_frames(t),this.animation.addByPrefix("idle","monster idle",24,!1),this.animation.addByPrefix("singUP","monster up note",24,!1),this.animation.addByPrefix("singDOWN","monster down",24,!1),this.animation.addByPrefix("singLEFT","Monster left note",24,!1),this.animation.addByPrefix("singRIGHT","Monster Right note",24,!1),this.loadOffsetFile(this.curCharacter),this.playAnim("idle");break;case"parents-christmas":this.set_frames((t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/mom_dad_christmas_assets.png","IMAGE","shared"),K.getPath("images/characters/mom_dad_christmas_assets.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/mom_dad_christmas_assets.png","IMAGE","shared"),K.getPath("images/mom_dad_christmas_assets.xml","TEXT","shared"))),this.animation.addByPrefix("idle","Parent Christmas Idle",24,!1),this.animation.addByPrefix("singUP","Parent Up Note Dad",24,!1),this.animation.addByPrefix("singDOWN","Parent Down Note Dad",24,!1),this.animation.addByPrefix("singLEFT","Parent Left Note Dad",24,!1),this.animation.addByPrefix("singRIGHT","Parent Right Note Dad",24,!1),this.animation.addByPrefix("singUP-alt","Parent Up Note Mom",24,!1),this.animation.addByPrefix("singDOWN-alt","Parent Down Note Mom",24,!1),this.animation.addByPrefix("singLEFT-alt","Parent Left Note Mom",24,!1),this.animation.addByPrefix("singRIGHT-alt","Parent Right Note Mom",24,!1),this.loadOffsetFile(this.curCharacter),this.playAnim("idle");break;case"pico":t=(t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/Pico_FNF_assetss.png","IMAGE","shared"),K.getPath("images/characters/Pico_FNF_assetss.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/Pico_FNF_assetss.png","IMAGE","shared"),K.getPath("images/Pico_FNF_assetss.xml","TEXT","shared")),this.set_frames(t),this.animation.addByPrefix("idle","Pico Idle Dance",24),this.animation.addByPrefix("singUP","pico Up note0",24,!1),this.animation.addByPrefix("singDOWN","Pico Down Note0",24,!1),i?(this.animation.addByPrefix("singLEFT","Pico NOTE LEFT0",24,!1),this.animation.addByPrefix("singRIGHT","Pico Note Right0",24,!1),this.animation.addByPrefix("singRIGHTmiss","Pico Note Right Miss",24,!1),this.animation.addByPrefix("singLEFTmiss","Pico NOTE LEFT miss",24,!1)):(this.animation.addByPrefix("singLEFT","Pico Note Right0",24,!1),this.animation.addByPrefix("singRIGHT","Pico NOTE LEFT0",24,!1),this.animation.addByPrefix("singRIGHTmiss","Pico NOTE LEFT miss",24,!1),this.animation.addByPrefix("singLEFTmiss","Pico Note Right Miss",24,!1)),this.animation.addByPrefix("singUPmiss","pico Up note miss",24),this.animation.addByPrefix("singDOWNmiss","Pico Down Note MISS",24),this.loadOffsetFile(this.curCharacter),this.playAnim("idle"),this.set_flipX(!0);break;case"senpai":this.set_frames((t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/senpai.png","IMAGE","shared"),K.getPath("images/characters/senpai.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/senpai.png","IMAGE","shared"),K.getPath("images/senpai.xml","TEXT","shared"))),this.animation.addByPrefix("idle","Senpai Idle",24,!1),this.animation.addByPrefix("singUP","SENPAI UP NOTE",24,!1),this.animation.addByPrefix("singLEFT","SENPAI LEFT NOTE",24,!1),this.animation.addByPrefix("singRIGHT","SENPAI RIGHT NOTE",24,!1),this.animation.addByPrefix("singDOWN","SENPAI DOWN NOTE",24,!1),this.loadOffsetFile(this.curCharacter),this.playAnim("idle"),this.setGraphicSize(6*this.get_width()|0),this.updateHitbox(),this.set_antialiasing(!1);break;case"senpai-angry":this.set_frames((t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/senpai.png","IMAGE","shared"),K.getPath("images/characters/senpai.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/senpai.png","IMAGE","shared"),K.getPath("images/senpai.xml","TEXT","shared"))),this.animation.addByPrefix("idle","Angry Senpai Idle",24,!1),this.animation.addByPrefix("singUP","Angry Senpai UP NOTE",24,!1),this.animation.addByPrefix("singLEFT","Angry Senpai LEFT NOTE",24,!1),this.animation.addByPrefix("singRIGHT","Angry Senpai RIGHT NOTE",24,!1),this.animation.addByPrefix("singDOWN","Angry Senpai DOWN NOTE",24,!1),this.loadOffsetFile(this.curCharacter),this.playAnim("idle"),this.setGraphicSize(6*this.get_width()|0),this.updateHitbox(),this.set_antialiasing(!1);break;case"spirit":this.set_frames((t=null==(t=!1)?!1:t)?La.fromSpriteSheetPacker(K.getPath("images/characters/spirit.png","IMAGE",null),K.getPath("images/characters/spirit.txt","TEXT","shared")):La.fromSpriteSheetPacker(K.getPath("images/spirit.png","IMAGE","shared"),K.getPath("images/spirit.txt","TEXT","shared"))),this.animation.addByPrefix("idle","idle spirit_",24,!1),this.animation.addByPrefix("singUP","up_",24,!1),this.animation.addByPrefix("singRIGHT","right_",24,!1),this.animation.addByPrefix("singLEFT","left_",24,!1),this.animation.addByPrefix("singDOWN","spirit down_",24,!1),this.loadOffsetFile(this.curCharacter),this.setGraphicSize(6*this.get_width()|0),this.updateHitbox(),this.playAnim("idle"),this.set_antialiasing(!1);break;case"spooky":t=(t=null==(t=!0)?!1:t)?La.fromSparrow(K.getPath("images/characters/spooky_kids_assets.png","IMAGE","shared"),K.getPath("images/characters/spooky_kids_assets.xml","TEXT","shared")):La.fromSparrow(K.getPath("images/spooky_kids_assets.png","IMAGE","shared"),K.getPath("images/spooky_kids_assets.xml","TEXT","shared")),this.set_frames(t),this.animation.addByPrefix("singUP","spooky UP NOTE",24,!1),this.animation.addByPrefix("singDOWN","spooky DOWN note",24,!1),this.animation.addByPrefix("singLEFT","note sing left",24,!1),this.animation.addByPrefix("singRIGHT","spooky sing right",24,!1),this.animation.addByIndices("danceLeft","spooky dance idle",[0,2,6],"",12,!1),this.animation.addByIndices("danceRight","spooky dance idle",[8,10,12,14],"",12,!1),this.loadOffsetFile(this.curCharacter),this.playAnim("danceRight")}this.dance(),i&&(this.set_flipX(!this.flipX),Y.startsWith(this.curCharacter,"bf")||(i=this.animation._animations.h.singRIGHT.frames,this.animation._animations.h.singRIGHT.frames=this.animation._animations.h.singLEFT.frames,this.animation._animations.h.singLEFT.frames=i,null!=this.animation._animations.h.singRIGHTmiss&&(i=this.animation._animations.h.singRIGHTmiss.frames,this.animation._animations.h.singRIGHTmiss.frames=this.animation._animations.h.singLEFTmiss.frames,this.animation._animations.h.singLEFTmiss.frames=i)))};r.Character=Fd,Fd.__name__="Character",Fd.__super__=O,Fd.prototype=E(O.prototype,{animOffsets:null,debugMode:null,isPlayer:null,curCharacter:null,holdTimer:null,iconColor:null,noteSkin:null,loadOffsetFile:function(t,e){t=cd.coolTextFile(K.getPath("images/characters/"+t+"Offsets.txt","TEXT",e=null==e?"shared":e)),e=0;for(var n=t.length;e<n;){var s=t[s=e++].split(" ");this.addOffset(s[0],U.parseInt(s[1]),U.parseInt(s[2]))}},update:function(t){var e;Y.startsWith(this.curCharacter,"bf")||(Y.startsWith(this.animation._curAnim.name,"sing")&&(this.holdTimer+=t),e=4,"dad"==this.curCharacter&&(e=6.1),this.holdTimer>=T.stepCrochet*e*.001&&(Ea.trace("dance",{fileName:"source/Character.hx",lineNumber:584,className:"Character",methodName:"update"}),this.dance(),this.holdTimer=0)),"gf"==this.curCharacter&&"hairFall"==this.animation._curAnim.name&&this.animation._curAnim.finished&&this.playAnim("danceRight"),O.prototype.update.call(this,t)},danced:null,dance:function(t){if(null==t&&(t=!1),!this.debugMode)switch(this.curCharacter){case"gf":case"gf-car":case"gf-christmas":case"gf-mii":case"gf-pixel":Y.startsWith(this.animation._curAnim.name,"hair")||((this.danced=!this.danced)?this.playAnim("danceRight"):this.playAnim("danceLeft"));break;case"spooky":(this.danced=!this.danced)?this.playAnim("danceRight"):this.playAnim("danceLeft");break;default:this.playAnim("idle",t)}},playAnim:function(t,e,n,s){this.animation.play(t,e=null==e?!1:e,n=null==n?!1:n,s=null==s?0:s),e=this.animOffsets.h[t],Object.prototype.hasOwnProperty.call(this.animOffsets.h,t)?this.offset.set(e[0],e[1]):this.offset.set(0,0),"gf"==this.curCharacter&&("singLEFT"==t?this.danced=!0:"singRIGHT"==t&&(this.danced=!1),"singUP"==t||"singDOWN"==t)&&(this.danced=!this.danced)},addOffset:function(t,e,n){this.animOffsets.h[t]=[e=null==e?0:e,n=null==n?0:n]},__class__:Fd});var Pc=function(t,e,n){null==n&&(n="bf"),this.stunned=!1,Fd.call(this,t,e,n,!0)};r.Boyfriend=Pc,Pc.__name__="Boyfriend",Pc.__super__=Fd,Pc.prototype=E(Fd.prototype,{stunned:null,update:function(t){this.debugMode||(Y.startsWith(this.animation._curAnim.name,"sing")?this.holdTimer+=t:this.holdTimer=0,Y.endsWith(this.animation._curAnim.name,"miss")&&this.animation._curAnim.finished&&!this.debugMode&&this.playAnim("idle",!0,!1,10),"firstDeath"==this.animation._curAnim.name&&this.animation._curAnim.finished&&this.playAnim("deathLoop")),Fd.prototype.update.call(this,t)},__class__:Pc});var yb=function(t){null==t&&(t=0),this.length=this._marker=0,ca.call(this),this.members=[],this.set_maxSize(0|Math.abs(t)),this.flixelType=2};r["flixel.group.FlxTypedGroup"]=yb,yb.__name__="flixel.group.FlxTypedGroup",yb.overlaps=function(t,e,n,s,i,a){var r=!1;if(null!=e)for(var l,o=0,h=e.length;o<h;)if(null!=(l=e.members[o++])&&t(l,n,s,i,a)){r=!0;break}return r},yb.resolveGroup=function(t){var e=null;return null!=t&&(2==t.flixelType?e=t:4==t.flixelType&&(e=t.group)),e},yb.__super__=ca,yb.prototype=E(ca.prototype,{members:null,maxSize:null,length:null,_memberAdded:null,_memberRemoved:null,_marker:null,destroy:function(){if(ca.prototype.destroy.call(this),Da.destroy(this._memberAdded),Da.destroy(this._memberRemoved),null!=this.members){for(var t,e=0;e<this.length;)null!=(t=this.members[e++])&&t.destroy();this.members=null}},update:function(t){for(var e,n=0;n<this.length;)null!=(e=this.members[n++])&&e.exists&&e.active&&e.update(t)},draw:function(){var t=0,e=gc._defaultCameras;for(null!=this.get_cameras()&&(gc._defaultCameras=this.get_cameras());t<this.length;){var n=this.members[t++];null!=n&&n.exists&&n.visible&&n.draw()}gc._defaultCameras=e},add:function(t){if(null==t)return null;if(0<=this.members.indexOf(t))return t;var e=this.getFirstNull();return-1!=e?(this.members[e]=t,e>=this.length&&(this.length=e+1),null!=this._memberAdded&&this._memberAdded.dispatch(t)):0<this.maxSize&&this.length>=this.maxSize||(this.members.push(t),this.length++,null!=this._memberAdded&&this._memberAdded.dispatch(t)),t},insert:function(t,e){return null==e?null:(0<=this.members.indexOf(e)||(t<this.length&&null==this.members[t]?(this.members[t]=e,null!=this._memberAdded&&this._memberAdded.dispatch(e)):0<this.maxSize&&this.length>=this.maxSize||(this.members.splice(t,0,e),this.length++,null!=this._memberAdded&&this._memberAdded.dispatch(e))),e)},recycle:function(t,e,n,s){return null==s&&(s=!0),null==n&&(n=!1),0<this.maxSize?this.length<this.maxSize?((s=null)!=e?(s=e(),this.add(s)):null!=t&&(s=Jb.createInstance(t,[]),this.add(s)),s):(n=this.members[this._marker++],this._marker>=this.maxSize&&(this._marker=0),s&&n.revive(),n):null!=(n=this.getFirstAvailable(t,n))?(s&&n.revive(),n):((s=null)!=e?(s=e(),this.add(s)):null!=t&&(s=Jb.createInstance(t,[]),this.add(s)),s)},recycleCreateObject:function(t,e){var n=null;return null!=e?(n=e(),this.add(n)):null!=t&&(n=Jb.createInstance(t,[]),this.add(n)),n},remove:function(t,e){if(null==e&&(e=!1),null==this.members)return null;var n=this.members.indexOf(t);return n<0?null:(e?(this.members.splice(n,1),this.length--):this.members[n]=null,null!=this._memberRemoved&&this._memberRemoved.dispatch(t),t)},replace:function(t,e){var n=this.members.indexOf(t);return n<0?null:(this.members[n]=e,null!=this._memberRemoved&&this._memberRemoved.dispatch(t),null!=this._memberAdded&&this._memberAdded.dispatch(e),e)},sort:function(n,t){var s=t=null==t?-1:t;this.members.sort(function(t,e){return n(s,t,e)})},getFirstAvailable:function(t,e){null==e&&(e=!1);for(var n,s=0;s<this.length;)if(!(null==(n=this.members[s++])||n.exists||null!=t&&!za.__instanceof(n,t)||e&&za.getClass(n).__name__!=t.__name__))return this.members[s-1];return null},getFirstNull:function(){for(var t=0;t<this.length;){if(null==this.members[t])return t;++t}return-1},getFirstExisting:function(){for(var t,e=0;e<this.length;)if(null!=(t=this.members[e++])&&t.exists)return t;return null},getFirstAlive:function(){for(var t,e=0;e<this.length;)if(null!=(t=this.members[e++])&&t.exists&&t.alive)return t;return null},getFirstDead:function(){for(var t,e=0;e<this.length;)if(null!=(t=this.members[e++])&&!t.alive)return t;return null},countLiving:function(){for(var t,e=0,n=-1;e<this.length;)null!=(t=this.members[e++])&&(n<0&&(n=0),t.exists&&t.alive&&++n);return n},countDead:function(){for(var t,e=0,n=-1;e<this.length;)null!=(t=this.members[e++])&&(n<0&&(n=0),t.alive||++n);return n},getRandom:function(t,e){return(e=null==e?0:e)<=0&&(e=this.length),n.random.getObject_flixel_group_FlxTypedGroup_T(this.members,null,t=(t=null==t?0:t)<0?0:t,e)},clear:function(){if(this.length=0,null!=this._memberRemoved)for(var t=0,e=this.members;t<e.length;){var n=e[t];++t,null!=n&&this._memberRemoved.dispatch(n)}zd.clearArray(this.members)},kill:function(){for(var t,e=0;e<this.length;)null!=(t=this.members[e++])&&t.exists&&t.kill();ca.prototype.kill.call(this)},revive:function(){for(var t,e=0;e<this.length;)null==(t=this.members[e++])||t.exists||t.revive();ca.prototype.revive.call(this)},iterator:function(t){return new me(this.members,t)},forEach:function(t,e){null==e&&(e=!1);for(var n,s,i=0;i<this.length;)null!=(s=this.members[i++])&&(!e||null!=(n=yb.resolveGroup(s))&&n.forEach(t,e),t(s))},forEachAlive:function(t,e){null==e&&(e=!1);for(var n,s,i=0;i<this.length;)null!=(s=this.members[i++])&&s.exists&&s.alive&&(!e||null!=(n=yb.resolveGroup(s))&&n.forEachAlive(t,e),t(s))},forEachDead:function(t,e){null==e&&(e=!1);for(var n,s,i=0;i<this.length;)null==(s=this.members[i++])||s.alive||(!e||null!=(n=yb.resolveGroup(s))&&n.forEachDead(t,e),t(s))},forEachExists:function(t,e){null==e&&(e=!1);for(var n,s,i=0;i<this.length;)null!=(s=this.members[i++])&&s.exists&&(!e||null!=(n=yb.resolveGroup(s))&&n.forEachExists(t,e),t(s))},forEachOfType:function(t,e,n){null==n&&(n=!1);for(var s,i,a=0;a<this.length;)null!=(i=this.members[a++])&&(!n||null!=(s=yb.resolveGroup(i))&&s.forEachOfType(t,e,n),za.__instanceof(i,t)&&e(i))},set_maxSize:function(t){if(this.maxSize=0|Math.abs(t),this._marker>=this.maxSize&&(this._marker=0),0==this.maxSize||null==this.members||this.maxSize>=this.length)return this.maxSize;t=this.maxSize;for(var e,n=this.length;t<n;)null!=(e=this.members[t++])&&(null!=this._memberRemoved&&this._memberRemoved.dispatch(e),e.destroy());return zd.setLength_flixel_group_FlxTypedGroup_T(this.members,this.maxSize),this.length=this.members.length,this.maxSize},get_memberAdded:function(){return null==this._memberAdded&&(this._memberAdded=new Uf),this._memberAdded},get_memberRemoved:function(){return null==this._memberRemoved&&(this._memberRemoved=new Uf),this._memberRemoved},__class__:yb,__properties__:E(ca.prototype.__properties__,{get_memberRemoved:"get_memberRemoved",get_memberAdded:"get_memberAdded",set_maxSize:"set_maxSize"})});var lc=function(t){this._requestSubStateReset=!1,this.persistentDraw=this.destroySubStates=!0,this.persistentUpdate=!1,yb.call(this,t)};r["flixel.FlxState"]=lc,lc.__name__="flixel.FlxState",lc.__super__=yb,lc.prototype=E(yb.prototype,{persistentUpdate:null,persistentDraw:null,destroySubStates:null,subState:null,_requestedSubState:null,_requestSubStateReset:null,_subStateOpened:null,_subStateClosed:null,create:function(){},draw:function(){!this.persistentDraw&&null!=this.subState||yb.prototype.draw.call(this),null!=this.subState&&this.subState.draw()},openSubState:function(t){this._requestSubStateReset=!0,this._requestedSubState=t},closeSubState:function(){this._requestSubStateReset=!0},resetSubState:function(){null!=this.subState&&(null!=this.subState.closeCallback&&this.subState.closeCallback(),null!=this._subStateClosed&&this._subStateClosed.dispatch(this.subState),this.destroySubStates&&this.subState.destroy()),this.subState=this._requestedSubState,(this._requestedSubState=null)!=this.subState&&(this.persistentUpdate||n.inputs.onStateSwitch(),(this.subState._parentState=this).subState._created||(this.subState._created=!0,this.subState.create()),null!=this.subState.openCallback&&this.subState.openCallback(),null!=this._subStateOpened&&this._subStateOpened.dispatch(this.subState))},destroy:function(){Da.destroy(this._subStateOpened),Da.destroy(this._subStateClosed),null!=this.subState&&(this.subState.destroy(),this.subState=null),yb.prototype.destroy.call(this)},switchTo:function(t){return!0},onFocusLost:function(){},onFocus:function(){},onResize:function(t,e){},tryUpdate:function(t){!this.persistentUpdate&&null!=this.subState||this.update(t),this._requestSubStateReset&&(this._requestSubStateReset=!1,this.resetSubState()),null!=this.subState&&this.subState.tryUpdate(t)},get_bgColor:function(){return n.cameras.get_bgColor()},set_bgColor:function(t){return n.cameras.set_bgColor(t)},get_subStateOpened:function(){return null==this._subStateOpened&&(this._subStateOpened=new Uf),this._subStateOpened},get_subStateClosed:function(){return null==this._subStateClosed&&(this._subStateClosed=new Uf),this._subStateClosed},__class__:lc,__properties__:E(yb.prototype.__properties__,{get_subStateClosed:"get_subStateClosed",get_subStateOpened:"get_subStateOpened",set_bgColor:"set_bgColor",get_bgColor:"get_bgColor"})});var F=function(t,e){this.transOutFinished=this._exiting=!1,this.transIn=t,this.transOut=e,null==this.transIn&&null!=F.defaultTransIn&&(this.transIn=F.defaultTransIn),null==this.transOut&&null!=F.defaultTransOut&&(this.transOut=F.defaultTransOut),lc.call(this)};r["flixel.addons.transition.FlxTransitionableState"]=F,F.__name__="flixel.addons.transition.FlxTransitionableState",F.__super__=lc,F.prototype=E(lc.prototype,{transIn:null,transOut:null,destroy:function(){lc.prototype.destroy.call(this),this._onExit=this.transOut=this.transIn=null},create:function(){lc.prototype.create.call(this),this.transitionIn()},switchTo:function(t){return!this.get_hasTransOut()||(this._exiting||this.transitionToState(t),this.transOutFinished)},transitionToState:function(t){this._exiting=!0,this.transitionOut(function(){n.game._state.switchTo(t)&&(n.game._requestedState=t)}),F.skipNextTransOut&&(F.skipNextTransOut=!1,this.finishTransOut())},transitionIn:function(){var t;null!=this.transIn&&"none"!=this.transIn.type&&(F.skipNextTransIn?(F.skipNextTransIn=!1,null!=this.finishTransIn&&this.finishTransIn()):((t=this.createTransition(this.transIn)).setStatus(3),this.openSubState(t),t.set_finishCallback(z(this,this.finishTransIn)),t.start(1)))},transitionOut:function(t){this._onExit=t,this.get_hasTransOut()?((t=this.createTransition(this.transOut)).setStatus(2),this.openSubState(t),t.set_finishCallback(z(this,this.finishTransOut)),t.start(0)):this._onExit()},transOutFinished:null,_exiting:null,_onExit:null,get_hasTransIn:function(){return null!=this.transIn&&"none"!=this.transIn.type},get_hasTransOut:function(){return null!=this.transOut&&"none"!=this.transOut.type},createTransition:function(t){switch(t.type){case"fade":case"tiles":return new Bl(t);default:return null}},finishTransIn:function(){this.closeSubState()},finishTransOut:function(){this.transOutFinished=!0,this._exiting||this.closeSubState(),null!=this._onExit&&this._onExit()},__class__:F,__properties__:E(lc.prototype.__properties__,{get_hasTransOut:"get_hasTransOut",get_hasTransIn:"get_hasTransIn"})});var Va=function(){};r["flixel.addons.ui.interfaces.IEventGetter"]=Va,Va.__name__="flixel.addons.ui.interfaces.IEventGetter",Va.__isInterface__=!0,Va.prototype={getEvent:null,getRequest:null,__class__:Va};var M=function(){};r["flixel.addons.ui.interfaces.IFlxUIState"]=M,M.__name__="flixel.addons.ui.interfaces.IFlxUIState",M.__isInterface__=!0,M.__interfaces__=[Va],M.prototype={forceFocus:null,tooltips:null,cursor:null,_tongue:null,__class__:M};var J=function(t,e){this.getTextFallback=null,this._reload_countdown=0,this.reload_ui_on_resize=this._reload=!1,this._xml_id="",this.hideCursorOnSubstate=this._cursorHidden=!1,this.cursor=null,F.call(this,t,e)};r["flixel.addons.ui.FlxUIState"]=J,J.__name__="flixel.addons.ui.FlxUIState",J.__interfaces__=[M,Va],J.__super__=F,J.prototype=E(F.prototype,{destroyed:null,cursor:null,hideCursorOnSubstate:null,_cursorHidden:null,tooltips:null,_xml_id:null,_makeCursor:null,_ui_vars:null,_ui:null,_tongue:null,reload_ui_on_resize:null,_reload:null,_reload_countdown:null,getTextFallback:null,create:function(){if(null!=J.static_tongue&&(this._tongue=J.static_tongue),1==this._makeCursor&&(this.cursor=this.createCursor()),this.tooltips=new Cl(this),this._ui=this.createUI(null,this,null,this._tongue),this.add(this._ui),null!=this.getTextFallback&&(this._ui.getTextFallback=this.getTextFallback),null!=this._xml_id&&""!=this._xml_id){var t=null;try{t=I.xml(this._xml_id)}catch(t){tb.lastError=t;var e=H.caught(t).unwrap();if("string"!=typeof e)throw t}if(null==t)try{t=I.xml(this._xml_id,"xml",!0,"")}catch(t){if(tb.lastError=t,"string"!=typeof(e=H.caught(t).unwrap()))throw t}null!=t&&this.loadUIFromData(t)}else this.loadUIFromData(null);null!=this.cursor&&null!=this._ui&&(this.add(this.cursor),this.cursor.addWidgetsFromUI(this._ui),this.cursor.findVisibleLocation(0)),this.tooltips.init(),F.prototype.create.call(this),this.cleanup()},update:function(t){F.prototype.update.call(this,t),null!=this.tooltips&&this.tooltips.update(t),this._reload&&0<this._reload_countdown&&(this._reload_countdown--,0==this._reload_countdown&&this.reloadUI())},cleanup:function(){this._ui.cleanup()},_cleanupUIVars:function(){if(null!=this._ui_vars){for(var t=ya.keysIterator(this._ui_vars.h);t.hasNext();){var e=t.next(),n=this._ui_vars;Object.prototype.hasOwnProperty.call(n.h,e)&&delete n.h[e]}this._ui_vars=null}},setUIVariable:function(t,e){null!=this._ui?this._ui.setVariable(t,e):(null==this._ui_vars&&(this._ui_vars=new ya),this._ui_vars.h[t]=e)},resizeScreen:function(t,e){},openSubState:function(t){null!=this.cursor&&this.hideCursorOnSubstate&&1==this.cursor.visible&&(this._cursorHidden=!0,this.cursor.set_visible(!1)),F.prototype.openSubState.call(this,t)},closeSubState:function(){null!=this.cursor&&this.hideCursorOnSubstate&&this._cursorHidden&&(this._cursorHidden=!1,this.cursor.set_visible(!0)),F.prototype.closeSubState.call(this)},onResize:function(t,e){this.reload_ui_on_resize&&(n.scaleMode.onMeasure(t,e),this._reload_countdown=1,this._reload=!0)},onShowTooltip:function(t){},destroy:function(){this.destroyed=!0,null!=this._ui&&(this._ui.destroy(),this.remove(this._ui,!0),this._ui=null),null!=this.tooltips&&(this.tooltips.destroy(),this.tooltips=null),F.prototype.destroy.call(this)},forceFocus:function(t,e){null!=this._ui&&(t?this._ui.set_focus(e):this._ui.set_focus(null))},onCursorEvent:function(t,e){this.getEvent(t,e,null)},getEvent:function(t,e,n,s){},getRequest:function(t,e,n,s){return null},getText:function(t,e,n){return null==n&&(n=!0),null==e&&(e="ui"),null!=this._tongue?this._tongue.get(t,e,n):null!=this.getTextFallback?this.getTextFallback(t,e,n):t},createCursor:function(){return new Vf(z(this,this.onCursorEvent))},createUI:function(t,e,n,s,i){return t=new Ob(t,e,n,s,i=null==i?"":i,this._ui_vars),this._cleanupUIVars(),t},loadUIFromData:function(t){this._ui.load(t)},reloadUI:function(t){null!=this._ui&&(this.remove(this._ui,!0),this._ui.destroy(),this._ui=null),this._ui=this.createUI(null,this,null,this._tongue),this.add(this._ui),null!=(t=I.xml(this._xml_id))&&this.loadUIFromData(t),this._reload=!1,this._reload_countdown=0},__class__:J});var da=function(t,e){this.skippedFrames=0;var n=16777215&(-256&(-65281&(-16711681&(n=qb._new())|9699328)|0)|211)|-16777216,s=16777215&(-256&(-65281&(-16711681&(s=qb._new())|4915200)|0)|130)|-16777216,i=16777215&(-256&(-65281&(-16711681&(i=qb._new())|0)|0)|255)|-16777216,a=16777215&(-256&(-65281&(-16711681&(a=qb._new())|0)|65280)|0)|-16777216,r=16777215&(-256&(-65281&(-16711681&(r=qb._new())|16711680)|65280)|0)|-16777216,l=16777215&(-256&(-65281&(-16711681&(l=qb._new())|16711680)|32512)|0)|-16777216,o=qb._new();this.array=[n,s,i,a,r,l,16777215&(-256&(-65281&(-16711681&o|16711680)|0)|0)|-16777216],this.lastBeat=this.lastStep=this.curStep=this.curBeat=this.curDecimalBeat=0,J.call(this,t,e)};r.MusicBeatState=da,da.__name__="MusicBeatState",da.__super__=J,da.prototype=E(J.prototype,{lastBeat:null,lastStep:null,curStep:null,curBeat:null,curDecimalBeat:null,get_controls:function(){return Kb.player1.controls},create:function(){ac.clearTimings(),za.__cast(Fa.get_current().getChildAt(0),xb).setFPSCap(n.save.data.fpsCap),null!=this.transIn&&Ea.trace("reg "+U.string(this.transIn.region),{fileName:"source/MusicBeatState.hx",lineNumber:31,className:"MusicBeatState",methodName:"create"}),J.prototype.create.call(this)},array:null,skippedFrames:null,update:function(t){if(T.songPosition<0)this.curDecimalBeat=0;else if(1<ac.AllTimings.length){var e=ac.getTimingAtTimestamp(T.songPosition);T.crochet=60/e.bpm*1e3;var s=60/e.bpm*1e3/4,i=1e3*e.startTime;if(this.curDecimalBeat=e.startBeat+e.bpm/60*(T.songPosition/1e3-e.startTime),0<=(s=Math.floor(e.startStep+(T.songPosition-i)/s)))if(s>this.curStep)for(e=this.curStep;e<s;)e++,this.curStep++,this.updateBeat(),this.stepHit();else s<this.curStep&&(this.curStep=s,this.updateBeat(),this.stepHit())}else{if(this.curDecimalBeat=T.songPosition/1e3*(T.bpm/60),0<=(s=Math.floor(T.songPosition/T.stepCrochet)))if(s>this.curStep)for(e=this.curStep;e<s;)e++,this.curStep++,this.updateBeat(),this.stepHit();else s<this.curStep&&(this.curStep=s,this.updateBeat(),this.stepHit());T.crochet=60/T.bpm*1e3}n.save.data.fpsRain&&6<=this.skippedFrames?(da.currentColor>=this.array.length&&(da.currentColor=0),za.__cast(Fa.get_current().getChildAt(0),xb).changeFPSColor(this.array[da.currentColor]),da.currentColor++,this.skippedFrames=0):this.skippedFrames++,z(D=za.__cast(Fa.get_current().getChildAt(0),xb),D.getFPSCap)!=n.save.data.fpsCap&&n.save.data.fpsCap<=290&&za.__cast(Fa.get_current().getChildAt(0),xb).setFPSCap(n.save.data.fpsCap),J.prototype.update.call(this,t)},updateBeat:function(){this.lastBeat=this.curBeat,this.curBeat=Math.floor(this.curStep/4)},updateCurStep:function(){for(var t={stepTime:0,songTime:0,bpm:0},e=0,n=T.bpmChangeMap.length;e<n;){var s=e++;T.songPosition>=T.bpmChangeMap[s].songTime&&(t=T.bpmChangeMap[s])}return t.stepTime+Math.floor((T.songPosition-t.songTime)/T.stepCrochet)},stepHit:function(){0==this.curStep%4&&this.beatHit()},beatHit:function(){},fancyOpenURL:function(t){var e="";new Xb("^https?://","").match(t)||(e="http://"),Fa.getURL(new tj(e+t),"_blank")},__class__:da,__properties__:E(J.prototype.__properties__,{get_controls:"get_controls"})});var X=function(t,e){this.daSpacing=.3,this.once=!1,this.lastUpdatedSection=null,this.diff=this.changeIndex=this.currentBPM=this.lastBPM=this.updateFrame=0,this.updatedSection=this.writingNotes=this.doSnapShit=!1,this.Typeables=[],this.chartEvents=[],this.currentEventPosition=0,this.currentSelectedEventName=this.savedType=this.savedValue="",this.claps=[],this.height=0,this.player1=new Pc(0,0,"bf"),this.player2=new Fd(0,0,"dad"),this.tempBpm=0,this.defaultSnap=!0,this.subDivisions=1,this.GRID_SIZE=40,this.amountSteps=0,this.curSong="Dad Battle",this.curSection=0,this.beatsShown=this.zoomFactor=1,this.deezNuts=new ld,this.snap=16,this.playClaps=!1,da.call(this,t,e)};r.ChartingState=X,X.__name__="ChartingState",X.instance=null,X._song=null,X.leftIcon=null,X.rightIcon=null,X.__super__=da,X.prototype=E(da.prototype,{_file:null,playClaps:null,snap:null,deezNuts:null,UI_box:null,UI_options:null,beatsShown:null,zoomFactor:null,curSection:null,bpmTxt:null,strumLine:null,curSong:null,amountSteps:null,bullshitUI:null,writingNotesText:null,highlight:null,GRID_SIZE:null,subDivisions:null,defaultSnap:null,dummyArrow:null,curRenderedNotes:null,curRenderedSustains:null,gridBG:null,sectionRenderes:null,typingShit:null,curSelectedNote:null,tempBpm:null,gridBlackLine:null,vocals:null,player2:null,player1:null,height:null,lastNote:null,lines:null,claps:null,snapText:null,camFollow:null,create:function(){this.curSection=X.lastSection,Ea.trace(!1,{fileName:"source/ChartingState.hx",lineNumber:140,className:"ChartingState",methodName:"create"}),n.mouse.set_visible(!0),(X.instance=this).deezNuts.h[4]=1,this.deezNuts.h[8]=2,this.deezNuts.h[16]=4,this.deezNuts.h[32]=8,this.deezNuts.h[64]=16,this.sectionRenderes=new yb,this.lines=new yb,this.texts=new yb,ac.clearTimings(),X._song=null!=y.SONG?y.SONG:{chartVersion:X.latestChartVersion,song:"Test",notes:[],eventObjects:[],bpm:150,needsVoices:!0,player1:"bf",player2:"dad",gfVersion:"gf",noteStyle:"normal",stage:"stage",speed:1,validScore:!1},this.addGrid(1),null==X._song.chartVersion&&(X._song.chartVersion="2"),this.snapText=new ub(60,10,0,"",14),this.snapText.scrollFactor.set(),this.curRenderedNotes=new yb,this.curRenderedSustains=new yb,n.mouse.set_visible(!0),n.save.bind("funkin","ninjamuffin99"),this.tempBpm=X._song.bpm,this.addSection(),this.loadSong(X._song.song),T.changeBPM(X._song.bpm),T.mapBPMChanges(X._song),X.leftIcon=new eh(X._song.player1),X.rightIcon=new eh(X._song.player2),null==X._song.eventObjects&&(X._song.eventObjects=[new Xh("Init BPM",0,X._song.bpm,"BPM Change")]),0==X._song.eventObjects.length&&(X._song.eventObjects=[new Xh("Init BPM",0,X._song.bpm,"BPM Change")]),Ea.trace("goin",{fileName:"source/ChartingState.hx",lineNumber:223,className:"ChartingState",methodName:"create"});for(var t=0,e=0,s=X._song.eventObjects;e<s.length;){var i=s[e];++e,Z.field(i,"name");var a=Z.field(i,"type"),r=Z.field(i,"position"),i=Z.field(i,"value");"BPM Change"==a&&(a=r,ac.addTiming(a,i,r=1/0,0),0!=t&&((i=ac.AllTimings[t-1]).endBeat=a,i.length=(i.endBeat-i.startBeat)/(i.bpm/60),a=60/i.bpm*1e3/4,ac.AllTimings[t].startStep=Math.floor(i.endBeat/(i.bpm/60)*1e3/a),ac.AllTimings[t].startTime=i.startTime+i.length),++t)}for(e=0,s=ac.AllTimings.length;e<s;)e++;for(this.recalculateAllSectionTimes(),Ea.trace("Song length in MS: "+n.sound.music._length,{fileName:"source/ChartingState.hx",lineNumber:266,className:"ChartingState",methodName:"create"}),e=0;e<9e6&&(i=e++,!(1e3*((s=ac.getTimingAtBeat(i)).startTime+(i-s.startBeat)/(s.bpm/60))>n.sound.music._length));)X.lengthInBeats=i;for(X.lengthInSteps=4*X.lengthInBeats,Ea.trace("LENGTH IN STEPS "+X.lengthInSteps+" | LENGTH IN BEATS "+X.lengthInBeats+" | SECTIONS: "+Math.floor((X.lengthInSteps+16)/16),{fileName:"source/ChartingState.hx",lineNumber:285,className:"ChartingState",methodName:"create"}),s=this.getYfromStrum(n.sound.music._length),Ea.trace("TARGET "+s,{fileName:"source/ChartingState.hx",lineNumber:291,className:"ChartingState",methodName:"create"}),e=0,s=Math.round(s/640)+1920;e<s;)t=e++,i=new an(0,640*t,this.GRID_SIZE),null==X._song.notes[t]&&X._song.notes.push(this.newSection(16,!0,!1)),i.section=X._song.notes[t],this.sectionRenderes.add(i),a=this.getYfromStrum(i.section.startTime)*this.zoomFactor,(r=(X._song.notes[t].mustHitSection?new eh(X._song.player1):new eh(X._song.player2)).clone()).set_x(-95),r.set_y(a-75),r.setGraphicSize(0,45),i.icon=r,i.lastUpdated=X._song.notes[t].mustHitSection,this.add(r),this.height=Math.floor(i.y);for(Ea.trace(this.height,{fileName:"source/ChartingState.hx",lineNumber:318,className:"ChartingState",methodName:"create"}),this.gridBlackLine=new O(this.gridBG.get_width()/2).makeGraphic(2,this.height,-16777216),X.leftIcon.setGraphicSize(0,45),X.rightIcon.setGraphicSize(0,45),this.add(X.leftIcon),this.add(X.rightIcon),X.leftIcon.setPosition(0,-100),X.rightIcon.setPosition(this.gridBG.get_width()/2,-100),X.leftIcon.scrollFactor.set(),X.rightIcon.scrollFactor.set(),this.bpmTxt=new ub(1e3,50,0,"",16),this.bpmTxt.scrollFactor.set(),this.add(this.bpmTxt),this.strumLine=new O(0,0).makeGraphic(8*this.GRID_SIZE|0,4),this.dummyArrow=(new O).makeGraphic(this.GRID_SIZE,this.GRID_SIZE),this.UI_box=new ii(null,null,[{name:"Song",label:"Song Data"},{name:"Section",label:"Section Data"},{name:"Note",label:"Note Data"},{name:"Assets",label:"Assets"}],null,!0),this.UI_box.scrollFactor.set(),this.UI_box.resize(300,400),this.UI_box.set_x(n.width/2+40),this.UI_box.set_y(20),this.UI_options=new ii(null,null,[{name:"Options",label:"Song Options"},{name:"Events",label:"Song Events"}],null,!0),this.UI_options.scrollFactor.set(),this.UI_options.set_selected_tab(0),this.UI_options.resize(300,200),this.UI_options.set_x(this.UI_box.x),this.UI_options.set_y(n.height-300),this.add(this.UI_options),this.add(this.UI_box),this.addSongUI(),this.addSectionUI(),this.addNoteUI(),this.addOptionsUI(),this.addEventsUI(),this.regenerateLines(),this.updateGrid(),Ea.trace("bruh",{fileName:"source/ChartingState.hx",lineNumber:384,className:"ChartingState",methodName:"create"}),this.add(this.sectionRenderes),this.add(this.dummyArrow),this.add(this.strumLine),this.add(this.lines),this.add(this.texts),this.add(this.gridBlackLine),this.add(this.curRenderedNotes),this.add(this.curRenderedSustains),Ea.trace("bruh",{fileName:"source/ChartingState.hx",lineNumber:396,className:"ChartingState",methodName:"create"}),this.add(this.snapText),Ea.trace("bruh",{fileName:"source/ChartingState.hx",lineNumber:401,className:"ChartingState",methodName:"create"}),Ea.trace("create",{fileName:"source/ChartingState.hx",lineNumber:403,className:"ChartingState",methodName:"create"}),ac.clearTimings(),e=t=0,s=X._song.eventObjects;e<s.length;)i=s[e],++e,"BPM Change"==i.type&&(a=i.position,ac.addTiming(a,i.value,r=1/0,0),0!=t&&((i=ac.AllTimings[t-1]).endBeat=a,i.length=(i.endBeat-i.startBeat)/(i.bpm/60),a=60/i.bpm*1e3/4,ac.AllTimings[t].startStep=Math.floor(i.endBeat/(i.bpm/60)*1e3/a),ac.AllTimings[t].startTime=i.startTime+i.length),++t);da.prototype.create.call(this)},texts:null,regenerateLines:function(){for(;0<this.lines.members.length;)this.lines.members[0].destroy(),ma.remove(this.lines.members,this.lines.members[0]);for(;0<this.texts.members.length;)this.texts.members[0].destroy(),ma.remove(this.texts.members,this.texts.members[0]);if(Ea.trace("removed lines and texts",{fileName:"source/ChartingState.hx",lineNumber:449,className:"ChartingState",methodName:"regenerateLines"}),null!=X._song.eventObjects)for(var t=0,e=X._song.eventObjects;t<e.length;){var n=e[t];++t;var s=ac.getTimingAtBeat(n.position),i=0;null!=s&&(i=s.startTime+(n.position-s.startBeat)/(s.bpm/60)),s=this.getYfromStrum(1e3*i)*this.zoomFactor,n=new ub(-190,s=s<0?0:s,0,n.name+"\n"+n.type+"\n"+n.value,12),(s=new O(0,s).makeGraphic(8*this.GRID_SIZE|0,4,-16776961)).set_alpha(.2),this.lines.add(s),this.texts.add(n),this.add(s),this.add(n)}for(n=new me(this.sectionRenderes.members,null);n.hasNext();)t=n.next(),s=this.getYfromStrum(t.section.startTime)*this.zoomFactor,t.icon.set_y(s-75),(s=new O(0,s).makeGraphic(8*this.GRID_SIZE|0,4,-16777216)).set_alpha(.4),this.lines.add(s)},addGrid:function(t){t=this.GRID_SIZE/(t=null==t?1:t),Math.floor(t)!=t&&(t=this.GRID_SIZE),this.remove(this.gridBG),this.gridBG=Rj.create(this.GRID_SIZE,0|t,8*this.GRID_SIZE,16*this.GRID_SIZE),Ea.trace(this.gridBG.get_height(),{fileName:"source/ChartingState.hx",lineNumber:504,className:"ChartingState",methodName:"addGrid"}),Ea.trace("height of "+Math.floor(X.lengthInSteps),{fileName:"source/ChartingState.hx",lineNumber:508,className:"ChartingState",methodName:"addGrid"}),this.remove(this.gridBlackLine),this.gridBlackLine=new O(this.gridBG.get_width()/2).makeGraphic(2,0|Math.floor(X.lengthInSteps),-16777216),this.add(this.gridBlackLine)},stepperDiv:null,check_snap:null,listOfEvents:null,currentSelectedEventName:null,savedType:null,savedValue:null,currentEventPosition:null,containsName:function(t,e){for(var n=0;n<e.length;){var s=e[n];if(++n,Z.field(s,"name")==t)return s}return null},chartEvents:null,Typeables:null,addEventsUI:function(){var o=this;null==X._song.eventObjects&&(X._song.eventObjects=[new Xh("Init BPM",0,X._song.bpm,"BPM Change")]);var t="";0!=uj.count(X._song.eventObjects)&&(t=X._song.eventObjects[0].name);for(var e=new ub(10,5,null,"List of Events"),n=new ub(150,5,null,"Event Name"),l=new Wf(150,20,80,""),s=new ub(10,45,null,"Type of Event"),h=new Yd(10,60,Yd.makeStrIdLabelArray(["BPM Change","Scroll Speed Change"],!0)),i=new ub(150,45,null,"Event Value"),_=new Wf(150,60,80,""),a=new Oe(10,155,"Save Event",function(){var t=new Xh(o.currentSelectedEventName,o.currentEventPosition,Kd.truncateFloat(parseFloat(o.savedValue),3),o.savedType);Ea.trace("trying to save "+o.currentSelectedEventName,{fileName:"source/ChartingState.hx",lineNumber:578,className:"ChartingState",methodName:"addEventsUI"});var e=o.containsName(t.name,X._song.eventObjects);if(""!=t.name){Ea.trace("yeah we can save it",{fileName:"source/ChartingState.hx",lineNumber:586,className:"ChartingState",methodName:"addEventsUI"}),null!=e&&ma.remove(X._song.eventObjects,e),X._song.eventObjects.push(t),Ea.trace(X._song.eventObjects.length,{fileName:"source/ChartingState.hx",lineNumber:592,className:"ChartingState",methodName:"addEventsUI"}),ac.clearTimings();for(var n=0,s=0,i=X._song.eventObjects;s<i.length;){var a=i[s];++s,Z.field(a,"name");var r=Z.field(a,"type"),l=Z.field(a,"position"),e=Z.field(a,"value");Ea.trace(a.type,{fileName:"source/ChartingState.hx",lineNumber:604,className:"ChartingState",methodName:"addEventsUI"}),"BPM Change"==r&&(ac.addTiming(a=l,e,1/0,0),0!=n&&((e=ac.AllTimings[n-1]).endBeat=a,e.length=(e.endBeat-e.startBeat)/(e.bpm/60),ac.AllTimings[n].startStep=Math.floor(e.endBeat/(e.bpm/60)*1e3/(60/e.bpm*1e3/4)),ac.AllTimings[n].startTime=e.startTime+e.length),++n)}for("BPM Change"==t.type&&o.recalculateAllSectionTimes(),o.regenerateLines(),n=[],s=0,i=X._song.eventObjects;s<i.length;)e=i[s],s++,n.push(e.name);o.listOfEvents.setData(Yd.makeStrIdLabelArray(n,!0)),o.listOfEvents.set_selectedLabel(t.name),Ea.trace("end",{fileName:"source/ChartingState.hx",lineNumber:642,className:"ChartingState",methodName:"addEventsUI"})}}),r=new ub(150,85,null,"Event Position"),u=new Wf(150,100,80,""),c=new Oe(95,155,"Add Event",function(){var t=new Xh("New Event "+Kd.truncateFloat(o.curDecimalBeat,3),Kd.truncateFloat(o.curDecimalBeat,3),X._song.bpm,"BPM Change");if(Ea.trace("adding "+t.name,{fileName:"source/ChartingState.hx",lineNumber:650,className:"ChartingState",methodName:"addEventsUI"}),null==o.containsName(t.name,X._song.eventObjects)){Ea.trace("yeah we can add it",{fileName:"source/ChartingState.hx",lineNumber:657,className:"ChartingState",methodName:"addEventsUI"}),X._song.eventObjects.push(t),l.set_text(t.name),h.set_selectedLabel(t.type),_.set_text(t.value+""),u.set_text(t.position+""),o.currentSelectedEventName=t.name,o.currentEventPosition=t.position,o.savedType=t.type,o.savedValue=t.value+"";for(var e=[],n=0,s=X._song.eventObjects;n<s.length;){var i=s[n];n++,e.push(i.name)}for(o.listOfEvents.setData(Yd.makeStrIdLabelArray(e,!0)),o.listOfEvents.set_selectedLabel(t.name),ac.clearTimings(),e=t=0,n=X._song.eventObjects;e<n.length;){s=n[e],++e,Z.field(s,"name");var a=Z.field(s,"type"),r=Z.field(s,"position"),i=Z.field(s,"value");Ea.trace(s.type,{fileName:"source/ChartingState.hx",lineNumber:691,className:"ChartingState",methodName:"addEventsUI"}),"BPM Change"==a&&(ac.addTiming(s=r,i,1/0,0),0!=t&&((i=ac.AllTimings[t-1]).endBeat=s,i.length=(i.endBeat-i.startBeat)/(i.bpm/60),ac.AllTimings[t].startStep=Math.floor(i.endBeat/(i.bpm/60)*1e3/(60/i.bpm*1e3/4)),ac.AllTimings[t].startTime=i.startTime+i.length),++t)}for(Ea.trace("BPM CHANGES:",{fileName:"source/ChartingState.hx",lineNumber:713,className:"ChartingState",methodName:"addEventsUI"}),e=0,n=ac.AllTimings;e<n.length;)s=n[e],++e,Ea.trace(s.bpm+" - START: "+s.startBeat+" - END: "+s.endBeat+" - START-TIME: "+s.startTime,{fileName:"source/ChartingState.hx",lineNumber:716,className:"ChartingState",methodName:"addEventsUI"});o.recalculateAllSectionTimes(),o.regenerateLines()}}),d=new Oe(180,155,"Remove Event",function(){Ea.trace("lets see if we can remove "+o.listOfEvents.get_selectedLabel(),{fileName:"source/ChartingState.hx",lineNumber:726,className:"ChartingState",methodName:"addEventsUI"});var t=o.containsName(o.listOfEvents.get_selectedLabel(),X._song.eventObjects);if(Ea.trace(t,{fileName:"source/ChartingState.hx",lineNumber:730,className:"ChartingState",methodName:"addEventsUI"}),null!=t){Ea.trace("yeah we can remove it it",{fileName:"source/ChartingState.hx",lineNumber:735,className:"ChartingState",methodName:"addEventsUI"}),ma.remove(X._song.eventObjects,t);var e=X._song.eventObjects[0];null==e&&(X._song.eventObjects.push(new Xh("Init BPM",0,X._song.bpm,"BPM Change")),e=X._song.eventObjects[0]),l.set_text(e.name),h.set_selectedLabel(e.type),_.set_text(e.value+""),u.set_text(e.position+""),o.currentSelectedEventName=e.name,o.currentEventPosition=e.position,o.savedType=e.type,o.savedValue=e.value+"";for(var n=[],s=0,i=X._song.eventObjects;s<i.length;)t=i[s],s++,n.push(t.name);for(o.listOfEvents.setData(Yd.makeStrIdLabelArray(n,!0)),o.listOfEvents.set_selectedLabel(e.name),ac.clearTimings(),n=e=0,s=X._song.eventObjects;n<s.length;){i=s[n],++n,Z.field(i,"name");var a=Z.field(i,"type"),r=Z.field(i,"position"),t=Z.field(i,"value");Ea.trace(i.type,{fileName:"source/ChartingState.hx",lineNumber:777,className:"ChartingState",methodName:"addEventsUI"}),"BPM Change"==a&&(ac.addTiming(i=r,t,1/0,0),0!=e&&((t=ac.AllTimings[e-1]).endBeat=i,t.length=(t.endBeat-t.startBeat)/(t.bpm/60),ac.AllTimings[e].startStep=Math.floor(t.endBeat/(t.bpm/60)*1e3/(60/t.bpm*1e3/4)),ac.AllTimings[e].startTime=t.startTime+t.length),++e)}o.recalculateAllSectionTimes(),o.regenerateLines()}}),f=new Oe(150,120,"Update Pos",function(){var t=o.containsName(o.currentSelectedEventName,X._song.eventObjects);null!=t&&(o.currentEventPosition=o.curDecimalBeat,t.position=o.currentEventPosition,u.set_text(o.currentEventPosition+""))}),p=[],m=null,g=0,b=X._song.eventObjects;g<b.length;){var S=b[g];++g;var x=Z.field(S,"name"),F=Z.field(S,"type"),y=Z.field(S,"position"),S=Z.field(S,"value");Ea.trace(S,{fileName:"source/ChartingState.hx",lineNumber:827,className:"ChartingState",methodName:"addEventsUI"}),F=new Xh(x,y,S,F),this.chartEvents.push(F),p.push(x)}X._song.eventObjects=this.chartEvents,0==p.length&&p.push(""),0!=X._song.eventObjects.length&&(m=X._song.eventObjects[0]),Ea.trace("bruh",{fileName:"source/ChartingState.hx",lineNumber:842,className:"ChartingState",methodName:"addEventsUI"}),""!=t&&(Ea.trace(m,{fileName:"source/ChartingState.hx",lineNumber:847,className:"ChartingState",methodName:"addEventsUI"}),l.set_text(m.name),Ea.trace("bruh",{fileName:"source/ChartingState.hx",lineNumber:849,className:"ChartingState",methodName:"addEventsUI"}),h.set_selectedLabel(m.type),Ea.trace("bruh",{fileName:"source/ChartingState.hx",lineNumber:851,className:"ChartingState",methodName:"addEventsUI"}),_.set_text(m.value+""),Ea.trace("bruh",{fileName:"source/ChartingState.hx",lineNumber:853,className:"ChartingState",methodName:"addEventsUI"}),this.currentSelectedEventName=m.name,Ea.trace("bruh",{fileName:"source/ChartingState.hx",lineNumber:855,className:"ChartingState",methodName:"addEventsUI"}),this.currentEventPosition=m.position,Ea.trace("bruh",{fileName:"source/ChartingState.hx",lineNumber:857,className:"ChartingState",methodName:"addEventsUI"}),u.set_text(this.currentEventPosition+""),Ea.trace("bruh",{fileName:"source/ChartingState.hx",lineNumber:859,className:"ChartingState",methodName:"addEventsUI"})),this.listOfEvents=new Yd(10,20,Yd.makeStrIdLabelArray(p,!0),function(t){var e=o.containsName(o.listOfEvents.get_selectedLabel(),X._song.eventObjects);null!=e&&(Ea.trace("selecting "+t+" found: "+U.string(e),{fileName:"source/ChartingState.hx",lineNumber:869,className:"ChartingState",methodName:"addEventsUI"}),l.set_text(e.name),_.set_text(e.value+""),u.set_text(e.position+""),h.set_selectedLabel(e.type),o.currentSelectedEventName=e.name,o.currentEventPosition=e.position)}),_.callback=function(t,e){Ea.trace(t+" - value",{fileName:"source/ChartingState.hx",lineNumber:881,className:"ChartingState",methodName:"addEventsUI"}),o.savedValue=t},h.callback=function(t){o.savedType=h.get_selectedLabel()},l.callback=function(t,e){null==o.containsName(o.currentSelectedEventName,X._song.eventObjects)?o.currentSelectedEventName=t:null==o.containsName(t,X._song.eventObjects)&&(o.containsName(o.currentSelectedEventName,X._song.eventObjects).name=t,o.currentSelectedEventName=t)},Ea.trace("bruh",{fileName:"source/ChartingState.hx",lineNumber:905,className:"ChartingState",methodName:"addEventsUI"}),this.Typeables.push(u),this.Typeables.push(_),this.Typeables.push(l),(t=new Ob(null,this.UI_options)).name="Events",t.add(r),t.add(i),t.add(n),t.add(e),t.add(s),t.add(l),t.add(h),t.add(this.listOfEvents),t.add(_),t.add(a),t.add(c),t.add(d),t.add(u),t.add(f),this.UI_options.addGroup(t)},addOptionsUI:function(){var t=this,e=new tf(10,60,null,null,"Play hitsounds",100);e.set_checked(!1),e.callback=function(){t.playClaps=e.checked};var s=new tf(10,90,null,null,"Mute Instrumental",100);s.set_checked(!1),s.callback=function(){var t=1;s.checked&&(t=0),n.sound.music.set_volume(t)},this.check_snap=new tf(80,25,null,null,"Snap to grid",100),this.check_snap.set_checked(this.defaultSnap),this.check_snap.callback=function(){t.defaultSnap=t.check_snap.checked,Ea.trace("CHECKED!",{fileName:"source/ChartingState.hx",lineNumber:959,className:"ChartingState",methodName:"addOptionsUI"})};var i=new Ob(null,this.UI_options);i.name="Options",i.add(e),i.add(s),this.UI_options.addGroup(i)},addSongUI:function(){var a=this,t=new Wf(10,10,70,X._song.song,8);this.typingShit=t;var e=new tf(10,25,null,null,"Has voice track",100);e.set_checked(X._song.needsVoices),e.callback=function(){X._song.needsVoices=e.checked,Ea.trace("CHECKED!",{fileName:"source/ChartingState.hx",lineNumber:980,className:"ChartingState",methodName:"addSongUI"})};var s=new Oe(110,8,"Save",function(){a.saveLevel()}),i=new Oe(s.x+s.get_width()+10,s.y,"Reload Audio",function(){a.loadSong(X._song.song)}),r=new Oe(i.x,s.y+30,"Reload JSON",function(){a.loadJson(X._song.song.toLowerCase())}),l=new Oe(10,140,"Reset Chart",function(){for(var t=0,e=X._song.notes.length;t<e;)for(var n=t++,s=0,i=X._song.notes[n].sectionNotes.length;s<i;)s++,X._song.notes[n].sectionNotes=[];a.resetSection(!0)}),o=new Oe(r.x,r.y+30,"load autosave",z(this,this.loadAutosave)),h=new ef(10,65,.1,1,1,5e3,1);h.set_value(T.bpm),h.name="song_bpm";var _=new ub(74,65,null,"BPM"),u=new ef(10,80,.1,1,.1,10,1);u.set_value(X._song.speed),u.name="song_speed";var c=new ub(74,80,null,"Scroll Speed"),d=new ef(10,95,.1,1,.1,10,1);d.set_value(this.vocals._volume),d.name="song_vocalvol";var f=new ub(74,95,null,"Vocal Volume"),p=new ef(10,110,.1,1,.1,10,1);p.set_value(n.sound.music._volume),p.name="song_instvol";var m=new ub(74,110,null,"Instrumental Volume"),g=new ub(10,245,null,"Shift Note FWD by (Section)"),b=new ef(10,260,1,0,-1e3,1e3,0);b.name="song_shiftnote";var S=new ub(10,275,null,"Shift Note FWD by (Step)"),x=new ef(10,290,1,0,-1e3,1e3,0);x.name="song_shiftnotems";var F=new ub(10,305,null,"Shift Note FWD by (ms)"),y=new ef(10,320,1,0,-1e3,1e3,2);y.name="song_shiftnotems";var N=new Oe(10,335,"Shift",function(){a.shiftNotes(0|b.value,0|x.value,0|y.value)}),Q=cd.coolTextFile(K.getPath("data/characterList.txt","TEXT",null)),D=cd.coolTextFile(K.getPath("data/gfVersionList.txt","TEXT",null)),v=cd.coolTextFile(K.getPath("data/stageList.txt","TEXT",null)),B=cd.coolTextFile(K.getPath("data/noteStyleList.txt","TEXT",null)),k=new Yd(10,100,Yd.makeStrIdLabelArray(Q,!0),function(t){X._song.player1=Q[U.parseInt(t)]});k.set_selectedLabel(X._song.player1);var w=new ub(10,80,64,"Player 1"),R=new Yd(140,100,Yd.makeStrIdLabelArray(Q,!0),function(t){X._song.player2=Q[U.parseInt(t)]});R.set_selectedLabel(X._song.player2);var Z=new ub(140,80,64,"Player 2"),W=new Yd(10,200,Yd.makeStrIdLabelArray(D,!0),function(t){X._song.gfVersion=D[U.parseInt(t)]});W.set_selectedLabel(X._song.gfVersion);var E=new ub(10,180,64,"Girlfriend"),P=new Yd(140,200,Yd.makeStrIdLabelArray(v,!0),function(t){X._song.stage=v[U.parseInt(t)]});P.set_selectedLabel(X._song.stage);var V=new ub(140,180,64,"Stage"),M=new Yd(10,300,Yd.makeStrIdLabelArray(B,!0),function(t){X._song.noteStyle=B[U.parseInt(t)]});M.set_selectedLabel(X._song.noteStyle);var J=new ub(10,280,64,"Note Skin"),I=new Ob(null,this.UI_box);I.name="Song",I.add(t),I.add(l),I.add(e),I.add(s),I.add(i),I.add(r),I.add(o),I.add(h),I.add(_),I.add(u),I.add(c),I.add(d),I.add(f),I.add(p),I.add(m),I.add(g),I.add(b),I.add(S),I.add(x),I.add(F),I.add(y),I.add(N),(t=new Ob(null,this.UI_box)).name="Assets",t.add(M),t.add(J),t.add(W),t.add(E),t.add(P),t.add(V),t.add(k),t.add(R),t.add(w),t.add(Z),this.UI_box.addGroup(I),this.UI_box.addGroup(t),this.camFollow=new Ja(280,0,1,1),this.add(this.camFollow),n.camera.follow(this.camFollow)},stepperLength:null,check_mustHitSection:null,check_changeBPM:null,stepperSectionBPM:null,check_altAnim:null,addSectionUI:function(){var a=this,t=new Ob(null,this.UI_box);t.name="Section";var e=new ef(110,132,1,1,-999,999,0),n=new ub(174,132,null,"sections back"),s=new Oe(10,130,"Copy last section",function(){a.copySection(0|e.value)}),i=new Oe(10,150,"Clear Section",z(this,this.clearSection)),r=new Oe(10,170,"Swap Section",function(){var t=a.lastUpdatedSection;if(null!=t)for(var e=0,n=t.sectionNotes.length;e<n;){var s=e++,i=t.sectionNotes[s];i[1]=i[1]<4?i[1]+4:i[1]-4,t.sectionNotes[s]=i,a.updateGrid()}});this.check_mustHitSection=new tf(10,30,null,null,"Camera Points to P1?",100,null,function(){var t=a.lastUpdatedSection;if(Ea.trace(t,{fileName:"source/ChartingState.hx",lineNumber:1198,className:"ChartingState",methodName:"addSectionUI"}),null!=t){t.mustHitSection=a.check_mustHitSection.checked;for(var e=new me(a.sectionRenderes.members,null);e.hasNext();){var n,s,i=e.next();i.section.startTime==t.startTime&&(n=i.icon.y,a.remove(i.icon),(s=(a.check_mustHitSection.checked?new eh(X._song.player1):new eh(X._song.player2)).clone()).set_x(-95),s.set_y(n),s.setGraphicSize(0,45),i.icon=s,i.lastUpdated=t.mustHitSection,a.add(s))}}}),this.check_mustHitSection.set_checked(!0),this.check_altAnim=new tf(10,340,null,null,"Alternate Animation",100),this.check_altAnim.name="check_altAnim";var l=new Oe(10,60,"Refresh Section",function(){var t=a.getSectionByTime(T.songPosition);null!=t&&(a.check_mustHitSection.set_checked(t.mustHitSection),a.check_altAnim.set_checked(t.altAnim))});t.add(l),t.add(e),t.add(n),t.add(this.check_mustHitSection),t.add(this.check_altAnim),t.add(s),t.add(i),t.add(r),this.UI_box.addGroup(t)},stepperSusLength:null,tab_group_note:null,addNoteUI:function(){this.tab_group_note=new Ob(null,this.UI_box),this.tab_group_note.name="Note",this.writingNotesText=new uf(20,100,0,""),this.writingNotesText.setFormat("Arial",20,-1,"left",Zc.OUTLINE,-16777216),this.stepperSusLength=new ef(10,10,T.stepCrochet/2,0,0,64*T.stepCrochet),this.stepperSusLength.set_value(0),this.stepperSusLength.name="note_susLength";var t=new ub(74,10,null,"Note Sustain Length"),e=new Oe(10,100,"Apply Data");this.tab_group_note.add(this.stepperSusLength),this.tab_group_note.add(t),this.tab_group_note.add(e),this.UI_box.addGroup(this.tab_group_note)},loadSong:function(t){var e=this;null!=n.sound.music&&(s=n.sound.music).cleanup(s.autoDestroy,!0);var s=n.sound,i=Y.replace(t," ","-").toLowerCase();switch(i){case"dad-battle":i="dadbattle";break;case"philly-nice":i="philly"}switch(s.playMusic("songs:assets/songs/"+i+"/Inst.ogg",.6),s=new bg,i=Y.replace(t," ","-").toLowerCase()){case"dad-battle":i="dadbattle";break;case"philly-nice":i="philly"}this.vocals=s.loadEmbedded("songs:assets/songs/"+i+"/Voices.ogg"),n.sound.list.add(this.vocals),n.sound.music.pause(),y.isSM||this.vocals.pause(),n.sound.music.onComplete=function(){y.isSM||e.vocals.pause(),n.sound.music.pause()}},generateUI:function(){for(;0<this.bullshitUI.members.length;)this.bullshitUI.remove(this.bullshitUI.members[0],!0);var t=new ub(this.UI_box.x+20,this.UI_box.y+20,0);this.bullshitUI.add(t)},getEvent:function(t,e,s,i){if("click_check_box"==t)"Alternate Animation"==e.getLabel().text&&(this.getSectionByTime(T.songPosition).altAnim=e.checked);else if("change_numeric_stepper"==t&&e instanceof ef)switch(e.name){case"divisions":this.subDivisions=e.value,this.updateGrid();break;case"note_susLength":if(null==this.curSelectedNote)break;e.value<=0&&e.set_value(0),this.curSelectedNote[2]=e.value,this.updateGrid();break;case"section_bpm":e.value<=.1&&e.set_value(.1),this.getSectionByTime(T.songPosition).bpm=0|e.value,this.updateGrid();break;case"section_length":e.value<=4&&e.set_value(4),this.getSectionByTime(T.songPosition).lengthInSteps=0|e.value,this.updateGrid();break;case"song_bpm":e.value<=0&&e.set_value(1),this.tempBpm=0|e.value,T.mapBPMChanges(X._song),T.changeBPM(0|e.value);break;case"song_instvol":e.value<=.1&&e.set_value(.1),n.sound.music.set_volume(e.value);break;case"song_speed":e.value<=0&&e.set_value(0),X._song.speed=e.value;break;case"song_vocalvol":e.value<=.1&&e.set_value(.1),y.isSM||this.vocals.set_volume(e.value)}},updatedSection:null,stepStartTime:function(t){return T.bpm/(t/4)/60},sectionStartTime:function(t){-1==(t=null==t?-1:t)&&(t=this.curSection);for(var e=T.bpm,n=0,s=0;s<t;)s++,n+=6e4/e*4;return n},writingNotes:null,doSnapShit:null,diff:null,changeIndex:null,currentBPM:null,lastBPM:null,updateFrame:null,lastUpdatedSection:null,resizeEverything:function(){var e=this;this.curRenderedNotes.forEach(function(t){ac.getTimingAtTimestamp(t.strumTime),t.set_y(e.getYfromStrum(t.strumTime)*e.zoomFactor),2<=t.sustainLength&&(t.noteCharterObject.set_y(t.y+e.GRID_SIZE),t.noteCharterObject.makeGraphic(8,Math.floor(e.getYfromStrum(t.strumTime+t.sustainLength)*e.zoomFactor-t.y),-1))}),this.regenerateLines()},update:function(t){var s=this;this.updateHeads();for(var e=new me(this.sectionRenderes.members,null);e.hasNext();){var i=e.next(),a=i.y-this.strumLine.y;a<4e3&&-4e3<=a?(i.set_active(!0),i.set_visible(!0)):(i.set_active(!1),i.set_visible(!1))}for(e=new me(this.curRenderedNotes.members,null);e.hasNext();)(a=(i=e.next()).y-this.strumLine.y)<4e3&&-4e3<=a?(i.set_active(!0),i.set_visible(!0)):(i.set_active(!1),i.set_visible(!1));for(var i=!0,r=0,l=this.Typeables;r<l.length;)e=l[r],++r,e.hasFocus&&(i=!1);if(i&&0!=n.mouse.wheel&&(n.sound.music.pause(),y.isSM||this.vocals.pause(),this.claps.splice(0,this.claps.length),(e=n.keys.pressed).keyManager.checkStatus(17,e.status)?(a=n.mouse.wheel,this.zoomFactor+=(a=0<a?0:a)<(r=0)?-.02:.02,2<this.zoomFactor&&(this.zoomFactor=2),this.zoomFactor<.1&&(this.zoomFactor=.1),this.resizeEverything()):(0<(a=n.mouse.wheel)&&this.strumLine.y<0&&(a=0),this.doSnapShit&&(e=a<(e=r=0)?(r=1/this.deezNuts.h[this.snap],Math.floor(this.curDecimalBeat*this.deezNuts.h[this.snap]+.001)/this.deezNuts.h[this.snap]+r):(r=-1/this.deezNuts.h[this.snap],(Math.ceil(this.curDecimalBeat*this.deezNuts.h[this.snap])-.001)/this.deezNuts.h[this.snap]+r),Ea.trace("SNAP - "+this.snap+" INCREASE - "+r+" - GO TO BEAT "+e,{fileName:"source/ChartingState.hx",lineNumber:1592,className:"ChartingState",methodName:"update"}),a=ac.getTimingAtBeat(e),e<=0&&n.sound.music.set_time(0),r=(null!=a?a:X._song).bpm,null!=a&&n.sound.music.set_time(1e3*(a.startTime+(e-a.startBeat)/(r/60)))),y.isSM||this.vocals.set_time(n.sound.music._time))),4==this.updateFrame){ac.clearTimings();for(var o=0,r=0,l=X._song.eventObjects;r<l.length;){var h,e=l[r];++r,"BPM Change"==e.type&&(h=e.position,ac.addTiming(h,e.value,1/0,0),0!=o&&((a=ac.AllTimings[o-1]).endBeat=h,a.length=(a.endBeat-a.startBeat)/(a.bpm/60),ac.AllTimings[o].startStep=Math.floor(a.endBeat/(a.bpm/60)*1e3/(60/a.bpm*1e3/4)),ac.AllTimings[o].startTime=a.startTime+a.length),++o)}this.recalculateAllSectionTimes(),this.regenerateLines(),this.updateFrame++}else 5!=this.updateFrame&&this.updateFrame++;this.snapText.set_text("Snap: 1/"+this.snap+" ("+(this.doSnapShit?"Shift to disable, Left or Right to increase/decrease":"Snap Disabled, Shift to renable.")+")\nAdd Notes: 1-8 (or click)\nZoom: "+this.zoomFactor),(e=n.keys.justPressed).keyManager.checkStatus(39,e.status)&&(this.snap*=2),(e=n.keys.justPressed).keyManager.checkStatus(37,e.status)&&(this.snap=Math.round(this.snap/2)),64<=this.snap&&(this.snap=64),this.snap<=4&&(this.snap=4),this.doSnapShit=this.defaultSnap,(e=n.keys.pressed).keyManager.checkStatus(16,e.status)&&(this.doSnapShit=!this.defaultSnap),this.check_snap.set_checked(this.doSnapShit),T.songPosition=n.sound.music._time,X._song.song=this.typingShit.text,a=ac.getTimingAtTimestamp(T.songPosition),e=T.songPosition,null!=a&&(this.currentBPM=a.bpm,this.currentBPM!=T.bpm&&(Ea.trace("BPM CHANGE to "+this.currentBPM,{fileName:"source/ChartingState.hx",lineNumber:1690,className:"ChartingState",methodName:"update"}),T.changeBPM(this.currentBPM,!1)),e=1e3*(a.startTime+(this.curDecimalBeat-a.startBeat)/(T.bpm/60))),null!=(r=this.getSectionByTime(e,!0))&&this.lastUpdatedSection!=this.getSectionByTime(e,!0)&&(this.lastUpdatedSection=r,this.check_mustHitSection.set_checked(r.mustHitSection),this.check_altAnim.set_checked(r.altAnim)),this.strumLine.set_y(this.getYfromStrum(e)*this.zoomFactor),this.camFollow.set_y(this.strumLine.y),this.bpmTxt.set_text(U.string(Mb.roundDecimal(T.songPosition/1e3,2))+" / "+U.string(Mb.roundDecimal(n.sound.music._length/1e3,2))+"\nCur Section: "+this.curSection+"\nCurBPM: "+this.currentBPM+"\nCurBeat: "+Kd.truncateFloat(this.curDecimalBeat,3)+"\nCurStep: "+this.curStep+"\nZoom: "+this.zoomFactor);var _=[r=(e=n.keys.justPressed).keyManager.checkStatus(49,e.status),l=(e=n.keys.justPressed).keyManager.checkStatus(50,e.status),o=(e=n.keys.justPressed).keyManager.checkStatus(51,e.status),h=(e=n.keys.justPressed).keyManager.checkStatus(52,e.status),(e=n.keys.justPressed).keyManager.checkStatus(53,e.status),(e=n.keys.justPressed).keyManager.checkStatus(54,e.status),(e=n.keys.justPressed).keyManager.checkStatus(55,e.status),e=(e=n.keys.justPressed).keyManager.checkStatus(56,e.status)],u=!1;if(i)for(this.curRenderedNotes.forEach(function(t){s.strumLine.overlaps(t)&&_[Math.floor(Math.abs(t.noteData))]&&(s.deleteNote(t),u=!0,Ea.trace("deelte note",{fileName:"source/ChartingState.hx",lineNumber:1753,className:"ChartingState",methodName:"update"}))}),r=0,l=_.length;r<l;)o=r++,(e=_[o])&&!u&&this.addNote(new Kc(T.songPosition,o));this.playClaps&&this.curRenderedNotes.forEach(function(t){null!=n.sound.music._channel&&s.strumLine.overlaps(t)&&-1==s.claps.indexOf(t)&&(s.claps.push(t),n.sound.play(K.sound("SNAP")))}),2==n.mouse._leftButton.current&&(n.mouse.overlaps(this.curRenderedNotes)?this.curRenderedNotes.forEach(function(t){var e;n.mouse.overlaps(t)&&((e=n.keys.pressed).keyManager.checkStatus(17,e.status)?s.selectNote(t):s.deleteNote(t))}):0<n.mouse.x&&n.mouse.x<this.gridBG.get_width()&&0<n.mouse.y&&n.mouse.y<this.height&&this.addNote()),0<n.mouse.x&&n.mouse.x<this.gridBG.get_width()&&0<n.mouse.y&&n.mouse.y<this.height?(this.dummyArrow.set_visible(!0),this.dummyArrow.set_x(Math.floor(n.mouse.x/this.GRID_SIZE)*this.GRID_SIZE),this.dummyArrow.set_y(this.GRID_SIZE/this.deezNuts.h[this.snap]*Math.floor(n.mouse.y/(this.GRID_SIZE/this.deezNuts.h[this.snap])))):this.dummyArrow.set_visible(!1),i&&((e=n.keys.justPressed).keyManager.checkStatus(13,e.status)&&(X.lastSection=this.curSection,y.SONG=X._song,(e=n.sound.music).cleanup(e.autoDestroy,!0),y.isSM||(e=this.vocals).cleanup(e.autoDestroy,!0),i=md.getNextState(new y,!1),n.game._state.switchTo(i)&&(n.game._requestedState=i)),(e=n.keys.justPressed).keyManager.checkStatus(69,e.status)&&this.changeNoteSustain(60/(null!=a?a:X._song).bpm*1e3/4),(e=n.keys.justPressed).keyManager.checkStatus(81,e.status)&&this.changeNoteSustain(-60/(null!=a?a:X._song).bpm*1e3/4),(e=n.keys.justPressed).keyManager.checkStatus(9,e.status)&&((e=n.keys.pressed).keyManager.checkStatus(16,e.status)?((r=this.UI_box).set_selected_tab(r.get_selected_tab()-1),this.UI_box.get_selected_tab()<0&&this.UI_box.set_selected_tab(2)):((r=this.UI_box).set_selected_tab(r.get_selected_tab()+1),3<=this.UI_box.get_selected_tab()&&this.UI_box.set_selected_tab(0))),this.typingShit.hasFocus||(!(e=n.keys.pressed).keyManager.checkStatus(17,e.status)||(e=n.keys.justPressed).keyManager.checkStatus(90,e.status)&&null!=this.lastNote&&(Ea.trace(-1!=this.curRenderedNotes.members.indexOf(this.lastNote)?"delete note":"add note",{fileName:"source/ChartingState.hx",lineNumber:1950,className:"ChartingState",methodName:"update"}),-1!=this.curRenderedNotes.members.indexOf(this.lastNote)?this.deleteNote(this.lastNote):this.addNote(this.lastNote)),(e=n.keys.pressed).keyManager.checkStatus(16,e.status),(e=n.keys.justPressed).keyManager.checkStatus(32,e.status)&&(null!=n.sound.music._channel?(n.sound.music.pause(),y.isSM||this.vocals.pause(),this.claps.splice(0,this.claps.length)):(y.isSM||this.vocals.play(),n.sound.music.play())),(n.sound.music._time<0||this.curDecimalBeat<0)&&n.sound.music.set_time(0),(e=n.keys.pressed).keyManager.checkStatus(16,e.status)?(i=!!(e=n.keys.justPressed).keyManager.checkStatus(87,e.status)||(e=n.keys.justPressed).keyManager.checkStatus(83,e.status))&&(n.sound.music.pause(),y.isSM||this.vocals.pause(),i=2*T.stepCrochet,(e=n.keys.justPressed).keyManager.checkStatus(87,e.status)?(r=n.sound.music).set_time(r._time-i):(r=n.sound.music).set_time(r._time+i),y.isSM||this.vocals.set_time(n.sound.music._time)):(i=!!(e=n.keys.pressed).keyManager.checkStatus(87,e.status)||(e=n.keys.pressed).keyManager.checkStatus(83,e.status))&&(n.sound.music.pause(),y.isSM||this.vocals.pause(),this.claps.splice(0,this.claps.length),i=700*n.elapsed,(e=n.keys.pressed).keyManager.checkStatus(87,e.status)?(r=n.sound.music).set_time(r._time-i):(r=n.sound.music).set_time(r._time+i),y.isSM||this.vocals.set_time(n.sound.music._time)))),X._song.bpm=this.tempBpm,da.prototype.update.call(this,t)},changeNoteSustain:function(t){null!=this.curSelectedNote&&null!=this.curSelectedNote[2]&&(this.curSelectedNote[2]+=t,this.curSelectedNote[2]=Math.max(this.curSelectedNote[2],0)),this.updateNoteUI(),this.updateGrid()},resetSection:function(t){null==t&&(t=!1),n.sound.music.pause(),y.isSM||this.vocals.pause(),n.sound.music.set_time(0),y.isSM||this.vocals.set_time(n.sound.music._time),this.updateGrid(),t||this.updateSectionUI()},changeSection:function(t,e){null==e&&(e=!0),Ea.trace("changing section"+(t=null==t?0:t),{fileName:"source/ChartingState.hx",lineNumber:2070,className:"ChartingState",methodName:"changeSection"}),null!=X._song.notes[t]?(Ea.trace("naw im not null",{fileName:"source/ChartingState.hx",lineNumber:2074,className:"ChartingState",methodName:"changeSection"}),this.curSection=t,this.updateGrid(),e&&(n.sound.music.pause(),y.isSM||this.vocals.pause(),n.sound.music.set_time(this.sectionStartTime()),y.isSM||this.vocals.set_time(n.sound.music._time),this.updateCurStep()),this.updateGrid(),this.updateSectionUI()):Ea.trace("bro wtf I AM NULL",{fileName:"source/ChartingState.hx",lineNumber:2103,className:"ChartingState",methodName:"changeSection"})},copySection:function(t){var e=(t=null==t?1:t)<(e=this.curSection)?e:t,n=this.lastUpdatedSection;if(null!=n){for(var s=0,i=X._song.notes[e-t].sectionNotes;s<i.length;){var a=i[s];++s,n.sectionNotes.push([a[0]+T.stepCrochet*X._song.notes[e].lengthInSteps*t,a[1],a[2]])}this.updateGrid()}},updateSectionUI:function(){var t=this.getSectionByTime(T.songPosition);null==t?(this.check_mustHitSection.set_checked(!0),this.check_altAnim.set_checked(!1)):(this.check_mustHitSection.set_checked(t.mustHitSection),this.check_altAnim.set_checked(t.altAnim),this.check_changeBPM.set_checked(t.changeBPM))},updateHeads:function(){this.check_mustHitSection.checked?(X.leftIcon.animation.play(X._song.player1),X.rightIcon.animation.play(X._song.player2)):(X.leftIcon.animation.play(X._song.player2),X.rightIcon.animation.play(X._song.player1))},updateNoteUI:function(){null!=this.curSelectedNote&&this.stepperSusLength.set_value(this.curSelectedNote[2])},updateGrid:function(){for(;0<this.curRenderedNotes.members.length;)this.curRenderedNotes.remove(this.curRenderedNotes.members[0],!0);for(;0<this.curRenderedSustains.members.length;)this.curRenderedSustains.remove(this.curRenderedSustains.members[0],!0);for(var t=0,e=X._song.notes;t<e.length;){var n=e[t];++t;for(var s=0,n=n.sectionNotes;s<n.length;){var i=n[s];++s,ac.getTimingAtTimestamp(i[0]);var a=i[1],r=i[0],l=i[2];(i=new Kc(r,a%4,null,!1,!0)).rawNoteData=a,i.sustainLength=l,i.setGraphicSize(Math.floor(this.GRID_SIZE),Math.floor(this.GRID_SIZE)),i.updateHitbox(),i.set_x(Math.floor(a*this.GRID_SIZE)),i.set_y(Math.floor(this.getYfromStrum(r)*this.zoomFactor)),null!=this.curSelectedNote&&this.curSelectedNote[0]==i.strumTime&&(this.lastNote=i),this.curRenderedNotes.add(i),0<l&&(a=new O(i.x+this.GRID_SIZE/2,i.y+this.GRID_SIZE).makeGraphic(8,Math.floor(this.getYfromStrum(i.strumTime+i.sustainLength)*this.zoomFactor-i.y)),i.noteCharterObject=a,this.curRenderedSustains.add(a))}0}},addSection:function(t){null==t&&(t=16);for(var e=0,n=X._song.bpm,s=0,i=this.curSection;s<i;){s++;for(var a=0,r=ac.AllTimings;a<r.length;){var l=r[a];++a;var o=ac.getTimingAtTimestamp(e);(null!=o?o:X._song).bpm!=n&&n!=l.bpm&&(n=l.bpm)}e+=60/n*4e3}X._song.notes.push({startTime:0,endTime:1/0,lengthInSteps:t,bpm:X._song.bpm,changeBPM:!1,mustHitSection:!0,sectionNotes:[],typeOfSection:0,altAnim:!1})},selectNote:function(t){for(var e=0,n=0,s=this.getSectionByTime(t.strumTime).sectionNotes;n<s.length;){var i=s[n];++n,i[0]==t.strumTime&&i[1]==t.rawNoteData&&(this.curSelectedNote=this.getSectionByTime(t.strumTime).sectionNotes[e]),++e}this.updateGrid(),this.updateNoteUI()},deleteNote:function(t){this.lastNote=t;var e=this.getSectionByTime(t.strumTime);Ea.trace(e,{fileName:"source/ChartingState.hx",lineNumber:2288,className:"ChartingState",methodName:"deleteNote"});for(var n=!1,s=0,i=e.sectionNotes;s<i.length;){var a=i[s];++s,a[0]==t.strumTime&&a[1]==t.rawNoteData&&(ma.remove(e.sectionNotes,a),n=!0)}if(!n)for(s=0,i=X._song.notes;s<i.length;)for(a=i[s],++s,e=0,n=a.sectionNotes;e<n.length;){var r=n[e];++e,r[0]==t.strumTime&&r[1]==t.rawNoteData&&ma.remove(a.sectionNotes,r)}Ea.trace("DELETED!",{fileName:"source/ChartingState.hx",lineNumber:2311,className:"ChartingState",methodName:"deleteNote"}),this.updateGrid()},clearSection:function(){this.getSectionByTime(T.songPosition).sectionNotes=[],this.updateGrid()},clearSong:function(){for(var t=0,e=X._song.notes.length;t<e;){var n=t++;X._song.notes[n].sectionNotes=[]}this.updateGrid()},newSection:function(t,e,n){null==n&&(n=!0),null==e&&(e=!1),null==t&&(t=16);for(var s=ac.AllTimings[ac.AllTimings.length-1],i=4,a=0,r=X._song.notes;a<r.length;)++a,i+=4;return null==s?null:{startTime:1e3*(s.startTime+(i-s.startBeat)/(s.bpm/60)),endTime:1/0,lengthInSteps:t,bpm:X._song.bpm,changeBPM:!1,mustHitSection:e,sectionNotes:[],typeOfSection:0,altAnim:n}},recalculateAllSectionTimes:function(){Ea.trace("RECALCULATING SECTION TIMES",{fileName:"source/ChartingState.hx",lineNumber:2392,className:"ChartingState",methodName:"recalculateAllSectionTimes"});for(var t=0,e=X._song.notes.length;t<e;){var n=t++,s=X._song.notes[n],i=4*n,a=ac.getTimingAtBeat(i);if(null==a)return;s.startTime=1e3*(a.startTime+(i-a.startBeat)/(a.bpm/60)),0!=n&&(X._song.notes[n-1].endTime=s.startTime),s.endTime=1/0}this.once=!0},once:null,shiftNotes:function(t,e,n){var s=[];if(e=(t=6e4/this.currentBPM*(4*(t=null==t?0:t)+(e=null==e?0:e)/4)+(n=null==n?0:n))/(6e4/this.currentBPM)/4|0,Ea.trace(t,{fileName:"source/ChartingState.hx",lineNumber:2425,className:"ChartingState",methodName:"shiftNotes",customParams:[e]}),0<t){n=0;for(var i=e;n<i;)n++,s.unshift(this.newSection())}for(n=0,i=X._song.notes.length;n<i;){var a=n++;s.push(this.newSection(16,X._song.notes[a].mustHitSection,X._song.notes[a].altAnim))}for(n=0,i=X._song.notes.length;n<i;){s[r=(r=(a=n++)+(0|e))<0?0:r].mustHitSection=X._song.notes[a].mustHitSection,s[r].altAnim=X._song.notes[a].altAnim;for(var r=0,l=X._song.notes[a].sectionNotes.length;r<l;){var o=r++,h=X._song.notes[a].sectionNotes[o][0]+t;h<0&&(h=0);var _=Math.floor(h/4/(6e4/this.currentBPM));X._song.notes[a].sectionNotes[o][0]=h,s[_].sectionNotes.push(X._song.notes[a].sectionNotes[o])}}X._song.notes=s,this.recalculateAllSectionTimes(),this.updateGrid(),this.updateSectionUI(),this.updateNoteUI()},getSectionByTime:function(t,e){null==e&&(e=!1);for(var n=0,s=0,i=X._song.notes;s<i.length;){var a=i[s];if(++s,t>=a.startTime&&t<a.endTime)return e&&(this.curSection=n),a;++n}return null},getNoteByTime:function(t){for(var e=0,n=X._song.notes;e<n.length;){var s=n[e];++e;for(var i=0,a=s.sectionNotes;i<a.length;){var r=a[i];if(++i,r[0]==t)return s}}return null},addNote:function(t){var e=this.getStrumTime(this.dummyArrow.y)/this.zoomFactor;Ea.trace(e+" from "+this.dummyArrow.y,{fileName:"source/ChartingState.hx",lineNumber:2505,className:"ChartingState",methodName:"addNote"}),Ea.trace("adding note with "+e+" from dummyArrow",{fileName:"source/ChartingState.hx",lineNumber:2507,className:"ChartingState",methodName:"addNote"});var s,i=this.getSectionByTime(e);null!=i&&(s=Math.floor(n.mouse.x/this.GRID_SIZE),null!=t?i.sectionNotes.push([t.strumTime,t.noteData,t.sustainLength]):i.sectionNotes.push([e,s,0]),this.curSelectedNote=i.sectionNotes[i.sectionNotes.length-1],this.updateGrid(),this.updateNoteUI(),this.autosaveSong())},getStrumTime:function(t){return Mb.remapToRange(t,0,X.lengthInSteps,0,X.lengthInSteps)},getYfromStrum:function(t){return Mb.remapToRange(t,0,X.lengthInSteps,0,X.lengthInSteps)},daSpacing:null,loadLevel:function(){Ea.trace(X._song.notes,{fileName:"source/ChartingState.hx",lineNumber:2570,className:"ChartingState",methodName:"loadLevel"})},getNotes:function(){for(var t=[],e=0,n=X._song.notes;e<n.length;){var s=n[e];++e,t.push(s.sectionNotes)}return t},loadJson:function(t){switch(t=Y.replace(y.SONG.song.toLowerCase()," ","-")){case"Dad-Battle":t="Dadbattle";break;case"Philly-Nice":t="Philly"}y.SONG=nf.loadFromJson(t,t),t=md.getNextState(new X,!1),n.game._state.switchTo(t)&&(n.game._requestedState=t)},loadAutosave:function(){y.SONG=nf.parseJSONshit(n.save.data.autosave);var t=md.getNextState(new X,!1);n.game._state.switchTo(t)&&(n.game._requestedState=t)},autosaveSong:function(){n.save.data.autosave=JSON.stringify({song:X._song}),n.save.flush()},saveLevel:function(){var t=JSON.stringify({song:X._song},null," ");null!=t&&0<t.length&&(this._file=new bn,this._file.addEventListener("complete",z(this,this.onSaveComplete)),this._file.addEventListener("cancel",z(this,this.onSaveCancel)),this._file.addEventListener("ioError",z(this,this.onSaveError)),this._file.save(Y.trim(t),X._song.song.toLowerCase()+".json"))},onSaveComplete:function(t){this._file.removeEventListener("complete",z(this,this.onSaveComplete)),this._file.removeEventListener("cancel",z(this,this.onSaveCancel)),this._file.removeEventListener("ioError",z(this,this.onSaveError)),this._file=null},onSaveCancel:function(t){this._file.removeEventListener("complete",z(this,this.onSaveComplete)),this._file.removeEventListener("cancel",z(this,this.onSaveCancel)),this._file.removeEventListener("ioError",z(this,this.onSaveError)),this._file=null},onSaveError:function(t){this._file.removeEventListener("complete",z(this,this.onSaveComplete)),this._file.removeEventListener("cancel",z(this,this.onSaveCancel)),this._file.removeEventListener("ioError",z(this,this.onSaveError)),this._file=null},__class__:X}),Math.__name__="Math";var T=function(){};r.Conductor=T,T.__name__="Conductor",T.songPosition=null,T.lastSongPos=null,T.recalculateTimings=function(){T.safeFrames=n.save.data.frames,T.safeZoneOffset=Math.floor(T.safeFrames/60*1e3),T.timeScale=T.safeZoneOffset/166},T.mapBPMChanges=function(t){T.bpmChangeMap=[];for(var e=t.bpm,n=0,s=0,i=0,a=t.notes.length;i<a;){var r=i++;t.notes[r].changeBPM&&t.notes[r].bpm!=e&&(e=t.notes[r].bpm,T.bpmChangeMap.push({stepTime:n,songTime:s,bpm:e})),n+=r=t.notes[r].lengthInSteps,s+=60/e*1e3/4*r}Ea.trace("new BPM map BUDDY "+U.string(T.bpmChangeMap),{fileName:"source/Conductor.hx",lineNumber:68,className:"Conductor",methodName:"mapBPMChanges"})},T.recalculateTimingStruct=function(t){var e=0;for(t=t.eventObjects;e<t.length;)++e},T.changeBPM=function(t,e){T.bpm=t,T.crochet=60/T.bpm*1e3,T.stepCrochet=T.crochet/4},T.prototype={__class__:T},G.Device={__ename__:"Device",__constructs__:["Keys","Gamepad"],Keys:{_hx_index:0,__enum__:"Device",toString:v},Gamepad:(D=function(t){return{_hx_index:1,id:t,__enum__:"Device",toString:v}},D.__params__=["id"],D)};var Na=G.Control={__ename__:"Control",__constructs__:"UP LEFT RIGHT DOWN RESET ACCEPT BACK PAUSE CHEAT".split(" "),UP:{_hx_index:0,__enum__:"Control",toString:v},LEFT:{_hx_index:1,__enum__:"Control",toString:v},RIGHT:{_hx_index:2,__enum__:"Control",toString:v},DOWN:{_hx_index:3,__enum__:"Control",toString:v},RESET:{_hx_index:4,__enum__:"Control",toString:v},ACCEPT:{_hx_index:5,__enum__:"Control",toString:v},BACK:{_hx_index:6,__enum__:"Control",toString:v},PAUSE:{_hx_index:7,__enum__:"Control",toString:v},CHEAT:{_hx_index:8,__enum__:"Control",toString:v}},qc=G.KeyboardScheme={__ename__:"KeyboardScheme",__constructs__:["Solo","Duo","None","Custom"],Solo:{_hx_index:0,__enum__:"KeyboardScheme",toString:v},Duo:(D=function(t){return{_hx_index:1,first:t,__enum__:"KeyboardScheme",toString:v}},D.__params__=["first"],D),None:{_hx_index:2,__enum__:"KeyboardScheme",toString:v},Custom:{_hx_index:3,__enum__:"KeyboardScheme",toString:v}},Fb=function(t,e,n){this.active=!0,this.name="",this.name=t,null==n&&(n=[]),this.digitalActions=e=null==e?[]:e,this.analogActions=n};r["flixel.input.actions.FlxActionSet"]=Fb,Fb.__name__="flixel.input.actions.FlxActionSet",Fb.__interfaces__=[ba],Fb.fromJson=function(t,e,n){var s=[],i=[];if(null==t)return null;if(null!=t.digitalActions)for(var a=t.digitalActions,r=0;r<a.length;){var l=a[r];++r,l=new Qe(l,e),s.push(l)}if(null!=t.analogActions)for(e=t.analogActions,r=0;r<e.length;)a=e[r],++r,l=new cn(a,n),i.push(l);return null!=t.name?new Fb(t.name,s,i):null},Fb.prototype={name:null,digitalActions:null,analogActions:null,active:null,toJson:function(){return JSON.stringify(this,function(t,e){return e instanceof Xf?{type:e.type,name:e.name,steamHandle:e.steamHandle}:e},"\t")},attachSteamController:function(t,e){this.attachSteamControllerSub(t,e=null==e?!0:e,fh.DIGITAL,this.digitalActions,null),this.attachSteamControllerSub(t,e,fh.ANALOG,null,this.analogActions)},add:function(t){return t.type==fh.DIGITAL?-1==this.digitalActions.indexOf(t)&&(this.digitalActions.push(t),!0):t.type==fh.ANALOG&&(-1==this.analogActions.indexOf(t)&&(this.analogActions.push(t),!0))},destroy:function(){this.digitalActions=Da.destroyArray(this.digitalActions),this.analogActions=Da.destroyArray(this.analogActions)},remove:function(t,e){null==e&&(e=!0);var n=!1;return t.type==fh.DIGITAL?(n=ma.remove(this.digitalActions,t))&&e&&t.destroy():t.type==fh.ANALOG&&(n=ma.remove(this.analogActions,t))&&e&&t.destroy(),n},update:function(){if(this.active){for(var t=0,e=this.digitalActions;t<e.length;){var n=e[t];++t,n.update()}for(t=0,e=this.analogActions;t<e.length;)n=e[t],++t,n.update()}},attachSteamControllerSub:function(t,e,n,s,i){for(var a=0,r=(n==fh.DIGITAL?s:i).length;a<r;){var l=a++,o=(n==fh.DIGITAL?s:i)[l];if(-1!=o.steamHandle){var h=!1,_=null;if(null!=o.inputs)for(var u=0,c=o.inputs;u<c.length;){var d=c[u];++u,d.device==hd.STEAM_CONTROLLER&&d.deviceID==t&&(h=!0,_=d)}e?h||(n==fh.DIGITAL?s[l].add(new dn(o.steamHandle,2,t)):n==fh.ANALOG&&i[l].add(new en(o.steamHandle,1,3,t))):h&&o.remove(_)}}},__class__:Fb};var Vb=function(t,e){null==e&&(e=qc.None),this.keyboardScheme=qc.None,this.gamepadsAdded=[],this.byName=new ya,this._cheat=new Qe("cheat"),this._reset=new Qe("reset"),this._pause=new Qe("pause"),this._back=new Qe("back"),this._accept=new Qe("accept"),this._downR=new Qe("down-release"),this._rightR=new Qe("right-release"),this._leftR=new Qe("left-release"),this._upR=new Qe("up-release"),this._downP=new Qe("down-press"),this._rightP=new Qe("right-press"),this._leftP=new Qe("left-press"),this._upP=new Qe("up-press"),this._down=new Qe("down"),this._right=new Qe("right"),this._left=new Qe("left"),this._up=new Qe("up"),Fb.call(this,t),this.add(this._up),this.add(this._left),this.add(this._right),this.add(this._down),this.add(this._upP),this.add(this._leftP),this.add(this._rightP),this.add(this._downP),this.add(this._upR),this.add(this._leftR),this.add(this._rightR),this.add(this._downR),this.add(this._accept),this.add(this._back),this.add(this._pause),this.add(this._reset),this.add(this._cheat),t=0;for(var n=this.digitalActions;t<n.length;){var s=n[t];++t,this.byName.h[s.name]=s}this.setKeyboardScheme(e,!1)};r.Controls=Vb,Vb.__name__="Controls",Vb.init=function(){var t=new fn;n.inputs.add_flixel_input_actions_FlxActionManager(t)},Vb.addKeys=function(t,e,n){for(var s=0;s<e.length;){var i=e[s];++s,t.addKey(i,n)}},Vb.removeKeys=function(t,e){for(var n=t.inputs.length;0<n--;){var s=t.inputs[n];s.device==hd.KEYBOARD&&-1!=e.indexOf(s.inputID)&&t.remove(s)}},Vb.addButtons=function(t,e,n,s){for(var i=0;i<e.length;){var a=e[i];++i,t.addGamepad(a,n,s)}},Vb.removeButtons=function(t,e,n){for(var s=t.inputs.length;0<s--;){var i=t.inputs[s];i.device!=hd.GAMEPAD||-1!=e&&i.deviceID!=e||-1==n.indexOf(i.inputID)||t.remove(i)}},Vb.isDevice=function(t,e){switch(e._hx_index){case 0:return t.device==hd.KEYBOARD;case 1:return e=e.id,t.device==hd.GAMEPAD&&(-1==e||t.deviceID==e)}},Vb.isGamepad=function(t,e){return t.device==hd.GAMEPAD&&(-1==e||t.deviceID==e)},Vb.__super__=Fb,Vb.prototype=E(Fb.prototype,{_up:null,_left:null,_right:null,_down:null,_upP:null,_leftP:null,_rightP:null,_downP:null,_upR:null,_leftR:null,_rightR:null,_downR:null,_accept:null,_back:null,_pause:null,_reset:null,_cheat:null,byName:null,gamepadsAdded:null,keyboardScheme:null,get_UP:function(){return this._up.check()},get_LEFT:function(){return this._left.check()},get_RIGHT:function(){return this._right.check()},get_DOWN:function(){return this._down.check()},get_UP_P:function(){return this._upP.check()},get_LEFT_P:function(){return this._leftP.check()},get_RIGHT_P:function(){return this._rightP.check()},get_DOWN_P:function(){return this._downP.check()},get_UP_R:function(){return this._upR.check()},get_LEFT_R:function(){return this._leftR.check()},get_RIGHT_R:function(){return this._rightR.check()},get_DOWN_R:function(){return this._downR.check()},get_ACCEPT:function(){return this._accept.check()},get_BACK:function(){return this._back.check()},get_PAUSE:function(){return this._pause.check()},get_RESET:function(){return this._reset.check()},get_CHEAT:function(){return this._cheat.check()},update:function(){Fb.prototype.update.call(this)},checkByName:function(t){return this.byName.h[t].check()},getDialogueName:function(t){var e=(t=t.inputs[0]).device;switch(e._hx_index){case 3:return"["+(null==(t=t.inputID)?"null":cb.toStringMap.h[t])+"]";case 4:return"("+(null==(t=t.inputID)?"null":oc.toStringMap.h[t])+")";default:throw H.thrown("unhandled device: "+U.string(e))}},getDialogueNameFromToken:function(t){return this.getDialogueName(this.getActionFromControl(Jb.createEnum(Na,t.toUpperCase(),null)))},getActionFromControl:function(t){switch(t._hx_index){case 0:return this._up;case 1:return this._left;case 2:return this._right;case 3:return this._down;case 4:return this._reset;case 5:return this._accept;case 6:return this._back;case 7:return this._pause;case 8:return this._cheat}},forEachBound:function(t,e){switch(t._hx_index){case 0:e(this._up,1),e(this._upP,2),e(this._upR,-1);break;case 1:e(this._left,1),e(this._leftP,2),e(this._leftR,-1);break;case 2:e(this._right,1),e(this._rightP,2),e(this._rightR,-1);break;case 3:e(this._down,1),e(this._downP,2),e(this._downR,-1);break;case 4:e(this._reset,2);break;case 5:e(this._accept,2);break;case 6:e(this._back,2);break;case 7:e(this._pause,2);break;case 8:e(this._cheat,2)}},replaceBinding:function(t,e,n,s){if(n!=s)switch(e._hx_index){case 0:null!=s&&this.unbindKeys(t,[s]),null!=n&&this.bindKeys(t,[n]);break;case 1:e=e.id,null!=s&&this.unbindButtons(t,e,[s]),null!=n&&this.bindButtons(t,e,[n])}},copyFrom:function(t,e){for(var n=ya.kvIterator(t.byName.h);n.hasNext();)for(var s=(a=n.next()).key,i=0,a=a.value.inputs;i<a.length;){var r=a[i];++i,null!=e&&!Vb.isDevice(r,e)||this.byName.h[s].add(r)}if(null==e){for(n=0,a=t.gamepadsAdded;n<a.length;)e=a[n],++n,-1==this.gamepadsAdded.indexOf(e)&&this.gamepadsAdded.push(e);this.mergeKeyboardScheme(t.keyboardScheme)}else switch(e._hx_index){case 0:this.mergeKeyboardScheme(t.keyboardScheme);break;case 1:this.gamepadsAdded.push(e.id)}},copyTo:function(t,e){t.copyFrom(this,e)},mergeKeyboardScheme:function(t){t!=qc.None&&(this.keyboardScheme=2==this.keyboardScheme._hx_index?t:qc.Custom)},bindKeys:function(t,e){switch(t._hx_index){case 0:t=this._up;for(var n=1,s=0;s<e.length;){var i=e[s];++s,t.addKey(i,n)}for(t=this._upP,n=2,s=0;s<e.length;)i=e[s],++s,t.addKey(i,n);for(t=this._upR,n=-1,s=0;s<e.length;)i=e[s],++s,t.addKey(i,n);break;case 1:for(t=this._left,n=1,s=0;s<e.length;)i=e[s],++s,t.addKey(i,n);for(t=this._leftP,n=2,s=0;s<e.length;)i=e[s],++s,t.addKey(i,n);for(t=this._leftR,n=-1,s=0;s<e.length;)i=e[s],++s,t.addKey(i,n);break;case 2:for(t=this._right,n=1,s=0;s<e.length;)i=e[s],++s,t.addKey(i,n);for(t=this._rightP,n=2,s=0;s<e.length;)i=e[s],++s,t.addKey(i,n);for(t=this._rightR,n=-1,s=0;s<e.length;)i=e[s],++s,t.addKey(i,n);break;case 3:for(t=this._down,n=1,s=0;s<e.length;)i=e[s],++s,t.addKey(i,n);for(t=this._downP,n=2,s=0;s<e.length;)i=e[s],++s,t.addKey(i,n);for(t=this._downR,n=-1,s=0;s<e.length;)i=e[s],++s,t.addKey(i,n);break;case 4:for(t=this._reset,n=2,s=0;s<e.length;)i=e[s],++s,t.addKey(i,n);break;case 5:for(t=this._accept,n=2,s=0;s<e.length;)i=e[s],++s,t.addKey(i,n);break;case 6:for(t=this._back,n=2,s=0;s<e.length;)i=e[s],++s,t.addKey(i,n);break;case 7:for(t=this._pause,n=2,s=0;s<e.length;)i=e[s],++s,t.addKey(i,n);break;case 8:for(t=this._cheat,n=2,s=0;s<e.length;)i=e[s],++s,t.addKey(i,n)}},unbindKeys:function(t,e){switch(t._hx_index){case 0:Vb.removeKeys(this._up,e),Vb.removeKeys(this._upP,e),Vb.removeKeys(this._upR,e);break;case 1:Vb.removeKeys(this._left,e),Vb.removeKeys(this._leftP,e),Vb.removeKeys(this._leftR,e);break;case 2:Vb.removeKeys(this._right,e),Vb.removeKeys(this._rightP,e),Vb.removeKeys(this._rightR,e);break;case 3:Vb.removeKeys(this._down,e),Vb.removeKeys(this._downP,e),Vb.removeKeys(this._downR,e);break;case 4:Vb.removeKeys(this._reset,e);break;case 5:Vb.removeKeys(this._accept,e);break;case 6:Vb.removeKeys(this._back,e);break;case 7:Vb.removeKeys(this._pause,e);break;case 8:Vb.removeKeys(this._cheat,e)}},setKeyboardScheme:function(t,e){this.loadKeyBinds()},loadKeyBinds:function(){this.removeKeyboard(),0!=this.gamepadsAdded.length&&this.removeGamepad(),ve.keyCheck();var t=new Fi;switch(e=(e=n.save.data.gpupBind).toUpperCase(),t.set(Na.UP,[Object.prototype.hasOwnProperty.call(oc.fromStringMap.h,e)?oc.fromStringMap.h[e]:-1]),e=(e=n.save.data.gpleftBind).toUpperCase(),t.set(Na.LEFT,[Object.prototype.hasOwnProperty.call(oc.fromStringMap.h,e)?oc.fromStringMap.h[e]:-1]),e=(e=n.save.data.gpdownBind).toUpperCase(),t.set(Na.DOWN,[Object.prototype.hasOwnProperty.call(oc.fromStringMap.h,e)?oc.fromStringMap.h[e]:-1]),e=(e=n.save.data.gprightBind).toUpperCase(),t.set(Na.RIGHT,[Object.prototype.hasOwnProperty.call(oc.fromStringMap.h,e)?oc.fromStringMap.h[e]:-1]),t.set(Na.ACCEPT,[0]),t.set(Na.BACK,[1]),t.set(Na.PAUSE,[7]),this.addGamepad(0,t),e=(e=n.save.data.upBind).toUpperCase(),t=[Object.prototype.hasOwnProperty.call(cb.fromStringMap.h,e)?cb.fromStringMap.h[e]:-1,38],Na.UP._hx_index){case 0:for(var e=this._up,s=1,i=0;i<t.length;){var a=t[i];++i,e.addKey(a,s)}for(e=this._upP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._upR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 1:for(e=this._left,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._leftP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._leftR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 2:for(e=this._right,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._rightP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._rightR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 3:for(e=this._down,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._downP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._downR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 4:for(e=this._reset,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 5:for(e=this._accept,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 6:for(e=this._back,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 7:for(e=this._pause,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 8:for(e=this._cheat,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s)}switch(e=(e=n.save.data.downBind).toUpperCase(),t=[Object.prototype.hasOwnProperty.call(cb.fromStringMap.h,e)?cb.fromStringMap.h[e]:-1,40],Na.DOWN._hx_index){case 0:for(e=this._up,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._upP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._upR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 1:for(e=this._left,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._leftP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._leftR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 2:for(e=this._right,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._rightP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._rightR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 3:for(e=this._down,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._downP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._downR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 4:for(e=this._reset,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 5:for(e=this._accept,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 6:for(e=this._back,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 7:for(e=this._pause,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 8:for(e=this._cheat,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s)}switch(e=(e=n.save.data.leftBind).toUpperCase(),t=[Object.prototype.hasOwnProperty.call(cb.fromStringMap.h,e)?cb.fromStringMap.h[e]:-1,37],Na.LEFT._hx_index){case 0:for(e=this._up,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._upP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._upR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 1:for(e=this._left,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._leftP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._leftR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 2:for(e=this._right,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._rightP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._rightR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 3:for(e=this._down,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._downP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._downR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 4:for(e=this._reset,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 5:for(e=this._accept,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 6:for(e=this._back,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 7:for(e=this._pause,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 8:for(e=this._cheat,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s)}switch(e=(e=n.save.data.rightBind).toUpperCase(),t=[Object.prototype.hasOwnProperty.call(cb.fromStringMap.h,e)?cb.fromStringMap.h[e]:-1,39],Na.RIGHT._hx_index){case 0:for(e=this._up,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._upP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._upR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 1:for(e=this._left,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._leftP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._leftR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 2:for(e=this._right,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._rightP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._rightR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 3:for(e=this._down,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._downP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._downR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 4:for(e=this._reset,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 5:for(e=this._accept,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 6:for(e=this._back,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 7:for(e=this._pause,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 8:for(e=this._cheat,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s)}switch(t=[90,32,13],Na.ACCEPT._hx_index){case 0:for(e=this._up,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._upP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._upR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 1:for(e=this._left,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._leftP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._leftR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 2:for(e=this._right,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._rightP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._rightR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 3:for(e=this._down,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._downP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._downR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 4:for(e=this._reset,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 5:for(e=this._accept,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 6:for(e=this._back,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 7:for(e=this._pause,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 8:for(e=this._cheat,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s)}switch(t=[8,27],Na.BACK._hx_index){case 0:for(e=this._up,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._upP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._upR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 1:for(e=this._left,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._leftP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._leftR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 2:for(e=this._right,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._rightP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._rightR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 3:for(e=this._down,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._downP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._downR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 4:for(e=this._reset,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 5:for(e=this._accept,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 6:for(e=this._back,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 7:for(e=this._pause,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 8:for(e=this._cheat,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s)}switch(t=[13,27],Na.PAUSE._hx_index){case 0:for(e=this._up,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._upP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._upR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 1:for(e=this._left,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._leftP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._leftR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 2:for(e=this._right,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._rightP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._rightR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 3:for(e=this._down,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._downP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._downR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 4:for(e=this._reset,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 5:for(e=this._accept,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 6:for(e=this._back,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 7:for(e=this._pause,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 8:for(e=this._cheat,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s)}switch(e=(e=n.save.data.killBind).toUpperCase(),t=[Object.prototype.hasOwnProperty.call(cb.fromStringMap.h,e)?cb.fromStringMap.h[e]:-1],Na.RESET._hx_index){case 0:for(e=this._up,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._upP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._upR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 1:for(e=this._left,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._leftP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._leftR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 2:for(e=this._right,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._rightP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._rightR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 3:for(e=this._down,s=1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._downP,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);for(e=this._downR,s=-1,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 4:for(e=this._reset,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 5:for(e=this._accept,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 6:for(e=this._back,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 7:for(e=this._pause,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s);break;case 8:for(e=this._cheat,s=2,i=0;i<t.length;)a=t[i],++i,e.addKey(a,s)}},removeKeyboard:function(){for(var t=0,e=this.digitalActions;t<e.length;){var n=e[t];++t;for(var s=n.inputs.length;0<s--;){var i=n.inputs[s];i.device==hd.KEYBOARD&&n.remove(i)}}},addGamepad:function(t,e){for(-1!=this.gamepadsAdded.indexOf(t)&&ma.remove(this.gamepadsAdded,t),this.gamepadsAdded.push(t),e=new Wh(e);e.hasNext();){var n=t,s=(i=e.next()).value;switch(i.key._hx_index){case 0:for(var i=this._up,a=0;a<s.length;){var r=s[a];++a,i.addGamepad(r,1,n)}for(i=this._upP,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n);for(i=this._upR,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,-1,n);break;case 1:for(i=this._left,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,1,n);for(i=this._leftP,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n);for(i=this._leftR,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,-1,n);break;case 2:for(i=this._right,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,1,n);for(i=this._rightP,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n);for(i=this._rightR,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,-1,n);break;case 3:for(i=this._down,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,1,n);for(i=this._downP,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n);for(i=this._downR,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,-1,n);break;case 4:for(i=this._reset,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n);break;case 5:for(i=this._accept,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n);break;case 6:for(i=this._back,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n);break;case 7:for(i=this._pause,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n);break;case 8:for(i=this._cheat,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n)}}},addGamepadLiteral:function(t,e){for(this.gamepadsAdded.push(t),e=new Wh(e);e.hasNext();){var n=t,s=(i=e.next()).value;switch(i.key._hx_index){case 0:for(var i=this._up,a=0;a<s.length;){var r=s[a];++a,i.addGamepad(r,1,n)}for(i=this._upP,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n);for(i=this._upR,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,-1,n);break;case 1:for(i=this._left,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,1,n);for(i=this._leftP,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n);for(i=this._leftR,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,-1,n);break;case 2:for(i=this._right,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,1,n);for(i=this._rightP,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n);for(i=this._rightR,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,-1,n);break;case 3:for(i=this._down,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,1,n);for(i=this._downP,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n);for(i=this._downR,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,-1,n);break;case 4:for(i=this._reset,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n);break;case 5:for(i=this._accept,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n);break;case 6:for(i=this._back,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n);break;case 7:for(i=this._pause,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n);break;case 8:for(i=this._cheat,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n)}}},removeGamepad:function(t){null==t&&(t=-1);for(var e=0,n=this.digitalActions;e<n.length;){var s=n[e];++e;for(var i=s.inputs.length;0<i--;){var a=s.inputs[i];a.device!=hd.GAMEPAD||-1!=t&&a.deviceID!=t||s.remove(a)}}ma.remove(this.gamepadsAdded,t)},addDefaultGamepad:function(t){(i=new Fi).set(Na.ACCEPT,[0]),i.set(Na.BACK,[1]),i.set(Na.UP,[11,34]),i.set(Na.DOWN,[12,36]),i.set(Na.LEFT,[13,37]),i.set(Na.RIGHT,[14,35]),i.set(Na.PAUSE,[7]),i.set(Na.RESET,[3]),this.gamepadsAdded.push(t);for(var e=new Wh(i);e.hasNext();){var n=t,s=(i=e.next()).value;switch(i.key._hx_index){case 0:for(var i=this._up,a=0;a<s.length;){var r=s[a];++a,i.addGamepad(r,1,n)}for(i=this._upP,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n);for(i=this._upR,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,-1,n);break;case 1:for(i=this._left,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,1,n);for(i=this._leftP,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n);for(i=this._leftR,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,-1,n);break;case 2:for(i=this._right,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,1,n);for(i=this._rightP,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n);for(i=this._rightR,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,-1,n);break;case 3:for(i=this._down,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,1,n);for(i=this._downP,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n);for(i=this._downR,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,-1,n);break;case 4:for(i=this._reset,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n);break;case 5:for(i=this._accept,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n);break;case 6:for(i=this._back,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n);break;case 7:for(i=this._pause,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n);break;case 8:for(i=this._cheat,a=0;a<s.length;)r=s[a],++a,i.addGamepad(r,2,n)}}},bindButtons:function(t,e,n){switch(t._hx_index){case 0:t=this._up;for(var s=1,i=0;i<n.length;){var a=n[i];++i,t.addGamepad(a,s,e)}for(t=this._upP,s=2,i=0;i<n.length;)a=n[i],++i,t.addGamepad(a,s,e);for(t=this._upR,s=-1,i=0;i<n.length;)a=n[i],++i,t.addGamepad(a,s,e);break;case 1:for(t=this._left,s=1,i=0;i<n.length;)a=n[i],++i,t.addGamepad(a,s,e);for(t=this._leftP,s=2,i=0;i<n.length;)a=n[i],++i,t.addGamepad(a,s,e);for(t=this._leftR,s=-1,i=0;i<n.length;)a=n[i],++i,t.addGamepad(a,s,e);break;case 2:for(t=this._right,s=1,i=0;i<n.length;)a=n[i],++i,t.addGamepad(a,s,e);for(t=this._rightP,s=2,i=0;i<n.length;)a=n[i],++i,t.addGamepad(a,s,e);for(t=this._rightR,s=-1,i=0;i<n.length;)a=n[i],++i,t.addGamepad(a,s,e);break;case 3:for(t=this._down,s=1,i=0;i<n.length;)a=n[i],++i,t.addGamepad(a,s,e);for(t=this._downP,s=2,i=0;i<n.length;)a=n[i],++i,t.addGamepad(a,s,e);for(t=this._downR,s=-1,i=0;i<n.length;)a=n[i],++i,t.addGamepad(a,s,e);break;case 4:for(t=this._reset,s=2,i=0;i<n.length;)a=n[i],++i,t.addGamepad(a,s,e);break;case 5:for(t=this._accept,s=2,i=0;i<n.length;)a=n[i],++i,t.addGamepad(a,s,e);break;case 6:for(t=this._back,s=2,i=0;i<n.length;)a=n[i],++i,t.addGamepad(a,s,e);break;case 7:for(t=this._pause,s=2,i=0;i<n.length;)a=n[i],++i,t.addGamepad(a,s,e);break;case 8:for(t=this._cheat,s=2,i=0;i<n.length;)a=n[i],++i,t.addGamepad(a,s,e)}},unbindButtons:function(t,e,n){switch(t._hx_index){case 0:Vb.removeButtons(this._up,e,n),Vb.removeButtons(this._upP,e,n),Vb.removeButtons(this._upR,e,n);break;case 1:Vb.removeButtons(this._left,e,n),Vb.removeButtons(this._leftP,e,n),Vb.removeButtons(this._leftR,e,n);break;case 2:Vb.removeButtons(this._right,e,n),Vb.removeButtons(this._rightP,e,n),Vb.removeButtons(this._rightR,e,n);break;case 3:Vb.removeButtons(this._down,e,n),Vb.removeButtons(this._downP,e,n),Vb.removeButtons(this._downR,e,n);break;case 4:Vb.removeButtons(this._reset,e,n);break;case 5:Vb.removeButtons(this._accept,e,n);break;case 6:Vb.removeButtons(this._back,e,n);break;case 7:Vb.removeButtons(this._pause,e,n);break;case 8:Vb.removeButtons(this._cheat,e,n)}},getInputsFor:function(t,e,n){switch(null==n&&(n=[]),e._hx_index){case 0:for(e=0,t=this.getActionFromControl(t).inputs;e<t.length;){var s=t[e];++e,s.device==hd.KEYBOARD&&n.push(s.inputID)}break;case 1:var i=e.id;for(e=0,t=this.getActionFromControl(t).inputs;e<t.length;)s=t[e],++e,s.deviceID==i&&n.push(s.inputID)}return n},removeDevice:function(t){switch(t._hx_index){case 0:this.setKeyboardScheme(qc.None);break;case 1:this.removeGamepad(t.id)}},__class__:Vb,__properties__:{get_CHEAT:"get_CHEAT",get_RESET:"get_RESET",get_PAUSE:"get_PAUSE",get_BACK:"get_BACK",get_ACCEPT:"get_ACCEPT",get_DOWN_R:"get_DOWN_R",get_RIGHT_R:"get_RIGHT_R",get_LEFT_R:"get_LEFT_R",get_UP_R:"get_UP_R",get_DOWN_P:"get_DOWN_P",get_RIGHT_P:"get_RIGHT_P",get_LEFT_P:"get_LEFT_P",get_UP_P:"get_UP_P",get_DOWN:"get_DOWN",get_RIGHT:"get_RIGHT",get_LEFT:"get_LEFT",get_UP:"get_UP"}});var Gd=function(){};r.ConvertScore=Gd,Gd.__name__="ConvertScore",Gd.convertScore=function(t){switch(If.CalculateRating(t,166)){case"good":return 200;case"shit":return-300;case"sick":return 350}return 0};var cd=function(){};r.CoolUtil=cd,cd.__name__="CoolUtil",cd.difficultyFromInt=function(t){return cd.difficultyArray[t]},cd.coolTextFile=function(t){for(var e=0,n=(t=Y.trim(Ma.getText(t)).split("\n")).length;e<n;){var s=e++;t[s]=Y.trim(t[s])}return t},cd.coolStringFile=function(t){for(var e=0,n=(t=Y.trim(t).split("\n")).length;e<n;){var s=e++;t[s]=Y.trim(t[s])}return t},cd.numberArray=function(t,e){null==e&&(e=0);for(var n=[];e<t;){var s=e++;n.push(s)}return n};var ji=function(t,e,s){null==s&&(s="1"),null==t&&(t=!0),this.dialogueOpened=this.dialogueStarted=this.isEnding=!1,this.folderPrefix="",this.switchingScene=!1,this.curDialogue=0,this.rawDialogue=[],this.characterList=[],this.fullSoundList=[],this.fulldialogueList=[],this.curCharacter="";var i=this;switch(lb.call(this),this.dialogueSound=new bg,y.SONG.song.toLowerCase()){case"diagraphephobia":n.sound.playMusic(K.getPath("music/Eteled_Cutscene_3_1.ogg","MUSIC","eteled"),0);var a=1,r=0,l=.1;null==l&&(l=1),null==r&&(r=0),null==a&&(a=1),null==(s=n.sound.music)._channel&&s.play(),null!=s.fadeTween&&s.fadeTween.cancel(),s.fadeTween=Ta.num(r,l,a,{onComplete:null},z(s,s.volumeTween));break;case"dream-of-peace":n.sound.playMusic(K.getPath("music/Eteled_Cutscene_2_2.ogg","MUSIC","eteled"),0),null==(l=.1)&&(l=1),null==(r=0)&&(r=0),null==(a=1)&&(a=1),null==(s=n.sound.music)._channel&&s.play(),null!=s.fadeTween&&s.fadeTween.cancel(),s.fadeTween=Ta.num(r,l,a,{onComplete:null},z(s,s.volumeTween));break;case"post-mortal":n.sound.playMusic(K.getPath("music/Eteled_Cutscene_2_2.ogg","MUSIC","eteled"),0),null==(l=.1)&&(l=1),null==(r=0)&&(r=0),null==(a=1)&&(a=1),null==(s=n.sound.music)._channel&&s.play(),null!=s.fadeTween&&s.fadeTween.cancel(),s.fadeTween=Ta.num(r,l,a,{onComplete:null},z(s,s.volumeTween))}if(this.bgFade=new O(-200,-200).makeGraphic(1.3*n.width|0,1.3*n.height|0,-4988968),this.bgFade.scrollFactor.set(),this.bgFade.set_alpha(0),this.add(this.bgFade),this.specialblack=new O(-100,-100).makeGraphic(2*n.width,2*n.height,-16777216),this.specialblack.scrollFactor.set(),y.SONG.song.toLowerCase(),(new Tc).start(.05,function(t){(t=i.bgFade).set_alpha(t.alpha+.06999999999999999),.7<i.bgFade.alpha&&i.bgFade.set_alpha(.7)},10),this.cutscene=new O,this.cutscene.set_alpha(0),this.charLabel=new O(-30,438).loadGraphic(K.getPath("images/labels/austin.png","IMAGE","eteled")),this.charLabel=new O(-25,435).loadGraphic(K.getPath("images/labels/eteled.png","IMAGE","eteled")),this.charLabel=new O(-30,444).loadGraphic(K.getPath("images/labels/bf.png","IMAGE","eteled")),this.charLabel=new O(-30,444).loadGraphic(K.getPath("images/labels/gf.png","IMAGE","eteled")),this.charLabel.set_alpha(0),this.box=new O(-35,470),s=!1,y.SONG.song.toLowerCase(),s=!0,this.box.set_frames(La.fromSparrow(K.getPath("images/speech_bubble_talking.png","IMAGE","eteled"),K.getPath("images/speech_bubble_talking.xml","TEXT","eteled"))),this.box.animation.addByPrefix("normalOpen","Speech Bubble Normal Open",24,!1),this.box.animation.addByIndices("normal","speech bubble normal",[11],"",24),this.rawDialogue=e,s){switch(y.SONG.song.toLowerCase()){case"challenger":case"ego":case"frenzy":case"genesis":case"golden":case"orbit":case"ouch":case"vast":case"vibe":this.portraitRight=new O(0,40),this.portraitLeft=new O(-60,40),this.portraitLeft.set_frames(La.fromSparrow(K.getPath("images/weeb/senpaiPortrait.png","IMAGE",s=null),K.getPath("images/weeb/senpaiPortrait.xml","TEXT",s))),this.portraitLeft.animation.addByPrefix("enter","Senpai Portrait Enter",24,!1),this.portraitLeft.setGraphicSize(this.portraitLeft.get_width()*y.daPixelZoom*.9|0),this.portraitRight.set_frames(La.fromSparrow(K.getPath("images/weeb/bfPortrait.png","IMAGE",s=null),K.getPath("images/weeb/bfPortrait.xml","TEXT",s))),this.portraitRight.animation.addByPrefix("enter","Boyfriend portrait enter",24,!1),this.portraitRight.setGraphicSize(this.portraitRight.get_width()*y.daPixelZoom*.9|0);break;default:this.portraitRight=new O(0,40),this.portraitLeft=new O(-20,40),this.portraitLeft.set_frames(La.fromSparrow(K.getPath("images/weeb/senpaiPortrait.png","IMAGE",s=null),K.getPath("images/weeb/senpaiPortrait.xml","TEXT",s))),this.portraitLeft.animation.addByPrefix("enter","Senpai Portrait Enter",24,!1),this.portraitLeft.setGraphicSize(this.portraitLeft.get_width()*y.daPixelZoom*.9|0),this.portraitRight.set_frames(La.fromSparrow(K.getPath("images/weeb/bfPortrait.png","IMAGE",s=null),K.getPath("images/weeb/bfPortrait.xml","TEXT",s))),this.portraitRight.animation.addByPrefix("enter","Boyfriend portrait enter",24,!1),this.portraitRight.setGraphicSize(this.portraitRight.get_width()*y.daPixelZoom*.9|0)}this.add(this.portraitLeft),this.portraitLeft.set_visible(!1),this.portraitLeft.updateHitbox(),this.portraitLeft.scrollFactor.set(),this.portraitRight.updateHitbox(),this.portraitRight.scrollFactor.set(),this.add(this.portraitRight),this.portraitRight.set_visible(!1),this.box.animation.play("normalOpen"),this.box.updateHitbox(),this.add(this.box),this.box.screenCenter(Ce.X),this.portraitLeft.screenCenter(Ce.X),t||this.box.set_flipX(!0),this.add(this.charLabel),this.swagDialogue=new gh(51,570,1192,"",37),this.swagDialogue.set_font("assets/fonts/A-OTF-ShinGoPro-DeBold.otf"),this.swagDialogue.set_color(-1),t=n.sound.load(K.sound("pixelText"),.6),this.swagDialogue.sounds=[t],s=this.swagDialogue,null==(a=e=7)&&(a=1),null==e&&(e=1),null==(t=qb.fromString("#FF304845"))&&(t=0),s.set_borderStyle(Zc.OUTLINE),s.set_borderColor(t),s.set_borderSize(e),s.set_borderQuality(a),this.add(this.swagDialogue),this.coolDialogue=new gh(240,500,.6*n.width|0,"",32),this.coolDialogue.set_font("Pixel Arial 11 Bold"),this.coolDialogue.set_color(-12640223),t=n.sound.load(K.sound("pixelText"),.6),this.coolDialogue.sounds=[t],this.dialogue=new $b(0,80,"",!1,!0),this.cleanDialog()}};r.DialogueBox=ji,ji.__name__="DialogueBox",ji.__super__=lb,ji.prototype=E(lb.prototype,{box:null,curCharacter:null,dialogue:null,fulldialogueList:null,fullSoundList:null,characterList:null,rawDialogue:null,curDialogue:null,swagDialogue:null,coolDialogue:null,cutscene:null,dropText:null,finishThing:null,doTheCutscene:null,destroyRed:null,fuckyouImadethislikeanhourbeforerelease:null,portraitLeft:null,portraitRight:null,switchingScene:null,handSelect:null,bgFade:null,specialblack:null,folderPrefix:null,charLabel:null,dialogueSound:null,dialogueOpened:null,dialogueStarted:null,update:function(t){"roses"==y.SONG.song.toLowerCase()&&this.portraitLeft.set_visible(!1),"thorns"==y.SONG.song.toLowerCase()&&(this.portraitLeft.set_color(-16777216),this.swagDialogue.set_color(-1)),null!=this.box.animation._curAnim&&"normalOpen"==this.box.animation._curAnim.name&&this.box.animation._curAnim.finished&&(this.box.animation.play("normal"),this.dialogueOpened=!0),this.dialogueOpened&&!this.dialogueStarted&&(this.startDialogue(),this.dialogueStarted=!0),n.keys.justPressed.get_ANY()&&1==this.dialogueStarted&&(this.remove(this.dialogue),n.sound.play(K.sound("clickText"),.8),this.switchingScene||this.addDialogue()),lb.prototype.update.call(this,t)},isEnding:null,startDialogue:function(){var t;null!=this.dialogueSound._channel&&(t=this.dialogueSound).cleanup(t.autoDestroy,!0),""!=this.fullSoundList[this.curDialogue]&&(this.dialogueSound=n.sound.play(K.sound(this.fullSoundList[this.curDialogue],"eteled"),1),this.dialogueSound.play()),Ea.trace(this.fullSoundList[this.curDialogue],{fileName:"source/DialogueBox.hx",lineNumber:253,className:"DialogueBox",methodName:"startDialogue"}),this.box.set_alpha(1);var e=t=0;switch(this.characterList[this.curDialogue]){case"austin1":this.portraitLeft.set_visible(!0),this.portraitRight.set_visible(!1),this.remove(this.portraitLeft),this.portraitLeft=new O(29,162).loadGraphic(K.getPath("images/portraits/austin1.png","IMAGE","eteled")),this.add(this.portraitLeft),e=2,t=1;break;case"austin2":this.portraitLeft.set_visible(!0),this.portraitRight.set_visible(!1),this.box.set_flipX(!1),this.remove(this.portraitLeft),this.portraitLeft=new O(22,149).loadGraphic(K.getPath("images/portraits/austin2.png","IMAGE","eteled")),this.add(this.portraitLeft),e=2,t=1;break;case"austin3":this.portraitLeft.set_visible(!0),this.portraitRight.set_visible(!1),this.box.set_flipX(!1),this.remove(this.portraitLeft),this.portraitLeft=new O(0,149).loadGraphic(K.getPath("images/portraits/austin3.png","IMAGE","eteled")),this.add(this.portraitLeft),t=1,e=2;break;case"austin4":this.portraitLeft.set_visible(!0),this.portraitRight.set_visible(!1),this.box.set_flipX(!1),this.remove(this.portraitLeft),this.portraitLeft=new O(2,164).loadGraphic(K.getPath("images/portraits/austin4.png","IMAGE","eteled")),this.add(this.portraitLeft),e=2,t=1;break;case"austin5":this.portraitLeft.set_visible(!0),this.portraitRight.set_visible(!1),this.box.set_flipX(!1),this.remove(this.portraitLeft),this.portraitLeft=new O(22,148).loadGraphic(K.getPath("images/portraits/austin5.png","IMAGE","eteled")),this.add(this.portraitLeft),e=2,t=1;break;case"bf":this.portraitRight.set_visible(!0),this.portraitLeft.set_visible(!1),this.box.set_flipX(!1),this.remove(this.portraitRight),this.portraitRight=new O(17,274).loadGraphic(K.getPath("images/portraits/bf.png","IMAGE","eteled")),this.portraitRight.set_flipX(!0),this.add(this.portraitRight);break;case"eteled1":this.portraitLeft.set_visible(!0),this.portraitRight.set_visible(!1),this.box.set_flipX(!1),this.remove(this.portraitLeft),this.portraitLeft=new O(84,211).loadGraphic(K.getPath("images/portraits/eteled1.png","IMAGE","eteled")),this.add(this.portraitLeft),e=t=1;break;case"eteled2":this.portraitLeft.set_visible(!0),this.portraitRight.set_visible(!1),this.box.set_flipX(!1),this.remove(this.portraitLeft),this.portraitLeft=new O(98,235).loadGraphic(K.getPath("images/portraits/eteled2.png","IMAGE","eteled")),this.add(this.portraitLeft),e=t=1;break;case"eteled3":this.portraitLeft.set_visible(!0),this.portraitRight.set_visible(!1),this.box.set_flipX(!1),this.remove(this.portraitLeft),this.portraitLeft=new O(74,214).loadGraphic(K.getPath("images/portraits/eteled3.png","IMAGE","eteled")),this.add(this.portraitLeft),e=t=1;break;case"eteled4":this.portraitLeft.set_visible(!0),this.portraitRight.set_visible(!1),this.box.set_flipX(!1),this.remove(this.portraitLeft),this.portraitLeft=new O(74,215).loadGraphic(K.getPath("images/portraits/eteled4.png","IMAGE","eteled")),this.add(this.portraitLeft),e=t=1;break;case"eteled5":this.portraitLeft.set_visible(!0),this.portraitRight.set_visible(!1),this.box.set_flipX(!1),this.remove(this.portraitLeft),this.portraitLeft=new O(84,219).loadGraphic(K.getPath("images/portraits/eteled5.png","IMAGE","eteled")),this.add(this.portraitLeft),e=t=1;break;case"eteled6":this.portraitLeft.set_visible(!0),this.portraitRight.set_visible(!1),this.box.set_flipX(!1),this.remove(this.portraitLeft),this.portraitLeft=new O(98,282).loadGraphic(K.getPath("images/portraits/eteled6.png","IMAGE","eteled")),this.add(this.portraitLeft),e=t=1;break;case"eteled7":this.portraitLeft.set_visible(!0),this.portraitRight.set_visible(!1),this.box.set_flipX(!1),this.remove(this.portraitLeft),this.portraitLeft=new O(98,297).loadGraphic(K.getPath("images/portraits/eteled7.png","IMAGE","eteled")),this.add(this.portraitLeft),e=t=1;break;case"eteled8":this.portraitLeft.set_visible(!0),this.portraitRight.set_visible(!1),this.box.set_flipX(!1),this.remove(this.portraitLeft),this.portraitLeft=new O(58,275).loadGraphic(K.getPath("images/portraits/eteled8.png","IMAGE","eteled")),this.add(this.portraitLeft),e=t=1;break;case"gf":this.portraitRight.set_visible(!0),this.portraitLeft.set_visible(!1),this.box.set_flipX(!1),this.remove(this.portraitRight),this.portraitRight=new O(894,254).loadGraphic(K.getPath("images/portraits/gf.png","IMAGE","eteled")),this.add(this.portraitRight),e=3;break;case"mystery1":this.portraitLeft.set_visible(!0),this.portraitRight.set_visible(!1),this.remove(this.portraitLeft),this.portraitLeft=new O(29,162).loadGraphic(K.getPath("images/portraits/austin1.png","IMAGE","eteled")),this.add(this.portraitLeft),e=5,t=1;break;case"mystery2":this.portraitLeft.set_visible(!0),this.portraitRight.set_visible(!1),this.remove(this.portraitLeft),this.portraitLeft=new O(29,162).loadGraphic(K.getPath("images/portraits/austin2.png","IMAGE","eteled")),this.add(this.portraitLeft),e=5,t=1;break;case"none":this.portraitLeft.set_visible(!1),this.portraitRight.set_visible(!1);break;case"np-austin":this.portraitLeft.set_visible(!1),this.portraitRight.set_visible(!1),t=1,e=2;break;case"np-bf":this.portraitLeft.set_visible(!1),this.portraitRight.set_visible(!1);break;case"np-eteled":this.portraitLeft.set_visible(!1),this.portraitRight.set_visible(!1),e=t=1;break;case"np-gf":this.portraitLeft.set_visible(!1),this.portraitRight.set_visible(!1),e=3;break;case"np-mystery":this.portraitLeft.set_visible(!1),this.portraitRight.set_visible(!1),t=1,e=5}switch(t){case 0:this.remove(this.box),this.box=new O(-20,433),this.box.set_frames(La.fromSparrow(K.getPath("images/speech_bubble_talking2.png","IMAGE","eteled"),K.getPath("images/speech_bubble_talking2.xml","TEXT","eteled"))),this.box.animation.addByIndices("normal","samkyle speech bubble normal",[11],"",24),this.box.animation.play("normal"),this.box.updateHitbox(),Ea.trace(this.box.x,{fileName:"source/DialogueBox.hx",lineNumber:445,className:"DialogueBox",methodName:"startDialogue"}),this.swagDialogue.set_y(570),this.swagDialogue.set_borderColor(qb.fromString("#FF000000")),this.add(this.box),this.addLabel(e);break;case 1:this.remove(this.box),this.box=new O(-35,470),this.box.set_frames(La.fromSparrow(K.getPath("images/speech_bubble_talking.png","IMAGE","eteled"),K.getPath("images/speech_bubble_talking.xml","TEXT","eteled"))),this.box.animation.addByIndices("normal","speech bubble normal",[11],"",24),this.box.animation.play("normal"),this.box.updateHitbox(),this.box.screenCenter(Ce.X),this.swagDialogue.set_y(550),this.swagDialogue.set_borderColor(qb.fromString("#FF304845")),this.add(this.box),this.addLabel(e)}this.swagDialogue.set_alpha(1),this.swagDialogue.resetText(this.fulldialogueList[this.curDialogue]),this.swagDialogue.start(.04,!0)},addLabel:function(t){switch(t){case 0:this.remove(this.charLabel),this.charLabel=new O(-30,444).loadGraphic(K.getPath("images/labels/bf.png","IMAGE","eteled")),this.add(this.charLabel);break;case 1:this.remove(this.charLabel),this.charLabel=new O(-25,435).loadGraphic(K.getPath("images/labels/eteled.png","IMAGE","eteled")),this.add(this.charLabel);break;case 2:this.remove(this.charLabel),this.charLabel=new O(-30,438).loadGraphic(K.getPath("images/labels/austin.png","IMAGE","eteled")),this.add(this.charLabel);break;case 3:this.remove(this.charLabel),this.charLabel=new O(-30,444).loadGraphic(K.getPath("images/labels/gf.png","IMAGE","eteled")),this.add(this.charLabel);break;case 5:this.remove(this.charLabel),this.charLabel=new O(-30,444).loadGraphic(K.getPath("images/labels/fuck.png","IMAGE","eteled")),this.add(this.charLabel)}},cleanDialog:function(){for(var t=0,e=this.rawDialogue.length;t<e;){var n=t++,n=this.rawDialogue[n].split(":");this.characterList.push(n[0]),this.fulldialogueList.push(n[1]),this.fullSoundList.push(n[2])}},addDialogue:function(){var t,e,s,a=this;this.curDialogue==this.fulldialogueList.length-1?this.isEnding||(null!=this.dialogueSound._channel&&(t=this.dialogueSound).cleanup(t.autoDestroy,!0),this.isEnding=!0,null==(s=0)&&(s=0),null==(e=1.2)&&(e=1),null!=(t=n.sound.music).fadeTween&&t.fadeTween.cancel(),t.fadeTween=Ta.num(t._volume,s,e,{onComplete:null},z(t,t.volumeTween)),(new Tc).start(.05,function(t){(t=a.box).set_alpha(t.alpha-.1),(t=a.bgFade).set_alpha(t.alpha-.1),a.portraitLeft.set_visible(!1),a.portraitRight.set_visible(!1),(t=a.swagDialogue).set_alpha(t.alpha-.1),(t=a.cutscene).set_alpha(t.alpha-.1),0<a.specialblack.alpha&&(t=a.specialblack).set_alpha(t.alpha-.1),(t=a.charLabel).set_alpha(t.alpha-.1)},10),(new Tc).start(1.2,function(t){a.finishThing(),a.kill()})):(this.curDialogue++,"switch"==this.characterList[this.curDialogue]?this.switchCutscene(U.parseInt(this.fulldialogueList[this.curDialogue])):"switchnoboc"==this.characterList[this.curDialogue]?this.switchCutsceneNoBox(U.parseInt(this.fulldialogueList[this.curDialogue])):"fuck"==this.characterList[this.curDialogue]?(this.cutscene=new O,this.add(this.cutscene)):"nobg"==this.characterList[this.curDialogue]?this.switchToGame():"start"==this.characterList[this.curDialogue]?this.startUsingCutscenes(U.parseInt(this.fulldialogueList[this.curDialogue])):"credits"==this.characterList[this.curDialogue]?(this.switchingScene=!0,t=md.getNextState(new Dl("assets/videos/outrofinaleteled.webm",function(){var t=new gn;n.game._state.switchTo(t)&&(n.game._requestedState=t)}),!1),n.game._state.switchTo(t)&&(n.game._requestedState=t)):"wait"==this.characterList[this.curDialogue]?(new Tc).start(parseFloat(this.fulldialogueList[this.curDialogue]),function(t){a.addDialogue()}):"music"==this.characterList[this.curDialogue]?(null==(s=0)&&(s=0),null==(e=.3)&&(e=1),null!=(t=n.sound.music).fadeTween&&t.fadeTween.cancel(),t.fadeTween=Ta.num(t._volume,s,e,{onComplete:function(t){n.sound.playMusic(K.getPath("music/"+a.fulldialogueList[a.curDialogue]+".ogg","MUSIC","eteled"),0);var e=.3,s=0,i=.1;null==i&&(i=1),null==s&&(s=0),null==e&&(e=1),null==(t=n.sound.music)._channel&&t.play(),null!=t.fadeTween&&t.fadeTween.cancel(),t.fadeTween=Ta.num(s,i,e,{onComplete:null},z(t,t.volumeTween)),a.addDialogue()}},z(t,t.volumeTween))):this.startDialogue())},startNeedle:function(){var e=this;this.switchingScene=!0,this.remove(this.portraitLeft),this.remove(this.portraitRight),this.remove(this.box),this.remove(this.swagDialogue),this.remove(this.dialogue),this.remove(this.bgFade),(new Tc).start(.5,function(t){Ta.tween(e.specialblack,{alpha:0},1,{onComplete:function(t){e.doTheCutscene()}})})},continueDialogue:function(){this.switchingScene=!1,this.box.set_alpha(1),this.swagDialogue.set_alpha(1),this.swagDialogue.set_visible(!0),this.swagDialogue.set_font("Pixel Arial 11 Bold"),this.swagDialogue.set_color(-12640223),this.dialogue.set_alpha(1),this.add(this.dialogue),this.add(this.portraitLeft),this.add(this.portraitRight),this.add(this.box),this.add(this.swagDialogue),this.addDialogue()},switchToGame:function(){var e=this,t=n.sound.music,s=1,i=0;null==i&&(i=0),null==s&&(s=1),null!=t.fadeTween&&t.fadeTween.cancel(),t.fadeTween=Ta.num(t._volume,i,s,{onComplete:null},z(t,t.volumeTween)),this.switchingScene=!0,this.remove(this.portraitLeft),this.remove(this.portraitRight),this.remove(this.box),this.remove(this.swagDialogue),this.remove(this.dialogue),(new Tc).start(.5,function(t){Ta.tween(e.cutscene,{alpha:0},1,{onComplete:function(t){(new Tc).start(.2,function(t){e.addDialogue(),e.switchingScene=!1,e.box.set_alpha(1),e.dialogue.set_alpha(1),e.add(e.dialogue),e.add(e.portraitLeft),e.add(e.portraitRight),e.add(e.box),e.add(e.swagDialogue)})}}),Ta.tween(e.specialblack,{alpha:0},1,{})})},startUsingCutscenes:function(n){var s=this;this.switchingScene=!0,this.remove(this.portraitLeft),this.remove(this.portraitRight),this.remove(this.box),this.remove(this.swagDialogue),this.remove(this.dialogue),this.remove(this.charLabel),(new Tc).start(.2,function(t){t=new O(0,0);var e=K.getPath("images/"+y.SONG.song.toLowerCase()+"/"+(null==n?"null":""+n)+".png","IMAGE","eteled");s.cutscene=t.loadGraphic(e),s.cutscene.scrollFactor.set(),s.cutscene.set_alpha(0),s.swagDialogue.resetText(s.fulldialogueList[s.curDialogue]),s.portraitLeft.set_visible(!1),s.portraitRight.set_visible(!1),s.specialblack.set_alpha(0),s.add(s.specialblack),s.add(s.cutscene),Ta.tween(s.cutscene,{alpha:1},.2,{onComplete:function(t){s.specialblack.set_alpha(1),(new Tc).start(.05,function(t){s.addDialogue()}),s.switchingScene=!1,s.box.set_alpha(1),s.add(s.dialogue),s.add(s.portraitLeft),s.add(s.portraitRight),s.add(s.box),s.add(s.charLabel),s.add(s.swagDialogue)}})})},switchCutsceneNoBox:function(n){var s=this;this.switchingScene=!0,this.portraitLeft.set_visible(!1),this.portraitRight.set_visible(!1),this.box.set_visible(!1),this.swagDialogue.set_visible(!1),this.dialogue.set_visible(!1),this.charLabel.set_visible(!1),(new Tc).start(.2,function(t){Ta.tween(s.cutscene,{alpha:.5},.2,{onComplete:function(t){s.remove(s.cutscene),t=new O(0,0);var e=K.getPath("images/"+y.SONG.song.toLowerCase()+"/"+(null==n?"null":""+n)+".png","IMAGE","eteled");s.cutscene=t.loadGraphic(e),s.cutscene.scrollFactor.set(),s.cutscene.set_alpha(.5),s.swagDialogue.resetText(s.fulldialogueList[s.curDialogue]),s.add(s.cutscene),Ta.tween(s.cutscene,{alpha:1},.2,{onComplete:function(t){(new Tc).start(.05,function(t){s.addDialogue()}),s.switchingScene=!1}})}})})},switchCutscene:function(n){var s=this;this.switchingScene=!0,this.remove(this.portraitLeft),this.remove(this.portraitRight),this.remove(this.box),this.remove(this.swagDialogue),this.remove(this.dialogue),this.remove(this.charLabel),(new Tc).start(.2,function(t){Ta.tween(s.cutscene,{alpha:.5},.2,{onComplete:function(t){s.remove(s.cutscene),t=new O(0,0);var e=K.getPath("images/"+y.SONG.song.toLowerCase()+"/"+(null==n?"null":""+n)+".png","IMAGE","eteled");s.cutscene=t.loadGraphic(e),s.cutscene.scrollFactor.set(),s.cutscene.set_alpha(.5),s.swagDialogue.resetText(s.fulldialogueList[s.curDialogue]),s.portraitLeft.set_visible(!1),s.portraitRight.set_visible(!1),s.add(s.cutscene),Ta.tween(s.cutscene,{alpha:1},.2,{onComplete:function(t){(new Tc).start(.05,function(t){s.addDialogue()}),s.switchingScene=!1,s.box.set_alpha(1),s.portraitLeft.set_visible(!1),s.portraitRight.set_visible(!1),s.box.set_visible(!0),s.swagDialogue.set_visible(!0),s.dialogue.set_visible(!0),s.charLabel.set_visible(!0),s.add(s.dialogue),s.add(s.portraitLeft),s.add(s.portraitRight),s.add(s.box),s.add(s.charLabel),s.add(s.swagDialogue)}})}})})},__class__:ji});var Gi=function(t,e){this.strumTime=t,this.noteData=e};r.SmallNote=Gi,Gi.__name__="SmallNote",Gi.prototype={strumTime:null,noteData:null,__class__:Gi};var vc=function(){};r.DiffCalc=vc,vc.__name__="DiffCalc",vc.CalculateDiff=function(t,e){null==e&&(e=.93);var n=[];if(null==t.notes||0==t.notes.length)return 0;for(var s=0,i=t.notes;s<i.length;){t=i[s],++s;for(var a=0,r=t.sectionNotes;a<r.length;){var l=r[a];++a;var o=t.mustHitSection;3<=l[1]&&o&&n.push(new Gi(l[0],Math.floor(Math.abs(l[1])))),l[1]<=4&&!o&&n.push(new Gi(l[0],Math.floor(Math.abs(l[1]))))}}Ea.trace("calcuilafjwaf "+n.length,{fileName:"source/DiffCalc.hx",lineNumber:49,className:"DiffCalc",methodName:"CalculateDiff"});var h=[],_=[];for(n.sort(function(t,e){return t.strumTime-e.strumTime|0}),i=n[0].strumTime,s=0;s<n.length;)t=n[s],++s,t.strumTime=2*(t.strumTime-i);for(s=0;s<n.length;)switch(t=n[s],++s,t.noteData){case 0:case 1:h.push(t);break;case 2:_.push(t);break;case 3:_.push(t)}for(var r=[],l=[],o=[],u=[],s=0,i=h.length-1;s<i;)(0==h[t=s++].noteData?r:l).push(h[t].strumTime);for(s=0,i=_.length-1;s<i;)(3==_[t=s++].noteData?u:o).push(_[t].strumTime);a=n[n.length-1].strumTime/1e3/.5;var n=s=Array(Math.floor(a)),c=s=Array(Math.floor(a));for(s=0,i=n.length;s<i;)n[t=s++]=[];for(s=0,i=c.length;s<i;)c[t=s++]=[];for(s=0;s<h.length;)t=h[s],++s,a<(i=2*t.strumTime/1e3|0)+1||n[i].push(t);for(s=0;s<_.length;)t=_[s],++s,a<(i=2*t.strumTime/1e3|0)+1||c[i].push(t);var d=[],f=[];for(s=0;s<n.length;)t=n[s],++s,null!=t&&d.push(t.length*vc.scale*1.6);for(s=0;s<c.length;)t=c[s],++s,null!=t&&f.push(t.length*vc.scale*1.6);for(h=[],_=[],s=0,i=n.length;s<i;){var p=n[t=s++];if(null!=p){for(var m=[],g=[],a=0;a<p.length;){var b=p[a];switch(++a,b.noteData){case 0:m.push(b);break;case 1:g.push(b)}}a=vc.fingieCalc(m,r),t=(8*((g=vc.fingieCalc(g,l))<a?a:g)+d[t]/vc.scale*5)/13*vc.scale,h.push(t)}}for(s=0,i=c.length;s<i;)if(null!=(p=c[t=s++])){for(m=[],g=[],a=0;a<p.length;)switch(b=p[a],++a,b.noteData){case 2:m.push(b);break;case 3:g.push(b)}a=vc.fingieCalc(m,o),t=(8*((g=vc.fingieCalc(g,u))<a?a:g)+f[t]/vc.scale*5)/13*vc.scale,_.push(t)}for(vc.smoothBrain(d,0),vc.smoothBrain(f,0),vc.smoothBrainTwo(h),vc.smoothBrainTwo(_),vc.smoothBrain(d,0),vc.smoothBrain(f,0),vc.smoothBrainTwo(h),vc.smoothBrainTwo(_),vc.smoothBrain(d,0),vc.smoothBrain(f,0),vc.smoothBrainTwo(h),vc.smoothBrainTwo(_),vc.smoothBrain(d,0),vc.smoothBrain(f,0),vc.smoothBrainTwo(h),vc.smoothBrainTwo(_),i=[],r=[],s=0;s<n.length;)t=n[s],++s,null!=t&&i.push(t.length);for(s=0;s<c.length;)t=c[s],++s,null!=t&&r.push(t.length);for(s=n=0;s<i.length;)t=i[s],++s,n+=t;for(s=0;s<r.length;)t=r[s],++s,n+=t;return.965<e&&(e=.965),vc.lastDiffHandOne=h,vc.lastDiffHandTwo=_,Kd.truncateFloat(vc.chisel(e,h,_,i,r,n),2)},vc.chisel=function(t,e,n,s,i,a){for(var r=0,l=100;.01<l-r;){var o=(l+r)/2;(vc.calcuate(o,e,s)+vc.calcuate(o,n,i))/a<t?r=o:l=o}return l},vc.calcuate=function(t,e,n){for(var s=0,i=0,a=e.length;i<a;)var r=i++,l=e[r],s=l<t?s+n[r]:s+n[r]*Math.pow(t/l,1.2);return s},vc.findStupid=function(t,e){for(var n=0,s=e.length;n<s;){var i=n++;if(e[i]==t)return i}return-1},vc.fingieCalc=function(t,e){var n=0;if(0==t.length)return 0;var s=vc.findStupid(t[0].strumTime,e);if(-1==s)return 0;for(var i=0;i<t.length;)++i,n+=e[s+1]-e[s],++s;return 0==n?0:1375*t.length/n},vc.smoothBrain=function(t,e){for(var n=e,s=0,i=t.length;s<i;){var a=s++,r=t[a],l=n,n=e;t[a]=(l+n+(e=r))/3}},vc.smoothBrainTwo=function(t){for(var e=0,n=0,s=t.length;n<s;){var i=n++,a=e,e=t[i];t[i]=(a+e)/2}};var Vc=function(t){null==t&&(t=0),this._created=!1,lc.call(this),this.openCallback=this.closeCallback=null,n.renderTile&&(this._bgSprite=new hn),this.set_bgColor(t)};r["flixel.FlxSubState"]=Vc,Vc.__name__="flixel.FlxSubState",Vc.__super__=lc,Vc.prototype=E(lc.prototype,{openCallback:null,closeCallback:null,_bgSprite:null,_parentState:null,_bgColor:null,_created:null,draw:function(){if(n.renderBlit)for(var t=0,e=this.get_cameras();t<e.length;){var s=e[t];++t,s.fill(this._bgColor)}else this._bgSprite.draw();lc.prototype.draw.call(this)},destroy:function(){lc.prototype.destroy.call(this),this._bgSprite=this._parentState=this.openCallback=this.closeCallback=null},close:function(){null!=this._parentState&&this._parentState.subState==this&&this._parentState.closeSubState()},get_bgColor:function(){return this._bgColor},set_bgColor:function(t){return n.renderTile&&null!=this._bgSprite&&this._bgSprite.get_pixels().setPixel32(0,0,t),this._bgColor=t},__class__:Vc});var Re=function(t){this.unspawnNotes=[],this.currentStep=this.oldStep=this.frames=0,this.stopDoingShit=!1,Vc.call(this,t)};r.DiffOverview=Re,Re.__name__="DiffOverview",Re.__super__=Vc,Re.prototype=E(Vc.prototype,{blackBox:null,handOne:null,handTwo:null,giantText:null,SONG:null,strumLine:null,camHUD:null,offset:null,create:function(){T.songPosition=0,T.lastSongPos=0,this.camHUD=new gc,this.camHUD.bgColor&=16777215,this.camHUD.bgColor|=0;var t=new gc;for(n.cameras.add(t),n.cameras.add(this.camHUD),gc._defaultCameras=[t],Re.playerStrums=new yb,this.SONG=vb.songData.h[vb.songs[vb.curSelected].songName][vb.curDifficulty],this.strumLine=new O(0,n.height/2-295).makeGraphic(n.width,10),this.strumLine.scrollFactor.set(),this.blackBox=new O(0,0).makeGraphic(n.width,n.height,-16777216),this.blackBox.set_alpha(0),this.add(this.blackBox),vb.openedPreview=!0,this.handOne=vc.lastDiffHandOne,this.handTwo=vc.lastDiffHandTwo,t=0;t<4;){var e=t++,s=new O(0,this.strumLine.y);switch(s.set_frames(La.fromSparrow(K.getPath("images/NOTE_assets.png","IMAGE","shared"),K.getPath("images/NOTE_assets.xml","TEXT","shared"))),s.animation.addByPrefix("green","arrowUP"),s.animation.addByPrefix("blue","arrowDOWN"),s.animation.addByPrefix("purple","arrowLEFT"),s.animation.addByPrefix("red","arrowRIGHT"),n.save.data.antialiasing&&s.set_antialiasing(!0),s.setGraphicSize(.7*s.get_width()|0),Math.abs(e)){case 0:var i=s;i.set_x(i.x+0*Kc.swagWidth),s.animation.addByPrefix("static","arrowLEFT"),s.animation.addByPrefix("pressed","left press",24,!1),s.animation.addByPrefix("confirm","left confirm",24,!1);break;case 1:(i=s).set_x(i.x+Kc.swagWidth),s.animation.addByPrefix("static","arrowDOWN"),s.animation.addByPrefix("pressed","down press",24,!1),s.animation.addByPrefix("confirm","down confirm",24,!1);break;case 2:(i=s).set_x(i.x+2*Kc.swagWidth),s.animation.addByPrefix("static","arrowUP"),s.animation.addByPrefix("pressed","up press",24,!1),s.animation.addByPrefix("confirm","up confirm",24,!1);break;case 3:(i=s).set_x(i.x+3*Kc.swagWidth),s.animation.addByPrefix("static","arrowRIGHT"),s.animation.addByPrefix("pressed","right press",24,!1),s.animation.addByPrefix("confirm","right confirm",24,!1)}s.updateHitbox(),s.scrollFactor.set(),(i=s).set_y(i.y-10),s.set_alpha(1),s.ID=e,Re.playerStrums.add(s),s.animation.play("static"),(e=s).set_x(e.x+50),s.set_x(s.x+n.width/2)}this.add(Re.playerStrums),this.generateSong("assItch"),Re.playerStrums.set_cameras([this.camHUD]),this.notes.set_cameras([this.camHUD]),this.blackBox.set_cameras([this.camHUD]),this.blackBox.set_x(Re.playerStrums.members[0].x),this.blackBox.set_y(this.strumLine.y),this.camHUD.set_zoom(.6),this.camHUD.set_alpha(0),this.camHUD.set_height(5e3),this.blackBox.set_height(this.camHUD.height),(t=this.camHUD).set_x(t.x+280),(t=this.blackBox).set_y(t.y-100),(t=this.blackBox).set_x(t.x-100),null==(i=1)&&(i=1),null==(e=4)&&(e=1),null==(s=-16777216)&&(s=0),(t=this.offset=new ub(10,n.height-40,0,"Offset: "+Kd.truncateFloat(n.save.data.offset,0)+" (LEFT/RIGHT to decrease/increase)",16)).set_borderStyle(Zc.OUTLINE),t.set_borderColor(s),t.set_borderSize(e),t.set_borderQuality(i),this.offset.set_color(-1),this.offset.scrollFactor.set(),Ta.tween(this.blackBox,{alpha:.5},1,{ease:Ra.expoInOut}),Ta.tween(this.camHUD,{alpha:1},.5,{ease:Ra.expoInOut}),Ta.tween(this.offset,{alpha:1},.5,{ease:Ra.expoInOut}),Ea.trace("pog",{fileName:"source/DiffOverview.hx",lineNumber:168,className:"DiffOverview",methodName:"create"}),Vc.prototype.create.call(this)},endSong:function(){},resyncVocals:function(){this.vocals.pause(),n.sound.music.play(),T.songPosition=n.sound.music._time,this.vocals.set_time(T.songPosition),this.vocals.play()},stopDoingShit:null,currentStep:null,oldStep:null,updateCurStep:function(){for(var t={stepTime:0,songTime:0,bpm:0},e=0,n=T.bpmChangeMap.length;e<n;){var s=e++;T.songPosition>=T.bpmChangeMap[s].songTime&&(t=T.bpmChangeMap[s])}this.currentStep=t.stepTime+Math.floor((T.songPosition-t.songTime)/T.stepCrochet)},stepHit:function(){(n.sound.music._time>T.songPosition+20||n.sound.music._time<T.songPosition-20)&&(Ea.trace("resync",{fileName:"source/DiffOverview.hx",lineNumber:214,className:"DiffOverview",methodName:"stepHit"}),this.resyncVocals()),this.oldStep=this.currentStep},offsetChange:function(){for(var t=0,e=this.unspawnNotes;t<e.length;){var s=e[t];++t,s.strumTime=s.baseStrum+n.save.data.offset}for(s=new me(this.notes.members,null);s.hasNext();)(t=s.next()).strumTime=t.baseStrum+n.save.data.offset},frames:null,update:function(t){var e,s,i=this;Vc.prototype.update.call(this,t),this.frames<10?this.frames++:this.stopDoingShit||(this.updateCurStep(),this.oldStep!=this.currentStep&&0<this.currentStep&&this.stepHit(),(e=n.keys.pressed).keyManager.checkStatus(32,e.status)&&(this.stopDoingShit=!0,this.quit()),null!=(t=n.gamepads.lastActive)&&(t=(e=t.justPressed).gamepad,e=e.status,s=t.mapping.getRawID(2),null!=(t=t.buttons[s])&&t.hasState(e)&&(this.stopDoingShit=!0,this.quit())),null!=this.vocals&&null!=this.vocals._channel&&(T.songPosition+=1e3*n.elapsed),null!=this.unspawnNotes[0]&&this.unspawnNotes[0].strumTime-T.songPosition<3500&&(t=this.unspawnNotes[0],this.notes.add(t),t=this.unspawnNotes.indexOf(t),this.unspawnNotes.splice(t,1)),this.notes.forEachAlive(function(t){var e;t.tooLate?(t.set_active(!1),t.set_visible(!1)):(t.set_visible(!0),t.set_active(!0)),t.set_y(Re.playerStrums.members[Math.floor(Math.abs(t.noteData))].y-.45*(T.songPosition-t.strumTime)*Mb.roundDecimal(i.SONG.speed,2)),t.isSustainNote&&(t.set_y(t.y-t.get_height()/2),(!t.mustPress||t.wasGoodHit||t.prevNote.wasGoodHit&&!t.canBeHit)&&t.y+t.offset.y*t.scale.y<=i.strumLine.y+Kc.swagWidth/2)&&((e=new ta(0,0,t.get_width()/t.scale.x,t.get_height()/t.scale.y)).y=(Re.playerStrums.members[Math.floor(Math.abs(t.noteData))].y+Kc.swagWidth/2-t.y)/t.scale.y,e.height-=e.y,t.set_clipRect(e)),t.set_visible(Re.playerStrums.members[Math.floor(Math.abs(t.noteData))].visible),t.set_x(Re.playerStrums.members[Math.floor(Math.abs(t.noteData))].x),t.isSustainNote||t.set_angle(Re.playerStrums.members[Math.floor(Math.abs(t.noteData))].angle),t.set_alpha(Re.playerStrums.members[Math.floor(Math.abs(t.noteData))].alpha),t.y<i.strumLine.y&&(t.canBeHit&&t.mustPress||t.tooLate&&t.mustPress)&&(t.wasGoodHit=!0,i.vocals.set_volume(1),t.kill(),i.notes.remove(t,!0),t.destroy())}))},quit:function(){Ta.tween(this.blackBox,{alpha:0},1,{ease:Ra.expoInOut}),Ta.tween(this.camHUD,{alpha:0},1,{ease:Ra.expoInOut}),Ta.tween(this.offset,{alpha:0},1,{ease:Ra.expoInOut});var t=this.vocals;null!=t.fadeTween&&t.fadeTween.cancel(),t.fadeTween=Ta.num(t._volume,0,1,{onComplete:null},z(t,t.volumeTween)),vb.openedPreview=!1},vocals:null,notes:null,unspawnNotes:null,generateSong:function(t){if(t=vb.songData.h[vb.songs[vb.curSelected].songName][vb.curDifficulty],T.changeBPM(t.bpm),this.SONG.needsVoices){var e=new bg,s=Y.replace(this.SONG.song," ","-").toLowerCase();switch(s){case"dad-battle":s="dadbattle";break;case"philly-nice":s="philly"}this.vocals=e.loadEmbedded("songs:assets/songs/"+s+"/Voices.ogg")}else this.vocals=new bg;for(Ea.trace("loaded vocals",{fileName:"source/DiffOverview.hx",lineNumber:405,className:"DiffOverview",methodName:"generateSong"}),n.sound.list.add(this.vocals),this.notes=new yb,this.add(this.notes),t=t.notes,s=e=0;s<t.length;){var i=t[s];++s;for(var a=0,r=i.sectionNotes;a<r.length;){var l=r[a];++a;var o=l[0]+n.save.data.offset;o<0&&(o=0);var h=l[1]%4|0,_=i.mustHitSection;3<l[1]&&(_=!i.mustHitSection);var u=0<this.unspawnNotes.length?this.unspawnNotes[this.unspawnNotes.length-1|0]:null,c=new Kc(o,h,u,!1,!0);if(_){c.baseStrum=Math.round(l[0]),c.sustainLength=l[2],c.scrollFactor.set(0,0);var d=c.sustainLength;for(d/=T.stepCrochet,this.unspawnNotes.push(c),l=0,d=Math.floor(d);l<d;){var f=l++,u=this.unspawnNotes[this.unspawnNotes.length-1|0];(u=new Kc(o+T.stepCrochet*f+T.stepCrochet,h,u,!0,!0)).scrollFactor.set(),this.unspawnNotes.push(u),u.mustPress=_,u.mustPress&&u.set_x(u.x+n.width/2)}c.mustPress=_,c.mustPress&&(o=c).set_x(o.x+n.width/2)}}++e}switch(this.unspawnNotes.sort(z(this,this.sortByShit)),T.mapBPMChanges(this.SONG),T.changeBPM(this.SONG.bpm),e=n.sound,s=Y.replace(this.SONG.song," ","-").toLowerCase()){case"dad-battle":s="dadbattle";break;case"philly-nice":s="philly"}e.playMusic("songs:assets/songs/"+s+"/Inst.ogg",1,!1),n.sound.music.onComplete=z(this,this.endSong),this.vocals.play()},sortByShit:function(t,e){var n=0;return(t=t.strumTime)<(e=e.strumTime)?n=-1:e<t&&(n=1),n},__class__:Re});var Xb=function(t,e){this.r=new RegExp(t,e.split("u").join(""))};r.EReg=Xb,Xb.__name__="EReg",Xb.prototype={r:null,match:function(t){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(t),this.r.s=t,null!=this.r.m},matched:function(t){if(null!=this.r.m&&0<=t&&t<this.r.m.length)return this.r.m[t];throw H.thrown("EReg::matched")},matchedRight:function(){if(null==this.r.m)throw H.thrown("No string matched");var t=this.r.m.index+this.r.m[0].length;return ma.substr(this.r.s,t,this.r.s.length-t)},matchedPos:function(){if(null==this.r.m)throw H.thrown("No string matched");return{pos:this.r.m.index,len:this.r.m[0].length}},matchSub:function(t,e,n){return null==n&&(n=-1),this.r.global?(this.r.lastIndex=e,this.r.m=this.r.exec(n<0?t:ma.substr(t,0,e+n)),(n=null!=this.r.m)&&(this.r.s=t)):(n=this.match(n<0?ma.substr(t,e,null):ma.substr(t,e,n)))&&(this.r.s=t,this.r.m.index+=e),n},split:function(t){return t.replace(this.r,"#__delim__#").split("#__delim__#")},map:function(t,e){for(var n=0,s="";!(n>=t.length);){if(!this.matchSub(t,n)){s+=U.string(ma.substr(t,n,null));break}var i=this.matchedPos();if(s+=U.string(ma.substr(t,n,i.pos-n)),s+=U.string(e(this)),n=0==i.len?(s+=U.string(ma.substr(t,i.pos,1)),i.pos+1):i.pos+i.len,!this.r.global)break}return!this.r.global&&0<n&&n<t.length&&(s+=U.string(ma.substr(t,n,null))),s},__class__:Xb};var ff=function(){};r.EtternaFunctions=ff,ff.__name__="EtternaFunctions",ff.erf=function(t){var e=t<0?-1:1;t=Math.abs(t);var n=1/(1+ff.p*t);return e*(1-((((ff.a5*n+ff.a4)*n+ff.a3)*n+ff.a2)*n+ff.a1)*n*Math.exp(-t*t))},ff.getNotes=function(){for(var t=0,e=0,n=y.SONG.notes.length;e<n;)for(var s=e++,i=0,a=y.SONG.notes[s].sectionNotes.length;i<a;){var r=i++;y.SONG.notes[s].sectionNotes[r][1]<=0&&++t}return t},ff.getHolds=function(){for(var t=0,e=0,n=y.SONG.notes.length;e<n;){var s=e++;Ea.trace(y.SONG.notes[s],{fileName:"source/EtternaFunctions.hx",lineNumber:46,className:"EtternaFunctions",methodName:"getHolds"});for(var i=0,a=y.SONG.notes[s].sectionNotes.length;i<a;){var r=i++,r=y.SONG.notes[s].sectionNotes[r];Ea.trace(r,{fileName:"source/EtternaFunctions.hx",lineNumber:50,className:"EtternaFunctions",methodName:"getHolds"}),0<r[1]&&++t}}return t},ff.getMapMaxScore=function(){return 350*ff.getNotes()},ff.wife3=function(t,e){var n=180*e,s=65*Math.pow(e,.75),i=22.7*Math.pow(e,.75);return t<=5*e?1:t<=s?+ff.erf((s-t)/i):t<=n?-5.5*(t-s)/(n-s):-5.5};var vb=function(t,e){this.iconArray=[],this.curPlaying=!1,this.combo="",this.lerpScore=this.intendedScore=0,da.call(this,t,e)};r.FreeplayState=vb,vb.__name__="FreeplayState",vb.loadDiff=function(t,e,n,s){try{s.push(nf.loadFromJson(Gb.formatSong(e,t),n))}catch(t){}},vb.__super__=da,vb.prototype=E(da.prototype,{selector:null,scoreText:null,comboText:null,diffText:null,diffCalcText:null,previewtext:null,lerpScore:null,intendedScore:null,combo:null,grpSongs:null,curPlaying:null,iconArray:null,create:function(){var t=cd.coolTextFile(K.getPath("data/freeplaySonglist.txt","TEXT",null));vb.songData=new ya,vb.songs=[];for(var e=0,s=t.length;e<s;){var i=t[i=e++].split(":");i=new El(i[0],U.parseInt(i[2]),i[1]);var a=Y.replace(i.songName," ","-");switch(a){case"Dad-Battle":a="Dadbattle";break;case"Philly-Nice":a="Philly"}var r=[],l=["Easy","Normal","Hard"];-1!=l.indexOf("Easy")&&vb.loadDiff(0,a,i.songName,r),-1!=l.indexOf("Normal")&&vb.loadDiff(1,a,i.songName,r),-1!=l.indexOf("Hard")&&vb.loadDiff(2,a,i.songName,r),3!=(i.diffs=l).length&&Ea.trace("I ONLY FOUND "+U.string(l),{fileName:"source/FreeplayState.hx",lineNumber:117,className:"FreeplayState",methodName:"create"}),vb.songData.h[i.songName]=r,Ea.trace("loaded diffs for "+i.songName,{fileName:"source/FreeplayState.hx",lineNumber:120,className:"FreeplayState",methodName:"create"}),vb.songs.push(i)}for(Ea.trace("tryin to load sm files",{fileName:"source/FreeplayState.hx",lineNumber:125,className:"FreeplayState",methodName:"create"}),this.persistentUpdate=!0,e=(new O).loadGraphic(K.getPath("images/menuBGBlue.png","IMAGE",null)),n.save.data.antialiasing&&e.set_antialiasing(!0),this.add(e),this.grpSongs=new yb,this.add(this.grpSongs),e=0,s=vb.songs.length;e<s;)i=e++,(t=new $b(0,70*i+30,vb.songs[i].songName,!0,!1,!0)).isMenuItem=!0,t.targetY=i,this.grpSongs.add(t),(i=new eh(vb.songs[i].songCharacter)).sprTracker=t,this.iconArray.push(i),this.add(i);this.scoreText=new ub(.7*n.width,5,0,"",32),this.scoreText.setFormat("assets/fonts/vcr.ttf",32,-1,"right"),(e=new O(this.scoreText.x-6,0).makeGraphic(.35*n.width|0,105,-16777216)).set_alpha(.6),this.add(e),this.diffText=new ub(this.scoreText.x,this.scoreText.y+36,0,"",24),this.diffText.set_font(this.scoreText._font),this.add(this.diffText),this.diffCalcText=new ub(this.scoreText.x,this.scoreText.y+66,0,"",24),this.diffCalcText.set_font(this.scoreText._font),this.add(this.diffCalcText),this.previewtext=new ub(this.scoreText.x,this.scoreText.y+94,0,(ve.gamepad?"X":"SPACE")+" to preview",24),this.previewtext.set_font(this.scoreText._font),this.comboText=new ub(this.diffText.x+100,this.diffText.y,0,"",24),this.comboText.set_font(this.diffText._font),this.add(this.comboText),this.add(this.scoreText),this.changeSelection(),this.changeDiff(),this.selector=new ub,this.selector.set_size(40),this.selector.set_text(">"),new $b(1,0,"swag"),da.prototype.create.call(this)},addSong:function(t,e,n){vb.songs.push(new El(t,e,n))},addWeek:function(t,e,n){null==n&&(n=["dad"]);for(var s=0,i=0;i<t.length;){var a=t[i];++i,this.addSong(a,e,n[s]),1!=n.length&&++s}},update:function(t){da.prototype.update.call(this,t),n.sound.music._volume<.7&&(t=n.sound.music).set_volume(t._volume+.5*n.elapsed),t=this.lerpScore,this.lerpScore=Math.floor(t+.4*(this.intendedScore-t)),Math.abs(this.lerpScore-this.intendedScore)<=10&&(this.lerpScore=this.intendedScore),this.scoreText.set_text("PERSONAL BEST:"+this.lerpScore),this.comboText.set_text(this.combo+"\n"),.8<n.sound.music._volume&&(t=n.sound.music).set_volume(t._volume-.5*n.elapsed);var e=(a=n.keys.justPressed).keyManager.checkStatus(38,a.status),s=(a=n.keys.justPressed).keyManager.checkStatus(40,a.status);t=(a=n.keys.justPressed).keyManager.checkStatus(13,a.status);var i=n.gamepads.lastActive;if(null!=i){var a,r=11,l=(a=i.justPressed).gamepad;switch(a=a.status,r){case-2:l=l.anyButton(a);break;case-1:l=!l.anyButton(a);break;default:r=l.mapping.getRawID(r),l=null!=(l=l.buttons[r])&&l.hasState(a)}switch(l&&this.changeSelection(-1),l=(a=i.justPressed).gamepad,a=a.status,r=12){case-2:l=l.anyButton(a);break;case-1:l=!l.anyButton(a);break;default:r=l.mapping.getRawID(r),l=null!=(l=l.buttons[r])&&l.hasState(a)}switch(l&&this.changeSelection(1),l=(a=i.justPressed).gamepad,a=a.status,r=13){case-2:l=l.anyButton(a);break;case-1:l=!l.anyButton(a);break;default:r=l.mapping.getRawID(r),l=null!=(l=l.buttons[r])&&l.hasState(a)}switch(l&&this.changeDiff(-1),l=(a=i.justPressed).gamepad,a=a.status,r=14){case-2:l=l.anyButton(a);break;case-1:l=!l.anyButton(a);break;default:r=l.mapping.getRawID(r),l=null!=(l=l.buttons[r])&&l.hasState(a)}l&&this.changeDiff(1)}if(e&&this.changeSelection(-1),s&&this.changeSelection(1),(a=n.keys.justPressed).keyManager.checkStatus(37,a.status)&&this.changeDiff(-1),(a=n.keys.justPressed).keyManager.checkStatus(39,a.status)&&this.changeDiff(1),Kb.player1.controls._back.check()&&(e=new fe,n.game._state.switchTo(e)&&(n.game._requestedState=e)),t){Y.replace(vb.songs[vb.curSelected].songName," ","-");try{var o=vb.songData.h[vb.songs[vb.curSelected].songName][vb.curDifficulty];if(null==o)return}catch(t){return}y.SONG=o,y.isStoryMode=!1,y.storyDifficulty=vb.curDifficulty,y.storyWeek=vb.songs[vb.curSelected].week,Ea.trace("CUR WEEK"+y.storyWeek,{fileName:"source/FreeplayState.hx",lineNumber:389,className:"FreeplayState",methodName:"update"}),y.isSM=!1,e=md.getNextState(new y,!1),n.game._state.switchTo(e)&&(n.game._requestedState=e)}},changeDiff:function(t){if(-1!=vb.songs[vb.curSelected].diffs.indexOf(cd.difficultyFromInt(vb.curDifficulty+(t=null==t?0:t)))){switch(vb.curDifficulty+=t,vb.curDifficulty<0&&(vb.curDifficulty=2),2<vb.curDifficulty&&(vb.curDifficulty=0),t=Y.replace(vb.songs[vb.curSelected].songName," ","-")){case"Dad-Battle":t="Dadbattle";break;case"Philly-Nice":t="Philly"}this.intendedScore=Gb.getScore(t,vb.curDifficulty),this.combo=Gb.getCombo(t,vb.curDifficulty),this.diffCalcText.set_text("RATING: "+vc.CalculateDiff(vb.songData.h[vb.songs[vb.curSelected].songName][vb.curDifficulty])),this.diffText.set_text(cd.difficultyFromInt(vb.curDifficulty).toUpperCase())}},changeSelection:function(t){if(null==t&&(t=0),n.sound.play(K.sound("scrollMenu"),.4),vb.curSelected+=t,vb.curSelected<0&&(vb.curSelected=vb.songs.length-1),vb.curSelected>=vb.songs.length&&(vb.curSelected=0),3!=vb.songs[vb.curSelected].diffs.length)switch(vb.songs[vb.curSelected].diffs[0]){case"Easy":vb.curDifficulty=0;break;case"Hard":vb.curDifficulty=2;break;case"Normal":vb.curDifficulty=1}switch(t=Y.replace(vb.songs[vb.curSelected].songName," ","-")){case"Dad-Battle":t="Dadbattle";break;case"Philly-Nice":t="Philly"}this.intendedScore=Gb.getScore(t,vb.curDifficulty),this.combo=Gb.getCombo(t,vb.curDifficulty),this.diffCalcText.set_text("RATING: "+vc.CalculateDiff(vb.songData.h[vb.songs[vb.curSelected].songName][vb.curDifficulty]));try{var e=vb.songData.h[vb.songs[vb.curSelected].songName][vb.curDifficulty];null!=e&&T.changeBPM(e.bpm)}catch(t){}vb.openedPreview&&(this.closeSubState(),this.openSubState(new Re)),t=e=0;for(var s=this.iconArray.length;t<s;){var i=t++;this.iconArray[i].set_alpha(.6)}for(this.iconArray[vb.curSelected].set_alpha(1),t=0,s=this.grpSongs.members;t<s.length;)i=s[t],++t,i.targetY=e-vb.curSelected,++e,i.set_alpha(.6),0==i.targetY&&i.set_alpha(1)},__class__:vb});var El=function(t,e,n){this.diffs=[],this.week=0,this.songName=t,this.week=e,this.songCharacter=n};r.SongMetadata=El,El.__name__="SongMetadata",El.prototype={songName:null,week:null,songCharacter:null,diffs:null,__class__:El};var jn=function(){};r.GameDimensions=jn,jn.__name__="GameDimensions";var Ig=function(){this.lastBeat=this.lastStep=this.curStep=this.curBeat=0,Vc.call(this)};r.MusicBeatSubstate=Ig,Ig.__name__="MusicBeatSubstate",Ig.__super__=Vc,Ig.prototype=E(Vc.prototype,{lastBeat:null,lastStep:null,curStep:null,curBeat:null,get_controls:function(){return Kb.player1.controls},update:function(t){var e=this.updateCurStep();if(0<=e)if(e>this.curStep)for(var n=this.curStep;n<e;)n++,this.curStep++,this.updateBeat(),this.stepHit();else e<this.curStep&&(this.curStep=e,this.updateBeat(),this.stepHit());Vc.prototype.update.call(this,t)},updateBeat:function(){this.lastBeat=this.curBeat,this.curBeat=Math.floor(this.curStep/4)},updateCurStep:function(){for(var t={stepTime:0,songTime:0,bpm:0},e=0,n=T.bpmChangeMap.length;e<n;){var s=e++;T.songPosition>T.bpmChangeMap[s].songTime&&(t=T.bpmChangeMap[s])}return t.stepTime+Math.floor((T.songPosition-t.songTime)/T.stepCrochet)},stepHit:function(){0==this.curStep%4&&this.beatHit()},beatHit:function(){},__class__:Ig,__properties__:E(Vc.prototype.__properties__,{get_controls:"get_controls"})});var Fl=function(t,e){switch(this.startVibin=this.isEnding=!1,this.stageSuffix="",y.SONG.player1){case"bf-austin":var s="bf-austin";break;case"bf-mii":s="bf-mii";break;case"bf-pixel":this.stageSuffix="-pixel",s="bf-pixel-dead";break;default:s="bf"}Ig.call(this),T.songPosition=0,this.bf=new Pc(t,e,s),this.add(this.bf),"bf-austin"==s&&this.bf.set_flipX(!1),this.camFollow=new Ja(this.bf.getGraphicMidpoint().x,this.bf.getGraphicMidpoint().y,1,1),this.add(this.camFollow),n.sound.play(K.sound("fnf_loss_sfx"+this.stageSuffix)),T.changeBPM(100),n.camera.scroll.set(),n.camera.target=null,this.bf.playAnim("firstDeath")};r.GameOverSubstate=Fl,Fl.__name__="GameOverSubstate",Fl.__super__=Ig,Fl.prototype=E(Ig.prototype,{bf:null,camFollow:null,stageSuffix:null,startVibin:null,update:function(t){if(Ig.prototype.update.call(this,t),Kb.player1.controls._accept.check()&&this.endBullshit(),Kb.player1.controls._back.check()&&((t=n.sound.music).cleanup(t.autoDestroy,!0),t=new(y.isStoryMode?ge:vb),n.game._state.switchTo(t)&&(n.game._requestedState=t),y.loadRep=!1),"firstDeath"==this.bf.animation._curAnim.name&&12==this.bf.animation._curAnim.curFrame&&n.camera.follow(this.camFollow,Gl.LOCKON,.01),"firstDeath"==this.bf.animation._curAnim.name&&this.bf.animation._curAnim.finished)switch(n.sound.playMusic(K.getPath("music/gameOver"+this.stageSuffix+".ogg","MUSIC",null)),this.startVibin=!0,y.SONG.player2){case"austin":t=n.random.int(1,34),n.sound.play(K.sound("AuD"+t));break;case"eteled1":t=n.random.int(1,15),n.sound.play(K.sound("EteledLineFailDOP"+t));break;case"eteled2":t=n.random.int(1,12),n.sound.play(K.sound("EteledLineFailMAD"+t))}null!=n.sound.music._channel&&(T.songPosition=n.sound.music._time)},beatHit:function(){Ig.prototype.beatHit.call(this),this.startVibin&&!this.isEnding&&this.bf.playAnim("deathLoop",!0)},isEnding:null,endBullshit:function(){var t;this.isEnding||(y.startTime=0,this.isEnding=!0,this.bf.playAnim("deathConfirm",!0),(t=n.sound.music).cleanup(t.autoDestroy,!0),n.sound.play(K.getPath("music/gameOverEnd"+this.stageSuffix+".ogg","MUSIC",null)),(new Tc).start(.7,function(t){n.camera.fade(-16777216,2,!1,function(){var t=md.getNextState(new y,!1);n.game._state.switchTo(t)&&(n.game._requestedState=t)})}))},__class__:Fl});var kn=function(t,e){this.defaultY=n.height/2-50,this.defaultX=.55*n.width-135,da.call(this,t,e)};r.GameplayCustomizeState=kn,kn.__name__="GameplayCustomizeState",kn.__super__=da,kn.prototype=E(da.prototype,{defaultX:null,defaultY:null,background:null,curt:null,front:null,sick:null,text:null,blackBorder:null,bf:null,dad:null,gf:null,strumLine:null,strumLineNotes:null,playerStrums:null,camHUD:null,create:function(){this.sick=(new O).loadGraphic(K.getPath("images/sick.png","IMAGE","shared")),this.sick.scrollFactor.set(),this.background=new O(-600,-200).loadGraphic(K.getPath("images/stageback.png","IMAGE","shared")),this.curt=new O(-500,-300).loadGraphic(K.getPath("images/stagecurtains.png","IMAGE","shared")),this.front=new O(-650,600).loadGraphic(K.getPath("images/stagefront.png","IMAGE","shared")),this.persistentUpdate=!0,da.prototype.create.call(this),this.camHUD=new gc,this.camHUD.bgColor&=16777215,this.camHUD.bgColor|=0,n.cameras.add(this.camHUD),this.background.scrollFactor.set(.9,.9),this.curt.scrollFactor.set(.9,.9),this.front.scrollFactor.set(.9,.9),this.add(this.background),this.add(this.front),this.add(this.curt);var t=new Ja(0,0,1,1);this.dad=new Fd(100,100,"dad"),this.bf=new Pc(770,450,"bf"),this.gf=new Fd(400,130,"gf"),this.gf.scrollFactor.set(.95,.95);var e=new ka(this.dad.getGraphicMidpoint().x+400,this.dad.getGraphicMidpoint().y);t.setPosition(e.x,e.y),this.add(this.gf),this.add(this.bf),this.add(this.dad),this.add(this.sick),this.add(t),n.camera.follow(t,Gl.LOCKON,.01),n.camera.set_zoom(.9),e=n.camera,t=t.getPosition(),e.scroll.set(t.x-.5*e.width,t.y-.5*e.height),t._weak&&t.put(),this.strumLine=new O(0,n.save.data.strumline).makeGraphic(n.width,14),this.strumLine.scrollFactor.set(),this.strumLine.set_alpha(.4),this.add(this.strumLine),n.save.data.downscroll&&this.strumLine.set_y(n.height-165),this.strumLineNotes=new yb,this.add(this.strumLineNotes),this.playerStrums=new yb,this.sick.set_cameras([this.camHUD]),this.strumLine.set_cameras([this.camHUD]),this.playerStrums.set_cameras([this.camHUD]),this.generateStaticArrows(0),this.generateStaticArrows(1),this.text=new ub(5,n.height+40,0,"Click and drag around gameplay elements to customize their positions.\nPress R to reset.\nPress Escape to go back.",12),this.text.scrollFactor.set(),this.text.setFormat("VCR OSD Mono",16,-1,"left",Zc.OUTLINE,-16777216),this.blackBorder=new O(-30,n.height+40).makeGraphic(this.text.get_width()+900|0,this.text.get_height()+600|0,-16777216),this.blackBorder.set_alpha(.5),this.add(this.blackBorder),this.add(this.text),Ta.tween(this.text,{y:n.height-18},2,{ease:Ra.elasticInOut}),Ta.tween(this.blackBorder,{y:n.height-18},2,{ease:Ra.elasticInOut}),n.save.data.changedHit||(n.save.data.changedHitX=this.defaultX,n.save.data.changedHitY=this.defaultY),this.sick.set_x(n.save.data.changedHitX),this.sick.set_y(n.save.data.changedHitY),n.mouse.set_visible(!0)},update:function(t){for(null!=n.sound.music&&(T.songPosition=n.sound.music._time),da.prototype.update.call(this,t),n.camera.set_zoom(.9+.95*(n.camera.zoom-.9)),this.camHUD.set_zoom(1+.95*(this.camHUD.zoom-1)),(t=!!n.mouse.overlaps(this.sick)&&(1==(t=n.mouse._leftButton).current||2==t.current))&&(this.sick.set_x(n.mouse.x-this.sick.get_width()/2),this.sick.set_y(n.mouse.y-this.sick.get_height())),t=new me(this.playerStrums.members,null);t.hasNext();){var e=t.next();e.set_y(this.strumLine.y)}for(t=new me(this.strumLineNotes.members,null);t.hasNext();)(e=t.next()).set_y(this.strumLine.y);n.mouse.overlaps(this.sick)&&-1==n.mouse._leftButton.current&&(n.save.data.changedHitX=this.sick.x,n.save.data.changedHitY=this.sick.y,n.save.data.changedHit=!0),(t=n.keys.justPressed).keyManager.checkStatus(82,t.status)&&(this.sick.set_x(this.defaultX),this.sick.set_y(this.defaultY),n.save.data.changedHitX=this.sick.x,n.save.data.changedHitY=this.sick.y,n.save.data.changedHit=!1),Kb.player1.controls._back.check()&&(n.mouse.set_visible(!1),n.sound.play(K.sound("cancelMenu")),t=new Ad,n.game._state.switchTo(t)&&(n.game._requestedState=t))},beatHit:function(){da.prototype.beatHit.call(this),this.bf.playAnim("idle",!0),this.dad.dance(!0),this.gf.dance();var t=n.camera;t.set_zoom(t.zoom+.015),(t=this.camHUD).set_zoom(t.zoom+.01),Ea.trace("beat",{fileName:"source/GameplayCustomizeState.hx",lineNumber:203,className:"GameplayCustomizeState",methodName:"beatHit"})},generateStaticArrows:function(t){for(var e=0;e<4;){var s=e++,i=new O(0,this.strumLine.y);switch(i.set_frames(La.fromSparrow(K.getPath("images/NOTE_assets.png","IMAGE","shared"),K.getPath("images/NOTE_assets.xml","TEXT","shared"))),i.animation.addByPrefix("green","arrowUP"),i.animation.addByPrefix("blue","arrowDOWN"),i.animation.addByPrefix("purple","arrowLEFT"),i.animation.addByPrefix("red","arrowRIGHT"),i.set_antialiasing(!0),i.setGraphicSize(.7*i.get_width()|0),Math.abs(s)){case 0:var a=i;a.set_x(a.x+0*Kc.swagWidth),i.animation.addByPrefix("static","arrowLEFT"),i.animation.addByPrefix("pressed","left press",24,!1),i.animation.addByPrefix("confirm","left confirm",24,!1);break;case 1:(a=i).set_x(a.x+Kc.swagWidth),i.animation.addByPrefix("static","arrowDOWN"),i.animation.addByPrefix("pressed","down press",24,!1),i.animation.addByPrefix("confirm","down confirm",24,!1);break;case 2:(a=i).set_x(a.x+2*Kc.swagWidth),i.animation.addByPrefix("static","arrowUP"),i.animation.addByPrefix("pressed","up press",24,!1),i.animation.addByPrefix("confirm","up confirm",24,!1);break;case 3:(a=i).set_x(a.x+3*Kc.swagWidth),i.animation.addByPrefix("static","arrowRIGHT"),i.animation.addByPrefix("pressed","right press",24,!1),i.animation.addByPrefix("confirm","right confirm",24,!1)}i.updateHitbox(),i.scrollFactor.set(),i.ID=s,1==t&&this.playerStrums.add(i),i.animation.play("static"),(s=i).set_x(s.x+50),(s=i).set_x(s.x+n.width/2*t),this.strumLineNotes.add(i)}},__class__:kn});var ln=function(){this.replaySelect=!1,da.call(this)};r.GitarooPause=ln,ln.__name__="GitarooPause",ln.__super__=da,ln.prototype=E(da.prototype,{replayButton:null,cancelButton:null,replaySelect:null,create:function(){null!=n.sound.music&&(t=n.sound.music).cleanup(t.autoDestroy,!0),t=(new O).loadGraphic(K.getPath("images/pauseAlt/pauseBG.png","IMAGE",null)),n.save.data.antialiasing&&t.set_antialiasing(!0),this.add(t);var t,e=null;(t=new O(0,30)).set_frames(La.fromSparrow(K.getPath("images/pauseAlt/bfLol.png","IMAGE",e),K.getPath("images/pauseAlt/bfLol.xml","TEXT",e))),t.animation.addByPrefix("lol","funnyThing",13),t.animation.play("lol"),n.save.data.antialiasing&&t.set_antialiasing(!0),this.add(t),t.screenCenter(Ce.X),this.replayButton=new O(.28*n.width,.7*n.height),this.replayButton.set_frames(La.fromSparrow(K.getPath("images/pauseAlt/pauseUI.png","IMAGE",e=null),K.getPath("images/pauseAlt/pauseUI.xml","TEXT",e))),this.replayButton.animation.addByPrefix("selected","bluereplay",0,!1),this.replayButton.animation.appendByPrefix("selected","yellowreplay"),this.replayButton.animation.play("selected"),n.save.data.antialiasing&&this.replayButton.set_antialiasing(!0),this.add(this.replayButton),this.cancelButton=new O(.58*n.width,this.replayButton.y),this.cancelButton.set_frames(La.fromSparrow(K.getPath("images/pauseAlt/pauseUI.png","IMAGE",e=null),K.getPath("images/pauseAlt/pauseUI.xml","TEXT",e))),this.cancelButton.animation.addByPrefix("selected","bluecancel",0,!1),this.cancelButton.animation.appendByPrefix("selected","cancelyellow"),this.cancelButton.animation.play("selected"),n.save.data.antialiasing&&this.cancelButton.set_antialiasing(!0),this.add(this.cancelButton),this.changeThing(),da.prototype.create.call(this)},update:function(t){var e;(Kb.player1.controls._leftP.check()||Kb.player1.controls._rightP.check())&&this.changeThing(),Kb.player1.controls._accept.check()&&(e=new(this.replaySelect?y:fe),n.game._state.switchTo(e)&&(n.game._requestedState=e)),da.prototype.update.call(this,t)},changeThing:function(){(this.replaySelect=!this.replaySelect)?(this.cancelButton.animation._curAnim.set_curFrame(0),this.replayButton.animation._curAnim.set_curFrame(1)):(this.cancelButton.animation._curAnim.set_curFrame(1),this.replayButton.animation._curAnim.set_curFrame(0))},__class__:ln});var cc=function(){};r.GlobalVideo=cc,cc.__name__="GlobalVideo",cc.video=null,cc.webm=null,cc.setVid=function(t){cc.video=t},cc.getVid=function(){return cc.video},cc.setWebm=function(t){cc.webm=t,cc.isWebm=!0},cc.getWebm=function(){return cc.webm},cc.get=function(){return cc.isWebm?cc.getWebm():cc.getVid()},cc.calc=function(t){var e=Fa.get_current().stage.stageWidth,n=Fa.get_current().stage.stageHeight,s=(i=jn.width)/(a=jn.height)*n,i=a/i*e,a=(e-s)/2,r=(n-i)/2;switch(n<(i|=0)&&(r=0,i=n),e<(s|=0)&&(a=0,s=e),t){case 0:return a;case 1:return r;case 2:return s;case 3:return i}return null};var eh=function(t,e){if(null==e&&(e=!1),null==t&&(t="bf"),this.isPlayer=this.isOldIcon=!1,this.char="bf",O.call(this),this.char=t,this.isPlayer=e,this.isOldIcon=!1,n.save.data.antialiasing)if(null==t)this.set_antialiasing(!0);else switch(t){case"bf-pixel":case"gf-pixel":case"senpai":case"senpai-angry":case"spirit":this.set_antialiasing(!1);break;default:this.set_antialiasing(!0)}this.changeIcon(t),this.scrollFactor.set()};r.HealthIcon=eh,eh.__name__="HealthIcon",eh.__super__=O,eh.prototype=E(O.prototype,{char:null,isPlayer:null,isOldIcon:null,sprTracker:null,swapOldIcon:function(){(this.isOldIcon=!this.isOldIcon)?this.changeIcon("bf-old"):this.changeIcon(this.char)},changeIcon:function(t){"bf-pixel"!=t&&"bf-old"!=t&&"bf-austin"!=t&&(t=t.split("-")[0]),this.loadGraphic(K.getPath("images/icons/icon-"+t+".png","IMAGE",null),!0,150,150),this.animation.add(t,[0,1],0,!1,this.isPlayer),this.animation.play(t)},update:function(t){O.prototype.update.call(this,t),null!=this.sprTracker&&this.setPosition(this.sprTracker.x+this.sprTracker.get_width()+10,this.sprTracker.y-30)},__class__:eh});var Kd=function(){};r.HelperFunctions=Kd,Kd.__name__="HelperFunctions",Kd.truncateFloat=function(t,e){return t*=Math.pow(10,e),Math.round(t)/Math.pow(10,e)},Kd.GCD=function(t,e){return 0==e?0<t?t:-t:Kd.GCD(e,t%e)};var Gb=function(){};r.Highscore=Gb,Gb.__name__="Highscore",Gb.saveScore=function(t,e,s){null==e&&(e=0),s=Gb.formatSong(t,s=null==s?0:s);var i=null==e?0:e;if(Bd.isLoggedIn)for(var a=Qc.core.scoreBoards.keys();a.hasNext();){var r=a.next();t==(r=Qc.core.scoreBoards.h[r])._data.name&&r.postScore(i,"Uhh meow?")}n.save.data.botplay?Ea.trace("BotPlay detected. Score saving is disabled.",{fileName:"source/Highscore.hx",lineNumber:35,className:"Highscore",methodName:"saveScore"}):(!Object.prototype.hasOwnProperty.call(Gb.songScores.h,s)||Gb.songScores.h[s]<e)&&Gb.setScore(s,e)},Gb.saveCombo=function(t,e,s){t=Gb.formatSong(t,s=null==s?0:s),e=Y.replace(e.split(")")[0],"(",""),n.save.data.botplay||(!Object.prototype.hasOwnProperty.call(Gb.songCombos.h,t)||Gb.getComboInt(Gb.songCombos.h[t])<Gb.getComboInt(e))&&Gb.setCombo(t,e)},Gb.saveWeekScore=function(t,e,s){null==s&&(s=0);var i=e=null==e?0:e,a="Week "+(t=null==t?1:t);if(null==e&&(i=0),Bd.isLoggedIn)for(var r=Qc.core.scoreBoards.keys();r.hasNext();){var l=r.next();a==(l=Qc.core.scoreBoards.h[l])._data.name&&l.postScore(i,"Uhh meow?")}n.save.data.botplay?Ea.trace("BotPlay detected. Score saving is disabled.",{fileName:"source/Highscore.hx",lineNumber:73,className:"Highscore",methodName:"saveWeekScore"}):(t=Gb.formatSong("week"+t,s),(!Object.prototype.hasOwnProperty.call(Gb.songScores.h,t)||Gb.songScores.h[t]<e)&&Gb.setScore(t,e))},Gb.setScore=function(t,e){Gb.songScores.h[t]=e,n.save.data.songScores=Gb.songScores,n.save.flush()},Gb.setCombo=function(t,e){Gb.songCombos.h[t]=e,n.save.data.songCombos=Gb.songCombos,n.save.flush()},Gb.formatSong=function(t,e){return 0==e?t+="-easy":2==e&&(t+="-hard"),t},Gb.getComboInt=function(t){switch(t){case"FC":return 2;case"GFC":return 3;case"MFC":return 4;case"SDCB":return 1;default:return 0}},Gb.getScore=function(t,e){var n=Gb.songScores,s=Gb.formatSong(t,e);return Object.prototype.hasOwnProperty.call(n.h,s)||Gb.setScore(Gb.formatSong(t,e),0),n=Gb.songScores,s=Gb.formatSong(t,e),n.h[s]},Gb.getCombo=function(t,e){var n=Gb.songCombos,s=Gb.formatSong(t,e);return Object.prototype.hasOwnProperty.call(n.h,s)||Gb.setCombo(Gb.formatSong(t,e),""),n=Gb.songCombos,s=Gb.formatSong(t,e),n.h[s]},Gb.getWeekScore=function(t,e){var n=Gb.songScores,s=Gb.formatSong("week"+t,e);return Object.prototype.hasOwnProperty.call(n.h,s)||Gb.setScore(Gb.formatSong("week"+t,e),0),n=Gb.songScores,s=Gb.formatSong("week"+t,e),n.h[s]},Gb.load=function(){null!=n.save.data.songScores&&(Gb.songScores=n.save.data.songScores),null!=n.save.data.songCombos&&(Gb.songCombos=n.save.data.songCombos)};var hh=function(t,e,s,i){this.history=[],this.showInput=n.save.data.inputShow,this.maxValue=Math.floor(y.rep.replay.sf/60*1e3)+95,this.minValue=-(Math.floor(y.rep.replay.sf/60*1e3)+95),Ya.call(this),this.set_x(t),this.set_y(e),this._width=s,this._height=i,(t=new ea(s,i)).draw(this),this.bitmap=new qd(t),this._axis=new ki,this._axis.set_x(this._labelWidth+10),t=Math.floor(y.rep.replay.sf/60*1e3)/166,e=hh.createTextField(10,10,-1,12),s=hh.createTextField(10,this._height-20,-1,12),e.set_text("Early ("+-166*t+"ms)"),s.set_text("Late ("+166*t+"ms)"),this.addChild(e),this.addChild(s),this.addChild(this._axis),this.drawAxes()};r.HitGraph=hh,hh.__name__="HitGraph",hh.createTextField=function(t,e,n,s){return null==s&&(s=12),null==n&&(n=-1),null==e&&(e=0),null==t&&(t=0),hh.initTextField(new he,t,e,n,s)},hh.initTextField=function(t,e,n,s,i){return null==i&&(i=12),null==s&&(s=-1),null==n&&(n=0),t.set_x(e=null==e?0:e),t.set_y(n),t.set_multiline(!1),t.set_wordWrap(!1),t.set_embedFonts(!0),t.set_selectable(!1),t.set_defaultTextFormat(new oe("assets/fonts/vcr.ttf",i,16777215&s)),t.set_alpha((s>>24&255)/255),t.set_autoSize(1),t},hh.__super__=Ya,hh.prototype=E(Ya.prototype,{minLabel:null,curLabel:null,maxLabel:null,avgLabel:null,minValue:null,maxValue:null,showInput:null,graphColor:null,history:null,bitmap:null,_axis:null,_width:null,_height:null,_unit:null,_labelWidth:null,_label:null,drawAxes:function(){var t=this._axis.get_graphics();t.clear(),t.lineStyle(1,16777215,.5),t.moveTo(0,0),t.lineTo(0,this._height),t.moveTo(0,this._height),t.lineTo(this._width,this._height),t.moveTo(0,this._height/2),t.lineTo(this._width,this._height/2)},drawJudgementLine:function(t){var e=this.get_graphics();e.lineStyle(1,this.graphColor,.3);var n=(Math.floor(y.rep.replay.sf/60*1e3)/166*t-this.minValue)/Math.max(this.maxValue-this.minValue,.1*this.maxValue),n=this._axis.get_y()+(-n*this._height-1+this._height),s=this._axis.get_x()+1;45==t&&e.moveTo(s,this._axis.get_y()+n),s=this._axis.get_x()+1,e.drawRect(s,n,this._width,1),e.lineStyle(1,this.graphColor,1)},drawGraph:function(){var t=this.get_graphics();t.clear(),t.lineStyle(1,this.graphColor,1),t.beginFill(65280),this.drawJudgementLine(45),t.endFill(),t.beginFill(16711680),this.drawJudgementLine(90),t.endFill(),t.beginFill(9109504),this.drawJudgementLine(135),t.endFill(),t.beginFill(5767168),this.drawJudgementLine(166),t.endFill(),t.beginFill(65280),this.drawJudgementLine(-45),t.endFill(),t.beginFill(16711680),this.drawJudgementLine(-90),t.endFill(),t.beginFill(9109504),this.drawJudgementLine(-135),t.endFill(),t.beginFill(5767168),this.drawJudgementLine(-166),t.endFill();var e=Math.max(this.maxValue-this.minValue,.1*this.maxValue),n=this._axis.get_x()+1;if(this.showInput)for(var s=0,i=y.rep.replay.ana.anaArray.length;s<i;){var a=s++,r=(25*(a=y.rep.replay.ana.anaArray[a]).key-this.minValue)/e;a.hit?t.beginFill(16776960):t.beginFill(12759680),a.hitTime<0||(r=-r*this._height-1+this._height,t.drawRect(n+this.fitX(a.hitTime),r,2,2),t.endFill())}for(s=0,i=this.history.length;s<i;){switch(a=s++,r=(this.history[a][0]-this.minValue)/e,this.history[a][1]){case"bad":t.beginFill(16711680);break;case"good":t.beginFill(65280);break;case"miss":t.beginFill(5767168);break;case"shit":t.beginFill(9109504);break;case"sick":t.beginFill(65535);break;default:t.beginFill(16777215)}r=-r*this._height-1+this._height,t.drawRect(this.fitX(this.history[a][2]),r,4,4),t.endFill()}(t=new ea(this._width,this._height)).draw(this),this.bitmap=new qd(t)},fitX:function(t){return t/n.sound.music._length*this.get_width()},addToHistory:function(t,e,n){this.history.push([t,e,n])},update:function(){this.drawGraph()},average:function(){for(var t=0,e=0,n=this.history;e<n.length;){var s=n[e];++e,t+=s}return t/this.history.length},destroy:function(){this._axis=Da.removeChild(this,this._axis),this.history=null},__class__:hh});var ma=function(){};r.HxOverrides=ma,ma.__name__="HxOverrides",ma.dateStr=function(t){var e=t.getMonth()+1,n=t.getDate(),s=t.getHours(),i=t.getMinutes(),a=t.getSeconds();return t.getFullYear()+"-"+(e<10?"0"+e:""+e)+"-"+(n<10?"0"+n:""+n)+" "+(s<10?"0"+s:""+s)+":"+(i<10?"0"+i:""+i)+":"+(a<10?"0"+a:""+a)},ma.strDate=function(t){switch(t.length){case 8:t=t.split(":");var e=new Date;return e.setTime(0),e.setUTCHours(t[0]),e.setUTCMinutes(t[1]),e.setUTCSeconds(t[2]),e;case 10:return t=t.split("-"),new Date(t[0],t[1]-1,t[2],0,0,0);case 19:return e=(t=t.split(" "))[0].split("-"),t=t[1].split(":"),new Date(e[0],e[1]-1,e[2],t[0],t[1],t[2]);default:throw H.thrown("Invalid date format : "+t)}},ma.cca=function(t,e){if((t=t.charCodeAt(e))==t)return t},ma.substr=function(t,e,n){if(null==n)n=t.length;else if(n<0){if(0!=e)return"";n=t.length+n}return t.substr(e,n)},ma.remove=function(t,e){return-1!=(e=t.indexOf(e))&&(t.splice(e,1),!0)},ma.now=function(){return Date.now()};var fr=function(t,e){this.min=t,this.max=e};r.IntIterator=fr,fr.__name__="IntIterator",fr.prototype={min:null,max:null,hasNext:function(){return this.min<this.max},next:function(){return this.min++},__class__:fr};var gr=function(){};r.KadeEngineData=gr,gr.__name__="KadeEngineData",gr.initSave=function(){null==n.save.data.weekUnlocked&&(n.save.data.weekUnlocked=7),null==n.save.data.newInput&&(n.save.data.newInput=!0),null==n.save.data.downscroll&&(n.save.data.downscroll=!1),null==n.save.data.antialiasing&&(n.save.data.antialiasing=!0),null==n.save.data.missSounds&&(n.save.data.missSounds=!0),null==n.save.data.dfjk&&(n.save.data.dfjk=!1),null==n.save.data.accuracyDisplay&&(n.save.data.accuracyDisplay=!0),null==n.save.data.offset&&(n.save.data.offset=0),null==n.save.data.songPosition&&(n.save.data.songPosition=!1),null==n.save.data.fps&&(n.save.data.fps=!1),null==n.save.data.changedHit&&(n.save.data.changedHitX=-1,n.save.data.changedHitY=-1,n.save.data.changedHit=!1),null==n.save.data.fpsRain&&(n.save.data.fpsRain=!1),null==n.save.data.fpsCap&&(n.save.data.fpsCap=120),(285<n.save.data.fpsCap||n.save.data.fpsCap<60)&&(n.save.data.fpsCap=120),null==n.save.data.scrollSpeed&&(n.save.data.scrollSpeed=1),null==n.save.data.npsDisplay&&(n.save.data.npsDisplay=!1),null==n.save.data.frames&&(n.save.data.frames=10),null==n.save.data.accuracyMod&&(n.save.data.accuracyMod=1),null==n.save.data.watermark&&(n.save.data.watermark=!0),null==n.save.data.ghost&&(n.save.data.ghost=!0),null==n.save.data.distractions&&(n.save.data.distractions=!0),null==n.save.data.stepMania&&(n.save.data.stepMania=!1),null==n.save.data.flashing&&(n.save.data.flashing=!0),null==n.save.data.resetButton&&(n.save.data.resetButton=!1),null==n.save.data.botplay&&(n.save.data.botplay=!1),null==n.save.data.cpuStrums&&(n.save.data.cpuStrums=!1),null==n.save.data.strumline&&(n.save.data.strumline=!1),null==n.save.data.customStrumLine&&(n.save.data.customStrumLine=0),null==n.save.data.camzoom&&(n.save.data.camzoom=!0),null==n.save.data.scoreScreen&&(n.save.data.scoreScreen=!0),null==n.save.data.inputShow&&(n.save.data.inputShow=!1),null==n.save.data.optimize&&(n.save.data.optimize=!1),null==n.save.data.cacheImages&&(n.save.data.cacheImages=!1),null==n.save.data.editor&&(n.save.data.editor=!0),ve.gamepad=null!=n.gamepads.lastActive,T.recalculateTimings(),Kb.player1.controls.loadKeyBinds(),ve.keyCheck(),xb.watermarks=n.save.data.watermark,za.__cast(Fa.get_current().getChildAt(0),xb).setFPSCap(n.save.data.fpsCap)};var mn=function(t){this.lastKey="",this.frames=0,this.state="select",this.blacklist=["ESCAPE","ENTER","BACKSPACE","SPACE","TAB"],this.tempKey="",this.gpKeys=[n.save.data.gpleftBind,n.save.data.gpdownBind,n.save.data.gpupBind,n.save.data.gprightBind],this.keys=[n.save.data.leftBind,n.save.data.downBind,n.save.data.upBind,n.save.data.rightBind],this.curSelected=0,this.defaultGpKeys=["DPAD_LEFT","DPAD_DOWN","DPAD_UP","DPAD_RIGHT"],this.defaultKeys=["A","S","W","D","R"],this.keyText=["LEFT","DOWN","UP","RIGHT"],Vc.call(this,t)};r.KeyBindMenu=mn,mn.__name__="KeyBindMenu",mn.__super__=Vc,mn.prototype=E(Vc.prototype,{keyTextDisplay:null,keyWarning:null,warningTween:null,keyText:null,defaultKeys:null,defaultGpKeys:null,curSelected:null,keys:null,gpKeys:null,tempKey:null,blacklist:null,blackBox:null,infoText:null,state:null,create:function(){for(var t=0,e=this.keys.length;t<e;){var s=t++,i=this.keys[s];null==i&&(this.keys[s]=this.defaultKeys[s])}for(t=0,e=this.gpKeys.length;t<e;)s=t++,null==(i=this.gpKeys[s])&&(this.gpKeys[s]=this.defaultGpKeys[s]);this.persistentUpdate=!0,this.keyTextDisplay=new ub(-10,0,1280,"",72),this.keyTextDisplay.scrollFactor.set(0,0),this.keyTextDisplay.setFormat("VCR OSD Mono",42,-1,"center",Zc.OUTLINE,-16777216),this.keyTextDisplay.set_borderSize(2),this.keyTextDisplay.set_borderQuality(3),this.blackBox=new O(0,0).makeGraphic(n.width,n.height,-16777216),this.add(this.blackBox),this.infoText=new ub(-10,580,1280,"Current Mode: "+(ve.gamepad?"GAMEPAD":"KEYBOARD")+". Press TAB to switch\n("+(ve.gamepad?"RIGHT Trigger":"Escape")+" to save, "+(ve.gamepad?"LEFT Trigger":"Backspace")+" to leave without saving. "+(ve.gamepad?"START To change a keybind":"")+")",72),this.infoText.scrollFactor.set(0,0),this.infoText.setFormat("VCR OSD Mono",24,-1,"center",Zc.OUTLINE,-16777216),this.infoText.set_borderSize(2),this.infoText.set_borderQuality(3),this.infoText.set_alpha(0),this.infoText.screenCenter(Ce.X),this.add(this.infoText),this.add(this.keyTextDisplay),this.blackBox.set_alpha(0),this.keyTextDisplay.set_alpha(0),Ta.tween(this.keyTextDisplay,{alpha:1},1,{ease:Ra.expoInOut}),Ta.tween(this.infoText,{alpha:1},1.4,{ease:Ra.expoInOut}),Ta.tween(this.blackBox,{alpha:.7},1,{ease:Ra.expoInOut}),Ad.instance.acceptInput=!1,this.textUpdate(),Vc.prototype.create.call(this)},frames:null,update:function(t){var e=n.gamepads.lastActive;switch(this.frames<=10&&this.frames++,this.infoText.set_text("Current Mode: "+(ve.gamepad?"GAMEPAD":"KEYBOARD")+". Press TAB to switch\n("+(ve.gamepad?"RIGHT Trigger":"Escape")+" to save, "+(ve.gamepad?"LEFT Trigger":"Backspace")+" to leave without saving. "+(ve.gamepad?"START To change a keybind":"")+")\n"+(""!=this.lastKey?this.lastKey+" is blacklisted!":"")),this.state){case"exiting":break;case"input":this.tempKey=this.keys[this.curSelected],this.keys[this.curSelected]="?",ve.gamepad&&(this.gpKeys[this.curSelected]="?"),this.textUpdate(),this.state="waiting";break;case"select":if((s=n.keys.justPressed).keyManager.checkStatus(38,s.status)&&(n.sound.play(K.sound("scrollMenu")),this.changeItem(-1)),(s=n.keys.justPressed).keyManager.checkStatus(40,s.status)&&(n.sound.play(K.sound("scrollMenu")),this.changeItem(1)),(s=n.keys.justPressed).keyManager.checkStatus(9,s.status)&&(ve.gamepad=!ve.gamepad,this.textUpdate()),(s=n.keys.justPressed).keyManager.checkStatus(13,s.status)?(n.sound.play(K.sound("scrollMenu")),this.state="input"):(s=n.keys.justPressed).keyManager.checkStatus(27,s.status)?this.quit():(s=n.keys.justPressed).keyManager.checkStatus(8,s.status)&&this.reset(),null!=e){var s,i=11,a=(s=e.justPressed).gamepad;switch(s=s.status,i){case-2:a=a.anyButton(s);break;case-1:a=!a.anyButton(s);break;default:i=a.mapping.getRawID(i),a=null!=(a=a.buttons[i])&&a.hasState(s)}switch(a&&(n.sound.play(K.sound("scrollMenu")),this.changeItem(-1),this.textUpdate()),a=(s=e.justPressed).gamepad,s=s.status,i=12){case-2:a=a.anyButton(s);break;case-1:a=!a.anyButton(s);break;default:i=a.mapping.getRawID(i),a=null!=(a=a.buttons[i])&&a.hasState(s)}switch(a&&(n.sound.play(K.sound("scrollMenu")),this.changeItem(1),this.textUpdate()),a=(s=e.justPressed).gamepad,s=s.status,i=7){case-2:a=a.anyButton(s);break;case-1:a=!a.anyButton(s);break;default:i=a.mapping.getRawID(i),a=null!=(a=a.buttons[i])&&a.hasState(s)}if(a&&10<this.frames)n.sound.play(K.sound("scrollMenu")),this.state="input";else{switch(a=(s=e.justPressed).gamepad,s=s.status,i=17){case-2:a=a.anyButton(s);break;case-1:a=!a.anyButton(s);break;default:i=a.mapping.getRawID(i),a=null!=(a=a.buttons[i])&&a.hasState(s)}if(a)this.quit();else{switch(a=(s=e.justPressed).gamepad,s=s.status,i=18){case-2:a=a.anyButton(s);break;case-1:a=!a.anyButton(s);break;default:i=a.mapping.getRawID(i),a=null!=(a=a.buttons[i])&&a.hasState(s)}a&&this.reset()}}}break;case"waiting":if(null!=e&&ve.gamepad){switch((s=n.keys.justPressed).keyManager.checkStatus(27,s.status)&&(this.gpKeys[this.curSelected]=this.tempKey,this.state="select",n.sound.play(K.sound("confirmMenu"))),a=(s=e.justPressed).gamepad,s=s.status,i=7){case-2:a=a.anyButton(s);break;case-1:a=!a.anyButton(s);break;default:i=a.mapping.getRawID(i),a=null!=(a=a.buttons[i])&&a.hasState(s)}a&&(this.addKeyGamepad(this.defaultKeys[this.curSelected]),this.save(),this.state="select"),e.justPressed.get_ANY()&&(a=e.mapping.getID(e.firstJustPressedRawID()),Ea.trace(null==a?"null":oc.toStringMap.h[a],{fileName:"source/KeyBindMenu.hx",lineNumber:208,className:"KeyBindMenu",methodName:"update"}),e=e.mapping.getID(e.firstJustPressedRawID()),this.addKeyGamepad(oc.toStringMap.h[e]),this.save(),this.state="select",this.textUpdate())}else(s=n.keys.justPressed).keyManager.checkStatus(27,s.status)?(this.keys[this.curSelected]=this.tempKey,this.state="select",n.sound.play(K.sound("confirmMenu"))):(s=n.keys.justPressed).keyManager.checkStatus(13,s.status)?(this.addKey(this.defaultKeys[this.curSelected]),this.save(),this.state="select"):n.keys.justPressed.get_ANY()&&(e=n.keys.getIsDown()[0].ID,this.addKey(cb.toStringMap.h[e]),this.save(),this.state="select");break;default:this.state="select"}n.keys.justPressed.get_ANY()&&this.textUpdate(),Vc.prototype.update.call(this,t)},textUpdate:function(){var t,e;this.keyTextDisplay.set_text("\n\n"),ve.gamepad?(t=0==this.curSelected?"> ":"  ",Ea.trace(this.gpKeys[0],{fileName:"source/KeyBindMenu.hx",lineNumber:260,className:"KeyBindMenu",methodName:"textUpdate"}),(e=this.keyTextDisplay).set_text(e.text+(t+this.keyText[0]+": "+this.gpKeys[0])+"\n"),t=1==this.curSelected?"> ":"  ",Ea.trace(this.gpKeys[1],{fileName:"source/KeyBindMenu.hx",lineNumber:260,className:"KeyBindMenu",methodName:"textUpdate"}),(e=this.keyTextDisplay).set_text(e.text+(t+this.keyText[1]+": "+this.gpKeys[1])+"\n"),t=2==this.curSelected?"> ":"  ",Ea.trace(this.gpKeys[2],{fileName:"source/KeyBindMenu.hx",lineNumber:260,className:"KeyBindMenu",methodName:"textUpdate"}),(e=this.keyTextDisplay).set_text(e.text+(t+this.keyText[2]+": "+this.gpKeys[2])+"\n"),t=3==this.curSelected?"> ":"  ",Ea.trace(this.gpKeys[3],{fileName:"source/KeyBindMenu.hx",lineNumber:260,className:"KeyBindMenu",methodName:"textUpdate"}),(e=this.keyTextDisplay).set_text(e.text+(t+this.keyText[3]+": "+this.gpKeys[3])+"\n")):(t=0==this.curSelected?"> ":"  ",(e=this.keyTextDisplay).set_text(e.text+(t+this.keyText[0]+": "+(this.keys[0]!=this.keyText[0]?this.keys[0]+" / ":"")+this.keyText[0])+" ARROW\n"),t=1==this.curSelected?"> ":"  ",(e=this.keyTextDisplay).set_text(e.text+(t+this.keyText[1]+": "+(this.keys[1]!=this.keyText[1]?this.keys[1]+" / ":"")+this.keyText[1])+" ARROW\n"),t=2==this.curSelected?"> ":"  ",(e=this.keyTextDisplay).set_text(e.text+(t+this.keyText[2]+": "+(this.keys[2]!=this.keyText[2]?this.keys[2]+" / ":"")+this.keyText[2])+" ARROW\n"),t=3==this.curSelected?"> ":"  ",(e=this.keyTextDisplay).set_text(e.text+(t+this.keyText[3]+": "+(this.keys[3]!=this.keyText[3]?this.keys[3]+" / ":"")+this.keyText[3])+" ARROW\n")),this.keyTextDisplay.screenCenter()},save:function(){n.save.data.upBind=this.keys[2],n.save.data.downBind=this.keys[1],n.save.data.leftBind=this.keys[0],n.save.data.rightBind=this.keys[3],n.save.data.gpupBind=this.gpKeys[2],n.save.data.gpdownBind=this.gpKeys[1],n.save.data.gpleftBind=this.gpKeys[0],n.save.data.gprightBind=this.gpKeys[3],n.save.flush(),Kb.player1.controls.loadKeyBinds()},reset:function(){this.keys[0]=this.defaultKeys[0],this.keys[1]=this.defaultKeys[1],this.keys[2]=this.defaultKeys[2],this.keys[3]=this.defaultKeys[3],this.keys[4]=this.defaultKeys[4],this.quit()},quit:function(){var e=this;this.state="exiting",this.save(),Ad.instance.acceptInput=!0,Ta.tween(this.keyTextDisplay,{alpha:0},1,{ease:Ra.expoInOut}),Ta.tween(this.blackBox,{alpha:0},1.1,{ease:Ra.expoInOut,onComplete:function(t){e.close()}}),Ta.tween(this.infoText,{alpha:0},1,{ease:Ra.expoInOut})},addKeyGamepad:function(t){for(var e=["START"],s=0,i=this.gpKeys.length;s<i;){var a=s++,r=this.gpKeys[a];if(r==t&&(this.gpKeys[a]=null),-1!=e.indexOf(r))return this.gpKeys[a]=null,void(this.lastKey=t)}this.gpKeys[this.curSelected]=t,n.sound.play(K.sound("scrollMenu"))},lastKey:null,addKey:function(t){for(var e=[],s=0,i=this.blacklist;s<i.length;){var a=i[s];++s,e.push(a)}for(Ea.trace(e,{fileName:"source/KeyBindMenu.hx",lineNumber:360,className:"KeyBindMenu",methodName:"addKey"}),s=0,i=this.keys.length;s<i;){var a=s++,r=this.keys[a];if(r==t&&(this.keys[a]=null),-1!=e.indexOf(r))return this.keys[a]=null,void(this.lastKey=r)}-1!=t.indexOf("NUMPAD")?(this.keys[this.curSelected]=null,this.lastKey=t):(this.lastKey="",this.keys[this.curSelected]=t,n.sound.play(K.sound("scrollMenu")))},changeItem:function(t){this.curSelected+=t=null==t?0:t,3<this.curSelected&&(this.curSelected=0),this.curSelected<0&&(this.curSelected=3)},__class__:mn});var ve=function(){};r.KeyBinds=ve,ve.__name__="KeyBinds",ve.resetBinds=function(){n.save.data.upBind="W",n.save.data.downBind="S",n.save.data.leftBind="A",n.save.data.rightBind="D",n.save.data.killBind="R",n.save.data.gpupBind="DPAD_UP",n.save.data.gpdownBind="DPAD_DOWN",n.save.data.gpleftBind="DPAD_LEFT",n.save.data.gprightBind="DPAD_RIGHT",Kb.player1.controls.loadKeyBinds()},ve.keyCheck=function(){null==n.save.data.upBind&&(n.save.data.upBind="W",Ea.trace("No UP",{fileName:"source/KeyBinds.hx",lineNumber:36,className:"KeyBinds",methodName:"keyCheck"})),-1!=n.save.data.upBind.indexOf("NUMPAD")&&(n.save.data.upBind="W"),null==n.save.data.downBind&&(n.save.data.downBind="S",Ea.trace("No DOWN",{fileName:"source/KeyBinds.hx",lineNumber:42,className:"KeyBinds",methodName:"keyCheck"})),-1!=n.save.data.downBind.indexOf("NUMPAD")&&(n.save.data.downBind="S"),null==n.save.data.leftBind&&(n.save.data.leftBind="A",Ea.trace("No LEFT",{fileName:"source/KeyBinds.hx",lineNumber:48,className:"KeyBinds",methodName:"keyCheck"})),-1!=n.save.data.leftBind.indexOf("NUMPAD")&&(n.save.data.leftBind="A"),null==n.save.data.rightBind&&(n.save.data.rightBind="D",Ea.trace("No RIGHT",{fileName:"source/KeyBinds.hx",lineNumber:54,className:"KeyBinds",methodName:"keyCheck"})),-1!=n.save.data.rightBind.indexOf("NUMPAD")&&(n.save.data.rightBind="D"),null==n.save.data.gpupBind&&(n.save.data.gpupBind="DPAD_UP",Ea.trace("No GUP",{fileName:"source/KeyBinds.hx",lineNumber:61,className:"KeyBinds",methodName:"keyCheck"})),null==n.save.data.gpdownBind&&(n.save.data.gpdownBind="DPAD_DOWN",Ea.trace("No GDOWN",{fileName:"source/KeyBinds.hx",lineNumber:65,className:"KeyBinds",methodName:"keyCheck"})),null==n.save.data.gpleftBind&&(n.save.data.gpleftBind="DPAD_LEFT",Ea.trace("No GLEFT",{fileName:"source/KeyBinds.hx",lineNumber:69,className:"KeyBinds",methodName:"keyCheck"})),null==n.save.data.gprightBind&&(n.save.data.gprightBind="DPAD_RIGHT",Ea.trace("No GRIGHT",{fileName:"source/KeyBinds.hx",lineNumber:73,className:"KeyBinds",methodName:"keyCheck"})),null==n.save.data.killBind&&(n.save.data.killBind="R",Ea.trace("No KILL",{fileName:"source/KeyBinds.hx",lineNumber:77,className:"KeyBinds",methodName:"keyCheck"})),Ea.trace(U.string(n.save.data.leftBind)+"-"+U.string(n.save.data.downBind)+"-"+U.string(n.save.data.upBind)+"-"+U.string(n.save.data.rightBind),{fileName:"source/KeyBinds.hx",lineNumber:80,className:"KeyBinds",methodName:"keyCheck"})};var uj=function(){};r.Lambda=uj,uj.__name__="Lambda",uj.array=function(t){var e=[];for(t=Ua(t);t.hasNext();){var n=t.next();e.push(n)}return e},uj.exists=function(t,e){for(t=Ua(t);t.hasNext();)if(e(t.next()))return!0;return!1},uj.count=function(t,e){var n=0;if(null==e)for(e=Ua(t);e.hasNext();)e.next(),++n;else for(t=Ua(t);t.hasNext();)e(t.next())&&++n;return n};var nn=function(t,e){this.isSettingControl=!1,this.actualNames=[],this.controlsStrings=[],this.songs=[],this.curSelected=0,da.call(this,t,e)};r.LoadReplayState=nn,nn.__name__="LoadReplayState",nn.__super__=da,nn.prototype=E(da.prototype,{selector:null,curSelected:null,songs:null,controlsStrings:null,actualNames:null,grpControls:null,versionShit:null,poggerDetails:null,create:function(){var t=(new O).loadGraphic(K.getPath("images/menuDesat.png","IMAGE",null));Ea.trace(this.controlsStrings,{fileName:"source/LoadReplayState.hx",lineNumber:45,className:"LoadReplayState",methodName:"create"}),this.controlsStrings.sort(z(this,this.sortByDate)),this.addWeek(["Bopeebo","Fresh","Dadbattle"],1,["dad"]),this.addWeek(["Spookeez","South","Monster"],2,["spooky"]),this.addWeek(["Pico","Philly","Blammed"],3,["pico"]),this.addWeek(["Satin-Panties","High","Milf"],4,["mom"]),this.addWeek(["Cocoa","Eggnog","Winter-Horrorland"],5,["parents-christmas","parents-christmas","monster-christmas"]),this.addWeek(["Senpai","Roses","Thorns"],6,["senpai","senpai","spirit"]);for(var e=0,s=this.controlsStrings.length;e<s;){var i=e++,a=this.controlsStrings[i];this.actualNames[i]=a;var r=ng.LoadReplay(a);this.controlsStrings[i]=a.split("time")[0]+" "+cd.difficultyFromInt(r.replay.songDiff).toUpperCase()}for(0==this.controlsStrings.length&&this.controlsStrings.push("No Replays..."),t.set_color(-1412611),t.setGraphicSize(1.1*t.get_width()|0),t.updateHitbox(),t.screenCenter(),n.save.data.antialiasing&&t.set_antialiasing(!0),this.add(t),this.grpControls=new yb,this.add(this.grpControls),e=0,s=this.controlsStrings.length;e<s;)i=e++,(t=new $b(0,70*i+30,this.controlsStrings[i],!0,!1)).isMenuItem=!0,t.targetY=i,this.grpControls.add(t);this.versionShit=new ub(5,n.height-34,0,"Replay Loader (ESCAPE TO GO BACK)\nNOTICE!!!! Replays are in a beta stage, and they are probably not 100% correct. expect misses and other stuff that isn't there!\n",12),this.versionShit.scrollFactor.set(),this.versionShit.setFormat("VCR OSD Mono",16,-1,"left",Zc.OUTLINE,-16777216),this.add(this.versionShit),this.poggerDetails=new ub(5,34,0,"Replay Details - \nnone",12),this.poggerDetails.scrollFactor.set(),this.poggerDetails.setFormat("VCR OSD Mono",16,-1,"left",Zc.OUTLINE,-16777216),this.add(this.poggerDetails),this.changeSelection(0),da.prototype.create.call(this)},sortByDate:function(t,e){return t=parseFloat(t.split("time")[1])/1e3,parseFloat(e.split("time")[1])/1e3-t|0},getWeekNumbFromSong:function(t){for(var e=0,n=0,s=this.songs.length;n<s;){var i=n++;(i=this.songs[i]).songName==t&&(e=i.week)}return e},addSong:function(t,e,n){this.songs.push(new El(t,e,n))},addWeek:function(t,e,n){null==n&&(n=["bf"]);for(var s=0,i=0;i<t.length;){var a=t[i];++i,this.addSong(a,e,n[s]),1!=n.length&&++s}},update:function(t){if(da.prototype.update.call(this,t),Kb.player1.controls._back.check()&&(t=new Ad,n.game._state.switchTo(t)&&(n.game._requestedState=t)),Kb.player1.controls._upP.check()&&this.changeSelection(-1),Kb.player1.controls._downP.check()&&this.changeSelection(1),Kb.player1.controls._accept.check()&&"No Replays..."!=this.grpControls.members[this.curSelected].text)if(Ea.trace("loading "+this.actualNames[this.curSelected],{fileName:"source/LoadReplayState.hx",lineNumber:163,className:"LoadReplayState",methodName:"update"}),y.rep=ng.LoadReplay(this.actualNames[this.curSelected]),y.loadRep=!0,y.rep.replay.replayGameVer==ng.version){switch(t=Y.replace(y.rep.replay.songName," ","-")){case"Dad-Battle":t="Dadbattle";break;case"Philly-Nice":t="Philly";break;case"dad-battle":t="Dadbattle";break;case"philly-nice":t="Philly"}y.isSM=y.rep.replay.sm,t=Gb.formatSong(t,y.rep.replay.songDiff);try{y.SONG=y.isSM?nf.loadFromJsonRAW(t):nf.loadFromJson(t,y.rep.replay.songName)}catch(t){return void Xa.current.__window.alert("Failed to load the song! Does the JSON exist?","Replays")}y.isStoryMode=!1,y.storyDifficulty=y.rep.replay.songDiff,y.storyWeek=this.getWeekNumbFromSong(y.rep.replay.songName),t=md.getNextState(new y,!1),n.game._state.switchTo(t)&&(n.game._requestedState=t)}else y.rep=null,y.loadRep=!1},isSettingControl:null,changeSelection:function(t){null==t&&(t=0),n.sound.play(K.sound("scrollMenu"),.4),this.curSelected+=t,this.curSelected<0&&(this.curSelected=this.grpControls.length-1),this.curSelected>=this.grpControls.length&&(this.curSelected=0),t=ng.LoadReplay(this.actualNames[this.curSelected]),this.poggerDetails.set_text("Replay Details - \nDate Created: "+U.string(t.replay.timestamp)+"\nSong: "+t.replay.songName+"\nReplay Version: "+t.replay.replayGameVer+" ("+(t.replay.replayGameVer!=ng.version?"OUTDATED not useable!":"Latest")+")\n");for(var e=t=0,s=this.grpControls.members;e<s.length;){var i=s[e];++e,i.targetY=t-this.curSelected,++t,i.set_alpha(.6),0==i.targetY&&i.set_alpha(1)}},__class__:nn});var md=function(t,e){this.stopMusic=this.danceLeft=!1,da.call(this),this.target=t,this.stopMusic=e},hr,fe,df,Dc,un,vn,wn,xn,yn,Cc,on,pn,qn,rn,sn,li;r.LoadingState=md,md.__name__="LoadingState",md.getSongPath=function(){var t=Y.replace(y.SONG.song," ","-").toLowerCase();switch(t){case"dad-battle":t="dadbattle";break;case"philly-nice":t="philly"}return"songs:assets/songs/"+t+"/Inst.ogg"},md.getVocalPath=function(){var t=Y.replace(y.SONG.song," ","-").toLowerCase();switch(t){case"dad-battle":t="dadbattle";break;case"philly-nice":t="philly"}return"songs:assets/songs/"+t+"/Voices.ogg"},md.loadAndSwitchState=function(t,e){t=md.getNextState(t,e=null==e?!1:e),n.game._state.switchTo(t)&&(n.game._requestedState=t)},md.getNextState=function(t,e){return null==e&&(e=!1),K.setCurrentLevel("week"+y.storyWeek),!md.isSoundLoaded(md.getSongPath())||y.SONG.needsVoices&&!md.isSoundLoaded(md.getVocalPath())||!md.isLibraryLoaded("shared")?new md(t,e):(e&&null!=n.sound.music&&(e=n.sound.music).cleanup(e.autoDestroy,!0),t)},md.isSoundLoaded=function(t){return Aa.cache.hasSound(t)},md.isLibraryLoaded=function(t){return null!=Aa.getLibrary(t)},md.initSongsManifest=function(){var e=new Fe;if(null!=(t=Ma.getLibrary("songs")))return wb.withValue(t);var t="songs",n=null,n=Ma.libraryPaths;return Object.prototype.hasOwnProperty.call(n.h,"songs")?(t=n.h.songs,n=gf.directory(t)):(Y.endsWith(t,".bundle")?(n=t,t+="/library.json"):n=gf.directory(t),t=Ma.__cacheBreak(t)),$c.loadFromFile(t,n).onComplete(function(t){null==t?e.error('Cannot parse asset manifest for library "songs"'):null==(t=wc.fromManifest(t))?e.error('Cannot open library "songs"'):((Ma.libraries.h.songs=t).onChange.add(z(D=Ma.onChange,D.dispatch)),e.completeWith(wb.withValue(t)))}).onError(function(t){e.error('There is no asset library with an ID of "songs"')}),e.future},md.__super__=da,md.prototype=E(da.prototype,{target:null,stopMusic:null,callbacks:null,logo:null,gfDance:null,danceLeft:null,create:function(){var s=this;this.logo=new O(-150,-100);var t=null;this.logo.set_frames(La.fromSparrow(K.getPath("images/logoBumpin.png","IMAGE",t),K.getPath("images/logoBumpin.xml","TEXT",t))),n.save.data.antialiasing&&this.logo.set_antialiasing(!0),this.logo.animation.addByPrefix("bump","logo bumpin",24),this.logo.animation.play("bump"),this.logo.updateHitbox(),this.gfDance=new O(.4*n.width,.07*n.height),this.gfDance.set_frames(La.fromSparrow(K.getPath("images/gfDanceTitle.png","IMAGE",t=null),K.getPath("images/gfDanceTitle.xml","TEXT",t))),this.gfDance.animation.addByIndices("danceLeft","gfDance",[30,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],"",24,!1),this.gfDance.animation.addByIndices("danceRight","gfDance",[15,16,17,18,19,20,21,22,23,24,25,26,27,28,29],"",24,!1),n.save.data.antialiasing&&this.gfDance.set_antialiasing(!0),this.add(this.gfDance),this.add(this.logo),md.initSongsManifest().onComplete(function(t){s.callbacks=new hr(z(s,s.onLoad));var e=s.callbacks.add("introComplete");s.checkLoadSong(md.getSongPath()),y.SONG.needsVoices&&s.checkLoadSong(md.getVocalPath()),s.checkLibrary("shared"),s.checkLibrary("eteled"),0<=y.storyWeek?s.checkLibrary("week"+y.storyWeek):s.checkLibrary("tutorial"),n.camera.fade(n.camera.bgColor,.5,!0),(new Tc).start(1.5,function(t){e()})})},checkLoadSong:function(t){var e;Aa.cache.hasSound(t)||(Aa.getLibrary("songs"),t.split(":").pop(),e=this.callbacks.add("song:"+t),Aa.loadSound(t).onComplete(function(t){e()}))},checkLibrary:function(t){if(Ea.trace(Aa.hasLibrary(t),{fileName:"source/LoadingState.hx",lineNumber:102,className:"LoadingState",methodName:"checkLibrary"}),null==Aa.getLibrary(t)){if(!Object.prototype.hasOwnProperty.call(Ma.libraryPaths.h,t))throw H.thrown("Missing library: "+t);var e=this.callbacks.add("library:"+t);Aa.loadLibrary(t).onComplete(function(t){e()})}},beatHit:function(){da.prototype.beatHit.call(this),this.logo.animation.play("bump"),(this.danceLeft=!this.danceLeft)?this.gfDance.animation.play("danceRight"):this.gfDance.animation.play("danceLeft")},update:function(t){da.prototype.update.call(this,t)},onLoad:function(){var t;this.stopMusic&&null!=n.sound.music&&(t=n.sound.music).cleanup(t.autoDestroy,!0),t=this.target,n.game._state.switchTo(t)&&(n.game._requestedState=t)},destroy:function(){da.prototype.destroy.call(this),this.callbacks=null},__class__:md}),function(){function v(){return window}function B(t,e){return e<t}function a(){return Object}function o(t,e){var n={},s={},i={},a={},r={},l={},o={};n._=e;var h=t.length;s._=[];for(var _=0;_<h;_++)s._[_]=t.charAt(_);for(_=0;_<h;_++)i._=n._*(_+102)+n._%49719,a._=n._*(_+775)+n._%30605,r._=i._%h,l._=a._%h,o._=s._[r._],s._[r._]=s._[l._],s._[l._]=o._,n._=(i._+a._)%7397093;e=String.fromCharCode(127);return s._.join("").split("%").join(e).split("#1").join("%").split("#0").join("#").split(e)}function h(t,e,n){var s={};if(s._=n,t){for(var i=this[_t[7]][_t[6]][_t[3]](_t[5])[1][_t[3]](_t[4])[0][_t[3]](_t[2])[0],a=t[_t[3]](_t[8]),r=0;r<a[_t[9]];r++){var l=a[r];if(l==i)return;if(e){if(2==(l=i[_t[3]](_t[10]+l))[_t[9]]&&!l[1])return void(_t||(o=!1))}else if(y==_t[72])return void L()}!function(t){throw t._||_t[11]}(s)}}function t(t,e){this[_t[12]]=[],this[_t[13]]=new ya,this[_t[9]]=this[_t[14]]=0,this[_t[15]]=null,this[_t[16]]=t,this[_t[15]]=e}function _(t){var e={},n={};if(e._=t,null==(t=e)._&&(t._=_t[20]),n._=this,!0!=S){e._=_t[1]+this[_t[9]]+_t[2]+e._,this[_t[9]]++,this[_t[14]]++;var s,i,t=null;return s=n,i=e,t=function(){var t;a()[_t[19]][_t[23]][_t[22]](s._[_t[13]][_t[21]],i._)?(t=s._[_t[13]],a()[_t[19]][_t[23]][_t[22]](t[_t[21]],i._)&&delete t[_t[21]][i._],s._[_t[12]][_t[24]](i._),s._[_t[14]]--,null!=s._[_t[15]]&&null!=s._[_t[15]]&&Ea[_t[30]](_t[1]+s._[_t[15]]+_t[25]+(i._+_t[26]+s._[_t[14]]+_t[27]),{fileName:_t[28],lineNumber:312,className:_t[17],methodName:_t[29]}),0==s._[_t[14]]&&(null!=s._[_t[15]]&&null!=s._[_t[15]]&&Ea[_t[30]](_t[1]+s._[_t[15]]+_t[31],{fileName:_t[28],lineNumber:312,className:_t[17],methodName:_t[29]}),s._[_t[16]]())):null!=s._[_t[15]]&&Ea[_t[30]](_t[1]+s._[_t[15]]+_t[32]+i._,{fileName:_t[28],lineNumber:312,className:_t[17],methodName:_t[29]})},this[_t[13]][_t[21]][e._]=t}H()}function s(t){null!=this[_t[15]]&&Ea[_t[30]](_t[1]+this[_t[15]]+_t[33]+t,{fileName:_t[28],lineNumber:312,className:_t[17],methodName:_t[29]})}function e(){return this[_t[12]][_t[34]]()}function k(){for(var t=[],e=ya[_t[35]](this[_t[13]][_t[21]]);e[_t[36]]();){var n=e[_t[37]]();t[_t[24]](n)}if(S)return t;m=0}function u(t,e){this[_t[38]]=!1,this[_t[39]]=[_t[40],_t[41],_t[42],_t[43]],this[_t[44]]=0,da[_t[22]](this,t,e)}function i(){var t={},e={},s={};t._=this,_t||m(),null==n[_t[49]][_t[48]][_t[47]]&&n[_t[49]][_t[53]](K[_t[52]](_t[50],_t[51],null)),this[_t[54]]=this[_t[55]]=!0;var i=new O(-100)[_t[58]](K[_t[52]](_t[56],_t[57],null));if(i[_t[60]][_t[59]](0),i[_t[60]][_t[61]](.1),i[_t[63]](1.1*i[_t[62]]()|0),i[_t[64]](),i[_t[65]](),n[_t[68]][_t[67]][_t[66]]&&i[_t[69]](!0),this[_t[70]](i),_t)if(this[_t[71]]=new Ja(0,0,1,1),this[_t[70]](this[_t[71]]),this[_t[72]]=new O(-80)[_t[58]](K[_t[52]](_t[73],_t[57],null)),!0!==J){if(this[_t[72]][_t[60]][_t[59]](0),_t)if(this[_t[72]][_t[60]][_t[61]](.1),this[_t[72]][_t[63]](1.1*this[_t[72]][_t[62]]()|0),this[_t[72]][_t[64]](),this[_t[72]][_t[65]](),this[_t[72]][_t[74]](!1),nt==_t[35]&&_(),n[_t[68]][_t[67]][_t[66]]&&this[_t[72]][_t[69]](!0),this[_t[72]][_t[75]](-167525),this[_t[70]](this[_t[72]]),this[_t[76]]=new yb,this[_t[70]](this[_t[76]]),i=La[_t[80]](K[_t[52]](_t[77],_t[57],null),K[_t[52]](_t[78],_t[79],null)),w!=_t[151]){for(var a=0,r=this[_t[39]][_t[9]];a<r;){if(e._=a++,s._=new O(0,1.6*n[_t[81]]),s._[_t[82]](i),s._[_t[86]][_t[85]](_t[83],this[_t[39]][e._]+_t[84],24),!S)return;if(s._[_t[86]][_t[85]](_t[87],this[_t[39]][e._]+_t[88],24),s._[_t[86]][_t[89]](_t[83]),!_t)return void d(!0,null,0);if(s._[_t[90]]=e._,s._[_t[65]](Ce[_t[91]]),this[_t[76]][_t[70]](s._),s._[_t[60]][_t[92]](),!0==H)return void(o=!0);if(n[_t[68]][_t[67]][_t[66]]&&s._[_t[69]](!0),!f)return;fe[_t[93]]?Ta[_t[97]](s._,{y:60+160*e._},1+.25*e._,{ease:Ra[_t[94]],onComplete:function(e){return function(t){fe[_t[95]]=!0,e._[_t[96]]()}}(t)}):s._[_t[61]](60+160*e._)}fe[_t[93]]=!1,n[_t[100]][_t[99]](this[_t[71]],null,60/n[_t[68]][_t[67]][_t[98]]*.6),(i=new ub(5,n[_t[81]]-18,0,fe[_t[101]]+(xb[_t[102]]?_t[103]+fe[_t[104]]+_t[105]:_t[1]),12))[_t[60]][_t[92]](),i[_t[109]](_t[106],16,-1,_t[107],Zc[_t[108]],-16777216),this[_t[70]](i),n[_t[68]][_t[67]][_t[110]]?Kb[_t[114]][_t[113]][_t[112]](qc[_t[111]],!0):Kb[_t[114]][_t[113]][_t[112]](qc[_t[115]](!0),!0),this[_t[96]](),da[_t[19]][_t[116]][_t[22]](this)}else L=0}else c=!1;else $=null}function c(t){var r,e={},s={},i={},a={},l={};if(e._=this,B(.8,n[_t[49]][_t[48]][_t[117]])&&(s._=n[_t[49]][_t[48]],s._[_t[119]](s._[_t[117]]+.5*n[_t[118]])),!this[_t[38]]){if(s._=n[_t[121]][_t[120]],!_t)return;if(null!=s._){switch(i._=s._[_t[122]],a._=11,l._=i._[_t[123]],i._=i._[_t[124]],a._){case-2:l._=l._[_t[125]](i._);break;case-1:if(!_t)return c(!0),void(Q=0);l._=!l._[_t[125]](i._);break;default:a._=l._[_t[127]][_t[126]](a._),l._=l._[_t[128]][a._],l._=null!=l._&&l._[_t[129]](i._)}if(l._&&(n[_t[49]][_t[89]](K[_t[49]](_t[130])),this[_t[96]](-1)),!d)return void A();switch(i._=s._[_t[122]],a._=12,l._=i._[_t[123]],!1===ht&&_(),i._=i._[_t[124]],a._){case-2:l._=l._[_t[125]](i._);break;case-1:l._=!l._[_t[125]](i._);break;default:if(0===h)return;a._=l._[_t[127]][_t[126]](a._),l._=l._[_t[128]][a._],l._=null!=l._&&l._[_t[129]](i._)}l._&&(n[_t[49]][_t[89]](K[_t[49]](_t[130])),this[_t[96]](1))}i._=n[_t[131]][_t[122]],i._[_t[133]][_t[132]](38,i._[_t[124]])&&(n[_t[49]][_t[89]](K[_t[49]](_t[130])),this[_t[96]](-1)),i._=n[_t[131]][_t[122]],i._[_t[133]][_t[132]](40,i._[_t[124]])&&(n[_t[49]][_t[89]](K[_t[49]](_t[130])),this[_t[96]](1)),Kb[_t[114]][_t[113]][_t[135]][_t[134]]()&&(s._=new Ci,n[_t[138]][_t[137]][_t[136]](s._)&&(n[_t[138]][_t[139]]=s._)),Kb[_t[114]][_t[113]][_t[140]][_t[134]]()&&(_t[42]==this[_t[39]][this[_t[44]]]?this[_t[142]](_t[141]):(this[_t[38]]=!0,n[_t[49]][_t[89]](K[_t[49]](_t[143])),n[_t[68]][_t[67]][_t[144]]&&we[_t[145]](this[_t[72]],1.1,.15,!1),this[_t[76]][_t[150]]((r=e,function(t){var e,s,i,a={};a._=t,r._[_t[44]]!=a._[_t[90]]?Ta[_t[97]](a._,{alpha:0},1.3,{ease:Ra[_t[146]],onComplete:(i=a,function(t){i._[_t[147]]()})}):n[_t[68]][_t[67]][_t[144]]?we[_t[145]](a._,1,.06,!1,!1,(s=r,function(t){s._[_t[148]]()})):(new Tc)[_t[149]](1,(e=r,function(t){_t||(tt(),lt=!0),e._[_t[148]]()}))}))))}da[_t[19]][_t[151]][_t[22]](this,t),this[_t[76]][_t[150]](function(t){t[_t[65]](Ce[_t[91]])})}function l(){var t={},e=_t[1];for(t._=1-Ka[_t[7]][_t[152]][_t[9]];B(1,t._);){var s=t._++;0,e+=Ka[_t[7]][_t[152]][_t[153]](-s)}var e=e+_t[154]+ma[_t[155]](Ka[_t[7]][_t[152]],5),i=s=_t[1],a=[_t[156],_t[157],_t[158],_t[159]],r=_t[1],l=[];for(t._=0;t._<a[_t[9]];){var o=a[t._];++t._,o==e?(l=[_t[160],_t[161],_t[162],_t[163]],s=_t[164],e=Y[_t[167]](e,_t[165],ma[_t[166]](Ka[_t[7]][_t[152]],2,5))):_t[164]!=s&&(s=_t[168])}for(t._=0;t._<l[_t[9]];)o=l[t._],++t._,o==e&&(i=_t[169],(a=(a=s)[_t[3]](_t[1]))[_t[170]](),a=a[_t[171]](_t[1]),r=_t[172]==a?this[_t[39]][this[_t[44]]]+_t[173]:_t[174]);switch(s+i){case _t[178]:switch(r){case _t[175]:if(t._=new vb,!_t)return;n[_t[138]][_t[137]][_t[136]](t._)&&(n[_t[138]][_t[139]]=t._);break;case _t[176]:if(!_t)return;t._=new Ad,n[_t[138]][_t[137]][_t[136]](t._)&&(n[_t[138]][_t[139]]=t._);break;case _t[177]:t._=new ge,n[_t[138]][_t[137]][_t[136]](t._)&&(n[_t[138]][_t[139]]=t._)}break;case _t[179]:if(!at)return J(),void(I=1);t._=new Ad,n[_t[138]][_t[137]][_t[136]](t._)&&(n[_t[138]][_t[139]]=t._);break;case _t[180]:t._=new Ad,n[_t[138]][_t[137]][_t[136]](t._)&&(n[_t[138]][_t[139]]=t._);break;case _t[181]:if(u===_t[53]&&L(null,1,!1,1,null),t._=new Ad,n[_t[138]][_t[137]][_t[136]](t._)&&(n[_t[138]][_t[139]]=t._),!_t)return;break;case _t[182]:t._=new Ad,n[_t[138]][_t[137]][_t[136]](t._)&&(n[_t[138]][_t[139]]=t._)}}function d(t){var e,n={},s={};n._=t,null==(t=n)._&&(t._=0),s._=this,fe[_t[95]]&&(this[_t[44]]+=n._,n=this[_t[44]],this[_t[76]][_t[9]]<=n&&(this[_t[44]]=0),B(0,this[_t[44]])&&(this[_t[44]]=this[_t[76]][_t[9]]-1)),this[_t[76]][_t[150]]((e=s,function(t){t[_t[86]][_t[89]](_t[83]),t[_t[90]]==e._[_t[44]]&&fe[_t[95]]&&(t[_t[86]][_t[89]](_t[87]),e._[_t[71]][_t[186]](t[_t[184]]()[_t[183]],t[_t[184]]()[_t[185]])),t[_t[64]]()}))}function f(){}function p(t){var e={};e._=t,df[_t[188]]=[],df[_t[189]]=[],df[_t[190]]=null,!1!=G&&(null!=e._&&a()[_t[19]][_t[23]][_t[22]](e._,_t[190])&&(df[_t[190]]=Z[_t[192]](e._,_t[190])),null==df[_t[190]]&&(df[_t[190]]=_t[193]),1!=s&&(Cc[_t[194]](on),Cc[_t[194]](pn),Cc[_t[194]](qn),Cc[_t[194]](rn),Cc[_t[194]](sn),e._=df[_t[190]]+_t[195],Ma[_t[197]][_t[21]][_t[196]]=e._,!1!=P&&(e._=df[_t[190]]+_t[198],_t?(Ma[_t[197]][_t[21]][_t[199]]=e._,e._=df[_t[190]]+_t[200],Ma[_t[197]][_t[21]][_t[201]]=e._,e._=df[_t[190]]+_t[202],Ma[_t[197]][_t[21]][_t[203]]=e._,e._=$c[_t[205]](_t[204],df[_t[190]]),e._=wc[_t[206]](e._),Ma[_t[208]](_t[207],e._),e._=Ma[_t[209]](_t[207]),null!=e._?df[_t[188]][_t[24]](e._):df[_t[189]][_t[24]](_t[207])):it(_t[227]))))}function m(t){if(null==t)return A?null:void 0;var e=new Dc;return e[_t[221]](t),e}function g(t){if(null==t)return null;var e=new Dc;return e[_t[223]](t),e}function b(t){return(new tn)[_t[232]](t)[_t[231]](function(t){return null!=t?wb[_t[228]](t):wb[_t[230]](_t[1])})}function S(t){var e={},n={},s={};if(e._=t,n._=v()[_t[238]][_t[237]](_t[236]),_t){if(n._[_t[241]](_t[239],_t[240]),s._=v()[_t[238]][_t[243]](_t[242]),n._[_t[244]](s._),s._=n._[_t[245]],s._[_t[246]]=_t[247],s._[_t[248]]=_t[249],_t)return s._[_t[250]]=_t[251],s._[_t[107]]=_t[251],s._[_t[252]]=_t[253],s._[_t[254]]=_t[255],s._[_t[81]]=_t[255],s._[_t[256]]=_t[257],s._[_t[258]]=_t[259],s._[_t[260]]=_t[259],s._[_t[261]]=_t[257],s._[_t[262]]=_t[263],s._[_t[264]]=e._,1==Q&&(C(),l=0),v()[_t[238]][_t[265]][_t[244]](n._),n._}else R=1}function x(){return null}function w(t){return-1}function R(t){return null}function W(t){return null}function F(t,e){return null}function y(t,e){return L||rt(),null}function N(t){null!=t&&(this[_t[212]]=t[_t[212]],this[_t[213]]=t[_t[213]],this[_t[81]]=t[_t[81]],this[_t[210]]=t[_t[210]],this[_t[214]]=t[_t[214]],this[_t[266]]=t[_t[266]],this[_t[215]]=t[_t[215]],this[_t[216]]=t[_t[216]],this[_t[217]]=t[_t[217]],this[_t[218]]=t[_t[218]],this[_t[222]]=t[_t[222]],this[_t[211]]=!0)}function U(t){ht&&(this[_t[222]]=null)}function Q(t){this[_t[222]]=t}function T(){1===et&&(s(_t[320],_t[28]),t=1),this[_t[211]]=!0}function P(t){var e={},n={},s={},i={},a={},r={},l={},o={},h={};e._=t,n._=this,s._=new Fe,this[_t[210]]=e._;var _,u,c,d,f,p,m,g,b,S,x,F,y,N,U,Q,t=0<=(T=Ka[_t[269]][_t[268]][_t[267]]())[_t[271]](_t[270])&&B(0,T[_t[271]](_t[272])),T=new Xb(_t[274],_t[275])[_t[273]](T);return!t&&!T&&v()[_t[238]][_t[276]]&&z(D=v()[_t[238]][_t[276]],D[_t[232]])?v()[_t[238]][_t[276]][_t[232]](_t[282]+e._+_t[283])[_t[231]](function(t){Q._[_t[277]](U._)},(F=e,y=U=n,N=Q=s,function(t){Hb[_t[281]](_t[278]+F._+_t[279],{fileName:_t[280],lineNumber:513,className:_t[224],methodName:_t[234]}),N._[_t[277]](y._)})):(i._=Dc[_t[235]](_t[283]+e._+_t[284]),a._=Dc[_t[235]](_t[283]+e._+_t[285]),r._=i._[_t[286]],l._=a._[_t[286]],o._=-1,h._=0,o._=v()[_t[290]]((_=h,u={},c=i,d=r,f=a,p=l,m={},g=o,b=e,S=n,x=s,function(){var t,e;_._+=1,_t||R(),t=f,e=p,u._=c._[_t[286]]!=d._||t._[_t[286]]!=e._,m._=3e3<=50*_._,(u._||m._)&&0!==k&&(v()[_t[287]](g._),c._[_t[289]][_t[288]](c._),f._[_t[289]][_t[288]](f._),f._=c._=null,m._&&Hb[_t[281]](_t[278]+b._+_t[279],{fileName:_t[280],lineNumber:548,className:_t[224],methodName:_t[234]}),x._[_t[277]](S._))}),50)),W===_t[91]?(it(),void(w=_t[229])):s._[_t[291]]}function V(t){}function M(){this[_t[212]]=880,this[_t[213]]=-120,this[_t[81]]=2e3,this[_t[214]]=15444,this[_t[215]]=-100,!(this[_t[216]]=50)===p?u=0:this[_t[217]]=1e3,this[_t[210]]=_t[293],_t?Dc[_t[22]](this):q(null)}function J(){if(!_t)return N(_t[236]),void(I=null);this[_t[212]]=1125,this[_t[213]]=-250,this[_t[81]]=1375,this[_t[214]]=262,this[_t[215]]=-143,this[_t[216]]=20,this[_t[217]]=1e3,this[_t[210]]=_t[295],Dc[_t[22]](this)}function I(){this[_t[212]]=2048,this[_t[213]]=-512,this[_t[81]]=2816,this[_t[214]]=172,this[_t[215]]=-640,o?(this[_t[216]]=256,this[_t[217]]=2048,_t||(U=1),this[_t[210]]=_t[298],Dc[_t[22]](this)):S=0}function C(){1==j&&(o=_t[111]),this[_t[212]]=968,this[_t[213]]=-251,this[_t[81]]=1219,this[_t[214]]=263,this[_t[215]]=-150,this[_t[216]]=50,this[_t[217]]=1e3,this[_t[210]]=_t[300],Dc[_t[22]](this)}function A(t){Dc[_t[22]](this,t)}function L(t){return Cc[_t[303]]}function G(t){var e=new Cc;return e[_t[221]](Ac[_t[304]](t)),e}function H(t){var e=new Cc;if(_t)return e[_t[223]](t),e}function j(t){return Dc[_t[227]](Ac[_t[304]](t))[_t[231]](function(t){var e=new Cc;return e[_t[305]](t),wb[_t[228]](e)})}function X(t){if(!0!=x)return Dc[_t[229]](t)[_t[231]](function(t){var e=new Cc;if(1!=et){if(e[_t[305]](t),_t)return wb[_t[228]](e);y()}})}function q(t){return Dc[_t[233]](t)[_t[231]](function(t){var e=new Cc;return e[_t[305]](t),wb[_t[228]](e)})}function $(t){null!=(t=null==za[_t[306]](t)?za[_t[308]](Jb[_t[307]](t,[]),Cc):za[_t[308]](t,Cc))&&(Cc[_t[303]][_t[24]](t),Cc[_t[309]][_t[21]][t[_t[210]]]=t)}function tt(t){this[_t[310]](t)}function et(){if(d)return this[_t[311]]}function nt(){return this[_t[210]]}function st(t){return this[_t[210]]=t}function it(){this[_t[305]](new un),Dc[_t[22]](this,void 0)}function at(){this[_t[305]](new vn),Dc[_t[22]](this,void 0)}function rt(){this[_t[305]](new wn),Dc[_t[22]](this,void 0)}function lt(){this[_t[305]](new xn),Dc[_t[22]](this,void 0)}function ot(){this[_t[305]](new yn),Dc[_t[22]](this,void 0)}function ht(t,e,n,s){var i={},a={},r={},l={};i._=t,a._=e,r._=n,l._=s,null==(s=l)._&&(s._=!1),null==(s=r)._&&(s._=1),null==(s=a)._&&(s._=0),null==(s=i)._&&(s._=0),this[_t[183]]=i._,this[_t[185]]=a._,this[_t[319]]=r._,ht&&(this[_t[320]]=l._)}var _t=o('3ns9lei#r1x,FRfrk#Fxaelfo8R%R.ibiRt5_R5uxatlef%reoeF!:lelsoet#x1aFtoaf1e6i8A9d3un2Rlm:6tcmzrRNFRt41Rb55i.n1ae5aucko:utRig2tFt1m25s662mst_%d|Rboi19Rn2pMs8n%dxaR.Mol4ultR_sf0klga2ggp.a:mnrRm46m3#RnmmeeoSi4l6g%4gur#da6iRt1h26g0t_.hxa3lgnll2yomnmfVR i61rngF_1e37I.aFe 2lr2sty R5e7y3f:3p5l%ceTor%s-1RrtR-sRsiyfa.:a2FHtl3iroOtu:Soi#!%d7gsThio40224%0tmhye5eeeaicetei#Fdrosspt%2rc3s62cy4e8ol2nepe%t42Fngn3Syjtfa_gaoRe3p#%_un%a4ea#dhea73a0tlo%#1%8sxseoapyym23s6_z-R6SLR2#tsu6:hS2704ehRmi%5o_5Rd.omtm14pF#%pf:egi2e3-"trs8iw6RRx.ieees2f2a52og14uR_!7T0rtt1icUiee1xeyRR2#siFj1outB1t9eb17ttuiR.a%TeFFe9!tony1%t9i5d#iegTtnlnutcase4Cr1t1ssaMh0aool-3ag%Ruu5,_Rve15e67astm3miKRi7s9RxdfcaiFhslar2i2geo%cRo-mR5%o1ep2 12up.vxdkaet-vRge82ef6e2dctp#p%oo.1sl#esF0#6toaa0Nepssl#smpsussts1et2FnR#s#4geRC2FFFhe#Ramenetttg3te.2hlyrisRh.ooeypa6R5r%20iRT21MaSR14n4#b%tfSg#h0cnFg2lR2t:Nli6646:Rfcofsen%ojre2n63F%#eRt4tilwsas#sXp63a5gFsdta9tod#exitI6sc_s1s1i6te_e1nxsR0Gea42mnuh:5fw%lr:Rr5iesmyT6g9al-:ld0mrsRxg3mra1spCtF9Rmmfgg23F#. i4%eaeps6gtn.gRn2fx3Rlm2Fanwe_11%sOBn mby1#lo2%soxTLitjmsdli2el1me11lfEo!R1osRtisybaindyoaRm7eFRht2R%6Ro1g#2yRto2#9sit21.l_i2%oeeoslasRnR3s5t:aaAfapEa.aersorF#65#leptfotRra19es52rc2R2t0p7ax_12ylomat4cyt3ni1uttFdw:acTmRt1nR11270Af891g:eaaFF2egPspaginf%kRBimcgs1RheaausR0e2xfaaa1a%#aea#%ataiktlr0ic,np%2ot425ltoaR%Rg2240g02yttc3_2Rg4%metypt43igiajsoagFm#gF_e34neR#h9e2tfeo4ode4x1cRFpt.1e_2oansi1a#e6%fd%i5a13Rhui7ca3#4ft4drotFaiasef22e:-_t2%sFR:2s48aEtF3%uxaooFRoys1%onoux5.Li.%iI3uotAlshS":xh2eFmt!!o4c4R2#59osy19-sAageei2pi3f_n131atg!Rti#l2#5eR2P9 %1etro_oF5itnxMky6fn!ts15tm#ycsf6odk2anixisdeeuf0gis4i62a1u#2fet0s#ec.hyth29sFR.x7eReeeosn11ssh%tlFoC!23aFdFe3.i27y_.7pF20!!rmtRo:IRulrFt42ul4%utdsgRR3hRo6.peuaRaRFn1t1Rj4d_1!y1e1%6eki1_r:_052fif#f#ax1sg:_1f6to7gu1.Fa2e%eof05iTi4:ssP:2_mMaseofepO62ea.a0ofegsn4eR14ulrmiIiu4teh-aey4rlmes4iy#5smR4seF.gh4fe7tsFo1s-/%st#?oo7e2aRFRe8r2t2g4larfwRpntuF1F2Re%04a3t.1%FeRiRnelFudn_1n2anpeia4a.ixtt%%_r2:ttty26waogac01oyg%mRiRR2lef1ttRfRRm4pieyompFxu1i%RFyEsu6_r"u2R4xd0e5ayteR%RsgRxs441gh%oas2oe:Re3h95anRReno:Rdl.2set:i4a yaFssGadrrFincVca!R/a2b1aDgN6meste25eddnr%Rn6%%sa#51ir43r%oittFe.uRie8n 4fe4t/aaos6nrmg#ptoe7F%a2ius3fuotFselaptfi1oRgh%tut#usF2e1hRr1o%%3n0u1hRt1seRtdthF8/_e1e%1yef3i arsteRe3ek.uso#awd5lFt{Dnyeiro3a4s2ea1scne"tia_6gi2sehf#ts4R-ensd(tna.Ri#1i62gf12ctgnugsouR.4i16it3etidcopt0cRtE:N53Eg01iR26.t3ate1.illnu:5osR:1dbfdns6F5k%g2FFRicot6r:at6i1#gs3424.1slilR72Rtt4R_ine%1e78i-t1mnuaec4121dmta--o2u9entelyprgmlRe%seuR126nfogtF:2Ra.is49a%a:d2fg6:1Ftxsyrtr.e,#R%i .s2lFRna32:tRe1seai4R49.xo12tIy-_:yss4tg8F27%a#alo2lfei9rsa:1lhotRxy8211ilgsnhg-p1p%Ra#.RsRokag2RRi2Rtjaa GRao5%x06hya02iysiRtgRtdgR123edna2ttod%ugoitBa74fel %l22yRoi2d#d:oyfbaFs_ornF0slpn:#r44.t31nR#8t#oRhlgw94op5n_3Rsn_e3FnR0airp3e63eFRRRRg4ls1x25hyspFiaaroFtrf%0pian5tsnsRs%o8./4/31d45SinRoR7tiidoe131sefxt18FdgtaRxl15f2i1Rp.on#2b2sd%RF7cn tes1itRP3Rr1y5g.R#e%moe3Repp3Reys1FapR5go#os1_a-Rs1Rhf2Ra%e4_ap2aac#eR4R4:ef4b6g3#4sF4R:516mtt3o80ygi2nstats_di3d_yp:12tareR1tof-Resfo3mRRcka6oa4xtsv-aFe#_RR1xtetyFl1stgoi_4tint#setysgi21sseicse%_se4Fod##soco3d5Euy%tn.mn_p.5#2:e9sy3jRReR.uRpt#aRneRoy5e1oRkRRsE1l54:csseRslRaetR#aaSl!d26rm4o2ep-itS#42pgt0Reiof,p9ycgthvoRars#162t3n6lt_1tsa2t1a2at7g1R0ys%P912u13intsdpcnl1%d2atad-02gtlFa%_rRFoF%an#Rf151a#4aeso2Rl14Rl628sm2pLg0R8Ralisa0yRdsIod_oels5gd1sy2duod_nxm2gfl0camtiRy0-#t.skEorg_w90niDRos1Ry:22reO2RryfyitgrOsf6sfeRy_i:%iosn3_4f4dn_a2xa3fF8opittt.6gs s1n23tetP3rd%r1R46mRiR0tss20lyc_ai2#iatn%Fpoaa%Riisme_g-slsLR5#.ixR12Rnryo9g4e2l2dtpRiaRe99a6es.Rsk66.ii#2x42eibexyt10t.L2r6ui#l4FR31fot.So#f3hFRwy%g9s2s0o5g_2sus2m#2#cdfspeviegye4lo_iF%3sdsl2g7aaoFrkasuyd3%y5siRat1:smRtRRt_5EaRn2AieuLfstiaxRRE9ia3vR2Rtn25R6tseset4f_as#Aes##6FtiRpoyE1p_fem16esMrs2Fefn2oe1ehR2eeiRR5aac:iO%pae#lidR!%sceiRg0ga52d3eR4u59eoaisiipleit#anm#1scjeyy10ifpsxoyR.rtoey2mX0m093Rsc4t5%hn43eso4pE4FtaIg0R7lOogaeta#1ad2#NRN1c_2Ei2p%ateg2Rn45RimgvRsadaegcR41#s476aeo2e1r3E#simm2tossRee:5f4fP6ie#a2RyacSt43ighR_silre6i17g1jLFl02egu8tg8t4Rf05.296n5.oeFe_4a10selstsdFhaois142f_R_Rmor2ayanetdMtreisf#y%nl1ie1nDtaci1t13a nte%e8s4R:Rr7e_:RidFiat4#yFgRaesSaaR_apn2fe46riMguRfnj_2etdRRFaM2uoR9tReaRc1k6tedD0m4m:5#fof0e1ectshmR0R0#4.r-yofial5y2R3i9s-is682rl3%lx%i2ig#sIai2RTaFR2lneoory5taag23at#iro3FoR.3ylpmxfwed514Fm23ta31R3#p.fe1-S6f:ems_ni:i5sh5o0o4R0mn3yxa64glR0itn%RsNeF1g7Re0i5i3F#enKte1umo3GsR1_e:7oe-#o4RlMmaRrmy%sRhalRf3R8F:t1iRRu2eR9R01TrRt16.nmtitsetln71-3ho1otDAmmm4r6rp3u2tRosP3ggrsgw.B-p3Far-C5nRtn1iRRF.5esgt#md03#v0jfsi:RR1Rgbhga13aFa4ScpRm1h1hkaiotst2i3fh5F4dg2Roas3todnRR#2rua%ts4o1srd0tn%1:3RetFl5dpa1_zFe2o6_2foc026laseegoRsyr7nRiFc#sstihd4ga#FO_rFsPtetf24lrR:#niwoue6#2u4dlxi .1p2#nggnyst2Sg.8e%a1cRt#-lR80%.2oeiK5a:p4yiRsd3F40tF2l1n%smu25Ent852utf_1%Rn21e8C-1gdi:rl.5_pRs0sR0merp9tnsywi6gRee#CRs11ORyo4pn2s:1_1y4sn_%kpcFptla.o2e-1uRleims]2xp4ega_1nsi2#ilRRt.nRcSR_o9.2rpyei2a%0RFtuiase2tRftn2L2o2st3wta#6meieiF7s11ats1bk4Ra0pyg2iaRRe15R3sniRttgee21c5dSas1f\'e-lhdRdee4mrneer2e%#o.nFpcVem72u.1R5oe#cc%ugy#ipmR4RSlts"ksa.yrwtdB1RmaR#hise%spFn0-R6.g6hF2oa9tcgsoeektluLxioRt0gFjassRmsaFmmi2et_2213FmRtog4R%o.F1l2jRs:1wbs2smdR4R#a1wota515Rp2p_ss5fmysn3ou4#rtsr0ltm1gR_51Eu_UI_rs17sRpR4gRl4tnid4ioatRl4.4t627n2otn#ca_dAfy4g_FFmaFesW2viniiDylppIs:n431f0xRR1o0l5mlR5mE32.aR5eri2t%2sicIc5s#4r2an0mp##2L.mRg4131lan9e4icony#eg"m3.gus3%iiF4rtu7mg47RRtx523a1rtRlelR9mseaFR3t-%et-sl%im#2iM11egs554L5cRR4t2Fs_4tanhUI.cR19srtea##Rmso2i4npfnitex#asr2p2eRg204tRFasoeM6Ime%_tae3RibbFa3826_oh_msonn1u63s_.8Mi2eg1!n1l.13du54st4RR6tRgn02o%:%I#4Bsn1ty2sFg201roeFaF5tRF1.d1%fFosss1g.x53Rm#4Rd4:/1#fa5gtRs4ooipyy.sa3sro14dRs%aNf_t2-nmRfRaag-tn9Fptpnsl2aa01o60o2tg2eesrf21ttFd6:3smoReonRu3fRfe7secdtetmgi1TR%5it1t1xetty24s59r1eRR5957Rgx3Fy3yai1cRes:y4dai2FFl2oN102iaR1i12%rRc_nTfo2niFFtnRRi41pl7sl:%SaRl-60ts.rdxeto1:ik1Ri1t%oormenaeyc2dlct%eaoltms2no40a1eog4-a.e_RrnxFrRg441R%2_Rrgngala4btael-1a:4RisRags to2s8fox3#2st#cof-bsk2sstxb.pnd4ilRi3g6sr-iRu5fne#e#etlFy62imnR53yemaFg%i50tilo:ic52no324229!lma20genrnfdRR8a19RRs93k_e.uRseapffgaaca#3etsal274FaaeNRg61n#5je:2atigvnusf6lFomse_f4g.Rxa4R53m-R#enthmFoFsaeu#Fny1a1n36#e%tRgdnsgrenf9e0it0-Ri#atdmtngGRm%3id_i6e45tRo#2sm6ny770:92#5a0yi4Rls#29RgasR__/w3onRE#F1flss5etntFdoReu-1yn1nRn1siATm041#i0 9%Splye_eTitr%esy2Reaa25ym%iitcmgs1%agicol21leagic.u63i#Rot35u_2F94lA_gia.11gegt3f#r2f35s6#0anck4paon:RRg_hsk22i6o2R-no9e%gigi9nr6n3e4x12e_sR1pg5Rprsf:ousoF4_a#drsai22l1:#iF13ee1F#R1sRFsR#T1Rp1414Sr6uF1Rao-o5F62fom122-y310fr3rasF1llo0:umtv8e12esR2f1RsFsdnN#%Uc.%#n42e8RagslRA%2gc4Rhoollx0cRk:Rfs23sd4214s6icR11bFoioo41RaRitenmRaaRptgRah1p0esRsoFTUg16Rko.a%Ro2_62ilReg-kt2ag6N1ansbxFdsd-#nt5asomaei#Lmn_iam112R1T4n.5.%tftt.Ro0f_if1as#lEoRsFjmt%hFsLlk3rOem.lg_Rmfr2_fmeistoF2Re#l2R67mRib%:Rtfs1dy6g2Fgimi83o1oos:hTFial6en#27Fiaoeagp5#gLoteBaR4te1tu3F9CltxiR30laaR0sRTaeFol.sai:ss43Rei3FDiiPl4E%u:i_2#byg_he3,gRasut#ngFRiF5#:aiat6enmRtiRRt#460018eSm_xt2:sfFiei2fd#neFspioi4%gneiKeoSlnac4##5meRlot2fRRofleass3xFea15imeFl##1n5nogouyFio3.pSot#2hR8o2:tMRa4or:76l0t2212rsR:t9saE2_1V9R42y%pifRol s%i%y6n0 Rml 22f1fe5c%a%m52ta4iao%85h8oisoe:i_2.t#2lg5i5%16%dfRF116ngUi3FcRsFtRe_:.78o73o2b4#Rene%RRsyi.s_5teihRxMp#iaozOaR.G1lm%%G6s#igs0ae2hc%gmscio0yR26s%R2R35R1pbetife2rfanfe1tt%oy53kgn2ngn6tadr_3ncs1p%a14entm4a51R5lRiR29n5Re2RgsM4R#6S2yB.drsps3aigsvoe14ts11#0eRstot4sD1in4:sRaaj6iagoe2R3F4#nftF3gfOarsgii2#efe15yrl.s1sa5oARoenmRxl2t30 eF-44:i:92sei2iiat2n1gt%el1p#2Fi#_hR.hc0cduus.oeptR4oT1i2sR-rioRa7rt5oRt0lai:oms42s:#osiea%Ri3R1rn4Xt2dnd_oesxty7iR4R6tng9 td%.00sfs.foi1iotoaFcoggl3f62tR13lntFls2tR18s7i#pRniotgsgrghp#2Rn0-Re_ta:12RP2:sss2ms 0s321uFei52#ni_a5RjaRR28nexpgR1#%t6eistppss1megma2odt-16tu3dlunel2ees08atRcen a22*Ntesgiy2o5tsl4#ng1iFesao82nf2oSom%te2gys1rh273%344RgRotRW7abi70i"F13dnta-eb2heag6g#rN4i1t6.R00ni4123iss1m%n5ss%R_FeiR3yg62sa1etoF4rt.mg5a1R#f#o:m7iongFFg1g6g4tRyI2is_o2sMRon2Rd-:4ygeRdanlytfa#2Ri1lrFu_8la!#RRm_2iR31_2ssRPn5S6ggRc6#9d2sePy2g#ddF-sRgFsr1gs7ya_yt5g%e1-rit1oRRt3g/84%y_goeTy1o98sso%231i12e-#ngn1am1tdidnooud1Fi.tes014nRieirg32Ro44sn5ilxtRog2nt%R54ot4:6!2115%Rf_slge2:TycemtRnr1peKCS%lRtpoganaRa16R3w2e4:lp#Rrm2t1ifoe#Refe.R#sgFgmDoeais2fseRR2R8Ri/F0rwsekiei1_4lRFtfiR5sts2ind0g6egRtRiROrtdmeesRrt1ys%trsy1on2udb0meistrkFupFR4yioa5pcR303tls2e.its1R6lgo#jS4_ha2np0u#aFrFR2dp1#R2a.gRl1Feny1g#iie6kgoRoiouRRfgiRgRe1c#ae:R3_moR:nm1:1Fnst-ht%F1mao6aR12#sin:n69ess11F-23I/y3mr12ptd64y1apd-Rp9io5dhR6ce3RM.4g3:#:sxim%igroRo/tso3_ede6s#6okRR:0626n.921-77aRe_32o40n4R4io2e2ci25#see42a3tFi7nkRpbRtn0ut:Iwft-p2y6ygFinA5i6#RsR4392R9so6yglityty2R27-v-i32sfm0mnnl1olF22ll1mt#02Rm:bptaRmaR1RFR#i06.p%g#0aReeRajtrs#2RistS_C3d7RodaF8SRf#opRRe6:1as2otrtmLys3noi12tR:ep%thti1tss628a02sgop2sansi02cyh..F2_1n5smib%ssnrReRl021Ref9i12ps4loF7k21%imgRR9enaiar9R2hgia6tFR51Frsaal0Rc0nF2e2ciee#2aeoIu#FsR1txRo4 22mfmaud%iod2lsat2goR1ifV2RRui00ls-20to5nAR8ilages412RsRsp53Rs_teRroltFm6gRc-gz9lRnag3yiLt.sRFypttRd1ut5bour14s92oioRFdd:s25s2ilt7%Fd22R1llo5cSwi6aR2t1eF6l#yet0%#omRc19o#3n0iFFrtrmtsD#32e3ie#mkFo2FiO#-ioR.ilea7raIE8ndsd1egsetstriE#%ig,n2hi0y22mRhI3r2tloF2is%%o%iwnAbcn0ti3elilts2RkB1a3RntFRy01FF#gooc6si8Ry5Rdeg12#%x3_l#iRaesr%R"lbo.tcyemaRt3#e2aRFRoRigR!1x6uk#laRh1sgF42t2k#2MB1f0dnty1f49nF%32echRwe1o6e3:i212snibRlRgaFeRgi6p1RRnrvyRRgleyRNfR46aFoasgs##:uonofpn5lb.2soR.t%rRuR3s3RSReeRnc#6t#44dhtxSaaayto21e/yssOo1ity#obeln1fmalRtxr66_ae513i2rg_ri%1RoeRh0Ra#x41atg1aRRfR:e1as#d0oott_i5oF%nsute-Rel/211nyyttt06tinpayaelRntntFwx0462c4gsRl2slgR61ei7redFRR#Fmnd_9sa.0aaRgoFHgagso:naMgRx99 7954Ft#1uFa1.1cg_#soi#hx0S0af1Fep6m1iRskP.2ii#Fp5sgret#0R:ErmaM#eengi51n:gGp16RiSmil6neFRngn1fRiCeseaetrdFnire%p203iilh0af2f6_r59_iutfT%28ai11aFhFTyp2%x:Ri1aetm9%:txA1g01t1a9Kt%p_foogRFec#4%Fanna16eoaxd12isoistmdam.p:mntoEpgc#Rmoeofaa22l_ie3lemesG3d"Faietobf.t0eR6n:itoaaRy2a6eRRRngFf#nnt#mescr#sjst%8s5u4p.oeR24o6f4F2#12fRseReRf:F4s53n32cenFdc61o13l4A%fdfToau3%9l#Hone2amgxyant4frtaRt:%_sfFtlosnRixasgiolfaeuc%at1s1Fal%2t3Ddaafxd269pho6pgisa#Fy_tReg5ggtR4F6KntetvRaf3tfs512oiioasRRltR4mSststuRSRuts5fad6Nge4RP2S1eRxR2liRowgofri31/hxncBtR-eI!2etstyCE2Ftto9F51F24n%%fmixFRS2t:ooCrRs6figxsyo3gfgt39t5tN5ig9go6R1F97Ro:ynfdRFx%Ei#RR#s2nfs2R3l14Rsb2Rmuap130nprdB28af0-%eioPRRlmtnRs#n%Fywi-o2FyR"sRa2g1Rh4os.4(%an30tc61RggFoauRtRR2ogehFR#F1R.t#anrF0_o9#2g3Rg9t61_f31%.xlo02R asG053oo1tcls7y3zwc_geai9R_.lsssR2ds%oy_1o5eatc2g_it2at%#i%RkthstfR:n%eec2#2o21ox9_f5R1.3RtRoRcm1.ie272s%3T1iz.436lnuss_AkiiTosolx1e.Ffi3t1.mo1tto6o14GpeflFsf4:f1.la0:1n1#n3hos7RdRyuat.4ram3fo1thtrot5RpRsco2xelfe051r-gesRFP3dke1tRbtsoRlp3no2#s0u9n:Rnn3elra2h6_4tFkyR.4i01te0%u22ih2ge8_1/aRtaytF#oi2%uueno5Fhxep1282t#lR0s5R2oyR4pLFpSoFipnst0sa1o%%6l1-eetRtoy1Ftgg#e%2io1d6wmdxtshior26RRaR12tR9oaRdnFh2Ft#3xsR#eS4t6iteetm0#te%gtge#2tb.ns4gR#1gR8omi3fi%1rRcFR#R3ta-soe#45lalElt_jo21gl i#O-1401oeRswR%2gyu%2oav%es3es#t4n.-3MR2Rn4:R3Ra1RaghfF._t4%50yi6:sinoer3mgEFnmmDaFm##5aF:Ro21ofmlsr\'j#Elgnw_63frRR6R6lahe3R2iFuNtg03FR1RasRtcsA2gni5d5ttRNsxT2R17s2U0l1BiR#1i%#am%2#hR2D#t_nRug%ssrOa.5radR3_3-wea6oleafmogP40ER2165#s9dxFttyx2pFusuuyFgag#R55bu4pkr._Fcot5a#e1lgRFi423-4R.)c9Rm-3ee#0u%2%1iy5ildF0Rss2#lR%:l1gd#6R5F42gn9tmu1_m4s1RrfFt6g4atct7t3:tFi841n0RiR-6aRpi10sS2kw_10o3ft22eLsfR1etiR#ger:#d%s521s22SoerR#ng5Risu66-e4fynR14g4f16gi0yy6lGrL1httwwFs_sR7oR2#ei021et8Rgt31y4ki5mxspRg#ii92l#08p6RRe3k#lR3ot4ptoFifliR61losFilscos-a6:1s0asgny2iiaRF-2s7eRsp2fR2ry06pcs#4a5ei3r_1PaR%%tsaa2Fotigin1_%%5suF14lgaisim0c1rlshR0mm.a#FR7226catR!e2_Ra#2RR.4aRp246icctxhl#4:eyRmieesuRn1e.:6ye2aa2t.olf.noe%6nngR#ilFsR3g2s fg-agl2shR6#9p3Ftti1egsG# 82ixeost28e2e:Rif1RFf0lo#oei2R#c3lnrRfiaosl.Rt9%5iiR#4FimR242ootnFiFA5a:raR422elt6F2oiDih_3n3#sFgglta9igls0nne%93n1%2x5ozRmR5i5wdemi6xR470%14x#T11ue_1%Rm1e1g#Rl84a4y-RinRgpt1ek2ie92#stgsitwws090enRtFuefRntgor0tt1t%tao1t3laenu%xn0FR%r32%3521n2.fhe_%4gc3hbe8k1NLrnm2ot#ea24/i_9eieRRyec0olguitsr#tsr1tt9u90s4t:p:sm2ofaF:htacienylo3O#ngg%gM94gRee4c5%ep0Rd63o22ef.2smU2yluNeg2la3a6gft.n#2im-1i%tmclwgua.ptR:tt24_1FRE%on#ie1ntis%1naF6h7:exase1fFFmmiRlFNRx3gyem2lf34tu4hsypcRs22eFxF3a%x1r5i.0ne%4hyLi4tatbiRRt.R2tu9txyl%B6o1NFiin#%3F3tn1s_m:itdpr5R26R30_a24497F8Eta11#2R2sfctSR_a9Fft2ocegr#e18Fr152s2h#2x%:2l3xmi5#tpnepP%_u#Rdepi4R_0sFR3R20Rtna2tReoaee4lRRensxtf.24#n3tir3os Itnei3mputRd31a9R5e%R%sRh.51e_RmRmhi9#:Lk1tF342v6ai el1u9p122ip##1AR2fxih_8-%r21tR2n247ggontRo1t23Retil2iRnR%elFxRlGRsayer2iomuopF.sb4n4:dysRm7-bfodoR4l8i5xo%rFd31f3og#uacR%ac4:i!p-g2U:te!FltgAFl2e1RF#mih12Fegy.5n25m5Fy133R43Rtf11g3uss2abilt1:25Rioe.oFeltxa0%us50nFiaaR1isF4ea7tt%.gne1aisilcRioli0R55R3et2dt4YRaogmiieF_s2%tlna1e tannlRi91dRk81ot73RpiF4sbsd0-luoi1me0*3304exb-.60o2R1RsleoqofSiRvc11aiRif5fls%s#!lRa1tFain!%_aent#:gggea#e.54R4SF4i2.s1aRR4h b1ggifssieeF1#3ftnxpe-_n#i0ege%vc%Fa21nh#ts6efxsB2oryre5bdaoRR17itf#eeRlRr5atp524Rlxe1esnetnth1#any022xj0FuR2irFr4t#ymNleRLe0s_0ini8 Rm1s1p38docspmooSa3t3iEsr"F".R2tng372oytxlt"vR61%oni:m:5lg 3atar1RR#:[#c"0_5mmtaatce"R:dc52_p86aeFf92nletRpe.0%dFag18tiryuFsiFle%sF2agout2ne7s_tgtg_mRegoE6%t1Endeaft8 dscxe0:ea6l1wh26p%R4tkSeulsff.6RigisFEsn.a6R:u1%tFIb6ig%eRta_d%ttmltse5h#2eL4,ouR/%oFRnt4_p6RR954Ete#0sws1F:sytg1Ftn%q_2rvoFlte2ei2eRepxl1non6%R9i1pynFcsetuRal#4-le14del4aR29rxot2fitsve%1noi_Ri7Fx5mimytrgrngFVp#ey%coitgisRFeo%oe-4p#1l2oeiea.R2RmEsa_tee/tmy5oxERFs.po6follohatRoalbFlicdnRote4:%2.Ro-/u2OupB_ReetsoRx20C8ga ne5l3dh1sucA2am-tfxR25aeDah4e#a2eiF1alltFn2d5sela2eSl2.#RRP6it1sndRbdal6r#2godii4%u9A4t1onc21!2a31cgu6a%B01R#u5oaegissegbha%.u8oolR#eeobe50%4e1R162e:oieRr_odgstyoeees0s224ns#rRa%r2wo7amfl1#bRosesr1%3FHetbyC01fifxo%Aeoa521Rnim0uh5eag3dae4416seeaRx.0nh4i24R1matc042RF.9nn:oPjdtieaR)2dtiil2l6far1es611V:rdtcoalni-RvRfiis_phese52oR1dstg4Rlo6R3R#RR66nRrRRxetomst#.anoV1sR7fe1t3:9%a2f p9\'ce,%wty5nRSr1ppf4R"iesaFsreg2RWaeaf%1Fhd1taagf7apmrmion1CaiRf%riFNepdguesR2t}2meFimBd2hr1r2R#4Anfd%%oa4s#oiof-ntSrama0n2afeRsorc1s4ee0R1-2oe5Ar6Tkg7tRt73sRe:%tDhn_fy2aE##i4isRyon10saf.o5Ril_#6c%eiSglFEoilp_R14-_t2t0etlmW%_wtlRu#aeR:rtdepctydR1x:3.\'5E91_el2.i1_,gpRr1Tok1a02s4otxfe53k-#4soM2_12tt esbwanwpd3_S#11n_6S3ixeiRro0Rsg:tgr%3u#et5tuntl511##r751g3pa1nl.a%xt2Bs4_tFdsme4ptr6nd-5bl_%n9g2RR2md202eitorlisRataaFF.chaRs6Rerm#yt1t:igRR-2Rys4n%tcFin:#Npai6%|_R/2tg_#tRo2m21opl51si#s_ise3iaRN#costecR42-ttls:ieRytfoetN3tm%2seeSReR2r1or1raR-ssOessft22fmm_gel5e3e-1opesa#aRmfFmhnf3_tAeaoTgs_23o1Lest-ts1sn#5geskssBgl21sRi_LF9RRT5aalymltm64sliRl2%6nl#Fi2r1tgf2tt8ee9TttOiurFSRFBl2teR4m5p4aF8Fa5F.roF_3ffgn_Rl_tRyRiulNRU2_3.r23h4-oaiot54ete#%grk_sR2%sRol-MtiI%0eR#R3tse2LsoSe#FFan',7086163);if(null===c)return L(),ot=_t[63];if(!_t)return u(!0,1,!0,null,!1),t=null;if(A||T(),_t||(U=null),_t||_(!1),1!=d)if(_t||(s=!0),0!==f){if(_t||(i(null,0),A=1),1!=p&&!1!==t)if(h(_t[0],0,_t[1]),_t){if(hr=t,(r[_t[17]]=hr)[_t[18]]=_t[17],hr[_t[19]]={callback:null,logId:null,length:null,numRemaining:null,unfired:null,fired:null,add:_,log:s,getFired:e,getUnfired:k,__class__:hr},fe=u,(r[_t[45]]=fe)[_t[18]]=_t[45],1!==M&&(fe[_t[46]]=da,fe[_t[19]]=E(da[_t[19]],{curSelected:null,menuItems:null,optionShit:null,newGaming:null,newGaming2:null,magenta:null,camFollow:null,create:i,selectedSomethin:null,update:c,goToState:l,changeItem:d,__class__:fe}),df=f,(r[_t[187]]=df)[_t[18]]=_t[187],df[_t[188]]=null,df[_t[189]]=null,df[_t[190]]=null,df[_t[191]]=p,Dc=function(t){null!=t&&(this[_t[210]]=t),this[_t[211]]||(null==this[_t[212]]&&(this[_t[212]]=0),null==this[_t[213]]&&(this[_t[213]]=0),null==this[_t[81]]&&(this[_t[81]]=0),null==this[_t[214]]&&(this[_t[214]]=0),null==this[_t[215]]&&(this[_t[215]]=0),null==this[_t[216]]&&(this[_t[216]]=0),null==this[_t[217]]&&(this[_t[217]]=0),null!=this[_t[218]]?Ma[_t[219]](this[_t[218]])&&this[_t[221]](Ma[_t[220]](this[_t[218]])):null!=this[_t[222]]&&this[_t[223]](this[_t[222]]))},(r[_t[224]]=Dc)[_t[18]]=_t[224],Dc[_t[225]]=m,Dc[_t[226]]=g,!1!==at&&(Dc[_t[227]]=function(t){return wb[_t[228]](Dc[_t[225]](t))},I&&(Dc[_t[229]]=b,_t?Dc[_t[233]]=function(t){return(new Dc)[_t[234]](t)}:i=0,Dc[_t[235]]=S,Dc[_t[19]]={ascender:null,descender:null,height:null,name:null,numGlyphs:null,src:null,underlinePosition:null,underlineThickness:null,unitsPerEM:null,__fontID:null,__fontPath:null,__init:null,decompose:x,getGlyph:w,getGlyphs:R,getGlyphMetrics:W,renderGlyph:F,renderGlyphs:y,__copyFrom:N,__fromBytes:U,__fromFile:Q,__initializeSource:T,__loadFromName:P,__setSize:V,__class__:Dc},un=ia[_t[292]]=M,(r[_t[292]]=un)[_t[18]]=_t[292],un[_t[46]]=Dc,un[_t[19]]=E(Dc[_t[19]],{__class__:un}),vn=ia[_t[294]]=J,(r[_t[294]]=vn)[_t[18]]=_t[294],vn[_t[46]]=Dc,vn[_t[19]]=E(Dc[_t[19]],{__class__:vn}),wn=ia[_t[296]]=function(){this[_t[212]]=1800,this[_t[213]]=0,this[_t[81]]=2e3,this[_t[214]]=204,this[_t[215]]=-292,this[_t[216]]=150,_t?this[_t[217]]=2048:u=_t[237],this[_t[210]]=_t[106],Dc[_t[22]](this)},(r[_t[296]]=wn)[_t[18]]=_t[296],wn[_t[46]]=Dc,wn[_t[19]]=E(Dc[_t[19]],{__class__:wn}),xn=ia[_t[297]]=I,(r[_t[297]]=xn)[_t[18]]=_t[297],w||(u(),ht=1),xn[_t[46]]=Dc,xn[_t[19]]=E(Dc[_t[19]],{__class__:xn}),yn=ia[_t[299]]=C,(r[_t[299]]=yn)[_t[18]]=_t[299],yn[_t[46]]=Dc,_t&&(yn[_t[19]]=E(Dc[_t[19]],{__class__:yn}),Cc=A,r[_t[301]]=Cc,L||X(!0),Cc[_t[18]]=_t[301],Cc[_t[302]]=L,Cc[_t[225]]=G,Cc[_t[226]]=H,Cc[_t[227]]=j,Cc[_t[229]]=X,Cc[_t[233]]=q,w&&(Cc[_t[194]]=$,Cc[_t[46]]=Dc,Cc[_t[19]]=E(Dc[_t[19]],{fontStyle:null,fontType:null,__initialized:null,__fromLimeFont:tt,__initialize:et,get_fontName:nt,set_fontName:st,__class__:Cc,__properties__:{set_fontName:_t[312],get_fontName:_t[313]}}),on=ia[_t[314]]=it,(r[_t[314]]=on)[_t[18]]=_t[314],on[_t[46]]=Cc,on[_t[19]]=E(Cc[_t[19]],{__class__:on}),pn=ia[_t[315]]=at,(r[_t[315]]=pn)[_t[18]]=_t[315],pn[_t[46]]=Cc,pn[_t[19]]=E(Cc[_t[19]],{__class__:pn}),qn=ia[_t[316]]=rt,(r[_t[316]]=qn)[_t[18]]=_t[316],0!==t)))))){if(qn[_t[46]]=Cc,qn[_t[19]]=E(Cc[_t[19]],{__class__:qn}),rn=ia[_t[317]]=lt,(r[_t[317]]=rn)[_t[18]]=_t[317],rn[_t[46]]=Cc,rn[_t[19]]=E(Cc[_t[19]],{__class__:rn}),sn=ia[_t[318]]=ot,1===s)return nt(),o=!0;(r[_t[318]]=sn)[_t[18]]=_t[318],sn[_t[46]]=Cc,sn[_t[19]]=E(Cc[_t[19]],{__class__:sn}),li=ht,(r[_t[321]]=li)[_t[18]]=_t[321],li[_t[19]]={x:null,y:null,scale:null,flipped:null,__class__:li}}}else w=!1}else U=1}();var vj=function(t,e,s,i){this.character="",this.flipped=this.goesLeftNRight=this.danceLeft=!1,O.call(this,t,e),this.flipped=i,n.save.data.antialiasing&&this.set_antialiasing(!0),this.set_frames(La.fromSparrow(K.getPath("images/campaign_menu_UI_characters.png","IMAGE",null),K.getPath("images/campaign_menu_UI_characters.xml","TEXT",null))),this.animation.addByPrefix("bf","BF idle dance white",24,!1),this.animation.addByPrefix("bfConfirm","BF HEY!!",24,!1),this.animation.addByIndices("gf-left","GF Dancing Beat WHITE",[30,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],"",24,!1),this.animation.addByIndices("gf-right","GF Dancing Beat WHITE",[15,16,17,18,19,20,21,22,23,24,25,26,27,28,29],"",24,!1),this.animation.addByPrefix("dad","Dad idle dance BLACK LINE",24,!1),this.animation.addByIndices("spooky-left","spooky dance idle BLACK LINES",[0,2,6],"",12,!1),this.animation.addByIndices("spooky-right","spooky dance idle BLACK LINES",[8,10,12,14],"",12,!1),this.animation.addByPrefix("pico","Pico Idle Dance",24,!1),this.animation.addByPrefix("mom","Mom Idle BLACK LINES",24,!1),this.animation.addByPrefix("parents-christmas","Parent Christmas Idle",24,!1),this.animation.addByPrefix("senpai","SENPAI idle Black Lines",24,!1),this.setGraphicSize(this.get_width()*s|0),this.updateHitbox()};r.MenuCharacter=vj,vj.__name__="MenuCharacter",vj.__super__=O,vj.prototype=E(O.prototype,{flipped:null,goesLeftNRight:null,danceLeft:null,character:null,setCharacter:function(t){var e=t==this.character;""==(this.character=t)?this.set_visible(!1):(this.set_visible(!0),e||this.bopHead(!0),t=vj.settings.h[t],this.offset.set(t.x,t.y),this.setGraphicSize(this.get_width()*t.scale|0),this.set_flipX(t.flipped!=this.flipped))},bopHead:function(t){if(null==t&&(t=!1),"gf"==this.character||"spooky"==this.character)(this.danceLeft=!this.danceLeft)?this.animation.play(this.character+"-left",!0):this.animation.play(this.character+"-right",!0);else{if("bfConfirm"==this.animation.get_name())return;this.animation.play(this.character,!0)}t&&this.animation.finish()},__class__:vj});var zn=function(t,e,s){null==s&&(s=0),this.fakeFramerate=Math.round(1/n.elapsed/10),this.isFlashing=!1,this.targetY=this.flashingInt=0,lb.call(this,t,e),this.week=(new O).loadGraphic(K.getPath("images/storymenu/week"+s+".png","IMAGE",null)),this.add(this.week)};r.MenuItem=zn,zn.__name__="MenuItem",zn.__super__=lb,zn.prototype=E(lb.prototype,{targetY:null,week:null,flashingInt:null,isFlashing:null,startFlashing:function(){this.isFlashing=!0},fakeFramerate:null,update:function(t){lb.prototype.update.call(this,t),t=this.y,this.set_y(t+60/n.save.data.fpsCap*.17*(120*this.targetY+480-t)),this.isFlashing&&(this.flashingInt+=1),this.flashingInt%this.fakeFramerate>=Math.floor(this.fakeFramerate/2)?this.week.set_color(-13369345):n.save.data.flashing&&this.week.set_color(-1)},__class__:zn});var Bd=function(t,e,n){Ea.trace("connecting to newgrounds",{fileName:"source/NGio.hx",lineNumber:63,className:"NGio",methodName:"new"}),Qc.createAndCheckSession(t,null,n),Qc.core.verbose=!0,Qc.core.initEncryption(e),Ea.trace(Qc.core.attemptingLogin,{fileName:"source/NGio.hx",lineNumber:71,className:"NGio",methodName:"new"}),Qc.core.attemptingLogin?(Ea.trace("attempting login",{fileName:"source/NGio.hx",lineNumber:78,className:"NGio",methodName:"new"}),Qc.core.onLogin.add(z(this,this.onNGLogin))):Qc.core.requestLogin(z(this,this.onNGLogin))};r.NGio=Bd,Bd.__name__="NGio",Bd.noLogin=function(t){Ea.trace("INIT NOLOGIN",{fileName:"source/NGio.hx",lineNumber:38,className:"NGio",methodName:"noLogin"}),Bd.GAME_VER="v"+Xa.current.meta.h.version,0!=t.length&&(Qc.create(t),(new Tc).start(2,function(t){Qc.core.calls.app.getCurrentVersion(Bd.GAME_VER).addDataHandler(function(t){Bd.GAME_VER=t.result.data.current_version,Bd.GAME_VER_NUMS=Y.trim(Bd.GAME_VER.split(" ")[0]),Ea.trace("CURRENT NG VERSION: "+Bd.GAME_VER,{fileName:"source/NGio.hx",lineNumber:51,className:"NGio",methodName:"noLogin"}),Ea.trace("CURRENT NG VERSION: "+Bd.GAME_VER_NUMS,{fileName:"source/NGio.hx",lineNumber:52,className:"NGio",methodName:"noLogin"}),Bd.gotOnlineVer=!0}).send()}))},Bd.postScore=function(t,e){if(null==t&&(t=0),Bd.isLoggedIn)for(var n=Qc.core.scoreBoards.keys();n.hasNext();){var s=n.next();e==(s=Qc.core.scoreBoards.h[s])._data.name&&s.postScore(t,"Uhh meow?")}},Bd.logEvent=function(t){Qc.core.calls.event.logEvent(t).send(),Ea.trace("should have logged: "+t,{fileName:"source/NGio.hx",lineNumber:188,className:"NGio",methodName:"logEvent"})},Bd.unlockMedal=function(t){Bd.isLoggedIn&&((t=Qc.core.medals.h[t])._data.unlocked||t.sendUnlock())},Bd.prototype={onNGLogin:function(){Ea.trace("logged in! user:"+Qc.core.get_user().name,{fileName:"source/NGio.hx",lineNumber:92,className:"NGio",methodName:"onNGLogin"}),Bd.isLoggedIn=!0,n.save.data.sessionId=Qc.core.sessionId,Qc.core.requestMedals(z(this,this.onNGMedalFetch)),Qc.core.requestScoreBoards(z(this,this.onNGBoardsFetch)),Bd.ngDataLoaded.dispatch()},onNGMedalFetch:function(){},onNGBoardsFetch:function(){Ea.trace("shoulda got score by NOW!",{fileName:"source/NGio.hx",lineNumber:143,className:"NGio",methodName:"onNGBoardsFetch"})},onNGScoresFetch:function(){Bd.scoreboardsLoaded=!0,Bd.ngScoresLoaded.dispatch()},__class__:Bd};var Kc=function(t,e,s,i,a,r,l){null==l&&(l=!1),null==r&&(r="normal"),null==a&&(a=!1),null==i&&(i=!1),this.noteSkin="normal",this.children=[],this.sustainActive=!0,this.spotInLine=0,this.parent=null,this.isParent=!1,this.arrowAngles=[180,90,270,0],this.quantityColor=[Kc.RED_NOTE,2,Kc.BLUE_NOTE,2,Kc.PURP_NOTE,2,Kc.BLUE_NOTE,2],this.dataColor=["purple","blue","green","red"],this.modAngle=this.localAngle=0,this.rating="shit",this.noteYOff=0,this.noteScore=1,this.originColor=this.noteSection=0,this.isSustainNote=!1,this.sustainLength=0,this.canBeHit=this.tooLate=this.wasGoodHit=this.modifiedByLua=!1,this.noteData=this.rawNoteData=0,this.mustPress=!1,this.strumTime=this.baseStrum=this.rStrumTime=0,O.call(this),this.prevNote=s=null==s?this:s,this.noteSkin=r,this.isSustainNote=i;var o=this;o.set_x(o.x+50),(o=this).set_y(o.y-2e3),a?this.rStrumTime=this.strumTime=t:(this.strumTime=t,this.rStrumTime=t-(n.save.data.offset+y.songOffset)),this.strumTime<0&&(this.strumTime=0),this.noteData=e,o="normal",a?(this.set_frames(La.fromSparrow(K.getPath("images/NOTE_assets.png","IMAGE",null),K.getPath("images/NOTE_assets.xml","TEXT",null))),this.animation.addByPrefix(this.dataColor[0]+"Scroll",this.dataColor[0]+" alone"),this.animation.addByPrefix(this.dataColor[0]+"hold",this.dataColor[0]+" hold"),this.animation.addByPrefix(this.dataColor[0]+"holdend",this.dataColor[0]+" tail"),this.animation.addByPrefix(this.dataColor[1]+"Scroll",this.dataColor[1]+" alone"),this.animation.addByPrefix(this.dataColor[1]+"hold",this.dataColor[1]+" hold"),this.animation.addByPrefix(this.dataColor[1]+"holdend",this.dataColor[1]+" tail"),this.animation.addByPrefix(this.dataColor[2]+"Scroll",this.dataColor[2]+" alone"),this.animation.addByPrefix(this.dataColor[2]+"hold",this.dataColor[2]+" hold"),this.animation.addByPrefix(this.dataColor[2]+"holdend",this.dataColor[2]+" tail"),this.animation.addByPrefix(this.dataColor[3]+"Scroll",this.dataColor[3]+" alone"),this.animation.addByPrefix(this.dataColor[3]+"hold",this.dataColor[3]+" hold"),this.animation.addByPrefix(this.dataColor[3]+"holdend",this.dataColor[3]+" tail"),this.setGraphicSize(.7*this.get_width()|0),this.updateHitbox(),n.save.data.antialiasing&&this.set_antialiasing(!0)):(null==y.SONG.noteStyle?6==y.storyWeek&&(o="pixel"):o=y.SONG.noteStyle,"pixel"==o?(this.loadGraphic(K.getPath("images/weeb/pixelUI/arrows-pixels.png","IMAGE","week6"),!0,17,17),this.isSustainNote&&this.loadGraphic(K.getPath("images/weeb/pixelUI/arrowEnds.png","IMAGE","week6"),!0,7,6),this.animation.add(this.dataColor[0]+"Scroll",[4]),this.animation.add(this.dataColor[0]+"hold",[0]),this.animation.add(this.dataColor[0]+"holdend",[4]),this.animation.add(this.dataColor[1]+"Scroll",[5]),this.animation.add(this.dataColor[1]+"hold",[1]),this.animation.add(this.dataColor[1]+"holdend",[5]),this.animation.add(this.dataColor[2]+"Scroll",[6]),this.animation.add(this.dataColor[2]+"hold",[2]),this.animation.add(this.dataColor[2]+"holdend",[6]),this.animation.add(this.dataColor[3]+"Scroll",[7]),this.animation.add(this.dataColor[3]+"hold",[3]),this.animation.add(this.dataColor[3]+"holdend",[7]),this.setGraphicSize(this.get_width()*y.daPixelZoom|0),this.updateHitbox()):(this.set_frames(La.fromSparrow(K.getPath("images/"+(r=l?"notes/"+r+"Glitch":"notes/"+r)+".png","IMAGE","shared"),K.getPath("images/"+r+".xml","TEXT","shared"))),this.animation.addByPrefix(this.dataColor[0]+"Scroll",this.dataColor[0]+" alone"),this.animation.addByPrefix(this.dataColor[0]+"hold",this.dataColor[0]+" hold"),this.animation.addByPrefix(this.dataColor[0]+"holdend",this.dataColor[0]+" tail"),this.animation.addByPrefix(this.dataColor[1]+"Scroll",this.dataColor[1]+" alone"),this.animation.addByPrefix(this.dataColor[1]+"hold",this.dataColor[1]+" hold"),this.animation.addByPrefix(this.dataColor[1]+"holdend",this.dataColor[1]+" tail"),this.animation.addByPrefix(this.dataColor[2]+"Scroll",this.dataColor[2]+" alone"),this.animation.addByPrefix(this.dataColor[2]+"hold",this.dataColor[2]+" hold"),this.animation.addByPrefix(this.dataColor[2]+"holdend",this.dataColor[2]+" tail"),this.animation.addByPrefix(this.dataColor[3]+"Scroll",this.dataColor[3]+" alone"),this.animation.addByPrefix(this.dataColor[3]+"hold",this.dataColor[3]+" hold"),this.animation.addByPrefix(this.dataColor[3]+"holdend",this.dataColor[3]+" tail"),this.setGraphicSize(.7*this.get_width()|0),this.updateHitbox(),n.save.data.antialiasing&&this.set_antialiasing(!0))),(o=this).set_x(o.x+Kc.swagWidth*e),this.animation.play(this.dataColor[e]+"Scroll"),this.originColor=e,n.save.data.stepMania&&!this.isSustainNote&&(r=this.quantityColor[(0|Math.round(this.rStrumTime/(T.stepCrochet/2)))%8],this.animation.play(this.dataColor[r]+"Scroll"),this.localAngle-=this.arrowAngles[r],this.localAngle+=this.arrowAngles[e],this.originColor=r),n.save.data.downscroll&&i&&this.set_flipY(!0),e=.45*T.stepCrochet*Mb.roundDecimal(1==Lb.scrollSpeed?y.SONG.speed:Lb.scrollSpeed,2),this.isSustainNote&&null!=s&&(this.set_alpha(.6),(o=this).set_x(o.x+this.get_width()/2),this.originColor=s.originColor,this.animation.play(this.dataColor[this.originColor]+"holdend"),this.updateHitbox(),(o=this).set_x(o.x-this.get_width()/2),a&&(o=this).set_x(o.x+30),s.isSustainNote&&(s.animation.play(this.dataColor[s.originColor]+"hold"),s.updateHitbox(),(o=s.scale).set_y(o.y*((e+1)/s.get_height())),s.updateHitbox(),s.noteYOff=Math.round(-s.offset.y),this.noteYOff=Math.round(-this.offset.y)))};r.Note=Kc,Kc.__name__="Note",Kc.__super__=O,Kc.prototype=E(O.prototype,{strumTime:null,baseStrum:null,rStrumTime:null,mustPress:null,noteData:null,rawNoteData:null,canBeHit:null,tooLate:null,wasGoodHit:null,prevNote:null,modifiedByLua:null,sustainLength:null,isSustainNote:null,originColor:null,noteSection:null,noteCharterObject:null,noteScore:null,noteYOff:null,rating:null,modAngle:null,localAngle:null,dataColor:null,quantityColor:null,arrowAngles:null,isParent:null,parent:null,spotInLine:null,sustainActive:null,children:null,noteSkin:null,update:function(t){O.prototype.update.call(this,t),this.set_angle(this.modAngle+this.localAngle),this.modifiedByLua||this.sustainActive||this.set_alpha(.3),this.mustPress?(this.canBeHit=this.isSustainNote?this.strumTime>T.songPosition-1.5*T.safeZoneOffset&&this.strumTime<T.songPosition+.5*T.safeZoneOffset:this.strumTime>T.songPosition-T.safeZoneOffset&&this.strumTime<T.songPosition+T.safeZoneOffset,this.strumTime<T.songPosition-T.safeZoneOffset*T.timeScale&&!this.wasGoodHit&&(this.tooLate=!0)):(this.canBeHit=!1,this.strumTime<=T.songPosition&&(this.wasGoodHit=!0)),this.tooLate&&.3<this.alpha&&this.set_alpha(.3)},__class__:Kc});var An=function(t,e,n,s,i){this._frameCount=0,O.call(this,t,e),this.makeGraphic(n,s,0),this.flSprite=i,this.get_pixels().draw(this.flSprite)};r.OFLSprite=An,An.__name__="OFLSprite",An.__super__=O,An.prototype=E(O.prototype,{flSprite:null,_frameCount:null,update:function(t){2!=this._frameCount&&(this.get_pixels().draw(this.flSprite),this._frameCount++)},updateDisplay:function(){this.get_pixels().draw(this.flSprite)},__class__:An});var Ak=function(t,e){this._name=t,this._options=e};r.OptionCategory=Ak,Ak.__name__="OptionCategory",Ak.prototype={_options:null,getOptions:function(){return this._options},addOption:function(t){this._options.push(t)},removeOption:function(t){ma.remove(this._options,t)},_name:null,getName:function(){return this._name},__class__:Ak};var mb=function(){this.acceptValues=!1,this.description="",this.display=this.updateDisplay()};r.Option=mb,mb.__name__="Option",mb.prototype={description:null,display:null,acceptValues:null,getDisplay:function(){return this.display},getAccept:function(){return this.acceptValues},getDescription:function(){return this.description},getValue:function(){throw H.thrown("stub!")},press:function(){throw H.thrown("stub!")},updateDisplay:function(){throw H.thrown("stub!")},left:function(){throw H.thrown("stub!")},right:function(){throw H.thrown("stub!")},__class__:mb};var Bn=function(t){mb.call(this),this.controls=t};r.DFJKOption=Bn,Bn.__name__="DFJKOption",Bn.__super__=mb,Bn.prototype=E(mb.prototype,{controls:null,press:function(){return Ad.instance.openSubState(new mn),!1},updateDisplay:function(){return"Key Bindings"},__class__:Bn});var Cn=function(t){mb.call(this),this.description=t};r.CpuStrums=Cn,Cn.__name__="CpuStrums",Cn.__super__=mb,Cn.prototype=E(mb.prototype,{press:function(){return n.save.data.cpuStrums=!n.save.data.cpuStrums,this.display=this.updateDisplay(),!0},updateDisplay:function(){return n.save.data.cpuStrums?"Light CPU Strums":"CPU Strums stay static"},__class__:Cn});var Dn=function(t){mb.call(this),this.description=t};r.GraphicLoading=Dn,Dn.__name__="GraphicLoading",Dn.__super__=mb,Dn.prototype=E(mb.prototype,{press:function(){return n.save.data.cacheImages=!n.save.data.cacheImages,this.display=this.updateDisplay(),!0},updateDisplay:function(){return n.save.data.cacheImages?"Preload Characters":"Do not Preload Characters"},__class__:Dn});var En=function(t){mb.call(this),this.description=t};r.EditorRes=En,En.__name__="EditorRes",En.__super__=mb,En.prototype=E(mb.prototype,{press:function(){return n.save.data.editor=!n.save.data.editor,this.display=this.updateDisplay(),!0},updateDisplay:function(){return n.save.data.editor?"Show Editor Grid":"Do not Show Editor Grid"},__class__:En});var Fn=function(t){mb.call(this),this.description=t};r.DownscrollOption=Fn,Fn.__name__="DownscrollOption",Fn.__super__=mb,Fn.prototype=E(mb.prototype,{press:function(){return n.save.data.downscroll=!n.save.data.downscroll,this.display=this.updateDisplay(),!0},updateDisplay:function(){return n.save.data.downscroll?"Downscroll":"Upscroll"},__class__:Fn});var Gn=function(t){mb.call(this),this.description=t};r.GhostTapOption=Gn,Gn.__name__="GhostTapOption",Gn.__super__=mb,Gn.prototype=E(mb.prototype,{press:function(){return n.save.data.ghost=!n.save.data.ghost,this.display=this.updateDisplay(),!0},updateDisplay:function(){return n.save.data.ghost?"Ghost Tapping":"No Ghost Tapping"},__class__:Gn});var Hn=function(t){mb.call(this),this.description=t};r.AccuracyOption=Hn,Hn.__name__="AccuracyOption",Hn.__super__=mb,Hn.prototype=E(mb.prototype,{press:function(){return n.save.data.accuracyDisplay=!n.save.data.accuracyDisplay,this.display=this.updateDisplay(),!0},updateDisplay:function(){return"Accuracy "+(n.save.data.accuracyDisplay?"on":"off")},__class__:Hn});var In=function(t){mb.call(this),this.description=t};r.SongPositionOption=In,In.__name__="SongPositionOption",In.__super__=mb,In.prototype=E(mb.prototype,{press:function(){return n.save.data.songPosition=!n.save.data.songPosition,this.display=this.updateDisplay(),!0},updateDisplay:function(){return"Song Position "+(n.save.data.songPosition?"on":"off")},__class__:In});var Jn=function(t){mb.call(this),this.description=t};r.DistractionsAndEffectsOption=Jn,Jn.__name__="DistractionsAndEffectsOption",Jn.__super__=mb,Jn.prototype=E(mb.prototype,{press:function(){return n.save.data.distractions=!n.save.data.distractions,this.display=this.updateDisplay(),!0},updateDisplay:function(){return"Distractions "+(n.save.data.distractions?"on":"off")},__class__:Jn});var Kn=function(t){mb.call(this),this.description=t};r.StepManiaOption=Kn,Kn.__name__="StepManiaOption",Kn.__super__=mb,Kn.prototype=E(mb.prototype,{press:function(){return n.save.data.stepMania=!n.save.data.stepMania,this.display=this.updateDisplay(),!0},updateDisplay:function(){return"Colors by quantization "+(n.save.data.stepMania?"on":"off")},__class__:Kn});var Ln=function(t){mb.call(this),this.description=t};r.ResetButtonOption=Ln,Ln.__name__="ResetButtonOption",Ln.__super__=mb,Ln.prototype=E(mb.prototype,{press:function(){return n.save.data.resetButton=!n.save.data.resetButton,this.display=this.updateDisplay(),!0},updateDisplay:function(){return"Reset Button "+(n.save.data.resetButton?"on":"off")},__class__:Ln});var Mn=function(t){mb.call(this),this.description=t};r.FlashingLightsOption=Mn,Mn.__name__="FlashingLightsOption",Mn.__super__=mb,Mn.prototype=E(mb.prototype,{press:function(){return n.save.data.flashing=!n.save.data.flashing,this.display=this.updateDisplay(),!0},updateDisplay:function(){return"Flashing Lights "+(n.save.data.flashing?"on":"off")},__class__:Mn});var Nn=function(t){mb.call(this),this.description=t};r.AntialiasingOption=Nn,Nn.__name__="AntialiasingOption",Nn.__super__=mb,Nn.prototype=E(mb.prototype,{press:function(){return n.save.data.antialiasing=!n.save.data.antialiasing,this.display=this.updateDisplay(),!0},updateDisplay:function(){return"Antialiasing "+(n.save.data.antialiasing?"on":"off")},__class__:Nn});var On=function(t){mb.call(this),this.description=t};r.MissSoundsOption=On,On.__name__="MissSoundsOption",On.__super__=mb,On.prototype=E(mb.prototype,{press:function(){return n.save.data.missSounds=!n.save.data.missSounds,this.display=this.updateDisplay(),!0},updateDisplay:function(){return"Miss Sounds "+(n.save.data.missSounds?"on":"off")},__class__:On});var Pn=function(t){mb.call(this),this.description=t};r.ShowInput=Pn,Pn.__name__="ShowInput",Pn.__super__=mb,Pn.prototype=E(mb.prototype,{press:function(){return n.save.data.inputShow=!n.save.data.inputShow,this.display=this.updateDisplay(),!0},updateDisplay:function(){return n.save.data.inputShow?"Extended Score Info":"Minimalized Info"},__class__:Pn});var Qn=function(t){mb.call(this),this.description=t,this.acceptValues=!0};r.Judgement=Qn,Qn.__name__="Judgement",Qn.__super__=mb,Qn.prototype=E(mb.prototype,{press:function(){return!0},updateDisplay:function(){return"Safe Frames"},left:function(){return 1==T.safeFrames||(--T.safeFrames,n.save.data.frames=T.safeFrames,T.recalculateTimings()),!1},getValue:function(){return"Safe Frames: "+T.safeFrames+" - SIK: "+Kd.truncateFloat(45*T.timeScale,0)+"ms GD: "+Kd.truncateFloat(90*T.timeScale,0)+"ms BD: "+Kd.truncateFloat(135*T.timeScale,0)+"ms SHT: "+Kd.truncateFloat(166*T.timeScale,0)+"ms TOTAL: "+Kd.truncateFloat(T.safeZoneOffset,0)+"ms"},right:function(){return 20!=T.safeFrames&&(T.safeFrames+=1,n.save.data.frames=T.safeFrames,T.recalculateTimings(),!0)},__class__:Qn});var Rn=function(t){mb.call(this),this.description=t};r.FPSOption=Rn,Rn.__name__="FPSOption",Rn.__super__=mb,Rn.prototype=E(mb.prototype,{press:function(){return n.save.data.fps=!n.save.data.fps,za.__cast(Fa.get_current().getChildAt(0),xb).toggleFPS(n.save.data.fps),this.display=this.updateDisplay(),!0},updateDisplay:function(){return"FPS Counter "+(n.save.data.fps?"on":"off")},__class__:Rn});var Sn=function(t){mb.call(this),this.description=t};r.ScoreScreen=Sn,Sn.__name__="ScoreScreen",Sn.__super__=mb,Sn.prototype=E(mb.prototype,{press:function(){return n.save.data.scoreScreen=!n.save.data.scoreScreen,this.display=this.updateDisplay(),!0},updateDisplay:function(){return n.save.data.scoreScreen?"Show Score Screen":"No Score Screen"},__class__:Sn});var ir=function(t){mb.call(this),this.description=t,this.acceptValues=!0};r.FPSCapOption=ir,ir.__name__="FPSCapOption",ir.__super__=mb,ir.prototype=E(mb.prototype,{press:function(){return!1},updateDisplay:function(){return"FPS Cap"},right:function(){return 290<=n.save.data.fpsCap?(n.save.data.fpsCap=290,za.__cast(Fa.get_current().getChildAt(0),xb).setFPSCap(290)):n.save.data.fpsCap+=10,za.__cast(Fa.get_current().getChildAt(0),xb).setFPSCap(n.save.data.fpsCap),!0},left:function(){return n.save.data.fpsCap=290<n.save.data.fpsCap?290:n.save.data.fpsCap<60?Xa.current.__window.get_displayMode().refreshRate:n.save.data.fpsCap-10,za.__cast(Fa.get_current().getChildAt(0),xb).setFPSCap(n.save.data.fpsCap),!0},getValue:function(){return"Current FPS Cap: "+U.string(n.save.data.fpsCap)+(n.save.data.fpsCap==Xa.current.__window.get_displayMode().refreshRate?"Hz (Refresh Rate)":"")},__class__:ir});var Tn=function(t){mb.call(this),this.description=t,this.acceptValues=!0};r.ScrollSpeedOption=Tn,Tn.__name__="ScrollSpeedOption",Tn.__super__=mb,Tn.prototype=E(mb.prototype,{press:function(){return!1},updateDisplay:function(){return"Scroll Speed"},right:function(){return n.save.data.scrollSpeed+=.1,n.save.data.scrollSpeed<1&&(n.save.data.scrollSpeed=1),4<n.save.data.scrollSpeed&&(n.save.data.scrollSpeed=4),!0},getValue:function(){return"Current Scroll Speed: "+Kd.truncateFloat(n.save.data.scrollSpeed,1)},left:function(){return n.save.data.scrollSpeed-=.1,n.save.data.scrollSpeed<1&&(n.save.data.scrollSpeed=1),4<n.save.data.scrollSpeed&&(n.save.data.scrollSpeed=4),!0},__class__:Tn});var Un=function(t){mb.call(this),this.description=t};r.RainbowFPSOption=Un,Un.__name__="RainbowFPSOption",Un.__super__=mb,Un.prototype=E(mb.prototype,{press:function(){return n.save.data.fpsRain=!n.save.data.fpsRain,za.__cast(Fa.get_current().getChildAt(0),xb).changeFPSColor(-1),this.display=this.updateDisplay(),!0},updateDisplay:function(){return"FPS Rainbow "+(n.save.data.fpsRain?"on":"off")},__class__:Un});var Vn=function(t){mb.call(this),this.description=t};r.Optimization=Vn,Vn.__name__="Optimization",Vn.__super__=mb,Vn.prototype=E(mb.prototype,{press:function(){return n.save.data.optimize=!n.save.data.optimize,this.display=this.updateDisplay(),!0},updateDisplay:function(){return"Optimization "+(n.save.data.optimize?"ON":"OFF")},__class__:Vn});var Wn=function(t){mb.call(this),this.description=t};r.NPSDisplayOption=Wn,Wn.__name__="NPSDisplayOption",Wn.__super__=mb,Wn.prototype=E(mb.prototype,{press:function(){return n.save.data.npsDisplay=!n.save.data.npsDisplay,this.display=this.updateDisplay(),!0},updateDisplay:function(){return"NPS Display "+(n.save.data.npsDisplay?"on":"off")},__class__:Wn});var jr=function(t){mb.call(this),this.description=t};r.ReplayOption=jr,jr.__name__="ReplayOption",jr.__super__=mb,jr.prototype=E(mb.prototype,{press:function(){Ea.trace("switch",{fileName:"source/Options.hx",lineNumber:665,className:"ReplayOption",methodName:"press"});var t=new nn;return n.game._state.switchTo(t)&&(n.game._requestedState=t),!1},updateDisplay:function(){return"Load replays"},__class__:jr});var Xn=function(t){mb.call(this),this.description=t};r.AccuracyDOption=Xn,Xn.__name__="AccuracyDOption",Xn.__super__=mb,Xn.prototype=E(mb.prototype,{press:function(){return n.save.data.accuracyMod=1==n.save.data.accuracyMod?0:1,this.display=this.updateDisplay(),!0},updateDisplay:function(){return"Accuracy Mode: "+(0==n.save.data.accuracyMod?"Accurate":"Complex")},__class__:Xn});var Yn=function(t){mb.call(this),this.description=t};r.CustomizeGameplay=Yn,Yn.__name__="CustomizeGameplay",Yn.__super__=mb,Yn.prototype=E(mb.prototype,{press:function(){Ea.trace("switch",{fileName:"source/Options.hx",lineNumber:707,className:"CustomizeGameplay",methodName:"press"});var t=new kn;return n.game._state.switchTo(t)&&(n.game._requestedState=t),!1},updateDisplay:function(){return"Customize Gameplay"},__class__:Yn});var Zn=function(t){mb.call(this),this.description=t};r.WatermarkOption=Zn,Zn.__name__="WatermarkOption",Zn.__super__=mb,Zn.prototype=E(mb.prototype,{press:function(){return xb.watermarks=!xb.watermarks,n.save.data.watermark=xb.watermarks,this.display=this.updateDisplay(),!0},updateDisplay:function(){return"Watermarks "+(xb.watermarks?"on":"off")},__class__:Zn});var kr=function(t){mb.call(this),this.description=t};r.OffsetMenu=kr,kr.__name__="OffsetMenu",kr.__super__=mb,kr.prototype=E(mb.prototype,{press:function(){Ea.trace("switch",{fileName:"source/Options.hx",lineNumber:750,className:"OffsetMenu",methodName:"press"});var t=Gb.formatSong("Tutorial",1);return y.SONG=nf.loadFromJson(t,"Tutorial"),y.isStoryMode=!1,y.storyDifficulty=0,y.storyWeek=0,y.offsetTesting=!0,Ea.trace("CUR WEEK"+y.storyWeek,{fileName:"source/Options.hx",lineNumber:758,className:"OffsetMenu",methodName:"press"}),t=md.getNextState(new y,!1),n.game._state.switchTo(t)&&(n.game._requestedState=t),!1},updateDisplay:function(){return"Time your offset"},__class__:kr});var $n=function(t){mb.call(this),this.description=t};r.BotPlay=$n,$n.__name__="BotPlay",$n.__super__=mb,$n.prototype=E(mb.prototype,{press:function(){return n.save.data.botplay=!n.save.data.botplay,Ea.trace("BotPlay : "+U.string(n.save.data.botplay),{fileName:"source/Options.hx",lineNumber:779,className:"BotPlay",methodName:"press"}),this.display=this.updateDisplay(),!0},updateDisplay:function(){return"BotPlay "+(n.save.data.botplay?"on":"off")},__class__:$n});var ao=function(t){mb.call(this),this.description=t};r.CamZoomOption=ao,ao.__name__="CamZoomOption",ao.__super__=mb,ao.prototype=E(mb.prototype,{press:function(){return n.save.data.camzoom=!n.save.data.camzoom,this.display=this.updateDisplay(),!0},updateDisplay:function(){return"Camera Zoom "+(n.save.data.camzoom?"on":"off")},__class__:ao});var bo=function(t){this.confirm=!1,mb.call(this),this.description=t};r.LockWeeksOption=bo,bo.__name__="LockWeeksOption",bo.__super__=mb,bo.prototype=E(mb.prototype,{confirm:null,press:function(){return this.confirm?(n.save.data.weekUnlocked=1,ge.weekUnlocked=[!0,!0],this.confirm=!1,Ea.trace("Weeks Locked",{fileName:"source/Options.hx",lineNumber:828,className:"LockWeeksOption",methodName:"press"})):this.confirm=!0,this.display=this.updateDisplay(),!0},updateDisplay:function(){return this.confirm?"Confirm Story Reset":"Reset Story Progress"},__class__:bo});var co=function(t){this.confirm=!1,mb.call(this),this.description=t};r.ResetScoreOption=co,co.__name__="ResetScoreOption",co.__super__=mb,co.prototype=E(mb.prototype,{confirm:null,press:function(){if(!this.confirm)return this.confirm=!0,this.display=this.updateDisplay(),!0;n.save.data.songScores=null;for(var t=ya.keysIterator(Gb.songScores.h);t.hasNext();){var e=t.next();Gb.songScores.h[e]=0}for(n.save.data.songCombos=null,t=ya.keysIterator(Gb.songCombos.h);t.hasNext();)e=t.next(),Gb.songCombos.h[e]="";return this.confirm=!1,Ea.trace("Highscores Wiped",{fileName:"source/Options.hx",lineNumber:867,className:"ResetScoreOption",methodName:"press"}),this.display=this.updateDisplay(),!0},updateDisplay:function(){return this.confirm?"Confirm Score Reset":"Reset Score"},__class__:co});var eo=function(t){this.confirm=!1,mb.call(this),this.description=t};r.ResetSettings=eo,eo.__name__="ResetSettings",eo.__super__=mb,eo.prototype=E(mb.prototype,{confirm:null,press:function(){return this.confirm?(n.save.data.weekUnlocked=null,n.save.data.newInput=null,n.save.data.downscroll=null,n.save.data.antialiasing=null,n.save.data.missSounds=null,n.save.data.dfjk=null,n.save.data.accuracyDisplay=null,n.save.data.offset=null,n.save.data.songPosition=null,n.save.data.fps=null,n.save.data.changedHit=null,n.save.data.fpsRain=null,n.save.data.fpsCap=null,n.save.data.scrollSpeed=null,n.save.data.npsDisplay=null,n.save.data.frames=null,n.save.data.accuracyMod=null,n.save.data.watermark=null,n.save.data.ghost=null,n.save.data.distractions=null,n.save.data.stepMania=null,n.save.data.flashing=null,n.save.data.resetButton=null,n.save.data.botplay=null,n.save.data.cpuStrums=null,n.save.data.strumline=null,n.save.data.customStrumLine=null,n.save.data.camzoom=null,n.save.data.scoreScreen=null,n.save.data.inputShow=null,n.save.data.optimize=null,n.save.data.cacheImages=null,n.save.data.editor=null,gr.initSave(),this.confirm=!1,Ea.trace("All settings have been reset",{fileName:"source/Options.hx",lineNumber:931,className:"ResetSettings",methodName:"press"})):this.confirm=!0,this.display=this.updateDisplay(),!0},updateDisplay:function(){return this.confirm?"Confirm Settings Reset":"Reset Settings"},__class__:eo});var Ad=function(t,e){this.isCat=this.isSettingControl=!1,this.currentDescription="",this.acceptInput=!0,this.options=[new Ak("Gameplay",[new Bn(Kb.player1.controls),new Fn("Toggle making the notes scroll down rather than up."),new Gn("Toggle counting pressing a directional input when no arrow is there as a miss."),new Qn("Customize your Hit Timings. (LEFT or RIGHT)"),new Tn("Change your scroll speed. (1 = Chart dependent)"),new Xn("Change how accuracy is calculated. (Accurate = Simple, Complex = Milisecond Based)"),new Ln("Toggle pressing R to gameover."),new Yn("Drag and drop gameplay modules to your prefered positions!")]),new Ak("Appearance",[new En("Not showing the editor grid will greatly increase editor performance"),new Jn("Toggle stage distractions that can hinder your gameplay."),new ao("Toggle the camera zoom in-game."),new Kn("Sets the colors of the arrows depending on quantization instead of direction."),new Hn("Display accuracy information on the info bar."),new In("Show the song's current position as a scrolling bar."),new Wn("Shows your current Notes Per Second on the info bar."),new Un("Make the FPS Counter flicker through rainbow colors."),new Cn("Toggle the CPU's strumline lighting up when it hits a note.")]),new Ak("Misc",[new Rn("Toggle the FPS Counter"),new Mn("Toggle flashing lights that can cause epileptic seizures and strain."),new Zn("Enable and disable all watermarks from the engine."),new Nn("Toggle antialiasing, improving graphics quality at a slight performance penalty."),new On("Toggle miss sounds playing when you don't hit a note."),new Sn("Show the score screen after the end of a song"),new Pn("Display every single input on the score screen."),new Vn("No characters or backgrounds. Just a usual rhythm game layout."),new Dn("On startup, cache every character. Significantly decrease load times. (HIGH MEMORY)"),new $n("Showcase your charts and mods with autoplay.")]),new Ak("Saves and Data",[new co("Reset your score on all songs and weeks. This is irreversible!"),new bo("Reset your story mode progress. This is irreversible!"),new eo("Reset ALL your settings. This is irreversible!")])],this.curSelected=0,da.call(this,t,e)};r.OptionsMenu=Ad,Ad.__name__="OptionsMenu",Ad.instance=null,Ad.versionShit=null,Ad.__super__=da,Ad.prototype=E(da.prototype,{selector:null,curSelected:null,options:null,acceptInput:null,currentDescription:null,grpControls:null,currentSelectedCat:null,blackBorder:null,create:function(){Ad.instance=this,(t=(new O).loadGraphic(K.getPath("images/menuDesat.png","IMAGE",null))).set_color(-1412611),t.setGraphicSize(1.1*t.get_width()|0),t.updateHitbox(),t.screenCenter(),n.save.data.antialiasing&&t.set_antialiasing(!0),this.add(t),this.grpControls=new yb,this.add(this.grpControls);for(var t=0,e=this.options.length;t<e;){var s=t++,i=new $b(0,70*s+30,this.options[s].getName(),!0,!1,!0);i.isMenuItem=!0,i.targetY=s,this.grpControls.add(i)}this.currentDescription="none",Ad.versionShit=new ub(5,n.height+40,0,"Offset (Left, Right, Shift for slow): "+Kd.truncateFloat(n.save.data.offset,2)+" - Description - "+this.currentDescription,12),Ad.versionShit.scrollFactor.set(),Ad.versionShit.setFormat("VCR OSD Mono",16,-1,"left",Zc.OUTLINE,-16777216),this.blackBorder=new O(-30,n.height+40).makeGraphic(Ad.versionShit.get_width()+900|0,Ad.versionShit.get_height()+600|0,-16777216),this.blackBorder.set_alpha(.5),this.add(this.blackBorder),this.add(Ad.versionShit),Ta.tween(Ad.versionShit,{y:n.height-18},2,{ease:Ra.elasticInOut}),Ta.tween(this.blackBorder,{y:n.height-18},2,{ease:Ra.elasticInOut}),this.changeSelection(),da.prototype.create.call(this)},isCat:null,update:function(t){if(da.prototype.update.call(this,t),this.acceptInput){if(Kb.player1.controls._back.check()&&!this.isCat)t=new fe,n.game._state.switchTo(t)&&(n.game._requestedState=t);else if(Kb.player1.controls._back.check()){this.isCat=!1,this.grpControls.clear(),t=0;for(var e=this.options.length;t<e;){var s=t++,i=new $b(0,70*s+30,this.options[s].getName(),!0,!1);i.isMenuItem=!0,i.targetY=s,this.grpControls.add(i)}this.curSelected=0,this.changeSelection(this.curSelected)}if(null!=(t=n.gamepads.lastActive)){switch(e=(s=t.justPressed).gamepad,s=s.status,i=11){case-2:e=e.anyButton(s);break;case-1:e=!e.anyButton(s);break;default:i=e.mapping.getRawID(i),e=null!=(e=e.buttons[i])&&e.hasState(s)}switch(e&&(n.sound.play(K.sound("scrollMenu")),this.changeSelection(-1)),e=(s=t.justPressed).gamepad,s=s.status,i=12){case-2:e=e.anyButton(s);break;case-1:e=!e.anyButton(s);break;default:i=e.mapping.getRawID(i),e=null!=(e=e.buttons[i])&&e.hasState(s)}e&&(n.sound.play(K.sound("scrollMenu")),this.changeSelection(1))}if((s=n.keys.justPressed).keyManager.checkStatus(38,s.status)&&this.changeSelection(-1),(s=n.keys.justPressed).keyManager.checkStatus(40,s.status)&&this.changeSelection(1),this.isCat?(this.currentSelectedCat.getOptions()[this.curSelected].getAccept()?(s=(s=n.keys.pressed).keyManager.checkStatus(16,s.status)?((s=n.keys.pressed).keyManager.checkStatus(39,s.status)&&this.currentSelectedCat.getOptions()[this.curSelected].right(),n.keys.pressed):((s=n.keys.justPressed).keyManager.checkStatus(39,s.status)&&this.currentSelectedCat.getOptions()[this.curSelected].right(),n.keys.justPressed)).keyManager.checkStatus(37,s.status)&&this.currentSelectedCat.getOptions()[this.curSelected].left():((s=n.keys.pressed).keyManager.checkStatus(16,s.status)?(s=n.keys.justPressed).keyManager.checkStatus(39,s.status)?n.save.data.offset+=.1:(s=n.keys.justPressed).keyManager.checkStatus(37,s.status)&&(n.save.data.offset-=.1):(s=n.keys.pressed).keyManager.checkStatus(39,s.status)?n.save.data.offset+=.1:(s=n.keys.pressed).keyManager.checkStatus(37,s.status)&&(n.save.data.offset-=.1),Ad.versionShit.set_text("Offset (Left, Right, Shift for slow): "+Kd.truncateFloat(n.save.data.offset,2)+" - Description - "+this.currentDescription)),this.currentSelectedCat.getOptions()[this.curSelected].getAccept()?Ad.versionShit.set_text(this.currentSelectedCat.getOptions()[this.curSelected].getValue()+" - Description - "+this.currentDescription):Ad.versionShit.set_text("Offset (Left, Right, Shift for slow): "+Kd.truncateFloat(n.save.data.offset,2)+" - Description - "+this.currentDescription)):((s=n.keys.pressed).keyManager.checkStatus(16,s.status)?(s=n.keys.justPressed).keyManager.checkStatus(39,s.status)?n.save.data.offset+=.1:(s=n.keys.justPressed).keyManager.checkStatus(37,s.status)&&(n.save.data.offset-=.1):(s=n.keys.pressed).keyManager.checkStatus(39,s.status)?n.save.data.offset+=.1:(s=n.keys.pressed).keyManager.checkStatus(37,s.status)&&(n.save.data.offset-=.1),Ad.versionShit.set_text("Offset (Left, Right, Shift for slow): "+Kd.truncateFloat(n.save.data.offset,2)+" - Description - "+this.currentDescription)),Kb.player1.controls._reset.check()&&(n.save.data.offset=0),Kb.player1.controls._accept.check()){if(this.isCat)this.currentSelectedCat.getOptions()[this.curSelected].press()&&(this.grpControls.members[this.curSelected].reType(this.currentSelectedCat.getOptions()[this.curSelected].getDisplay()),Ea.trace(this.currentSelectedCat.getOptions()[this.curSelected].getDisplay(),{fileName:"source/OptionsMenu.hx",lineNumber:251,className:"OptionsMenu",methodName:"update"}));else{for(this.currentSelectedCat=this.options[this.curSelected],this.isCat=!0,this.grpControls.clear(),t=0,e=this.currentSelectedCat.getOptions().length;t<e;)s=t++,(i=new $b(0,70*s+30,this.currentSelectedCat.getOptions()[s].getDisplay(),!0,!1)).isMenuItem=!0,i.targetY=s,this.grpControls.add(i);this.curSelected=0}this.changeSelection()}}n.save.flush()},isSettingControl:null,changeSelection:function(t){null==t&&(t=0),n.sound.play(K.sound("scrollMenu"),.4),this.curSelected+=t,this.curSelected<0&&(this.curSelected=this.grpControls.length-1),this.curSelected>=this.grpControls.length&&(this.curSelected=0),this.currentDescription=this.isCat?this.currentSelectedCat.getOptions()[this.curSelected].getDescription():"Please select a category",this.isCat&&this.currentSelectedCat.getOptions()[this.curSelected].getAccept()?Ad.versionShit.set_text(this.currentSelectedCat.getOptions()[this.curSelected].getValue()+" - Description - "+this.currentDescription):Ad.versionShit.set_text("Offset (Left, Right, Shift for slow): "+Kd.truncateFloat(n.save.data.offset,2)+" - Description - "+this.currentDescription);for(var e=t=0,s=this.grpControls.members;e<s.length;){var i=s[e];++e,i.targetY=t-this.curSelected,++t,i.set_alpha(.6),0==i.targetY&&i.set_alpha(1)}},__class__:Ad});var K=function(){};r.Paths=K,K.__name__="Paths",K.currentLevel=null,K.setCurrentLevel=function(t){K.currentLevel=t.toLowerCase()},K.getPath=function(t,e,n){if(null!=n)return K.getLibraryPath(t,n);if(null!=K.currentLevel){if(n=K.currentLevel,Aa.exists(n=n+":assets/"+n+"/"+t,e))return n;if(Aa.exists(n="shared:assets/shared/"+t,e))return n}return"assets/"+t},K.getLibraryPath=function(t,e){return"preload"==(e=null==e?"preload":e)||"default"==e?"assets/"+t:e+":assets/"+e+"/"+t},K.getLibraryPathForce=function(t,e){return e+":assets/"+e+"/"+t},K.getPreloadPath=function(t){return"assets/"+t},K.file=function(t,e,n){return K.getPath(t,n=null==n?"TEXT":n,e)},K.lua=function(t,e){return K.getPath("data/"+t+".lua","TEXT",e)},K.luaImage=function(t,e){return K.getPath("data/"+t+".png","IMAGE",e)},K.txt=function(t,e){return K.getPath(t+".txt","TEXT",e)},K.xml=function(t,e){return K.getPath("data/"+t+".xml","TEXT",e)},K.json=function(t,e){return K.getPath("data/"+t+".json","TEXT",e)},K.sound=function(t,e){return K.getPath("sounds/"+t+".ogg","SOUND",e)},K.soundRandom=function(t,e,s,i){return K.sound(t+n.random.int(e,s),i)},K.music=function(t,e){return K.getPath("music/"+t+".ogg","MUSIC",e)},K.voices=function(t){switch(t=Y.replace(t," ","-").toLowerCase()){case"dad-battle":t="dadbattle";break;case"philly-nice":t="philly"}return"songs:assets/songs/"+t+"/Voices.ogg"},K.inst=function(t){switch(t=Y.replace(t," ","-").toLowerCase()){case"dad-battle":t="dadbattle";break;case"philly-nice":t="philly"}return"songs:assets/songs/"+t+"/Inst.ogg"},K.image=function(t,e){return K.getPath("images/"+t+".png","IMAGE",e)},K.font=function(t){return"assets/fonts/"+t},K.getSparrowAtlas=function(t,e,n){return(n=null==n?!1:n)?La.fromSparrow(K.getPath("images/characters/"+t+".png","IMAGE",e),K.getPath("images/characters/"+t+".xml","TEXT",e)):La.fromSparrow(K.getPath("images/"+t+".png","IMAGE",e),K.getPath("images/"+t+".xml","TEXT",e))},K.getPackerAtlas=function(t,e,n){return(n=null==n?!1:n)?La.fromSpriteSheetPacker(K.getPath("images/characters/"+t+".png","IMAGE",null),K.getPath("images/characters/"+t+".txt","TEXT",e)):La.fromSpriteSheetPacker(K.getPath("images/"+t+".png","IMAGE",e),K.getPath("images/"+t+".txt","TEXT",e))};var Hl=function(t,e){this.offsetChanged=!1,this.curSelected=0,this.menuItems=["Resume","Restart Song","Exit to menu"],Ig.call(this),y.instance.useVideo&&(ma.remove(this.menuItems,"Resume"),cc.get().playing&&cc.get().pause()),this.pauseMusic=(new bg).loadEmbedded(K.getPath("music/breakfast.ogg","MUSIC",null),!0,!0),this.pauseMusic.set_volume(0),this.pauseMusic.play(!1,n.random.int(0,this.pauseMusic._length/2|0)),n.sound.list.add(this.pauseMusic),(e=(new O).makeGraphic(n.width,n.height,-16777216)).set_alpha(0),e.scrollFactor.set(),this.add(e);var s=new ub(20,15,0,"",32);(t=s).set_text(t.text+y.SONG.song),s.scrollFactor.set(),s.setFormat("assets/fonts/vcr.ttf",32),s.updateHitbox(),this.add(s);var i=new ub(20,47,0,"",32);for((t=i).set_text(t.text+cd.difficultyFromInt(y.storyDifficulty).toUpperCase()),i.scrollFactor.set(),i.setFormat("assets/fonts/vcr.ttf",32),i.updateHitbox(),this.add(i),i.set_alpha(0),s.set_alpha(0),s.set_x(n.width-(s.get_width()+20)),i.set_x(n.width-(i.get_width()+20)),Ta.tween(e,{alpha:.6},.4,{ease:Ra.quartInOut}),Ta.tween(s,{alpha:1,y:20},.4,{ease:Ra.quartInOut,startDelay:.3}),Ta.tween(i,{alpha:1,y:i.y+5},.4,{ease:Ra.quartInOut,startDelay:.5}),this.grpMenuShit=new yb,this.add(this.grpMenuShit),this.perSongOffset=new ub(5,n.height-18,0,"Additive Offset (Left, Right): "+y.songOffset+" - Description - Adds value to global offset, per song.",12),this.perSongOffset.scrollFactor.set(),this.perSongOffset.setFormat("VCR OSD Mono",16,-1,"left",Zc.OUTLINE,-16777216),t=0,e=this.menuItems.length;t<e;)s=t++,(i=new $b(0,70*s+30,this.menuItems[s],!0,!1)).isMenuItem=!0,i.targetY=s,this.grpMenuShit.add(i);this.changeSelection(),this.set_cameras([n.cameras.list[n.cameras.list.length-1]])};r.PauseSubState=Hl,Hl.__name__="PauseSubState",Hl.__super__=Ig,Hl.prototype=E(Ig.prototype,{grpMenuShit:null,menuItems:null,curSelected:null,pauseMusic:null,perSongOffset:null,offsetChanged:null,update:function(t){var e;this.pauseMusic._volume<.5&&(e=this.pauseMusic).set_volume(e._volume+.01*t),Ig.prototype.update.call(this,t),y.instance.useVideo&&ma.remove(this.menuItems,"Resume");var s=e=!1;if(null!=(t=n.gamepads.lastActive)&&ve.gamepad){var i=11,a=(r=t.justPressed).gamepad,r=r.status;switch(i){case-2:e=a.anyButton(r);break;case-1:e=!a.anyButton(r);break;default:i=a.mapping.getRawID(i),e=null!=(a=a.buttons[i])&&a.hasState(r)}switch(a=(r=t.justPressed).gamepad,r=r.status,i=12){case-2:s=a.anyButton(r);break;case-1:s=!a.anyButton(r);break;default:i=a.mapping.getRawID(i),s=null!=(a=a.buttons[i])&&a.hasState(r)}switch(a=(r=t.justPressed).gamepad,r=r.status,i=13){case-2:case-1:a.anyButton(r);break;default:i=a.mapping.getRawID(i),null!=(a=a.buttons[i])&&a.hasState(r)}switch(a=(r=t.justPressed).gamepad,r=r.status,i=14){case-2:case-1:a.anyButton(r);break;default:i=a.mapping.getRawID(i),null!=(a=a.buttons[i])&&a.hasState(r)}}if(Y.replace(y.SONG.song," ","-").toLowerCase(),Kb.player1.controls._upP.check()||e?this.changeSelection(-1):(Kb.player1.controls._downP.check()||s)&&this.changeSelection(1),t=!!Kb.player1.controls._accept.check()&&!(r=n.keys.pressed).keyManager.checkStatus(18,r.status))switch(this.menuItems[this.curSelected]){case"Exit to menu":y.startTime=0,y.instance.useVideo&&(cc.get().stop(),y.instance.remove(y.instance.videoSprite),y.instance.removedVideo=!0),y.loadRep&&(n.save.data.botplay=!1,n.save.data.scrollSpeed=1,n.save.data.downscroll=!1),y.loadRep=!1,290<n.save.data.fpsCap&&za.__cast(Fa.get_current().getChildAt(0),xb).setFPSCap(290),t=new(y.isStoryMode?ge:vb),n.game._state.switchTo(t)&&(n.game._requestedState=t);break;case"Restart Song":y.startTime=0,y.instance.useVideo&&(cc.get().stop(),y.instance.remove(y.instance.videoSprite),y.instance.removedVideo=!0),t=Jb.createInstance(za.getClass(n.game._state),[]),n.game._state.switchTo(t)&&(n.game._requestedState=t);break;case"Resume":this.close()}(r=n.keys.justPressed).keyManager.checkStatus(74,r.status)},destroy:function(){this.pauseMusic.destroy(),Ig.prototype.destroy.call(this)},changeSelection:function(t){this.curSelected+=t=null==t?0:t,n.sound.play(K.sound("scrollMenu"),.4),this.curSelected<0&&(this.curSelected=this.menuItems.length-1),this.curSelected>=this.menuItems.length&&(this.curSelected=0);for(var e=t=0,s=this.grpMenuShit.members;e<s.length;){var i=s[e];++e,i.targetY=t-this.curSelected,++t,i.set_alpha(.6),0==i.targetY&&i.set_alpha(1)}},__class__:Hl});var y=function(t,e){this.curLight=0,this.lightningOffset=8,this.lightningStrikeBeat=0,this.startedMoving=this.danced=!1,this.trainCooldown=0,this.trainFinishing=!1,this.trainCars=8,this.trainFrameTiming=0,this.trainMoving=!1,this.fastCarCanDrive=!0,this.mashing=this.mashViolations=this.etternaModeScore=0,this.useVideo=this.playingDathing=!1,this.fuckingVolume=1,this.upHold=this.downHold=this.rightHold=this.leftHold=!1,this.currentTimingShown=null,this.offsetTest=this.timeShown=0,this.hits=[],this.endingSong=!1,this.currentBPM=this.updateFrame=0,this.stopUpdate=this.removedVideo=!1,this.nps=this.maxNPS=0,this.canPause=!0,this.paused=this.startedCountdown=!1,this.debugNum=0,this.songStarted=!1,this.keys=[!1,!1,!1,!1],this.previousFrameTime=this.lastReportedPlayheadPosition=this.songTime=0,this.luaWiggles=[],this.perfectMode=!1,this.resyncingVocals=this.everybodyShouldDance=!0,this.dataColor=["purple","blue","green","red"],this.dataSuffix=["LEFT","DOWN","UP","RIGHT"],this.executeModchart=!1,this.replayAna=new fo,this.saveJudge=[],this.saveNotes=[],this.inCutscene=this.usedTimeTravel=this.useSetCamera=this.triggeredAlready=this.allowedToHeadbang=!1,this.defaultCamZoom=1.05,this.songScore=this.songScoreDef=0,this.talking=!0,this.wiggleShit=new lr,this.fc=!0,this.isHalloween=!1,this.dialogue=["dad:blah blah blah","bf:coolswag"],this.idleBeat=4,this.idleToBeat=!0,this.currentFrames=0,this.notesHitArray=[],this.generatedMusic=this.startingSong=this.screamMode=this.inGlitchedHallway=this.cannotDie=this.isSMFile=!1,this.songPositionBar=0,this.ss=!1,this.combo=this.accuracy=this.accuracyDefault=this.totalNotesHit=this.totalNotesHitDefault=this.totalPlayed=0,this.gfSpeed=this.health=1,this.curSong="",this.camZooming=!1,this.curSection=0,this.unspawnNotes=[],this.useDad2=this.usingGlitchedNotes=!1,this.songLength=0,this.glitched=this.halloweenLevel=!1,da.call(this,t,e)};r.PlayState=y,y.__name__="PlayState",y.SONG=null,y.songPosBG=null,y.songPosBar=null,y.rep=null,y.dad=null,y.gf=null,y.boyfriend=null,y.prevCamFollow=null,y.webmHandler=null,y.__super__=da,y.prototype=E(da.prototype,{foregroundGlitch:null,glitched:null,halloweenLevel:null,songLength:null,kadeEngineWatermark:null,queuedDialoguePath:null,vocals:null,useDad2:null,originalX:null,dad2:null,notes:null,glitchedNotes:null,usingGlitchedNotes:null,unspawnNotes:null,strumLine:null,curSection:null,camFollow:null,camZooming:null,curSong:null,gfSpeed:null,health:null,combo:null,accuracy:null,accuracyDefault:null,totalNotesHit:null,totalNotesHitDefault:null,totalPlayed:null,ss:null,healthBarBG:null,healthBar:null,songPositionBar:null,generatedMusic:null,startingSong:null,iconP1:null,iconP2:null,camHUD:null,camSustains:null,camNotes:null,screamMode:null,inGlitchedHallway:null,camGame:null,cannotDie:null,isSMFile:null,notesHitArray:null,currentFrames:null,idleToBeat:null,idleBeat:null,dialogue:null,halloweenBG:null,isHalloween:null,phillyCityLights:null,phillyTrain:null,trainSound:null,limo:null,grpLimoDancers:null,fastCar:null,songName:null,upperBoppers:null,bottomBoppers:null,santa:null,fc:null,bgGirls:null,wiggleShit:null,talking:null,songScore:null,songScoreDef:null,scoreTxt:null,replayTxt:null,defaultCamZoom:null,funneEffect:null,inCutscene:null,usedTimeTravel:null,useSetCamera:null,triggeredAlready:null,allowedToHeadbang:null,botPlayState:null,saveNotes:null,saveJudge:null,replayAna:null,executeModchart:null,miiButtons:null,dataSuffix:null,dataColor:null,resyncingVocals:null,everybodyShouldDance:null,glitchLayer:null,foregroundGlitchLayer:null,grpHallway:null,channelOverlay:null,addObject:function(t){this.add(t)},removeObject:function(t){this.remove(t)},create:function(){var t;switch(n.mouse.set_visible(!1),y.instance=this,290<n.save.data.fpsCap&&za.__cast(Fa.get_current().getChildAt(0),xb).setFPSCap(800),null!=n.sound.music&&(t=n.sound.music).cleanup(t.autoDestroy,!0),y.isStoryMode||(y.sicks=0,y.bads=0,y.shits=0,y.goods=0),y.misses=0,y.highestCombo=0,y.repPresses=0,y.repReleases=0,y.inResults=!1,Lb.useDownscroll=n.save.data.downscroll,Lb.safeFrames=n.save.data.frames,Lb.scrollSpeed=n.save.data.scrollSpeed,Lb.botPlay=n.save.data.botplay,Lb.Optimize=n.save.data.optimize,t=Y.replace(y.SONG.song," ","-").toLowerCase()){case"dad-battle":t="dadbattle";break;case"philly-nice":t="philly"}this.executeModchart=this.removedVideo=!1,Ea.trace("Mod chart: "+U.string(this.executeModchart)+" - "+K.getPath("data/"+t+"/modchart.lua","TEXT",null),{fileName:"source/PlayState.hx",lineNumber:359,className:"PlayState",methodName:"create"}),this.camGame=new gc,this.camHUD=new gc,this.camHUD.bgColor&=16777215,this.camHUD.bgColor|=0,this.camSustains=new gc,this.camSustains.bgColor&=16777215,this.camSustains.bgColor|=0,this.camNotes=new gc,this.camNotes.bgColor&=16777215,this.camNotes.bgColor|=0,n.cameras.reset(this.camGame),n.cameras.add(this.camHUD),n.cameras.add(this.camSustains),n.cameras.add(this.camNotes),gc._defaultCameras=[this.camGame],this.persistentDraw=this.persistentUpdate=!0,null==y.SONG&&(y.SONG=nf.loadFromJson("tutorial","tutorial")),T.mapBPMChanges(y.SONG),T.changeBPM(y.SONG.bpm),null==y.SONG.eventObjects&&(y.SONG.eventObjects=[new Xh("Init BPM",0,y.SONG.bpm,"BPM Change")]),ac.clearTimings();for(var e=[],s=0,i=0,a=y.SONG.eventObjects;i<a.length;){var r=a[i];++i;var l,o,h=Z.field(r,"name"),_=Z.field(r,"type"),u=Z.field(r,"position"),r=Z.field(r,"value");"BPM Change"==_&&(l=u,ac.addTiming(l,r,1/0,0),0!=s&&((o=ac.AllTimings[s-1]).endBeat=l,o.length=(o.endBeat-o.startBeat)/(o.bpm/60),ac.AllTimings[s].startTime=o.startTime+o.length),++s),e.push(new Xh(h,u,r,_))}switch(y.SONG.eventObjects=e,Ea.trace("INFORMATION ABOUT WHAT U PLAYIN WIT:\nFRAMES: "+Lb.safeFrames+"\nZONE: "+T.safeZoneOffset+"\nTS: "+T.timeScale+"\nBotPlay : "+U.string(Lb.botPlay),{fileName:"source/PlayState.hx",lineNumber:473,className:"PlayState",methodName:"create"}),t){case"bopeebo":this.dialogue=["HEY!","You think you can just sing\nwith my daughter like that?","If you want to date her...","You're going to have to go \nthrough ME first!"];break;case"dadbattle":this.dialogue=["gah you think you're hot stuff?","If you can beat me here...","Only then I will even CONSIDER letting you\ndate my daughter!"];break;case"diagraphephobia":this.dialogue=cd.coolTextFile(K.getPath("data/diagraphephobia/dialogue.txt","TEXT",null));break;case"dream-of-peace":this.dialogue=cd.coolTextFile(K.getPath("data/dream-of-peace/dialogue.txt","TEXT",null));break;case"fresh":this.dialogue=["Not too shabby boy.",""];break;case"post-mortal":this.dialogue=cd.coolTextFile(K.getPath("data/post-mortal/dialoguepart2.txt","TEXT",null));break;case"roses":this.dialogue=cd.coolTextFile(K.getPath("data/roses/rosesDialogue.txt","TEXT",null));break;case"senpai":this.dialogue=cd.coolTextFile(K.getPath("data/senpai/senpaiDialogue.txt","TEXT",null));break;case"thorns":this.dialogue=cd.coolTextFile(K.getPath("data/thorns/thornsDialogue.txt","TEXT",null));break;case"tutorial":this.dialogue=["Hey you're pretty cute.","Use the arrow keys to keep up \nwith me singing."]}if(i="stage",null==y.SONG.stage)switch(y.storyWeek){case 2:i="halloween";break;case 3:i="philly";break;case 4:i="limo";break;case 5:i="winter-horrorland"==t?"mallEvil":"mall";break;case 6:i="thorns"==t?"schoolEvil":"school"}else i=y.SONG.stage;if(!Lb.Optimize)switch(i){case"halloween":y.curStage="spooky",this.halloweenLevel=!0,t=La.fromSparrow(K.getPath("images/halloween_bg.png","IMAGE","week2"),K.getPath("images/halloween_bg.xml","TEXT","week2")),this.halloweenBG=new O(-200,-100),this.halloweenBG.set_frames(t),this.halloweenBG.animation.addByPrefix("idle","halloweem bg0"),this.halloweenBG.animation.addByPrefix("lightning","halloweem bg lightning strike",24,!1),this.halloweenBG.animation.play("idle"),n.save.data.antialiasing&&this.halloweenBG.set_antialiasing(!0),this.add(this.halloweenBG),this.isHalloween=!0;break;case"hallway":this.defaultCamZoom=.63,y.curStage="hallway",this.useSetCamera=!0,t=new O(-360,-210).loadGraphic(K.getPath("images/glitchhallway.png","IMAGE","eteled")),n.save.data.antialiasing&&t.set_antialiasing(!0),t.scrollFactor.set(1,1),t.set_active(!1),this.add(t);break;case"limo":y.curStage="limo",this.defaultCamZoom=.9,(t=new O(-120,-50).loadGraphic(K.getPath("images/limo/limoSunset.png","IMAGE","week4"))).scrollFactor.set(.1,.1),this.add(t),(t=new O(-200,480)).set_frames(La.fromSparrow(K.getPath("images/limo/bgLimo.png","IMAGE","week4"),K.getPath("images/limo/bgLimo.xml","TEXT","week4"))),t.animation.addByPrefix("drive","background limo pink",24),t.animation.play("drive"),t.scrollFactor.set(.4,.4),this.add(t),n.save.data.distractions&&(this.grpLimoDancers=new yb,this.add(this.grpLimoDancers),(i=new Qa(130,t.y-400)).scrollFactor.set(.4,.4),this.grpLimoDancers.add(i),(i=new Qa(500,t.y-400)).scrollFactor.set(.4,.4),this.grpLimoDancers.add(i),(i=new Qa(870,t.y-400)).scrollFactor.set(.4,.4),this.grpLimoDancers.add(i),(i=new Qa(1240,t.y-400)).scrollFactor.set(.4,.4),this.grpLimoDancers.add(i),(i=new Qa(1610,t.y-400)).scrollFactor.set(.4,.4),this.grpLimoDancers.add(i)),new O(-500,-600).loadGraphic(K.getPath("images/limo/limoOverlay.png","IMAGE","week4")).set_alpha(.5),t=La.fromSparrow(K.getPath("images/limo/limoDrive.png","IMAGE","week4"),K.getPath("images/limo/limoDrive.xml","TEXT","week4")),this.limo=new O(-120,550),this.limo.set_frames(t),this.limo.animation.addByPrefix("drive","Limo stage",24),this.limo.animation.play("drive"),n.save.data.antialiasing&&this.limo.set_antialiasing(!0),this.fastCar=new O(-300,160).loadGraphic(K.getPath("images/limo/fastCarLol.png","IMAGE","week4"));break;case"mall":y.curStage="mall",this.defaultCamZoom=.8,t=new O(-1e3,-500).loadGraphic(K.getPath("images/christmas/bgWalls.png","IMAGE","week5")),n.save.data.antialiasing&&t.set_antialiasing(!0),t.scrollFactor.set(.2,.2),t.set_active(!1),t.setGraphicSize(.8*t.get_width()|0),t.updateHitbox(),this.add(t),this.upperBoppers=new O(-240,-90),this.upperBoppers.set_frames(La.fromSparrow(K.getPath("images/christmas/upperBop.png","IMAGE","week5"),K.getPath("images/christmas/upperBop.xml","TEXT","week5"))),this.upperBoppers.animation.addByPrefix("bop","Upper Crowd Bob",24,!1),n.save.data.antialiasing&&this.upperBoppers.set_antialiasing(!0),this.upperBoppers.scrollFactor.set(.33,.33),this.upperBoppers.setGraphicSize(.85*this.upperBoppers.get_width()|0),this.upperBoppers.updateHitbox(),n.save.data.distractions&&this.add(this.upperBoppers),t=new O(-1100,-600).loadGraphic(K.getPath("images/christmas/bgEscalator.png","IMAGE","week5")),n.save.data.antialiasing&&t.set_antialiasing(!0),t.scrollFactor.set(.3,.3),t.set_active(!1),t.setGraphicSize(.9*t.get_width()|0),t.updateHitbox(),this.add(t),t=new O(370,-250).loadGraphic(K.getPath("images/christmas/christmasTree.png","IMAGE","week5")),n.save.data.antialiasing&&t.set_antialiasing(!0),t.scrollFactor.set(.4,.4),this.add(t),this.bottomBoppers=new O(-300,140),this.bottomBoppers.set_frames(La.fromSparrow(K.getPath("images/christmas/bottomBop.png","IMAGE","week5"),K.getPath("images/christmas/bottomBop.xml","TEXT","week5"))),this.bottomBoppers.animation.addByPrefix("bop","Bottom Level Boppers",24,!1),n.save.data.antialiasing&&this.bottomBoppers.set_antialiasing(!0),this.bottomBoppers.scrollFactor.set(.9,.9),this.bottomBoppers.setGraphicSize(0|this.bottomBoppers.get_width()),this.bottomBoppers.updateHitbox(),n.save.data.distractions&&this.add(this.bottomBoppers),(t=new O(-600,700).loadGraphic(K.getPath("images/christmas/fgSnow.png","IMAGE","week5"))).set_active(!1),n.save.data.antialiasing&&t.set_antialiasing(!0),this.add(t),this.santa=new O(-840,150),this.santa.set_frames(La.fromSparrow(K.getPath("images/christmas/santa.png","IMAGE","week5"),K.getPath("images/christmas/santa.xml","TEXT","week5"))),this.santa.animation.addByPrefix("idle","santa idle in fear",24,!1),n.save.data.antialiasing&&this.santa.set_antialiasing(!0),n.save.data.distractions&&this.add(this.santa);break;case"mallEvil":y.curStage="mallEvil",t=new O(-400,-500).loadGraphic(K.getPath("images/christmas/evilBG.png","IMAGE","week5")),n.save.data.antialiasing&&t.set_antialiasing(!0),t.scrollFactor.set(.2,.2),t.set_active(!1),t.setGraphicSize(.8*t.get_width()|0),t.updateHitbox(),this.add(t),t=new O(300,-300).loadGraphic(K.getPath("images/christmas/evilTree.png","IMAGE","week5")),n.save.data.antialiasing&&t.set_antialiasing(!0),t.scrollFactor.set(.2,.2),this.add(t),t=new O(-200,700).loadGraphic(K.getPath("images/christmas/evilSnow.png","IMAGE","week5")),n.save.data.antialiasing&&t.set_antialiasing(!0),this.add(t);break;case"mii-channel":this.defaultCamZoom=.68,y.curStage="mii-channel",this.useSetCamera=!0,t=new O(-550,-230).loadGraphic(K.getPath("images/stageback.png","IMAGE","eteled")),n.save.data.antialiasing&&t.set_antialiasing(!0),t.scrollFactor.set(1,1),t.set_active(!1),this.add(t);break;case"mii-channel-dark":this.defaultCamZoom=.68,y.curStage="mii-channel-dark",this.useSetCamera=!0,t=new O(-550,-230).loadGraphic(K.getPath("images/blackback.png","IMAGE","eteled")),n.save.data.antialiasing&&t.set_antialiasing(!0),t.scrollFactor.set(1,1),t.set_active(!1),this.add(t);break;case"mii-channel-glitch":this.defaultCamZoom=.68,y.curStage="mii-channel-glitch",this.useSetCamera=!0,t=new O(-550,-230).loadGraphic(K.getPath("images/corruptback.png","IMAGE","eteled")),n.save.data.antialiasing&&t.set_antialiasing(!0),t.scrollFactor.set(1,1),t.set_active(!1),this.add(t),this.grpHallway=new yb,this.add(this.grpHallway),t=new O(-360,-210).loadGraphic(K.getPath("images/glitchhallway2ndsong.png","IMAGE","eteled")),n.save.data.antialiasing&&t.set_antialiasing(!0),t.scrollFactor.set(1,1),t.set_active(!1),(i=t).set_y(i.y+2*n.height),this.grpHallway.add(t),this.foregroundGlitch=new O(0,0),this.foregroundGlitch.set_frames(La.fromSparrow(K.getPath("images/glitch effects/glitchAnim.png","IMAGE","eteled"),K.getPath("images/glitch effects/glitchAnim.xml","TEXT","eteled"))),this.foregroundGlitch.animation.addByPrefix("idle","g",24,!0),this.foregroundGlitch=new O(0,0),this.foregroundGlitch.set_frames(La.fromSparrow(K.getPath("images/glitch effects/noise2.png","IMAGE","eteled"),K.getPath("images/glitch effects/noise2.xml","TEXT","eteled"))),this.foregroundGlitch.animation.addByPrefix("idle","f",24,!0),this.foregroundGlitch=new O(0,0),this.foregroundGlitch.set_frames(La.fromSparrow(K.getPath("images/glitch effects/noise2R.png","IMAGE","eteled"),K.getPath("images/glitch effects/noise2R.xml","TEXT","eteled"))),this.foregroundGlitch.animation.addByPrefix("idle","f",24,!0),this.foregroundGlitch=new O(0,0),this.foregroundGlitch.set_frames(La.fromSparrow(K.getPath("images/glitch effects/sheet.png","IMAGE","eteled"),K.getPath("images/glitch effects/sheet.xml","TEXT","eteled"))),this.foregroundGlitch.animation.addByPrefix("idle","Idle",24,!0),this.foregroundGlitch=new O(0,0),this.foregroundGlitch.set_frames(La.fromSparrow(K.getPath("images/glitch effects/sheeto2.png","IMAGE","eteled"),K.getPath("images/glitch effects/sheeto2.xml","TEXT","eteled"))),this.foregroundGlitch.animation.addByPrefix("idle","n",24,!0),y.dad=new Fd(100,100,"eteled3");break;case"philly":for(y.curStage="philly",(t=new O(-100).loadGraphic(K.getPath("images/philly/sky.png","IMAGE","week3"))).scrollFactor.set(.1,.1),this.add(t),(t=new O(-10).loadGraphic(K.getPath("images/philly/city.png","IMAGE","week3"))).scrollFactor.set(.3,.3),t.setGraphicSize(.85*t.get_width()|0),t.updateHitbox(),this.add(t),this.phillyCityLights=new yb,n.save.data.distractions&&this.add(this.phillyCityLights),i=0;i<5;)r=i++,(e=new O(t.x).loadGraphic(K.getPath("images/philly/win"+r+".png","IMAGE","week3"))).scrollFactor.set(.3,.3),e.set_visible(!1),e.setGraphicSize(.85*e.get_width()|0),e.updateHitbox(),n.save.data.antialiasing&&e.set_antialiasing(!0),this.phillyCityLights.add(e);t=new O(-40,50).loadGraphic(K.getPath("images/philly/behindTrain.png","IMAGE","week3")),this.add(t),this.phillyTrain=new O(2e3,360).loadGraphic(K.getPath("images/philly/train.png","IMAGE","week3")),n.save.data.distractions&&this.add(this.phillyTrain),this.trainSound=(new bg).loadEmbedded(K.sound("train_passes","week3")),n.sound.list.add(this.trainSound),t=new O(-40,t.y).loadGraphic(K.getPath("images/philly/street.png","IMAGE","week3")),this.add(t);break;case"school":y.curStage="school",(i=(new O).loadGraphic(K.getPath("images/weeb/weebSky.png","IMAGE","week6"))).scrollFactor.set(.1,.1),this.add(i),(e=new O(-200,0).loadGraphic(K.getPath("images/weeb/weebSchool.png","IMAGE","week6"))).scrollFactor.set(.6,.9),this.add(e),(s=new O(-200).loadGraphic(K.getPath("images/weeb/weebStreet.png","IMAGE","week6"))).scrollFactor.set(.95,.95),this.add(s),(a=new O(-30,130).loadGraphic(K.getPath("images/weeb/weebTreesBack.png","IMAGE","week6"))).scrollFactor.set(.9,.9),this.add(a),h=new O(-580,-800),_=La.fromSpriteSheetPacker(K.getPath("images/weeb/weebTrees.png","IMAGE","week6"),K.getPath("images/weeb/weebTrees.txt","TEXT","week6")),h.set_frames(_),h.animation.add("treeLoop",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18],12),h.animation.play("treeLoop"),h.scrollFactor.set(.85,.85),this.add(h),(_=new O(-200,-40)).set_frames(La.fromSparrow(K.getPath("images/weeb/petals.png","IMAGE","week6"),K.getPath("images/weeb/petals.xml","TEXT","week6"))),_.animation.addByPrefix("leaves","PETALS ALL",24,!0),_.animation.play("leaves"),_.scrollFactor.set(.85,.85),this.add(_),u=6*i.get_width()|0,i.setGraphicSize(u),e.setGraphicSize(u),s.setGraphicSize(u),h.setGraphicSize(1.4*u|0),a.setGraphicSize(.8*u|0),_.setGraphicSize(u),a.updateHitbox(),i.updateHitbox(),e.updateHitbox(),s.updateHitbox(),h.updateHitbox(),_.updateHitbox(),this.bgGirls=new Pa(-100,190),this.bgGirls.scrollFactor.set(.9,.9),"roses"==t&&n.save.data.distractions&&this.bgGirls.getScared(),this.bgGirls.setGraphicSize(this.bgGirls.get_width()*y.daPixelZoom|0),this.bgGirls.updateHitbox(),n.save.data.distractions&&this.add(this.bgGirls);break;case"schoolEvil":y.curStage="schoolEvil",Lb.Optimize||(new Il(Yt.ALL,2,-1,3,2),new Il(Yt.ALL,2,-1,5,2)),(t=new O(400,200)).set_frames(La.fromSparrow(K.getPath("images/weeb/animatedEvilSchool.png","IMAGE","week6"),K.getPath("images/weeb/animatedEvilSchool.xml","TEXT","week6"))),t.animation.addByPrefix("idle","background 2",24),t.animation.play("idle"),t.scrollFactor.set(.8,.9),t.scale.set(6,6),this.add(t);break;default:this.defaultCamZoom=.9,y.curStage="stage",t=new O(-600,-200).loadGraphic(K.getPath("images/stageback.png","IMAGE",null)),n.save.data.antialiasing&&t.set_antialiasing(!0),t.scrollFactor.set(.9,.9),t.set_active(!1),this.add(t),(t=new O(-650,600).loadGraphic(K.getPath("images/stagefront.png","IMAGE",null))).setGraphicSize(1.1*t.get_width()|0),t.updateHitbox(),n.save.data.antialiasing&&t.set_antialiasing(!0),t.scrollFactor.set(.9,.9),t.set_active(!1),this.add(t),(i=new O(-500,-300).loadGraphic(K.getPath("images/stagecurtains.png","IMAGE",null))).setGraphicSize(.9*i.get_width()|0),i.updateHitbox(),n.save.data.antialiasing&&i.set_antialiasing(!0),i.scrollFactor.set(1.3,1.3),i.set_active(!1),this.add(i)}if(t="gf",null==y.SONG.gfVersion)switch(y.storyWeek){case 4:t="gf-car";break;case 5:t="gf-christmas";break;case 6:t="gf-pixel"}else t=y.SONG.gfVersion;switch(i="",t){case"gf-car":i="gf-car";break;case"gf-christmas":i="gf-christmas";break;case"gf-mii":i="gf-mii";break;case"gf-pixel":i="gf-pixel";break;default:i="gf"}switch(y.gf=new Fd(400,130,i),y.gf.scrollFactor.set(.95,.95),"post-mortal"==y.SONG.song.toLowerCase()&&(this.useDad2=!0),y.dad=new Fd(100,100,y.SONG.player2),this.useDad2&&(this.dad2=new Fd(100,100,y.SONG.player2,!1,!0),this.dad2.set_visible(!1)),t=new ka(y.dad.getGraphicMidpoint().x,y.dad.getGraphicMidpoint().y),y.SONG.player2){case"austin":(i=y.dad).set_x(i.x+50),this.useDad2&&(i=y.dad).set_x(i.x+50);break;case"dad":(i=t).set_x(i.x+400);break;case"eteled1":(i=y.dad).set_y(i.y+105),(i=y.dad).set_x(i.x-20);break;case"eteled2":case"eteled3":(i=y.dad).set_y(i.y+160),(i=y.dad).set_x(i.x-20);break;case"gf":y.dad.setPosition(y.gf.x,y.gf.y),y.gf.set_visible(!1),y.isStoryMode&&((i=t).set_x(i.x+600),this.tweenCamIn());break;case"monster":(i=y.dad).set_y(i.y+100);break;case"monster-christmas":(i=y.dad).set_y(i.y+130);break;case"parents-christmas":(i=y.dad).set_x(i.x-500);break;case"pico":(i=t).set_x(i.x+600),(i=y.dad).set_y(i.y+300);break;case"senpai":case"senpai-angry":(i=y.dad).set_x(i.x+150),(i=y.dad).set_y(i.y+360),t.set(y.dad.getGraphicMidpoint().x+300,y.dad.getGraphicMidpoint().y);break;case"spirit":n.save.data.distractions&&!Lb.Optimize&&(i=new go(y.dad,null,4,24,.3,.069),this.add(i)),(i=y.dad).set_x(i.x-150),(i=y.dad).set_y(i.y+100),t.set(y.dad.getGraphicMidpoint().x+300,y.dad.getGraphicMidpoint().y);break;case"spooky":(i=y.dad).set_y(i.y+200)}switch(y.boyfriend=new Pc(770,450,y.SONG.player1),"bf-austin"==y.SONG.player1&&((i=y.boyfriend).set_y(i.y-260),(i=y.boyfriend).set_x(i.x-230)),y.curStage){case"hallway":switch(t.set_x(1176.3),t.set_y(515.87),(i=y.boyfriend).set_x(i.x+585),(i=y.boyfriend).set_y(i.y+65),(i=y.gf).set_x(i.x+180),(i=y.gf).set_y(i.y-20),(i=y.dad).set_x(i.x+17),(i=y.dad).set_y(i.y+63),this.useDad2&&((i=this.dad2).set_x(i.x+17),(i=this.dad2).set_y(i.y+63)),i=y.gf,_=qb.get_hue(y.gf.color),e=y.gf.color,s=(Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255))-Math.min((e>>16&255)/255,Math.min((e>>8&255)/255,(255&e)/255)))/Math.max((e>>16&255)/255,Math.max((e>>8&255)/255,(255&e)/255)),null==(a=1)&&(a=1),e=qb._new(),s=.5-(h=+s)/2,u=_%360/60,_=h*(1-Math.abs(u%2-1))+s,h+=s,0|u){case 0:null==a&&(a=1),e=16777215&(e=-256&(e=-65281&(e=-16711681&e|(255<(u=Math.round(255*h))?255:u<0?0:u)<<16)|(255<(u=Math.round(255*_))?255:u<0?0:u)<<8)|(255<(u=Math.round(255*s))?255:u<0?0:u))|(255<(u=Math.round(255*a))?255:u<0?0:u)<<24;break;case 1:null==a&&(a=1),e=16777215&(e=-256&(e=-65281&(e=-16711681&e|(255<(u=Math.round(255*_))?255:u<0?0:u)<<16)|(255<(u=Math.round(255*h))?255:u<0?0:u)<<8)|(255<(u=Math.round(255*s))?255:u<0?0:u))|(255<(u=Math.round(255*a))?255:u<0?0:u)<<24;break;case 2:null==a&&(a=1),e=16777215&(e=-256&(e=-65281&(e=-16711681&e|(255<(u=Math.round(255*s))?255:u<0?0:u)<<16)|(255<(u=Math.round(255*h))?255:u<0?0:u)<<8)|(255<(u=Math.round(255*_))?255:u<0?0:u))|(255<(u=Math.round(255*a))?255:u<0?0:u)<<24;break;case 3:null==a&&(a=1),e=16777215&(e=-256&(e=-65281&(e=-16711681&e|(255<(u=Math.round(255*s))?255:u<0?0:u)<<16)|(255<(u=Math.round(255*_))?255:u<0?0:u)<<8)|(255<(u=Math.round(255*h))?255:u<0?0:u))|(255<(u=Math.round(255*a))?255:u<0?0:u)<<24;break;case 4:null==a&&(a=1),e=16777215&(e=-256&(e=-65281&(e=-16711681&e|(255<(u=Math.round(255*_))?255:u<0?0:u)<<16)|(255<(u=Math.round(255*s))?255:u<0?0:u)<<8)|(255<(u=Math.round(255*h))?255:u<0?0:u))|(255<(u=Math.round(255*a))?255:u<0?0:u)<<24;break;case 5:null==a&&(a=1),e=16777215&(e=-256&(e=-65281&(e=-16711681&e|(255<(u=Math.round(255*h))?255:u<0?0:u)<<16)|(255<(u=Math.round(255*s))?255:u<0?0:u)<<8)|(255<(u=Math.round(255*_))?255:u<0?0:u))|(255<(u=Math.round(255*a))?255:u<0?0:u)<<24}i.set_color(e);break;case"limo":(i=y.boyfriend).set_y(i.y-220),(i=y.boyfriend).set_x(i.x+280),n.save.data.distractions&&(this.resetFastCar(),this.add(this.fastCar));break;case"mall":(i=y.boyfriend).set_x(i.x+200);break;case"mallEvil":(i=y.boyfriend).set_x(i.x+320),(i=y.dad).set_y(i.y-80);break;case"mii-channel":case"mii-channel-dark":case"mii-channel-glitch":(i=y.boyfriend).set_x(i.x+595),(i=y.boyfriend).set_y(i.y+55),(i=y.gf).set_x(i.x+180),(i=y.gf).set_y(i.y),(i=y.dad).set_x(i.x+47),(i=y.dad).set_y(i.y+43),t.set_x(1056),t.set_y(510.69);break;case"school":(i=y.boyfriend).set_x(i.x+200),(i=y.boyfriend).set_y(i.y+220),(i=y.gf).set_x(i.x+180),(i=y.gf).set_y(i.y+300);break;case"schoolEvil":(i=y.boyfriend).set_x(i.x+200),(i=y.boyfriend).set_y(i.y+220),(i=y.gf).set_x(i.x+180),(i=y.gf).set_y(i.y+300)}switch(this.glitchLayer=new yb,this.add(this.glitchLayer),Lb.Optimize||(this.add(y.gf),"limo"==y.curStage&&this.add(this.limo),this.add(y.dad),this.useDad2&&this.add(this.dad2),this.add(y.boyfriend)),y.curStage){case"mii-channel":(i=new O(-449,-299)).set_frames(La.fromSparrow(K.getPath("images/miibuttons.png","IMAGE","eteled"),K.getPath("images/miibuttons.xml","TEXT","eteled"))),i.animation.addByPrefix("idle","stagecurtains",24),i.animation.play("idle"),i.updateHitbox(),n.save.data.antialiasing&&i.set_antialiasing(!0),i.scrollFactor.set(1.17,1.17),this.add(i);break;case"mii-channel-glitch":this.channelOverlay=new O(-550,-230).loadGraphic(K.getPath("images/overlayphase2.png","IMAGE","eteled")),n.save.data.antialiasing&&this.channelOverlay.set_antialiasing(!0),this.channelOverlay.scrollFactor.set(1,1),this.channelOverlay.set_active(!1),this.add(this.channelOverlay),this.miiButtons=new O(-449,-299),this.miiButtons.set_frames(La.fromSparrow(K.getPath("images/Glitchmiibuttons.png","IMAGE","eteled"),K.getPath("images/Glitchmiibuttons.xml","TEXT","eteled"))),this.miiButtons.animation.addByPrefix("idle","stagecurtains",24),this.miiButtons.animation.play("idle"),this.miiButtons.updateHitbox(),n.save.data.antialiasing&&this.miiButtons.set_antialiasing(!0),this.miiButtons.scrollFactor.set(1.17,1.17),this.add(this.miiButtons)}if(this.foregroundGlitchLayer=new yb,this.add(this.foregroundGlitchLayer),y.loadRep&&(Lb.useDownscroll=y.rep.replay.isDownscroll,Lb.safeFrames=y.rep.replay.sf,Lb.botPlay=!0),Ea.trace("uh "+Lb.safeFrames,{fileName:"source/PlayState.hx",lineNumber:1247,className:"PlayState",methodName:"create"}),Ea.trace("SF CALC: "+Math.floor(Lb.safeFrames/60*1e3),{fileName:"source/PlayState.hx",lineNumber:1249,className:"PlayState",methodName:"create"}),T.songPosition=-5e3,this.strumLine=new O(0,50).makeGraphic(n.width,10),this.strumLine.scrollFactor.set(),Lb.useDownscroll&&this.strumLine.set_y(n.height-165),y.strumLineNotes=new yb,this.add(y.strumLineNotes),y.glitchedStrumLineNotes=new yb,this.add(y.glitchedStrumLineNotes),y.playerStrums=new yb,y.cpuStrums=new yb,y.glitchedPlayerStrums=new yb,y.glitchedCpuStrums=new yb,this.generateStaticArrows(0),this.generateStaticArrows(1),this.generateGlitchArrows(0),this.generateGlitchArrows(1),null==y.SONG.song?Ea.trace("song is null???",{fileName:"source/PlayState.hx",lineNumber:1281,className:"PlayState",methodName:"create"}):Ea.trace("song looks gucci",{fileName:"source/PlayState.hx",lineNumber:1283,className:"PlayState",methodName:"create"}),this.generateSong(y.SONG.song),Ea.trace("generated",{fileName:"source/PlayState.hx",lineNumber:1287,className:"PlayState",methodName:"create"}),this.camFollow=new Ja(0,0,1,1),this.camFollow.setPosition(t.x,t.y),null!=y.prevCamFollow&&(this.camFollow=y.prevCamFollow,y.prevCamFollow=null),this.add(this.camFollow),n.camera.follow(this.camFollow,Gl.LOCKON,30/za.__cast(Fa.get_current().getChildAt(0),xb).getFPS()*.04),n.camera.set_zoom(this.defaultCamZoom),t=n.camera,i=this.camFollow.getPosition(),t.scroll.set(i.x-.5*t.width,i.y-.5*t.height),i._weak&&i.put(),t=n.worldBounds,e=i=0,s=n.width,null==(a=n.height)&&(a=0),null==s&&(s=0),null==e&&(e=0),t.x=i=null==i?0:i,t.y=e,t.width=s,t.height=a,n.fixedTimestep=!1,n.save.data.songPosition&&(y.songPosBG=new O(0,10).loadGraphic(K.getPath("images/healthBar.png","IMAGE",null)),Lb.useDownscroll&&y.songPosBG.set_y(.9*n.height+45),y.songPosBG.screenCenter(Ce.X),y.songPosBG.scrollFactor.set(),this.add(y.songPosBG),y.songPosBar=new mi(y.songPosBG.x+4,y.songPosBG.y+4,Yh.LEFT_TO_RIGHT,y.songPosBG.get_width()-8|0,y.songPosBG.get_height()-8|0,this,"songPositionBar",0,9e4),y.songPosBar.scrollFactor.set(),y.songPosBar.createFilledBar(-8355712,-16711936),this.add(y.songPosBar),t=new ub(y.songPosBG.x+y.songPosBG.get_width()/2-5*y.SONG.song.length,y.songPosBG.y,0,y.SONG.song,16),Lb.useDownscroll&&(i=t).set_y(i.y-3),t.setFormat("assets/fonts/vcr.ttf",16,-1,"right",Zc.OUTLINE,-16777216),t.scrollFactor.set(),this.add(t),t.set_cameras([this.camHUD])),this.healthBarBG=new O(0,.9*n.height).loadGraphic(K.getPath("images/healthBar.png","IMAGE",null)),Lb.useDownscroll&&this.healthBarBG.set_y(50),this.healthBarBG.screenCenter(Ce.X),this.healthBarBG.scrollFactor.set(),this.add(this.healthBarBG),this.healthBar=new mi(this.healthBarBG.x+4,this.healthBarBG.y+4,Yh.RIGHT_TO_LEFT,this.healthBarBG.get_width()-8|0,this.healthBarBG.get_height()-8|0,this,"health",0,2),this.healthBar.scrollFactor.set(),this.healthBar.createFilledBar(qb.fromString("#"+y.dad.iconColor),qb.fromString("#"+y.boyfriend.iconColor)),this.add(this.healthBar),this.kadeEngineWatermark=new ub(4,this.healthBarBG.y+50,0,y.SONG.song+" - "+cd.difficultyFromInt(y.storyDifficulty)+(xb.watermarks?" | KE "+fe.kadeEngineVer:""),16),this.kadeEngineWatermark.setFormat("assets/fonts/vcr.ttf",16,-1,"right",Zc.OUTLINE,-16777216),this.kadeEngineWatermark.scrollFactor.set(),this.add(this.kadeEngineWatermark),Lb.useDownscroll&&this.kadeEngineWatermark.set_y(.9*n.height+45),this.scoreTxt=new ub(n.width/2-235,this.healthBarBG.y+50,0,"",20),this.scoreTxt.screenCenter(Ce.X),this.originalX=this.scoreTxt.x,this.scoreTxt.scrollFactor.set(),this.scoreTxt.setFormat("assets/fonts/vcr.ttf",16,-1,"center",Zc.OUTLINE,-16777216),this.add(this.scoreTxt),this.replayTxt=new ub(this.healthBarBG.x+this.healthBarBG.get_width()/2-75,this.healthBarBG.y+(Lb.useDownscroll?100:-100),0,"REPLAY",20),this.replayTxt.setFormat("assets/fonts/vcr.ttf",42,-1,"right",Zc.OUTLINE,-16777216),this.replayTxt.set_borderSize(4),this.replayTxt.set_borderQuality(2),this.replayTxt.scrollFactor.set(),y.loadRep&&this.add(this.replayTxt),this.botPlayState=new ub(this.healthBarBG.x+this.healthBarBG.get_width()/2-75,this.healthBarBG.y+(Lb.useDownscroll?100:-100),0,"BOTPLAY",20),this.botPlayState.setFormat("assets/fonts/vcr.ttf",42,-1,"right",Zc.OUTLINE,-16777216),this.botPlayState.scrollFactor.set(),this.botPlayState.set_borderSize(4),this.botPlayState.set_borderQuality(2),Lb.botPlay&&!y.loadRep&&this.add(this.botPlayState),this.iconP1=new eh(y.SONG.player1,!0),this.iconP1.set_y(this.healthBar.y-this.iconP1.get_height()/2),this.add(this.iconP1),this.iconP2=new eh(y.SONG.player2,!1),this.iconP2.set_y(this.healthBar.y-this.iconP2.get_height()/2),this.add(this.iconP2),y.strumLineNotes.set_cameras([this.camHUD]),y.glitchedStrumLineNotes.set_cameras([this.camHUD]),this.notes.set_cameras([this.camHUD]),this.glitchedNotes.set_cameras([this.camHUD]),this.healthBar.set_cameras([this.camHUD]),this.healthBarBG.set_cameras([this.camHUD]),this.iconP1.set_cameras([this.camHUD]),this.iconP2.set_cameras([this.camHUD]),this.scoreTxt.set_cameras([this.camHUD]),n.save.data.songPosition&&(y.songPosBG.set_cameras([this.camHUD]),y.songPosBar.set_cameras([this.camHUD])),this.kadeEngineWatermark.set_cameras([this.camHUD]),y.loadRep&&this.replayTxt.set_cameras([this.camHUD]),this.startingSong=!0,Ea.trace("starting",{fileName:"source/PlayState.hx",lineNumber:1430,className:"PlayState",methodName:"create"}),this.usingGlitchedNotes=!0,y.isStoryMode)switch(Y.replace(this.curSong," ","-").toLowerCase()){case"dream-of-peace":case"post-mortal":y.playCutscene?(this.camHUD.set_visible(!1),this.camGame.set_visible(!1),t=md.getNextState(new Dl("assets/videos/Introfinaleteled.webm",function(){var t=new y;n.game._state.switchTo(t)&&(n.game._requestedState=t)}),!1),n.game._state.switchTo(t)&&(n.game._requestedState=t),y.playCutscene=!1):(this.camHUD.set_visible(!0),this.camGame.set_visible(!0),this.schoolIntro());break;default:this.startCountdown()}else this.startCountdown();y.loadRep||(y.rep=new ng("na")),Fa.get_current().stage.addEventListener("keyDown",z(this,this.handleInput)),Fa.get_current().stage.addEventListener("keyUp",z(this,this.releaseInput)),da.prototype.create.call(this)},schoolIntro:function(){var e=this,s=new O(-n.width,-n.height).makeGraphic(5*n.width,5*n.height,-16777216);s.scrollFactor.set(),this.add(s);var t=new O(-100,-100).makeGraphic(2*n.width,2*n.height,-58575);t.scrollFactor.set(),new O,"roses"!=Y.replace(y.SONG.song," ","-").toLowerCase()&&"thorns"!=Y.replace(y.SONG.song," ","-").toLowerCase()||(this.remove(s),"thorns"==Y.replace(y.SONG.song," ","-").toLowerCase()&&this.add(t)),(new Tc).start(.3,function(t){s.set_alpha(s.alpha-.15),0<s.alpha?t.reset(.3):(e.inCutscene=!0,(t=new ji(!1,e.dialogue)).scrollFactor.set(),t.finishThing=z(e,e.startCountdown),t.set_cameras([e.camHUD]),e.add(t),e.remove(s))})},startTimer:null,perfectMode:null,luaWiggles:null,startCountdown:function(){var h=this;if(this.inCutscene=!1,this.appearStaticArrows(),0!=y.startTime){for(var t=[],e=0,s=this.unspawnNotes.length;e<s;){var i=e++;(i=this.unspawnNotes[i]).strumTime-y.startTime<=0?t.push(i):i.strumTime-y.startTime<3500&&(this.notes.add(i),i.mustPress?i.set_y(y.playerStrums.members[Math.floor(Math.abs(i.noteData))].y+.45*(y.startTime-i.strumTime)*Mb.roundDecimal(1==Lb.scrollSpeed?y.SONG.speed:Lb.scrollSpeed,2)-i.noteYOff):i.set_y(y.strumLineNotes.members[Math.floor(Math.abs(i.noteData))].y+.45*(y.startTime-i.strumTime)*Mb.roundDecimal(1==Lb.scrollSpeed?y.SONG.speed:Lb.scrollSpeed,2)-i.noteYOff),t.push(i),i=new Kc(i.strumTime,i.noteData,i.prevNote,i.isSustainNote,!1,i.noteSkin,!0),this.usingGlitchedNotes&&this.glitchedNotes.add(i))}for(e=0;e<t.length;)i=t[e],++e,ma.remove(this.unspawnNotes,i)}this.talking=!1,this.startedCountdown=!0,T.songPosition=0,T.songPosition-=5*T.crochet;var _=0;this.startTimer=(new Tc).start(T.crochet/1e3,function(t){y.dad.dance(),h.useDad2&&h.dad2.dance(),y.gf.dance(),y.boyfriend.playAnim("idle");var e=Object.create(null);e.default=["ready","set","go"],e.school=["weeb/pixelUI/ready-pixel","weeb/pixelUI/set-pixel","weeb/pixelUI/date-pixel"],e.schoolEvil=["weeb/pixelUI/ready-pixel","weeb/pixelUI/set-pixel","weeb/pixelUI/date-pixel"];var s=e.default;t="";for(var i=ya.keysIterator(e);i.hasNext();){var a=i.next();a==y.curStage&&(Ea.trace(a+" - "+y.curStage,{fileName:"source/PlayState.hx",lineNumber:1606,className:"PlayState",methodName:"startCountdown"}),s=e[a],-1!=y.curStage.indexOf("school")&&(t="-pixel"))}switch(_){case 0:n.sound.play(K.sound("intro3"+t),.6);break;case 1:var r=(new O).loadGraphic(K.getPath("images/"+s[0]+".png","IMAGE",null));r.scrollFactor.set(),r.updateHitbox(),Y.startsWith(y.curStage,"school")&&r.setGraphicSize(r.get_width()*y.daPixelZoom|0),r.screenCenter(),h.add(r),Ta.tween(e=r,{y:e.set_y(e.y+100),alpha:0},T.crochet/1e3,{ease:Ra.cubeInOut,onComplete:function(t){r.destroy()}}),n.sound.play(K.sound("intro2"+t),.6);break;case 2:var l=(new O).loadGraphic(K.getPath("images/"+s[1]+".png","IMAGE",null));l.scrollFactor.set(),Y.startsWith(y.curStage,"school")&&l.setGraphicSize(l.get_width()*y.daPixelZoom|0),l.screenCenter(),h.add(l),Ta.tween(e=l,{y:e.set_y(e.y+100),alpha:0},T.crochet/1e3,{ease:Ra.cubeInOut,onComplete:function(t){l.destroy()}}),n.sound.play(K.sound("intro1"+t),.6);break;case 3:var o=(new O).loadGraphic(K.getPath("images/"+s[2]+".png","IMAGE",null));o.scrollFactor.set(),Y.startsWith(y.curStage,"school")&&o.setGraphicSize(o.get_width()*y.daPixelZoom|0),o.updateHitbox(),o.screenCenter(),h.add(o),Ta.tween(e=o,{y:e.set_y(e.y+100),alpha:0},T.crochet/1e3,{ease:Ra.cubeInOut,onComplete:function(t){o.destroy()}}),n.sound.play(K.sound("introGo"+t),.6)}_+=1},5)},previousFrameTime:null,lastReportedPlayheadPosition:null,songTime:null,getKey:function(t){for(var e=ya.kvIterator(cb.fromStringMap.h);e.hasNext();){var n=e.next(),s=n.key;if(t==n.value)return s}return null},keys:null,releaseInput:function(t){var e=cb.toStringMap;switch(s=t.keyCode){case 8:s=8;break;case 9:s=9;break;case 13:s=13;break;case 27:s=27;break;case 32:s=32;break;case 33:s=49;break;case 34:s=222;break;case 35:s=51;break;case 36:s=52;break;case 37:s=53;break;case 38:s=55;break;case 39:s=222;break;case 40:s=57;break;case 41:s=48;break;case 42:s=56;break;case 44:s=188;break;case 45:s=189;break;case 46:s=190;break;case 47:s=191;break;case 48:s=48;break;case 49:s=49;break;case 50:s=50;break;case 51:s=51;break;case 52:s=52;break;case 53:s=53;break;case 54:s=54;break;case 55:s=55;break;case 56:s=56;break;case 57:s=57;break;case 58:case 59:s=186;break;case 60:s=60;break;case 61:s=187;break;case 62:s=190;break;case 63:s=191;break;case 64:s=50;break;case 91:s=219;break;case 92:s=220;break;case 93:s=221;break;case 94:s=54;break;case 95:s=189;break;case 96:s=192;break;case 97:s=65;break;case 98:s=66;break;case 99:s=67;break;case 100:s=68;break;case 101:s=69;break;case 102:s=70;break;case 103:s=71;break;case 104:s=72;break;case 105:s=73;break;case 106:s=74;break;case 107:s=75;break;case 108:s=76;break;case 109:s=77;break;case 110:s=78;break;case 111:s=79;break;case 112:s=80;break;case 113:s=81;break;case 114:s=82;break;case 115:s=83;break;case 116:s=84;break;case 117:s=85;break;case 118:s=86;break;case 119:s=87;break;case 120:s=88;break;case 121:s=89;break;case 122:s=90;break;case 127:s=46;break;case 1073741881:s=20;break;case 1073741882:s=112;break;case 1073741883:s=113;break;case 1073741884:s=114;break;case 1073741885:s=115;break;case 1073741886:s=116;break;case 1073741887:s=117;break;case 1073741888:s=118;break;case 1073741889:s=119;break;case 1073741890:s=120;break;case 1073741891:s=121;break;case 1073741892:s=122;break;case 1073741893:s=123;break;case 1073741894:s=301;break;case 1073741895:s=145;break;case 1073741896:s=19;break;case 1073741897:s=45;break;case 1073741898:s=36;break;case 1073741899:s=33;break;case 1073741901:s=35;break;case 1073741902:s=34;break;case 1073741903:s=39;break;case 1073741904:s=37;break;case 1073741905:s=40;break;case 1073741906:s=38;break;case 1073741907:s=144;break;case 1073741908:s=111;break;case 1073741909:s=106;break;case 1073741910:s=109;break;case 1073741911:s=107;break;case 1073741912:s=13;break;case 1073741913:s=97;break;case 1073741914:s=98;break;case 1073741915:s=99;break;case 1073741916:s=100;break;case 1073741917:s=101;break;case 1073741918:s=102;break;case 1073741919:s=103;break;case 1073741920:s=104;break;case 1073741921:s=105;break;case 1073741922:s=96;break;case 1073741923:s=110;break;case 1073741925:s=302;break;case 1073741928:s=124;break;case 1073741929:s=125;break;case 1073741930:s=126;break;case 1073741982:s=13;break;case 1073742044:s=110;break;case 1073742048:s=17;break;case 1073742049:s=16;break;case 1073742050:s=18;break;case 1073742051:s=15;break;case 1073742052:s=17;break;case 1073742053:s=16;break;case 1073742054:s=18;break;case 1073742055:s=15}var s=e.h[s],e=[n.save.data.leftBind,n.save.data.downBind,n.save.data.upBind,n.save.data.rightBind],i=-1;switch(t.keyCode){case 37:i=0;break;case 38:i=2;break;case 39:i=3;break;case 40:i=1}t=0;for(var a=e.length;t<a;){var r=t++;e[r].toLowerCase()==s.toLowerCase()&&(i=r)}-1!=i&&(this.keys[i]=!1)},handleInput:function(t){if(!(Lb.botPlay||y.loadRep||this.paused)){var e=cb.toStringMap;switch(r=t.keyCode){case 8:r=8;break;case 9:r=9;break;case 13:r=13;break;case 27:r=27;break;case 32:r=32;break;case 33:r=49;break;case 34:r=222;break;case 35:r=51;break;case 36:r=52;break;case 37:r=53;break;case 38:r=55;break;case 39:r=222;break;case 40:r=57;break;case 41:r=48;break;case 42:r=56;break;case 44:r=188;break;case 45:r=189;break;case 46:r=190;break;case 47:r=191;break;case 48:r=48;break;case 49:r=49;break;case 50:r=50;break;case 51:r=51;break;case 52:r=52;break;case 53:r=53;break;case 54:r=54;break;case 55:r=55;break;case 56:r=56;break;case 57:r=57;break;case 58:case 59:r=186;break;case 60:r=60;break;case 61:r=187;break;case 62:r=190;break;case 63:r=191;break;case 64:r=50;break;case 91:r=219;break;case 92:r=220;break;case 93:r=221;break;case 94:r=54;break;case 95:r=189;break;case 96:r=192;break;case 97:r=65;break;case 98:r=66;break;case 99:r=67;break;case 100:r=68;break;case 101:r=69;break;case 102:r=70;break;case 103:r=71;break;case 104:r=72;break;case 105:r=73;break;case 106:r=74;break;case 107:r=75;break;case 108:r=76;break;case 109:r=77;break;case 110:r=78;break;case 111:r=79;break;case 112:r=80;break;case 113:r=81;break;case 114:r=82;break;case 115:r=83;break;case 116:r=84;break;case 117:r=85;break;case 118:r=86;break;case 119:r=87;break;case 120:r=88;break;case 121:r=89;break;case 122:r=90;break;case 127:r=46;break;case 1073741881:r=20;break;case 1073741882:r=112;break;case 1073741883:r=113;break;case 1073741884:r=114;break;case 1073741885:r=115;break;case 1073741886:r=116;break;case 1073741887:r=117;break;case 1073741888:r=118;break;case 1073741889:r=119;break;case 1073741890:r=120;break;case 1073741891:r=121;break;case 1073741892:r=122;break;case 1073741893:r=123;break;case 1073741894:r=301;break;case 1073741895:r=145;break;case 1073741896:r=19;break;case 1073741897:r=45;break;case 1073741898:r=36;break;case 1073741899:r=33;break;case 1073741901:r=35;break;case 1073741902:r=34;break;case 1073741903:r=39;break;case 1073741904:r=37;break;case 1073741905:r=40;break;case 1073741906:r=38;break;case 1073741907:r=144;break;case 1073741908:r=111;break;case 1073741909:r=106;break;case 1073741910:r=109;break;case 1073741911:r=107;break;case 1073741912:r=13;break;case 1073741913:r=97;break;case 1073741914:r=98;break;case 1073741915:r=99;break;case 1073741916:r=100;break;case 1073741917:r=101;break;case 1073741918:r=102;break;case 1073741919:r=103;break;case 1073741920:r=104;break;case 1073741921:r=105;break;case 1073741922:r=96;break;case 1073741923:r=110;break;case 1073741925:r=302;break;case 1073741928:r=124;break;case 1073741929:r=125;break;case 1073741930:r=126;break;case 1073741982:r=13;break;case 1073742044:r=110;break;case 1073742048:r=17;break;case 1073742049:r=16;break;case 1073742050:r=18;break;case 1073742051:r=15;break;case 1073742052:r=17;break;case 1073742053:r=16;break;case 1073742054:r=18;break;case 1073742055:r=15}r=e.h[r];var s=[n.save.data.leftBind,n.save.data.downBind,n.save.data.upBind,n.save.data.rightBind],i=-1;switch(t.keyCode){case 37:i=0;break;case 38:i=2;break;case 39:i=3;break;case 40:i=1}for(t=0,e=s.length;t<e;){var a=t++;s[a].toLowerCase()==r.toLowerCase()&&(i=a)}if(-1==i)Ea.trace("couldn't find a keybind with the code "+r,{fileName:"source/PlayState.hx",lineNumber:1775,className:"PlayState",methodName:"handleInput"});else if(this.keys[i])Ea.trace("ur already holding "+r,{fileName:"source/PlayState.hx",lineNumber:1780,className:"PlayState",methodName:"handleInput"});else{this.keys[i]=!0;var r=new ho(T.songPosition,null,!1,"miss",i),l=[];if(this.notes.forEachAlive(function(t){t.canBeHit&&t.mustPress&&!t.tooLate&&!t.wasGoodHit&&t.noteData==i&&l.push(t)}),l.sort(function(t,e){return t.strumTime-e.strumTime|0}),0!=l.length){for(s=null,t=0;t<l.length;)if(a=l[t],++t,!a.isSustainNote){s=a;break}if(null!=s){if(1<l.length)for(t=0,e=l.length;t<e;)0!=(a=t++)&&(!(a=l[a]).isSustainNote&&a.strumTime-s.strumTime<2&&(Ea.trace("found a stacked/really close note "+(a.strumTime-s.strumTime),{fileName:"source/PlayState.hx",lineNumber:1824,className:"PlayState",methodName:"handleInput"}),a.kill(),this.notes.remove(a,!0),this.usingGlitchedNotes&&this.glitchedNotes.remove(a,!0),a.destroy()));this.goodNoteHit(s),t=-(s.strumTime-T.songPosition),r.hit=!0,r.hitJudge=If.CalculateRating(t,Math.floor(Lb.safeFrames/60*1e3)),r.nearestNote=[s.strumTime,s.noteData,s.sustainLength]}}else!n.save.data.ghost&&this.songStarted&&(this.noteMiss(i,null),r.hit=!1,r.hitJudge="shit",r.nearestNote=[],this.health-=.1)}}},songStarted:null,startSong:function(){if(this.startingSong=!1,this.songStarted=!0,this.previousFrameTime=n.game.ticks,this.lastReportedPlayheadPosition=0,!this.paused){var t=n.sound,e=Y.replace(y.SONG.song," ","-").toLowerCase();switch(e){case"dad-battle":e="dadbattle";break;case"philly-nice":e="philly"}t.playMusic("songs:assets/songs/"+e+"/Inst.ogg",1,!1)}switch(y.SONG.song.toLowerCase()){case"diagraphephobia":this.queuedDialoguePath=K.getPath("data/post-mortal/dialogue.txt","TEXT",null),n.sound.music.onComplete=z(this,this.startEndDialogue);break;case"dream-of-peace":this.queuedDialoguePath=K.getPath("data/diagraphephobia/dialogue.txt","TEXT",null),n.sound.music.onComplete=z(this,this.startEndDialogue);break;case"post-mortal":this.queuedDialoguePath=K.getPath("data/post-mortal/dialoguepart3.txt","TEXT",null),n.sound.music.onComplete=z(this,this.startEndDialogue);break;default:n.sound.music.onComplete=z(this,this.endSong)}switch(this.vocals.play(),this.songLength=n.sound.music._length,n.save.data.songPosition&&(this.remove(y.songPosBG),this.remove(y.songPosBar),this.remove(this.songName),y.songPosBG=new O(0,10).loadGraphic(K.getPath("images/healthBar.png","IMAGE",null)),Lb.useDownscroll&&y.songPosBG.set_y(.9*n.height+45),y.songPosBG.screenCenter(Ce.X),y.songPosBG.scrollFactor.set(),this.add(y.songPosBG),y.songPosBar=new mi(y.songPosBG.x+4,y.songPosBG.y+4,Yh.LEFT_TO_RIGHT,y.songPosBG.get_width()-8|0,y.songPosBG.get_height()-8|0,this,"songPositionBar",0,this.songLength-1e3),y.songPosBar.set_numDivisions(1e3),y.songPosBar.scrollFactor.set(),y.songPosBar.createFilledBar(-8355712,-16711936),this.add(y.songPosBar),e=new ub(y.songPosBG.x+y.songPosBG.get_width()/2-5*y.SONG.song.length,y.songPosBG.y,0,y.SONG.song,16),Lb.useDownscroll&&(t=e).set_y(t.y-3),e.setFormat("assets/fonts/vcr.ttf",16,-1,"right",Zc.OUTLINE,-16777216),e.scrollFactor.set(),this.add(e),y.songPosBG.set_cameras([this.camHUD]),y.songPosBar.set_cameras([this.camHUD]),e.set_cameras([this.camHUD])),this.curSong){case"Blammed":case"Bopeebo":case"Cocoa":case"Eggnog":case"Philly Nice":this.allowedToHeadbang=!0;break;default:this.allowedToHeadbang=!1}for(this.useVideo&&cc.get().resume(),n.sound.music.set_time(y.startTime),this.vocals.set_time(y.startTime),T.songPosition=y.startTime,t=y.startTime=0,e=this.unspawnNotes.length;t<e;){var s=t++;this.unspawnNotes[s].strumTime<y.startTime&&ma.remove(this.unspawnNotes,this.unspawnNotes[s])}},debugNum:null,generateSong:function(t){if(t=y.SONG,T.changeBPM(t.bpm),this.curSong=t.song,y.SONG.needsVoices){var e=new bg,s=Y.replace(y.SONG.song," ","-").toLowerCase();switch(s){case"dad-battle":s="dadbattle";break;case"philly-nice":s="philly"}this.vocals=e.loadEmbedded("songs:assets/songs/"+s+"/Voices.ogg")}else this.vocals=new bg;for(Ea.trace("loaded vocals",{fileName:"source/PlayState.hx",lineNumber:1994,className:"PlayState",methodName:"generateSong"}),n.sound.list.add(this.vocals),this.notes=new yb,this.add(this.notes),this.glitchedNotes=new yb,this.add(this.glitchedNotes),t=t.notes,s=e=0;s<t.length;){var i=t[s];++s;for(var a=0,r=i.sectionNotes;a<r.length;){var l=r[a];++a;var o=l[0]+n.save.data.offset+y.songOffset;o<0&&(o=0);var h=l[1]%4|0,_=i.mustHitSection;3<l[1]&&(_=!i.mustHitSection);var u=0<this.unspawnNotes.length?this.unspawnNotes[this.unspawnNotes.length-1|0]:null,c=new Kc(o,h,u,!1,!1,(_?y.boyfriend:y.dad).noteSkin);if(_||!Lb.Optimize){c.sustainLength=l[2],c.scrollFactor.set(0,0);var d=c.sustainLength;d/=T.stepCrochet,this.unspawnNotes.push(c),0<d&&(c.isParent=!0);for(var f=l=0,d=Math.floor(d);f<d;){var p=f++,u=this.unspawnNotes[this.unspawnNotes.length-1|0];(u=new Kc(o+T.stepCrochet*p+T.stepCrochet,h,u,!0,null,(_?y.boyfriend:y.dad).noteSkin)).scrollFactor.set(),this.unspawnNotes.push(u),u.mustPress=_,u.mustPress&&(p=u).set_x(p.x+n.width/2),(u.parent=c).children.push(u),u.spotInLine=l,++l}c.mustPress=_,c.mustPress&&(o=c).set_x(o.x+n.width/2)}}++e}this.unspawnNotes.sort(z(this,this.sortByShit)),this.generatedMusic=!0},sortByShit:function(t,e){var n=0;return(t=t.strumTime)<(e=e.strumTime)?n=-1:e<t&&(n=1),n},generateStaticArrows:function(t){for(var e=0;e<4;){var s=e++,i=new O(0,this.strumLine.y),a="normal";if(!Lb.Optimize||0!=t){if(null==y.SONG.noteStyle?6==y.storyWeek&&(a="pixel"):a=y.SONG.noteStyle,"pixel"==a)switch(i.loadGraphic(K.getPath("images/weeb/pixelUI/arrows-pixels.png","IMAGE",null),!0,17,17),i.animation.add("green",[6]),i.animation.add("red",[7]),i.animation.add("blue",[5]),i.animation.add("purplel",[4]),i.setGraphicSize(i.get_width()*y.daPixelZoom|0),i.updateHitbox(),i.set_antialiasing(!1),Math.abs(s)){case 0:(a=i).set_x(a.x+0*Kc.swagWidth),i.animation.add("static",[0]),i.animation.add("pressed",[4,8],12,!1),i.animation.add("confirm",[12,16],24,!1);break;case 1:(a=i).set_x(a.x+Kc.swagWidth),i.animation.add("static",[1]),i.animation.add("pressed",[5,9],12,!1),i.animation.add("confirm",[13,17],24,!1);break;case 2:(a=i).set_x(a.x+2*Kc.swagWidth),i.animation.add("static",[2]),i.animation.add("pressed",[6,10],12,!1),i.animation.add("confirm",[14,18],12,!1);break;case 3:(a=i).set_x(a.x+3*Kc.swagWidth),i.animation.add("static",[3]),i.animation.add("pressed",[7,11],12,!1),i.animation.add("confirm",[15,19],24,!1)}else 0==t&&(a="notes/"+y.dad.noteSkin,i.set_frames(La.fromSparrow(K.getPath("images/"+a+".png","IMAGE",null),K.getPath("images/"+a+".xml","TEXT",null)))),1==t&&(a="notes/"+y.boyfriend.noteSkin,i.set_frames(La.fromSparrow(K.getPath("images/"+a+".png","IMAGE",null),K.getPath("images/"+a+".xml","TEXT",null)))),i.animation.addByPrefix(this.dataColor[0],"arrow"+this.dataSuffix[0]),i.animation.addByPrefix(this.dataColor[1],"arrow"+this.dataSuffix[1]),i.animation.addByPrefix(this.dataColor[2],"arrow"+this.dataSuffix[2]),i.animation.addByPrefix(this.dataColor[3],"arrow"+this.dataSuffix[3]),a=this.dataSuffix[s].toLowerCase(),i.animation.addByPrefix("static","arrow"+this.dataSuffix[s]),i.animation.addByPrefix("pressed",a+" press",24,!1),i.animation.addByPrefix("confirm",a+" confirm",24,!1),(a=i).set_x(a.x+Kc.swagWidth*s),n.save.data.antialiasing&&i.set_antialiasing(!0),i.setGraphicSize(.7*i.get_width()|0);switch(i.updateHitbox(),i.scrollFactor.set(),i.set_alpha(0),y.isStoryMode||((a=i).set_y(a.y-10),Ta.tween(i,{y:i.y+10,alpha:1},1,{ease:Ra.circOut,startDelay:.5+.2*s})),i.ID=s,t){case 0:y.cpuStrums.add(i);break;case 1:y.playerStrums.add(i)}i.animation.play("static"),(s=i).set_x(s.x+50),(s=i).set_x(s.x+n.width/2*t),Lb.Optimize&&(s=i).set_x(s.x-275),y.cpuStrums.forEach(function(t){t.centerOffsets()}),y.strumLineNotes.add(i)}}},generateGlitchArrows:function(t){for(var e=0;e<4;){var s,i=e++,a=new O(0,this.strumLine.y);if(!Lb.Optimize||0!=t){switch(0==t&&(s="notes/"+y.dad.noteSkin+"Glitch",a.set_frames(La.fromSparrow(K.getPath("images/"+s+".png","IMAGE",null),K.getPath("images/"+s+".xml","TEXT",null)))),1==t&&(s="notes/"+y.boyfriend.noteSkin+"Glitch",a.set_frames(La.fromSparrow(K.getPath("images/"+s+".png","IMAGE",null),K.getPath("images/"+s+".xml","TEXT",null)))),a.animation.addByPrefix(this.dataColor[0],"arrow"+this.dataSuffix[0]),a.animation.addByPrefix(this.dataColor[1],"arrow"+this.dataSuffix[1]),a.animation.addByPrefix(this.dataColor[2],"arrow"+this.dataSuffix[2]),a.animation.addByPrefix(this.dataColor[3],"arrow"+this.dataSuffix[3]),s=this.dataSuffix[i].toLowerCase(),a.animation.addByPrefix("static","arrow"+this.dataSuffix[i]),a.animation.addByPrefix("pressed",s+" press",24,!1),a.animation.addByPrefix("confirm",s+" confirm",24,!1),(s=a).set_x(s.x+Kc.swagWidth*i),n.save.data.antialiasing&&a.set_antialiasing(!0),a.setGraphicSize(.7*a.get_width()|0),a.updateHitbox(),a.scrollFactor.set(),a.set_alpha(0),y.isStoryMode||((s=a).set_y(s.y-10),Ta.tween(a,{y:a.y+10,alpha:1},1,{ease:Ra.circOut,startDelay:.5+.2*i})),a.ID=i,a.animation.play("static"),(i=a).set_x(i.x+50),(i=a).set_x(i.x+n.width/2*t),Lb.Optimize&&(i=a).set_x(i.x-275),t){case 0:y.glitchedCpuStrums.add(a);break;case 1:y.glitchedPlayerStrums.add(a)}y.glitchedCpuStrums.forEach(function(t){t.centerOffsets()}),a.set_visible(!1),y.glitchedStrumLineNotes.add(a)}}},appearStaticArrows:function(){y.strumLineNotes.forEach(function(t){y.isStoryMode&&t.set_alpha(1)})},tweenCamIn:function(){Ta.tween(n.camera,{zoom:1.3},4*T.stepCrochet/1e3,{ease:Ra.elasticInOut})},openSubState:function(t){this.paused&&(null!=n.sound.music&&(n.sound.music.pause(),this.vocals.pause()),this.startTimer.finished||(this.startTimer.active=!1)),da.prototype.openSubState.call(this,t)},closeSubState:function(){this.paused&&(null==n.sound.music||this.startingSong||this.resyncVocals(),this.startTimer.finished||(this.startTimer.active=!0),this.paused=!1),da.prototype.closeSubState.call(this)},resyncVocals:function(){this.resyncingVocals?(this.vocals.pause(),n.sound.music.play(),T.songPosition=n.sound.music._time,this.vocals.set_time(T.songPosition),this.vocals.play()):(T.songPosition=0,n.sound.music.set_time(0))},paused:null,startedCountdown:null,canPause:null,nps:null,maxNPS:null,stopUpdate:null,removedVideo:null,currentBPM:null,updateFrame:null,update:function(t){var a=this;if(this.perfectMode=!1,4==this.updateFrame){ac.clearTimings();for(var e=0,s=0,i=y.SONG.eventObjects;s<i.length;){var r,l=i[s];++s,"BPM Change"==l.type&&(r=l.position,ac.addTiming(r,l.value,1/0,0),0!=e&&((l=ac.AllTimings[e-1]).endBeat=r,l.length=(l.endBeat-l.startBeat)/(l.bpm/60),ac.AllTimings[e].startTime=l.startTime+l.length),++e)}this.updateFrame++}else 5!=this.updateFrame&&this.updateFrame++;for(null!=(e=ac.getTimingAtTimestamp(T.songPosition))&&((e=e.bpm)!=T.bpm&&(Ea.trace("BPM CHANGE to "+e,{fileName:"source/PlayState.hx",lineNumber:2539,className:"PlayState",methodName:"update"}),T.changeBPM(e,!1))),Lb.scrollSpeed=Lb.scrollSpeed,(e=!!Lb.botPlay&&(e=n.keys.justPressed).keyManager.checkStatus(49,e.status))&&this.camHUD.set_visible(!this.camHUD.visible),this.useVideo&&null!=cc.get()&&!this.stopUpdate&&cc.get().ended&&!this.removedVideo&&(this.remove(this.videoSprite),Fa.get_current().stage.window.onFocusOut.remove(z(this,this.focusOut)),Fa.get_current().stage.window.onFocusIn.remove(z(this,this.focusIn)),this.removedVideo=!0),e=this.notesHitArray.length-1;0<=e;)null!=(s=this.notesHitArray[e])&&s.getTime()+1e3<(new Date).getTime()?ma.remove(this.notesHitArray,s):e=0,--e;if(this.nps=this.notesHitArray.length,this.nps>this.maxNPS&&(this.maxNPS=this.nps),(e=n.keys.justPressed).keyManager.checkStatus(57,e.status)&&this.iconP1.swapOldIcon(),"philly"==y.curStage&&this.trainMoving&&!Lb.Optimize&&(this.trainFrameTiming+=t,.041666666666666664<=this.trainFrameTiming&&(this.updateTrainPos(),this.trainFrameTiming=0)),da.prototype.update.call(this,t),this.scoreTxt.set_text(If.CalculateRanking(this.songScore,this.songScoreDef,this.nps,this.maxNPS,this.accuracy)),t=this.scoreTxt.textField.get_length()*this.scoreTxt.frameHeight,this.scoreTxt.set_x(this.originalX-t/2+335),Kb.player1.controls._pause.check()&&this.startedCountdown&&this.canPause&&!this.cannotDie&&(this.persistentUpdate=!1,this.paused=this.persistentDraw=!0,null==(t=.1)&&(t=50),n.random.float(0,100)<t?(Ea.trace("GITAROO MAN EASTER EGG",{fileName:"source/PlayState.hx",lineNumber:2684,className:"PlayState",methodName:"update"}),t=new ln,n.game._state.switchTo(t)&&(n.game._requestedState=t)):this.openSubState(new Hl(y.boyfriend.getScreenPosition().x,y.boyfriend.getScreenPosition().y))),(e=n.keys.justPressed).keyManager.checkStatus(55,e.status)&&(this.useVideo&&(cc.get().stop(),this.remove(this.videoSprite),this.removedVideo=!0),this.cannotDie=!0,t=new X,n.game._state.switchTo(t)&&(n.game._requestedState=t),Fa.get_current().stage.removeEventListener("keyDown",z(this,this.handleInput)),Fa.get_current().stage.removeEventListener("keyUp",z(this,this.releaseInput))),this.iconP1.setGraphicSize(150+.5*(this.iconP1.get_width()-150)|0),this.iconP2.setGraphicSize(150+.5*(this.iconP2.get_width()-150)|0),this.iconP1.updateHitbox(),this.iconP2.updateHitbox(),this.iconP1.set_x(this.healthBar.x+(.01*this.healthBar.get_width()*Mb.remapToRange(this.healthBar.get_percent(),0,100,100,0)-26)),this.iconP2.set_x(this.healthBar.x+.01*this.healthBar.get_width()*Mb.remapToRange(this.healthBar.get_percent(),0,100,100,0)-(this.iconP2.get_width()-26)),2<this.health&&(this.health=2),this.healthBar.get_percent()<20?this.iconP1.animation._curAnim.set_curFrame(1):this.iconP1.animation._curAnim.set_curFrame(0),80<this.healthBar.get_percent()?this.iconP2.animation._curAnim.set_curFrame(1):this.iconP2.animation._curAnim.set_curFrame(0),this.startingSong?this.startedCountdown&&(T.songPosition+=1e3*n.elapsed,0<=T.songPosition&&this.startSong()):(T.songPosition+=1e3*n.elapsed,this.resyncingVocals&&(this.songPositionBar=T.songPosition),this.paused||(this.songTime+=n.game.ticks-this.previousFrameTime,this.previousFrameTime=n.game.ticks,T.lastSongPos!=T.songPosition&&(this.songTime=(this.songTime+T.songPosition)/2,T.lastSongPos=T.songPosition))),this.generatedMusic&&null!=y.SONG.notes[this.curStep/16|0]){if(this.allowedToHeadbang&&("danceLeft"==y.gf.animation._curAnim.name||"danceRight"==y.gf.animation._curAnim.name||"idle"==y.gf.animation._curAnim.name))switch(this.curSong){case"Blammed":30<this.curBeat&&this.curBeat<190&&(this.curBeat<90||128<this.curBeat)&&(2==this.curBeat%4?this.triggeredAlready||(y.gf.playAnim("cheer"),this.triggeredAlready=!0):this.triggeredAlready=!1);break;case"Bopeebo":5<this.curBeat&&this.curBeat<130&&(7==this.curBeat%8?this.triggeredAlready||(y.gf.playAnim("cheer"),this.triggeredAlready=!0):this.triggeredAlready=!1);break;case"Cocoa":this.curBeat<170&&(this.curBeat<65||130<this.curBeat&&this.curBeat<145)&&(15==this.curBeat%16?this.triggeredAlready||(y.gf.playAnim("cheer"),this.triggeredAlready=!0):this.triggeredAlready=!1);break;case"Eggnog":10<this.curBeat&&111!=this.curBeat&&this.curBeat<220&&(7==this.curBeat%8?this.triggeredAlready||(y.gf.playAnim("cheer"),this.triggeredAlready=!0):this.triggeredAlready=!1);break;case"Philly Nice":this.curBeat<250&&184!=this.curBeat&&216!=this.curBeat&&(8==this.curBeat%16?this.triggeredAlready||(y.gf.playAnim("cheer"),this.triggeredAlready=!0):this.triggeredAlready=!1)}if(this.camFollow.x!=y.dad.getMidpoint().x+150&&!y.SONG.notes[this.curStep/16|0].mustHitSection){if(e=t=0,this.useSetCamera||this.camFollow.setPosition(y.dad.getMidpoint().x+150+t,y.dad.getMidpoint().y-100+e),!this.useSetCamera)switch(y.dad.curCharacter){case"mom":case"mom-car":this.camFollow.set_y(y.dad.getMidpoint().y);break;case"senpai":case"senpai-angry":this.camFollow.set_y(y.dad.getMidpoint().y-430),this.camFollow.set_x(y.dad.getMidpoint().x-100)}switch(y.curStage){case"hallway":this.camFollow.set_x(657.81),"austin"==y.SONG.player2?this.camFollow.set_y(400.56):this.camFollow.set_y(501.56);break;case"mii-channel":case"mii-channel-dark":case"mii-channel-glitch":this.screamMode?this.camFollow.set_x(500):this.camFollow.set_x(689),this.camFollow.set_y(501.62)}}if(y.SONG.notes[this.curStep/16|0].mustHitSection&&this.camFollow.x!=y.boyfriend.getMidpoint().x-100)switch(e=t=0,this.useSetCamera||this.camFollow.setPosition(y.boyfriend.getMidpoint().x-100+t,y.boyfriend.getMidpoint().y-100+e),y.curStage){case"hallway":this.camFollow.set_x(1176.3),"bf-austin"==y.SONG.player1?this.camFollow.set_y(400.87):this.camFollow.set_y(515.87);break;case"limo":this.camFollow.set_x(y.boyfriend.getMidpoint().x-300);break;case"mall":this.camFollow.set_y(y.boyfriend.getMidpoint().y-200);break;case"mii-channel":case"mii-channel-dark":case"mii-channel-glitch":this.screamMode?(this.camFollow.set_x(500),this.camFollow.set_y(501.62)):(this.camFollow.set_x(1056),this.camFollow.set_y(510.69));break;case"school":this.camFollow.set_x(y.boyfriend.getMidpoint().x-200),this.camFollow.set_y(y.boyfriend.getMidpoint().y-200);break;case"schoolEvil":this.camFollow.set_x(y.boyfriend.getMidpoint().x-200),this.camFollow.set_y(y.boyfriend.getMidpoint().y-200)}}if(this.camZooming&&(t=this.defaultCamZoom,n.camera.set_zoom(t+.95*(n.camera.zoom-t)),this.camHUD.set_zoom(1+.95*(this.camHUD.zoom-1))),"Fresh"==this.curSong)switch(this.curBeat){case 16:this.camZooming=!0,this.gfSpeed=2;break;case 48:this.gfSpeed=1;break;case 80:this.gfSpeed=2;break;case 112:this.gfSpeed=1}if("Bopeebo"==this.curSong)switch(this.curBeat){case 128:case 129:case 130:this.vocals.set_volume(0)}if(this.health<=0&&!this.cannotDie&&(this.usedTimeTravel?this.health=1:(y.boyfriend.stunned=!0,this.persistentDraw=this.persistentUpdate=!1,this.paused=!0,(e=this.vocals).cleanup(e.autoDestroy,!0),(e=n.sound.music).cleanup(e.autoDestroy,!0),this.openSubState(new Fl(y.boyfriend.getScreenPosition().x,y.boyfriend.getScreenPosition().y)))),!this.inCutscene&&n.save.data.resetButton&&((e=n.keys.justPressed).keyManager.checkStatus(82,e.status)&&(y.boyfriend.stunned=!0,this.persistentDraw=this.persistentUpdate=!1,this.paused=!0,(e=this.vocals).cleanup(e.autoDestroy,!0),(e=n.sound.music).cleanup(e.autoDestroy,!0),this.openSubState(new Fl(y.boyfriend.getScreenPosition().x,y.boyfriend.getScreenPosition().y)))),null!=this.unspawnNotes[0]&&this.unspawnNotes[0].strumTime-T.songPosition<3500&&(t=this.unspawnNotes[0],this.notes.add(t),t.isSustainNote?t.set_cameras([this.camSustains]):t.set_cameras([this.camNotes]),e=new Kc(t.strumTime,t.noteData,t.prevNote,t.isSustainNote,!1,t.noteSkin,!0),this.usingGlitchedNotes&&this.glitchedNotes.add(e),t=this.unspawnNotes.indexOf(t),this.unspawnNotes.splice(t,1)),this.generatedMusic){if(!this.glitched)for(l=new me(this.glitchedNotes.members,null);l.hasNext();)l.next().set_visible(!1);Kb.player1.controls._left.check(),Kb.player1.controls._down.check(),Kb.player1.controls._up.check(),Kb.player1.controls._right.check(),this.notes.forEachAlive(function(s){var t,e;if(s.tooLate?(s.set_active(!1),s.set_visible(!1)):(s.set_visible(!0),s.set_active(!0)),s.modifiedByLua||(Lb.useDownscroll?(s.mustPress?s.set_y(y.playerStrums.members[Math.floor(Math.abs(s.noteData))].y+.45*(T.songPosition-s.strumTime)*Mb.roundDecimal(1==Lb.scrollSpeed?y.SONG.speed:Lb.scrollSpeed,2)-s.noteYOff):s.set_y(y.strumLineNotes.members[Math.floor(Math.abs(s.noteData))].y+.45*(T.songPosition-s.strumTime)*Mb.roundDecimal(1==Lb.scrollSpeed?y.SONG.speed:Lb.scrollSpeed,2)-s.noteYOff),s.isSustainNote&&(Y.endsWith(s.animation._curAnim.name,"end")&&null!=s.prevNote?(t=s).set_y(t.y+s.prevNote.get_height()):(t=s).set_y(t.y+s.get_height()/2),(Lb.botPlay||(!s.mustPress||s.wasGoodHit||s.prevNote.wasGoodHit&&!s.canBeHit)&&s.y-s.offset.y*s.scale.y+s.get_height()>=a.strumLine.y+Kc.swagWidth/2)&&((t=new ta(0,0,2*s.frameWidth,2*s.frameHeight)).height=(y.strumLineNotes.members[Math.floor(Math.abs(s.noteData))].y+Kc.swagWidth/2-s.y)/s.scale.y,t.y=s.frameHeight-t.height,s.set_clipRect(t)))):(s.mustPress?s.set_y(y.playerStrums.members[Math.floor(Math.abs(s.noteData))].y-.45*(T.songPosition-s.strumTime)*Mb.roundDecimal(1==Lb.scrollSpeed?y.SONG.speed:Lb.scrollSpeed,2)+s.noteYOff):s.set_y(y.strumLineNotes.members[Math.floor(Math.abs(s.noteData))].y-.45*(T.songPosition-s.strumTime)*Mb.roundDecimal(1==Lb.scrollSpeed?y.SONG.speed:Lb.scrollSpeed,2)+s.noteYOff),s.isSustainNote&&((t=s).set_y(t.y-s.get_height()/2),(Lb.botPlay||(!s.mustPress||s.wasGoodHit||s.prevNote.wasGoodHit&&!s.canBeHit)&&s.y+s.offset.y*s.scale.y<=a.strumLine.y+Kc.swagWidth/2)&&((t=new ta(0,0,s.get_width()/s.scale.x,s.get_height()/s.scale.y)).y=(y.strumLineNotes.members[Math.floor(Math.abs(s.noteData))].y+Kc.swagWidth/2-s.y)/s.scale.y,t.height-=t.y,s.set_clipRect(t))))),a.usingGlitchedNotes&&(a.glitchedNotes.members[a.notes.members.indexOf(s)].set_x(s.x),a.glitchedNotes.members[a.notes.members.indexOf(s)].set_y(s.y)),!s.mustPress&&s.wasGoodHit&&("Tutorial"!=y.SONG.song&&(a.camZooming=!0),t="",null!=y.SONG.notes[Math.floor(a.curStep/16)]&&y.SONG.notes[Math.floor(a.curStep/16)].altAnim&&(t="-alt"),e=0|Math.abs(s.noteData),a.screamMode?y.dad.playAnim("scream"):(y.dad.playAnim("sing"+a.dataSuffix[e]+t,!0),a.useDad2&&a.dad2.playAnim("sing"+a.dataSuffix[e]+t,!0)),n.save.data.cpuStrums&&(y.cpuStrums.forEach(function(t){var e;Math.abs(s.noteData)==t.ID&&t.animation.play("confirm",!0),"confirm"!=t.animation._curAnim.name||Y.startsWith(y.curStage,"school")?t.centerOffsets():(t.centerOffsets(),(e=t.offset).set_x(e.x-13),(e=t.offset).set_y(e.y-13))}),y.glitchedCpuStrums.forEach(function(t){var e;Math.abs(s.noteData)==t.ID&&t.animation.play("confirm",!0),"confirm"!=t.animation._curAnim.name||Y.startsWith(y.curStage,"school")?t.centerOffsets():(t.centerOffsets(),(e=t.offset).set_x(e.x-13),(e=t.offset).set_y(e.y-13))})),y.dad.holdTimer=0,a.useDad2&&(a.dad2.holdTimer=0),y.SONG.needsVoices&&a.vocals.set_volume(1),s.set_active(!1),s.kill(),a.notes.remove(s,!0),a.usingGlitchedNotes&&a.glitchedNotes.remove(s,!0),s.destroy()),s.mustPress&&!s.modifiedByLua?(s.set_visible(y.playerStrums.members[Math.floor(Math.abs(s.noteData))].visible),s.set_x(y.playerStrums.members[Math.floor(Math.abs(s.noteData))].x),s.isSustainNote||(s.modAngle=y.playerStrums.members[Math.floor(Math.abs(s.noteData))].angle),s.sustainActive&&s.set_alpha(y.playerStrums.members[Math.floor(Math.abs(s.noteData))].alpha),s.modAngle=y.playerStrums.members[Math.floor(Math.abs(s.noteData))].angle):s.wasGoodHit||s.modifiedByLua||(s.set_visible(y.strumLineNotes.members[Math.floor(Math.abs(s.noteData))].visible),s.set_x(y.strumLineNotes.members[Math.floor(Math.abs(s.noteData))].x),s.isSustainNote||(s.modAngle=y.strumLineNotes.members[Math.floor(Math.abs(s.noteData))].angle),s.sustainActive&&s.set_alpha(y.strumLineNotes.members[Math.floor(Math.abs(s.noteData))].alpha),s.modAngle=y.strumLineNotes.members[Math.floor(Math.abs(s.noteData))].angle),s.isSustainNote&&((t=s).set_x(t.x+(s.get_width()/2+20)),Y.startsWith(y.curStage,"school")&&(t=s).set_x(t.x-11)),(s.mustPress&&s.tooLate&&!Lb.useDownscroll||s.mustPress&&s.tooLate&&Lb.useDownscroll)&&s.mustPress){if(s.isSustainNote&&s.wasGoodHit)s.kill(),a.notes.remove(s,!0),a.usingGlitchedNotes&&a.glitchedNotes.remove(s,!0);else if(y.loadRep&&s.isSustainNote){if(null!=a.findByTime(s.strumTime))a.totalNotesHit+=1;else if(s.isSustainNote||(a.health-=.1),a.vocals.set_volume(0),y.theFunne&&!s.isSustainNote&&a.noteMiss(s.noteData,s),s.isParent)for(a.health-=.2,Ea.trace("hold fell over at the start",{fileName:"source/PlayState.hx",lineNumber:3464,className:"PlayState",methodName:"update"}),t=0,e=s.children;t<e.length;){var i=e[t];++t,i.set_alpha(.3),i.sustainActive=!1}else if(!s.wasGoodHit&&s.isSustainNote&&s.sustainActive&&s.spotInLine!=s.parent.children.length){for(a.health-=.2,Ea.trace("hold fell over at "+s.spotInLine,{fileName:"source/PlayState.hx",lineNumber:3479,className:"PlayState",methodName:"update"}),t=0,e=s.parent.children;t<e.length;)i=e[t],++t,i.set_alpha(.3),i.sustainActive=!1;s.parent.wasGoodHit&&y.misses++,a.updateAccuracy()}}else if(s.isSustainNote||(a.health-=.1),a.vocals.set_volume(0),y.theFunne&&!s.isSustainNote&&a.noteMiss(s.noteData,s),s.isParent)for(a.health-=.2,Ea.trace("hold fell over at the start",{fileName:"source/PlayState.hx",lineNumber:3503,className:"PlayState",methodName:"update"}),t=0,e=s.children;t<e.length;)i=e[t],++t,i.set_alpha(.3),i.sustainActive=!1,Ea.trace(i.alpha,{fileName:"source/PlayState.hx",lineNumber:3508,className:"PlayState",methodName:"update"});else if(!s.wasGoodHit&&s.isSustainNote&&s.sustainActive&&s.spotInLine!=s.parent.children.length){for(a.health-=.2,Ea.trace("hold fell over at "+s.spotInLine,{fileName:"source/PlayState.hx",lineNumber:3519,className:"PlayState",methodName:"update"}),t=0,e=s.parent.children;t<e.length;)i=e[t],++t,i.set_alpha(.3),i.sustainActive=!1,Ea.trace(i.alpha,{fileName:"source/PlayState.hx",lineNumber:3524,className:"PlayState",methodName:"update"});s.parent.wasGoodHit&&y.misses++,a.updateAccuracy()}s.set_visible(!1),s.kill(),a.notes.remove(s,!0),a.usingGlitchedNotes&&a.glitchedNotes.remove(s,!0)}})}n.save.data.cpuStrums&&(y.cpuStrums.forEach(function(t){t.animation.get_finished()&&(t.animation.play("static"),t.centerOffsets())}),y.glitchedCpuStrums.forEach(function(t){t.animation.get_finished()&&(t.animation.play("static"),t.centerOffsets())})),!this.inCutscene&&this.songStarted&&this.keyShit()},startEndDialogue:function(){for(var t=new me(y.strumLineNotes.members,null);t.hasNext();){var e=t.next();e.set_visible(!1)}for(t=new me(y.glitchedStrumLineNotes.members,null);t.hasNext();)(e=t.next()).set_visible(!1);this.healthBar.set_visible(!1),this.everybodyShouldDance=!1,this.healthBarBG.set_visible(!1),this.iconP2.set_visible(!1),this.iconP1.set_visible(!1),this.canPause=this.resyncingVocals=this.camZooming=!1,(t=n.sound.music).cleanup(t.autoDestroy,!0),(t=this.vocals).cleanup(t.autoDestroy,!0),t=cd.coolTextFile(this.queuedDialoguePath),(t=new ji(!1,t,"2")).scrollFactor.set(),F.skipNextTransIn=!0,F.skipNextTransOut=!0,t.finishThing=z(this,this.endSong),t.set_cameras([this.camHUD]),this.add(t)},endSong:function(){if(Fa.get_current().stage.removeEventListener("keyDown",z(this,this.handleInput)),Fa.get_current().stage.removeEventListener("keyUp",z(this,this.releaseInput)),this.useVideo&&(cc.get().stop(),Fa.get_current().stage.window.onFocusOut.remove(z(this,this.focusOut)),Fa.get_current().stage.window.onFocusIn.remove(z(this,this.focusIn)),y.instance.remove(y.instance.videoSprite)),y.isStoryMode&&(y.campaignMisses=y.misses),y.loadRep?(Lb.botPlay=!1,Lb.scrollSpeed=1,Lb.useDownscroll=!1):y.rep.SaveReplay(this.saveNotes,this.saveJudge,this.replayAna),290<n.save.data.fpsCap&&za.__cast(Fa.get_current().getChildAt(0),xb).setFPSCap(290),this.canPause=!1,n.sound.music.set_volume(0),this.vocals.set_volume(0),n.sound.music.pause(),this.vocals.pause(),y.SONG.validScore){var t=Y.replace(y.SONG.song," ","-");switch(t){case"Dad-Battle":t="Dadbattle";break;case"Philly-Nice":t="Philly"}Gb.saveScore(t,Math.round(this.songScore),y.storyDifficulty),Gb.saveCombo(t,If.GenerateLetterRank(this.accuracy),y.storyDifficulty)}if(y.offsetTesting)n.sound.playMusic(K.getPath("music/freakyMenu.ogg","MUSIC",null)),y.offsetTesting=!1,t=md.getNextState(new Ad,!1),n.game._state.switchTo(t)&&(n.game._requestedState=t),n.save.data.offset=this.offsetTest;else if(y.isStoryMode)if(y.campaignScore+=Math.round(this.songScore),ma.remove(y.storyPlaylist,y.storyPlaylist[0]),y.storyPlaylist.length<=0)this.transIn=F.defaultTransIn,this.transOut=F.defaultTransOut,this.paused=!0,(t=n.sound.music).cleanup(t.autoDestroy,!0),(t=this.vocals).cleanup(t.autoDestroy,!0),n.save.data.scoreScreen?(this.openSubState(new Jl),(new Tc).start(1,function(t){y.inResults=!0})):(n.sound.playMusic(K.getPath("music/freakyMenu.ogg","MUSIC",null)),T.changeBPM(102),t=new ge,n.game._state.switchTo(t)&&(n.game._requestedState=t)),y.SONG.validScore&&(Bd.isLoggedIn&&((t=Qc.core.medals.h[60961])._data.unlocked||t.sendUnlock()),Gb.saveWeekScore(y.storyWeek,y.campaignScore,y.storyDifficulty)),ge.unlockNextWeek(y.storyWeek);else{switch(t=Y.replace(y.storyPlaylist[0]," ","-")){case"Dad-Battle":t="Dadbattle";break;case"Philly-Nice":t="Philly"}var e,t=Gb.formatSong(t,y.storyDifficulty);Ea.trace("LOADING NEXT SONG",{fileName:"source/PlayState.hx",lineNumber:3743,className:"PlayState",methodName:"endSong"}),Ea.trace(t,{fileName:"source/PlayState.hx",lineNumber:3744,className:"PlayState",methodName:"endSong"}),"eggnog"==Y.replace(y.storyPlaylist[0]," ","-").toLowerCase()&&((e=new O(-n.width*n.camera.zoom,-n.height*n.camera.zoom).makeGraphic(3*n.width,3*n.height,-16777216)).scrollFactor.set(),this.add(e),this.camHUD.set_visible(!1),n.sound.play(K.sound("Lights_Shut_off"))),F.skipNextTransIn=!0,F.skipNextTransOut=!0,y.prevCamFollow=this.camFollow,y.SONG=nf.loadFromJson(t,y.storyPlaylist[0]),(t=n.sound.music).cleanup(t.autoDestroy,!0),t=md.getNextState(new y,!1),n.game._state.switchTo(t)&&(n.game._requestedState=t)}else Ea.trace("WENT BACK TO FREEPLAY??",{fileName:"source/PlayState.hx",lineNumber:3769,className:"PlayState",methodName:"endSong"}),this.paused=!0,(t=n.sound.music).cleanup(t.autoDestroy,!0),(t=this.vocals).cleanup(t.autoDestroy,!0),n.save.data.scoreScreen?(this.openSubState(new Jl),(new Tc).start(1,function(t){y.inResults=!0})):(t=new vb,n.game._state.switchTo(t)&&(n.game._requestedState=t))},endingSong:null,hits:null,offsetTest:null,timeShown:null,currentTimingShown:null,popUpScore:function(t){var e=this,s=-(t.strumTime-T.songPosition),i=ff.wife3(-s,T.timeScale);this.vocals.set_volume(1);var a=U.string(this.combo),r=new ub(0,0,0,a,32);r.screenCenter(),r.set_x(.55*n.width),(a=r).set_y(a.y-350),r.set_cameras([this.camHUD]);var l=new O,a=350;switch(1==n.save.data.accuracyMod&&(this.totalNotesHit+=i),_=t.rating){case"bad":_="bad",a=0,this.health-=.03,this.ss=!1,y.bads++,0==n.save.data.accuracyMod&&(this.totalNotesHit+=.5);break;case"good":_="good",this.ss=!(a=200),y.goods++,0==n.save.data.accuracyMod&&(this.totalNotesHit+=.75);break;case"shit":a=-300,this.combo=0,y.misses++,this.health-=.06,this.ss=!1,y.shits++,0==n.save.data.accuracyMod&&--this.totalNotesHit;break;case"sick":this.health<2&&(this.health+=.04),0==n.save.data.accuracyMod&&(this.totalNotesHit+=1),y.sicks++}if("shit"!=_||"bad"!=_){this.songScore+=Math.round(a),this.songScoreDef+=Math.round(Gd.convertScore(s));var o=i="";switch(Y.startsWith(y.curStage,"school")&&(i="weeb/pixelUI/",o="-pixel"),l.loadGraphic(K.getPath("images/"+(i+_+o)+".png","IMAGE",null)),l.screenCenter(),(a=l).set_y(a.y-50),l.set_x(r.x-125),n.save.data.changedHit&&(l.set_x(n.save.data.changedHitX),l.set_y(n.save.data.changedHitY)),l.acceleration.set_y(550),(a=l.velocity).set_y(a.y-n.random.int(140,175)),(a=l.velocity).set_x(a.x-n.random.int(0,10)),a=Kd.truncateFloat(s,3),Lb.botPlay&&!y.loadRep&&(a=0),y.loadRep&&(a=Kd.truncateFloat(this.findByTime(t.strumTime)[3],3)),null!=this.currentTimingShown&&this.remove(this.currentTimingShown),this.currentTimingShown=new ub(0,0,0,"0ms"),this.timeShown=0,_){case"good":this.currentTimingShown.set_color(-16744448);break;case"bad":case"shit":this.currentTimingShown.set_color(-65536);break;case"sick":this.currentTimingShown.set_color(-16711681)}if(this.currentTimingShown.set_borderStyle(Zc.OUTLINE),this.currentTimingShown.set_borderSize(1),this.currentTimingShown.set_borderColor(-16777216),this.currentTimingShown.set_text(a+"ms"),this.currentTimingShown.set_size(20),.03<=a&&y.offsetTesting){for(this.hits.shift(),this.hits.shift(),this.hits.shift(),this.hits.pop(),this.hits.pop(),this.hits.pop(),this.hits.push(a),a=_=0,t=this.hits;a<t.length;)s=t[a],++a,_+=s;this.offsetTest=Kd.truncateFloat(_/this.hits.length,2)}1!=this.currentTimingShown.alpha&&this.currentTimingShown.set_alpha(1),Lb.botPlay&&!y.loadRep||this.add(this.currentTimingShown);var h=(new O).loadGraphic(K.getPath("images/"+i+"combo"+o+".png","IMAGE",null));h.screenCenter(),h.set_x(l.x),h.set_y(l.y+100),h.acceleration.set_y(600),(a=h.velocity).set_y(a.y-150),this.currentTimingShown.screenCenter(),this.currentTimingShown.set_x(h.x+100),this.currentTimingShown.set_y(l.y+100),this.currentTimingShown.acceleration.set_y(600),(a=this.currentTimingShown.velocity).set_y(a.y-150),(a=h.velocity).set_x(a.x+n.random.int(1,10)),(a=this.currentTimingShown.velocity).set_x(a.x+h.velocity.x),Lb.botPlay&&!y.loadRep||this.add(l),Y.startsWith(y.curStage,"school")?(l.setGraphicSize(l.get_width()*y.daPixelZoom*.7|0),h.setGraphicSize(h.get_width()*y.daPixelZoom*.7|0)):(l.setGraphicSize(.7*l.get_width()|0),n.save.data.antialiasing&&l.set_antialiasing(!0),h.setGraphicSize(.7*h.get_width()|0),n.save.data.antialiasing&&h.set_antialiasing(!0)),this.currentTimingShown.updateHitbox(),h.updateHitbox(),l.updateHitbox(),this.currentTimingShown.set_cameras([this.camHUD]),h.set_cameras([this.camHUD]),l.set_cameras([this.camHUD]);var _=[],u=(this.combo+"").split("");for(this.combo>y.highestCombo&&(y.highestCombo=this.combo),1==u.length?(_.push(0),_.push(0)):2==u.length&&_.push(0),a=0,t=u.length;a<t;)s=a++,_.push(U.parseInt(u[s]));for(a=u=0;a<_.length;)s=_[a],++a,(s=[(new O).loadGraphic(K.getPath("images/"+i+"num"+(0|s)+o+".png","IMAGE",null))])[0].screenCenter(),s[0].set_x(l.x+43*u-50),s[0].set_y(l.y+100),s[0].set_cameras([this.camHUD]),Y.startsWith(y.curStage,"school")?s[0].setGraphicSize(s[0].get_width()*y.daPixelZoom|0):(n.save.data.antialiasing&&s[0].set_antialiasing(!0),s[0].setGraphicSize(.5*s[0].get_width()|0)),s[0].updateHitbox(),s[0].acceleration.set_y(n.random.int(200,300)),(t=s[0].velocity).set_y(t.y-n.random.int(140,160)),s[0].velocity.set_x(n.random.float(-5,5)),this.add(s[0]),Ta.tween(s[0],{alpha:0},.2,{onComplete:function(e){return function(t){e[0].destroy()}}(s),startDelay:.002*T.crochet}),++u;r.set_text(U.string(_)),Ta.tween(l,{alpha:0},.2,{startDelay:.001*T.crochet,onUpdate:function(t){null!=e.currentTimingShown&&(t=e.currentTimingShown).set_alpha(t.alpha-.02),e.timeShown++}}),Ta.tween(h,{alpha:0},.2,{onComplete:function(t){r.destroy(),h.destroy(),null!=e.currentTimingShown&&20<=e.timeShown&&(e.remove(e.currentTimingShown),e.currentTimingShown=null),l.destroy()},startDelay:.001*T.crochet}),this.curSection+=1}},NearlyEquals:function(t,e,n){return null==n&&(n=10),Math.abs(Mb.roundDecimal(t,1)-Mb.roundDecimal(e,1))<n},upHold:null,downHold:null,rightHold:null,leftHold:null,keyShit:function(){var s=this,i=[Kb.player1.controls._left.check(),Kb.player1.controls._down.check(),Kb.player1.controls._up.check(),Kb.player1.controls._right.check()],a=[Kb.player1.controls._leftP.check(),Kb.player1.controls._downP.check(),Kb.player1.controls._upP.check(),Kb.player1.controls._rightP.check()];Kb.player1.controls._leftR.check(),Kb.player1.controls._downR.check(),Kb.player1.controls._upR.check(),Kb.player1.controls._rightR.check();for(var t=[null,null,null,null],e=0,r=(a=Lb.botPlay?[!(i=[!1,!1,!1,!1]),!1,!1,!1]:a).length;e<r;){var l=e++;a[l]&&(t[l]=new ho(T.songPosition,null,!1,"miss",l))}if(-1!=i.indexOf(!0)&&this.generatedMusic&&this.notes.forEachAlive(function(t){t.isSustainNote&&t.canBeHit&&t.mustPress&&i[t.noteData]&&t.sustainActive&&(Ea.trace(t.sustainActive,{fileName:"source/PlayState.hx",lineNumber:4147,className:"PlayState",methodName:"keyShit"}),s.goodNoteHit(t))}),ve.gamepad||n.keys.justPressed.get_ANY()){if(-1!=a.indexOf(!0)&&this.generatedMusic){y.boyfriend.holdTimer=0;var o=[],h=[],_=[],u=[!1,!1,!1,!1];for(this.notes.forEachAlive(function(t){if(t.canBeHit&&t.mustPress&&!t.tooLate&&!t.wasGoodHit&&!u[t.noteData])if(-1!=h.indexOf(t.noteData)){u[t.noteData]=!0;for(var e=0;e<o.length;){var n=o[e];if(++e,n.noteData==t.noteData&&Math.abs(t.strumTime-n.strumTime)<10){_.push(t);break}if(n.noteData==t.noteData&&t.strumTime<n.strumTime){ma.remove(o,n),o.push(t);break}}}else u[t.noteData]=!0,o.push(t),h.push(t.noteData)}),e=0;e<_.length;)l=_[e],++e,l.kill(),this.notes.remove(l,!0),this.usingGlitchedNotes&&this.glitchedNotes.remove(l,!0),l.destroy();if(o.sort(function(t,e){return t.strumTime-e.strumTime|0}),l=[!1,!1,!1,!1],this.perfectMode)this.goodNoteHit(o[0]);else if(0<o.length){if(!n.save.data.ghost)for(e=0,r=a.length;e<r;){var c=e++;a[c]&&-1==h.indexOf(c)&&this.noteMiss(c,null)}for(e=0;e<o.length;)r=o[e],++e,a[r.noteData]&&!l[r.noteData]&&(0!=this.mashViolations&&this.mashViolations--,l[r.noteData]=!0,this.scoreTxt.set_color(-1),c=-(r.strumTime-T.songPosition),t[r.noteData].hit=!0,t[r.noteData].hitJudge=If.CalculateRating(c,Math.floor(Lb.safeFrames/60*1e3)),t[r.noteData].nearestNote=[r.strumTime,r.noteData,r.sustainLength],this.goodNoteHit(r))}if(y.boyfriend.holdTimer>.004*T.stepCrochet&&(-1==i.indexOf(!0)||Lb.botPlay))Y.startsWith(y.boyfriend.animation._curAnim.name,"sing")&&!Y.endsWith(y.boyfriend.animation._curAnim.name,"miss")&&10<=y.boyfriend.animation._curAnim.curFrame&&y.boyfriend.playAnim("idle");else if(!n.save.data.ghost)for(e=0,r=a.length;e<r;)c=e++,a[c]&&this.noteMiss(c,null)}if(!y.loadRep)for(e=0;e<t.length;)l=t[e],++e,null!=l&&this.replayAna.anaArray.push(l)}this.notes.forEachAlive(function(t){var e;(Lb.useDownscroll&&t.y>s.strumLine.y||!Lb.useDownscroll&&t.y<s.strumLine.y)&&(Lb.botPlay&&t.canBeHit&&t.mustPress||Lb.botPlay&&t.tooLate&&t.mustPress)&&(y.loadRep?(e=s.findByTime(t.strumTime),Ea.trace(e,{fileName:"source/PlayState.hx",lineNumber:4269,className:"PlayState",methodName:"keyShit"}),null!=e&&(s.goodNoteHit(t),y.boyfriend.holdTimer=t.sustainLength)):(s.goodNoteHit(t),y.boyfriend.holdTimer=t.sustainLength))}),y.boyfriend.holdTimer>.004*T.stepCrochet&&(-1==i.indexOf(!0)||Lb.botPlay)&&Y.startsWith(y.boyfriend.animation._curAnim.name,"sing")&&!Y.endsWith(y.boyfriend.animation._curAnim.name,"miss")&&10<=y.boyfriend.animation._curAnim.curFrame&&this.everybodyShouldDance&&y.boyfriend.playAnim("idle"),y.playerStrums.forEach(function(t){var e;a[t.ID]&&"confirm"!=t.animation._curAnim.name&&t.animation.play("pressed",!1),i[t.ID]||t.animation.play("static",!1),"confirm"!=t.animation._curAnim.name||Y.startsWith(y.curStage,"school")?t.centerOffsets():(t.centerOffsets(),(e=t.offset).set_x(e.x-13),(e=t.offset).set_y(e.y-13))}),y.glitchedPlayerStrums.forEach(function(t){var e;a[t.ID]&&"confirm"!=t.animation._curAnim.name&&t.animation.play("pressed",!1),i[t.ID]||t.animation.play("static",!1),"confirm"!=t.animation._curAnim.name||Y.startsWith(y.curStage,"school")?t.centerOffsets():(t.centerOffsets(),(e=t.offset).set_x(e.x-13),(e=t.offset).set_y(e.y-13))})},findByTime:function(t){for(var e=0,n=y.rep.replay.songNotes;e<n.length;){var s=n[e];if(++e,s[0]==t)return s}return null},findByTimeIndex:function(t){for(var e=0,n=y.rep.replay.songNotes.length;e<n;){var s=e++;if(y.rep.replay.songNotes[s][0]==t)return s}return-1},fuckingVolume:null,useVideo:null,playingDathing:null,videoSprite:null,focusOut:function(){this.paused||(this.persistentUpdate=!1,this.paused=this.persistentDraw=!0,null!=n.sound.music&&(n.sound.music.pause(),this.vocals.pause()),this.openSubState(new Hl(y.boyfriend.getScreenPosition().x,y.boyfriend.getScreenPosition().y)))},focusIn:function(){},backgroundVideo:function(t){},noteMiss:function(t,e){null==t&&(t=1),y.boyfriend.stunned||(5<this.combo&&Object.prototype.hasOwnProperty.call(y.gf.animOffsets.h,"sad")&&y.gf.playAnim("sad"),this.combo=0,y.misses++,null!=e?y.loadRep||(this.saveNotes.push([e.strumTime,0,t,166*Math.floor(y.rep.replay.sf/60*1e3)/166]),this.saveJudge.push("miss")):y.loadRep||(this.saveNotes.push([T.songPosition,0,t,166*Math.floor(y.rep.replay.sf/60*1e3)/166]),this.saveJudge.push("miss")),1==n.save.data.accuracyMod&&--this.totalNotesHit,null!=e&&e.isSustainNote||(this.songScore-=10),n.save.data.missSounds&&n.sound.play(K.sound("missnote"+n.random.int(1,3),null),n.random.float(.1,.2)),y.boyfriend.playAnim("sing"+this.dataSuffix[t]+"miss",!0),this.updateAccuracy())},updateAccuracy:function(){this.totalPlayed+=1,this.accuracy=Math.max(0,this.totalNotesHit/this.totalPlayed*100),this.accuracyDefault=Math.max(0,this.totalNotesHitDefault/this.totalPlayed*100)},getKeyPresses:function(t){var e=[];return this.notes.forEachAlive(function(t){t.canBeHit&&t.mustPress&&!t.tooLate&&(e.push(t),e.sort(function(t,e){return t.strumTime-e.strumTime|0}))}),1==e.length?e.length+1:e.length},mashing:null,mashViolations:null,etternaModeScore:null,noteCheck:function(t,e){e.rating=If.CalculateRating(-(e.strumTime-T.songPosition),Math.floor(Lb.safeFrames/60*1e3)),t[e.noteData]&&this.goodNoteHit(e,this.mashing>this.getKeyPresses(e))},goodNoteHit:function(e,t){null==t&&(t=!0),0!=this.mashing&&(this.mashing=0);var n,s,i=-(e.strumTime-T.songPosition);if(y.loadRep?(i=this.findByTime(e.strumTime)[3],n=y.rep.replay.songJudgements,s=this.findByTimeIndex(e.strumTime),e.rating=n[s]):e.rating=If.CalculateRating(i),"miss"!=e.rating&&(e.isSustainNote||this.notesHitArray.unshift(new Date),!t&&1<=this.mashViolations&&this.mashViolations--,this.mashViolations<0&&(this.mashViolations=0),!e.wasGoodHit)){switch(e.isSustainNote?this.totalNotesHit+=1:(this.popUpScore(e),this.combo+=1),e.noteData){case 0:y.boyfriend.playAnim("singLEFT",!0);break;case 1:y.boyfriend.playAnim("singDOWN",!0);break;case 2:y.boyfriend.playAnim("singUP",!0);break;case 3:y.boyfriend.playAnim("singRIGHT",!0)}!y.loadRep&&e.mustPress&&(t=[e.strumTime,e.sustainLength,e.noteData,i],e.isSustainNote&&(t[1]=-1),this.saveNotes.push(t),this.saveJudge.push(e.rating)),y.playerStrums.forEach(function(t){Math.abs(e.noteData)==t.ID&&t.animation.play("confirm",!0)}),y.glitchedPlayerStrums.forEach(function(t){Math.abs(e.noteData)==t.ID&&t.animation.play("confirm",!0)}),e.kill(),this.notes.remove(e,!0),this.usingGlitchedNotes&&this.glitchedNotes.remove(e,!0),e.destroy(),this.updateAccuracy()}},fastCarCanDrive:null,resetFastCar:function(){n.save.data.distractions&&(this.fastCar.set_x(-12600),this.fastCar.set_y(n.random.int(140,250)),this.fastCar.velocity.set_x(0),this.fastCarCanDrive=!0)},fastCarDrive:function(){var e=this;n.save.data.distractions&&(n.sound.play(K.sound("carPass"+n.random.int(0,1),null),.7),this.fastCar.velocity.set_x(n.random.int(170,220)/n.elapsed*3),this.fastCarCanDrive=!1,(new Tc).start(2,function(t){e.resetFastCar()}))},trainMoving:null,trainFrameTiming:null,trainCars:null,trainFinishing:null,trainCooldown:null,trainStart:function(){n.save.data.distractions&&(this.trainMoving=!0,null==this.trainSound._channel&&this.trainSound.play(!0))},startedMoving:null,updateTrainPos:function(){var t;n.save.data.distractions&&(4700<=this.trainSound._time&&(this.startedMoving=!0,y.gf.playAnim("hairBlow")),this.startedMoving)&&((t=this.phillyTrain).set_x(t.x-400),this.phillyTrain.x<-2e3&&!this.trainFinishing&&(this.phillyTrain.set_x(-1150),--this.trainCars,this.trainCars<=0&&(this.trainFinishing=!0)),this.phillyTrain.x<-4e3&&this.trainFinishing&&this.trainReset())},trainReset:function(){n.save.data.distractions&&(y.gf.playAnim("hairFall"),this.phillyTrain.set_x(n.width+200),this.trainMoving=!1,this.trainCars=8,this.startedMoving=this.trainFinishing=!1)},lightningStrikeShit:function(){n.sound.play(K.sound("thunder_"+n.random.int(1,2),null)),this.halloweenBG.animation.play("lightning"),this.lightningStrikeBeat=this.curBeat,this.lightningOffset=n.random.int(8,24),y.boyfriend.playAnim("scared",!0),y.gf.playAnim("scared",!0)},danced:null,stepHit:function(){var t,s=this;switch(da.prototype.stepHit.call(this),y.SONG.song.toLowerCase()){case"diagraphephobia":switch(this.curStep){case 731:this.screamMode=!0,n.camera.follow(this.camFollow,Gl.LOCKON,30/za.__cast(Fa.get_current().getChildAt(0),xb).getFPS()*.2),this.defaultCamZoom+=.4;break;case 739:this.screamMode=!1,n.camera.follow(this.camFollow,Gl.LOCKON,30/za.__cast(Fa.get_current().getChildAt(0),xb).getFPS()*.04),this.defaultCamZoom-=.4}this.inGlitchedHallway&&(t=n.random.int(0,15),Ea.trace(t,{fileName:"source/PlayState.hx",lineNumber:4814,className:"PlayState",methodName:"stepHit"}),7==t?this.randomForegroundGlitch():8==t&&this.randomGlitch());break;case"post-mortal":if(7==(t=n.random.int(0,13))){for(this.glitched=!0,t=new me(this.glitchedNotes.members,null);t.hasNext();){var e=t.next();e.set_visible(!0)}for(this.dad2.set_visible(!0),t=new me(y.glitchedStrumLineNotes.members,null);t.hasNext();)(e=t.next()).set_visible(!0);for(t=new me(y.strumLineNotes.members,null);t.hasNext();)(e=t.next()).set_visible(!1);y.dad.set_visible(!1),(new Tc).start(n.random.float(.1,.5),function(t){for(y.dad.set_visible(!0),s.dad2.set_visible(!1),s.glitched=!1,t=new me(y.glitchedStrumLineNotes.members,null);t.hasNext();){var e=t.next();e.set_visible(!1)}for(t=new me(y.strumLineNotes.members,null);t.hasNext();)(e=t.next()).set_visible(!0)})}}(n.sound.music._time>T.songPosition+20||n.sound.music._time<T.songPosition-20)&&this.resyncVocals()},lightningStrikeBeat:null,lightningOffset:null,randomGlitch:function(){var e=this,t=n.random.int(0,4);this.glitchLayer.clear();var s=new O(-n.width,-n.height);switch(t){case 0:s.set_frames(La.fromSparrow(K.getPath("images/glitch effects/glitchAnim.png","IMAGE","eteled"),K.getPath("images/glitch effects/glitchAnim.xml","TEXT","eteled"))),s.animation.addByPrefix("idle","g",24,!0),s.scale.set(16,16);break;case 1:s.set_frames(La.fromSparrow(K.getPath("images/glitch effects/noise2.png","IMAGE","eteled"),K.getPath("images/glitch effects/noise2.xml","TEXT","eteled"))),s.animation.addByPrefix("idle","f",24,!0),s.scale.set(16,16);break;case 2:s.set_frames(La.fromSparrow(K.getPath("images/glitch effects/noise2R.png","IMAGE","eteled"),K.getPath("images/glitch effects/noise2R.xml","TEXT","eteled"))),s.animation.addByPrefix("idle","f",24,!0),s.scale.set(16,16);break;case 3:s.set_frames(La.fromSparrow(K.getPath("images/glitch effects/sheet.png","IMAGE","eteled"),K.getPath("images/glitch effects/sheet.xml","TEXT","eteled"))),s.animation.addByPrefix("idle","Idle",24,!0),s.scale.set(8,8)}s.set_alpha(n.random.float(.1,.2)),s.animation.play("idle"),this.glitchLayer.add(s),(new Tc).start(n.random.float(.2,.5),function(t){-1!=e.glitchLayer.members.indexOf(s)&&e.glitchLayer.remove(s)})},randomForegroundGlitch:function(){var e=this,t=n.random.int(0,4);this.foregroundGlitchLayer.clear();var s=new O(0,0);switch(t){case 0:s.set_frames(La.fromSparrow(K.getPath("images/glitch effects/glitchAnim.png","IMAGE","eteled"),K.getPath("images/glitch effects/glitchAnim.xml","TEXT","eteled"))),s.animation.addByPrefix("idle","g",24,!0),s.scale.set(4,4);break;case 1:s.set_frames(La.fromSparrow(K.getPath("images/glitch effects/noise2.png","IMAGE","eteled"),K.getPath("images/glitch effects/noise2.xml","TEXT","eteled"))),s.animation.addByPrefix("idle","f",24,!0),s.scale.set(4,4);break;case 2:s.set_frames(La.fromSparrow(K.getPath("images/glitch effects/noise2R.png","IMAGE","eteled"),K.getPath("images/glitch effects/noise2R.xml","TEXT","eteled"))),s.animation.addByPrefix("idle","f",24,!0),s.scale.set(4,4);break;case 3:s.set_frames(La.fromSparrow(K.getPath("images/glitch effects/sheet.png","IMAGE","eteled"),K.getPath("images/glitch effects/sheet.xml","TEXT","eteled"))),s.animation.addByPrefix("idle","Idle",24,!0),s.scale.set(8,8)}s.set_alpha(n.random.float(.1,.2)),s.set_cameras([this.camHUD]),s.animation.play("idle"),this.foregroundGlitchLayer.add(s),(new Tc).start(n.random.float(.2,.5),function(t){-1!=e.foregroundGlitchLayer.members.indexOf(s)&&e.foregroundGlitchLayer.remove(s)})},randomForegroundTransGlitch:function(){n.sound.play(K.sound("Glitch-Transition-Sound-Effect","eteled"),.6),n.random.int(0,4),this.foregroundGlitchLayer.clear(),this.foregroundGlitch=new O(0,0),this.foregroundGlitch.set_frames(La.fromSparrow(K.getPath("images/glitch effects/glitchAnim.png","IMAGE","eteled"),K.getPath("images/glitch effects/glitchAnim.xml","TEXT","eteled"))),this.foregroundGlitch.animation.addByPrefix("idle","g",24,!0),this.foregroundGlitch.scale.set(2,2),this.foregroundGlitch.set_cameras([this.camHUD]),this.foregroundGlitch.animation.play("idle"),this.foregroundGlitchLayer.add(this.foregroundGlitch)},switchToHallway:function(){this.defaultCamZoom=.63;for(var t=new me(this.grpHallway.members,null);t.hasNext();){var e=t.next();e.set_y(e.y-2*n.height)}y.curStage="hallway",y.boyfriend.setPosition(1355,515),y.gf.setPosition(580,110),this.remove(y.dad),y.dad=new Fd(97,323,"eteled3"),this.add(y.dad),this.miiButtons.set_visible(!1),this.channelOverlay.set_visible(!1),this.inGlitchedHallway=!0},switchOutHallway:function(){this.channelOverlay.set_visible(!0),this.defaultCamZoom=.68;for(var t=new me(this.grpHallway.members,null);t.hasNext();){var e=t.next();e.set_y(e.y+2*n.height)}y.curStage="mii-channel-glitch",y.boyfriend.setPosition(1365,505),y.gf.setPosition(580,130),this.remove(y.dad),y.dad=new Fd(127,303,y.SONG.player2),this.add(y.dad),this.miiButtons.set_visible(!0),this.inGlitchedHallway=!1},beatHit:function(){if(da.prototype.beatHit.call(this),"diagraphephobia"==y.SONG.song.toLowerCase())switch(this.curBeat){case 111:this.randomForegroundTransGlitch(),this.switchToHallway();break;case 112:this.foregroundGlitchLayer.clear();break;case 152:this.randomForegroundTransGlitch(),this.switchOutHallway();break;case 153:this.foregroundGlitchLayer.clear()}var s,i,a,r,t;switch(this.generatedMusic&&(t=Lb.useDownscroll?-1:1,s=Bk.byY,i=t=null==t?-1:t,this.notes.members.sort(t=function(t,e){return s(i,t,e)}),this.usingGlitchedNotes&&(t=Lb.useDownscroll?-1:1,a=Bk.byY,r=t=null==t?-1:t,this.glitchedNotes.members.sort(t=function(t,e){return a(r,t,e)}))),"Tutorial"==this.curSong&&"gf"==y.dad.curCharacter&&(y.SONG.notes[Math.floor(this.curStep/16)].mustHitSection?y.dad.dance():73==this.curBeat||0==this.curBeat%4||1==this.curBeat%4?y.dad.playAnim("danceLeft",!0):y.dad.playAnim("danceRight",!0)),null!=y.SONG.notes[Math.floor(this.curStep/16)]&&!Y.startsWith(y.dad.animation._curAnim.name,"sing")&&"gf"!=y.dad.curCharacter&&this.everybodyShouldDance&&(y.dad.dance(!0),this.useDad2&&y.dad.dance(!0)),this.wiggleShit.update(T.crochet),n.save.data.camzoom&&("milf"==this.curSong.toLowerCase()&&168<=this.curBeat&&this.curBeat<200&&this.camZooming&&n.camera.zoom<1.35&&((t=n.camera).set_zoom(t.zoom+.015),(t=this.camHUD).set_zoom(t.zoom+.03)),this.camZooming&&n.camera.zoom<1.35&&0==this.curBeat%4&&((t=n.camera).set_zoom(t.zoom+.015),(t=this.camHUD).set_zoom(t.zoom+.03))),this.iconP1.setGraphicSize(this.iconP1.get_width()+30|0),this.iconP2.setGraphicSize(this.iconP2.get_width()+30|0),this.iconP1.updateHitbox(),this.iconP2.updateHitbox(),0==this.curBeat%this.gfSpeed&&this.everybodyShouldDance&&y.gf.dance(),Y.startsWith(y.boyfriend.animation._curAnim.name,"sing")||0!=this.curBeat%this.idleBeat&&this.idleToBeat||this.everybodyShouldDance&&y.boyfriend.playAnim("idle",this.idleToBeat),7==this.curBeat%8&&"Bopeebo"==this.curSong&&y.boyfriend.playAnim("hey",!0),15==this.curBeat%16&&"Tutorial"==y.SONG.song&&"gf"==y.dad.curCharacter&&16<this.curBeat&&this.curBeat<48&&(y.boyfriend.playAnim("hey",!0),y.dad.playAnim("cheer",!0)),y.curStage){case"limo":n.save.data.distractions&&(this.grpLimoDancers.forEach(function(t){t.dance()}),null==(t=10)&&(t=50),n.random.float(0,100)<t&&this.fastCarCanDrive&&this.fastCarDrive());break;case"mall":n.save.data.distractions&&(this.upperBoppers.animation.play("bop",!0),this.bottomBoppers.animation.play("bop",!0),this.santa.animation.play("idle",!0));break;case"philly":n.save.data.distractions&&(this.trainMoving||(this.trainCooldown+=1),0==this.curBeat%4&&(this.phillyCityLights.forEach(function(t){t.set_visible(!1)}),this.curLight=n.random.int(0,this.phillyCityLights.length-1),this.phillyCityLights.members[this.curLight].set_visible(!0))),(t=4==this.curBeat%8&&(null==(t=30)&&(t=50),n.random.float(0,100)<t))&&!this.trainMoving&&8<this.trainCooldown&&n.save.data.distractions&&(this.trainCooldown=n.random.int(-4,0),this.trainStart());break;case"school":n.save.data.distractions&&this.bgGirls.dance()}(t=!!this.isHalloween&&(null==(t=10)&&(t=50),n.random.float(0,100)<t))&&this.curBeat>this.lightningStrikeBeat+this.lightningOffset&&n.save.data.distractions&&this.lightningStrikeShit()},curLight:null,__class__:y});var Lb=function(){};r.PlayStateChangeables=Lb,Lb.__name__="PlayStateChangeables",Lb.useDownscroll=null,Lb.safeFrames=null,Lb.scrollSpeed=null,Lb.botPlay=null,Lb.Optimize=null;var Kb=function(t,e){this.id=t,this.controls=new Vb("player"+t,e)};r.PlayerSettings=Kb,Kb.__name__="PlayerSettings",Kb.player1=null,Kb.player2=null,Kb.init=function(){null==Kb.player1&&(Kb.player1=new Kb(0,qc.Solo),++Kb.numPlayers);var t=n.gamepads.get_numActiveGamepads();if(0<t){var e=n.gamepads._activeGamepads[0];if(null==e)throw H.thrown("Unexpected null gamepad. id:0");Kb.player1.controls.addDefaultGamepad(0)}if(1<t){if(null==Kb.player2&&(Kb.player2=new Kb(1,qc.None),++Kb.numPlayers),null==(e=n.gamepads._activeGamepads[1]))throw H.thrown("Unexpected null gamepad. id:0");Kb.player2.controls.addDefaultGamepad(1)}},Kb.reset=function(){Kb.player1=null,Kb.player2=null,Kb.numPlayers=0},Kb.prototype={id:null,controls:null,setKeyboardScheme:function(t){this.controls.setKeyboardScheme(t)},__class__:Kb};var If=function(){};r.Ratings=If,If.__name__="Ratings",If.GenerateLetterRank=function(t){for(var e=0==y.misses&&0==y.bads&&0==y.shits&&0==y.goods?"(MFC)":0==y.misses&&0==y.bads&&0==y.shits&&1<=y.goods?"(GFC)":0==y.misses?"(FC)":y.misses<10?"(SDCB)":"(Clear)",s=[99.9935<=t,99.98<=t,99.97<=t,99.955<=t,99.9<=t,99.8<=t,99.7<=t,99<=t,96.5<=t,93<=t,90<=t,85<=t,80<=t,70<=t,60<=t,t<60],i=0,a=s.length;i<a;){var r=i++;if(s[r]){switch(r){case 0:e+=" AAAAA";break;case 1:e+=" AAAA:";break;case 2:e+=" AAAA.";break;case 3:e+=" AAAA";break;case 4:e+=" AAA:";break;case 5:e+=" AAA.";break;case 6:e+=" AAA";break;case 7:e+=" AA:";break;case 8:e+=" AA.";break;case 9:e+=" AA";break;case 10:e+=" A:";break;case 11:e+=" A.";break;case 12:e+=" A";break;case 13:e+=" B";break;case 14:e+=" C";break;case 15:e+=" D"}break}}return 0==t?e="N/A":n.save.data.botplay&&!y.loadRep&&(e="BotPlay"),e},If.CalculateRating=function(t,e){var s=T.timeScale;return null!=e&&(s=e/166),n.save.data.botplay&&!y.loadRep?"sick":If.checkRating(t,s)},If.checkRating=function(t,e){return-166*e<t&&t<=-135*e?"shit":-135*e<t&&t<=-90*e?"bad":-90*e<t&&t<=-45*e?"good":t<45*e&&-45*e<=t?"sick":t<90*e&&45*e<=t?"good":t<135*e&&90*e<=t?"bad":t<=166*e&&135*e<=t?"shit":"sick"},If.CalculateRanking=function(t,e,s,i,a){return(n.save.data.npsDisplay?"NPS: "+s+" (Max "+i+")"+(!Lb.botPlay||y.loadRep?" | ":""):"")+(!Lb.botPlay||y.loadRep?"Score:"+(10!=T.safeFrames?t+" ("+e+")":""+t)+(n.save.data.accuracyDisplay?" | Combo Breaks:"+y.misses+" | Accuracy:"+(Lb.botPlay&&!y.loadRep?"N/A":Kd.truncateFloat(a,2)+" %")+" | "+If.GenerateLetterRank(a):""):"")};var Z=function(){};r.Reflect=Z,Z.__name__="Reflect",Z.field=function(t,e){try{return t[e]}catch(t){return tb.lastError=t,null}},Z.getProperty=function(t,e){var n;return null==t?null:!!t.__properties__&&(n=t.__properties__["get_"+e])?t[n]():t[e]},Z.setProperty=function(t,e,n){var s;!!t.__properties__&&(s=t.__properties__["set_"+e])?t[s](n):t[e]=n},Z.fields=function(t){var e=[];if(null!=t){var n,s=Object.prototype.hasOwnProperty;for(n in t)"__id__"!=n&&"hx__closures__"!=n&&s.call(t,n)&&e.push(n)}return e},Z.isFunction=function(t){return"function"==typeof t&&!(t.__name__||t.__ename__)},Z.compare=function(t,e){return t==e?0:e<t?1:-1},Z.compareMethods=function(t,e){return t==e||!(!Z.isFunction(t)||!Z.isFunction(e))&&(t.scope==e.scope&&t.method==e.method&&null!=t.method)},Z.isObject=function(t){if(null==t)return!1;var e=typeof t;return"string"==e||"object"==e&&null==t.__enum__||"function"==e&&null!=(t.__name__||t.__ename__)},Z.isEnumValue=function(t){return null!=t&&null!=t.__enum__},Z.deleteField=function(t,e){return!!Object.prototype.hasOwnProperty.call(t,e)&&(delete t[e],!0)},Z.makeVarArgs=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e(t)}};var ho=function(t,e,n,s,i){this.hitTime=t,this.nearestNote=e,this.hit=n,this.hitJudge=s,this.key=i};r.Ana=ho,ho.__name__="Ana",ho.prototype={hitTime:null,nearestNote:null,hit:null,hitJudge:null,key:null,__class__:ho};var fo=function(){this.anaArray=[]};r.Analysis=fo,fo.__name__="Analysis",fo.prototype={anaArray:null,__class__:fo};var ng=function(t){this.path="",this.path=t,this.replay={songName:"No Song Found",songDiff:1,noteSpeed:1.5,isDownscroll:!1,songNotes:[],replayGameVer:ng.version,chartPath:"",sm:!1,timestamp:new Date,sf:T.safeFrames,ana:new fo,songJudgements:[]}};r.Replay=ng,ng.__name__="Replay",ng.LoadReplay=function(t){return(t=new ng(t)).LoadFromJSON(),Ea.trace("basic replay data:\nSong Name: "+t.replay.songName+"\nSong Diff: "+t.replay.songDiff,{fileName:"source/Replay.hx",lineNumber:86,className:"Replay",methodName:"LoadReplay"}),t},ng.prototype={path:null,replay:null,SaveReplay:function(t,e,s){JSON.stringify({songName:y.SONG.song,songDiff:y.storyDifficulty,chartPath:"",sm:y.isSM,timestamp:new Date,replayGameVer:ng.version,sf:T.safeFrames,noteSpeed:1<n.save.data.scrollSpeed?n.save.data.scrollSpeed:y.SONG.speed,isDownscroll:n.save.data.downscroll,songNotes:t,songJudgements:e,ana:s},null,""),(new Date).getTime()},LoadFromJSON:function(){},__class__:ng};var Jl=function(t){this.frames=0,Vc.call(this,t)};r.ResultsScreen=Jl,Jl.__name__="ResultsScreen",Jl.__super__=Vc,Jl.prototype=E(Vc.prototype,{background:null,text:null,anotherBackground:null,graph:null,graphSprite:null,comboText:null,contText:null,settingsText:null,music:null,graphData:null,ranking:null,accuracy:null,create:function(){var e=this;this.background=new O(0,0).makeGraphic(n.width,n.height,-16777216),this.background.scrollFactor.set(),this.add(this.background),y.inResults||(this.music=(new bg).loadEmbedded(K.getPath("music/breakfast.ogg","MUSIC",null),!0,!0),this.music.set_volume(0),this.music.play(!1,n.random.int(0,this.music._length/2|0)),n.sound.list.add(this.music)),this.background.set_alpha(0),this.text=new ub(20,-55,0,"Song Cleared!"),this.text.set_size(34);var t=this.text,s=-16777216,i=4;null==(a=1)&&(a=1),null==i&&(i=1),null==s&&(s=0),t.set_borderStyle(Zc.OUTLINE),t.set_borderColor(s),t.set_borderSize(i),t.set_borderQuality(a),this.text.set_color(-1),this.text.scrollFactor.set(),this.add(this.text),y.isStoryMode&&this.text.set_text("Week Cleared!"),this.comboText=new ub(20,-75,0,"Judgements:\nSicks - "+y.sicks+"\nGoods - "+y.goods+"\nBads - "+y.bads+"\n\nCombo Breaks: "+(y.isStoryMode?y.campaignMisses:y.misses)+"\nHighest Combo: "+(y.highestCombo+1)+"\nScore: "+y.instance.songScore+"\nAccuracy: "+Kd.truncateFloat(y.instance.accuracy,2)+"%\n\n"+If.GenerateLetterRank(y.instance.accuracy)+"\n        "),this.comboText.set_size(28),null==(a=1)&&(a=1),null==(i=4)&&(i=1),null==(s=-16777216)&&(s=0),(t=this.comboText).set_borderStyle(Zc.OUTLINE),t.set_borderColor(s),t.set_borderSize(i),t.set_borderQuality(a),this.comboText.set_color(-1),this.comboText.scrollFactor.set(),this.add(this.comboText),this.contText=new ub(n.width-475,n.height+50,0,"Press "+(ve.gamepad?"A":"ENTER")+" to continue."),this.contText.set_size(28),null==(a=1)&&(a=1),null==(i=4)&&(i=1),null==(s=-16777216)&&(s=0),(t=this.contText).set_borderStyle(Zc.OUTLINE),t.set_borderColor(s),t.set_borderSize(i),t.set_borderQuality(a),this.contText.set_color(-1),this.contText.scrollFactor.set(),this.add(this.contText),this.anotherBackground=new O(n.width-500,45).makeGraphic(450,240,-16777216),this.anotherBackground.scrollFactor.set(),this.anotherBackground.set_alpha(0),this.add(this.anotherBackground),this.graph=new hh(n.width-500,45,495,240),this.graph.set_alpha(0),this.graphSprite=new An(n.width-510,45,460,240,this.graph),this.graphSprite.scrollFactor.set(),this.graphSprite.set_alpha(0),this.add(this.graphSprite),1/0==(t=Kd.truncateFloat(y.sicks/y.goods,1))&&(t=0),1/0==(s=Kd.truncateFloat(y.goods/y.bads,1))&&(s=0);for(var a=i=0,r=y.rep.replay.songNotes.length;a<r;){var l=a++,o=y.rep.replay.songNotes[l],h=o[0],_=o[3],l=y.rep.replay.songJudgements[l];_!=166*Math.floor(y.rep.replay.sf/60*1e3)/166&&(i+=_),-1!=o[1]&&this.graph.addToHistory(_,l,h)}this.graph.update(),i=Kd.truncateFloat(i/y.rep.replay.songNotes.length,2),this.settingsText=new ub(20,n.height+50,0,"SF: "+y.rep.replay.sf+" | Ratio (SA/GA): "+Math.round(t)+":1 "+Math.round(s)+":1 | Mean: "+i+"ms | Played on "+y.SONG.song+" "+cd.difficultyFromInt(y.storyDifficulty).toUpperCase()),this.settingsText.set_size(16),null==(a=1)&&(a=1),null==(i=2)&&(i=1),null==(s=-16777216)&&(s=0),(t=this.settingsText).set_borderStyle(Zc.OUTLINE),t.set_borderColor(s),t.set_borderSize(i),t.set_borderQuality(a),this.settingsText.set_color(-1),this.settingsText.scrollFactor.set(),this.add(this.settingsText),Ta.tween(this.background,{alpha:.5},.5),Ta.tween(this.text,{y:20},.5,{ease:Ra.expoInOut}),Ta.tween(this.comboText,{y:145},.5,{ease:Ra.expoInOut}),Ta.tween(this.contText,{y:n.height-45},.5,{ease:Ra.expoInOut}),Ta.tween(this.settingsText,{y:n.height-35},.5,{ease:Ra.expoInOut}),Ta.tween(this.anotherBackground,{alpha:.6},.5,{onUpdate:function(t){e.graph.set_alpha(Math.max(t._secondsSinceStart-t._delayToUse,0)/t.duration),e.graphSprite.set_alpha(Math.max(t._secondsSinceStart-t._delayToUse,0)/t.duration)}}),this.set_cameras([n.cameras.list[n.cameras.list.length-1]]),Vc.prototype.create.call(this)},frames:null,update:function(t){if(null!=this.music&&this.music._volume<.5&&(e=this.music).set_volume(e._volume+.01*t),Kb.player1.controls._accept.check()){var e,s=.3;switch(null==s&&(s=1),null!=(e=this.music).fadeTween&&e.fadeTween.cancel(),e.fadeTween=Ta.num(e._volume,0,s,{onComplete:null},z(e,e.volumeTween)),y.loadRep=!1,y.rep=null,e=Y.replace(y.SONG.song," ","-")){case"Dad-Battle":e="Dadbattle";break;case"Philly-Nice":e="Philly"}Gb.saveScore(e,Math.round(y.instance.songScore),y.storyDifficulty),Gb.saveCombo(e,If.GenerateLetterRank(y.instance.accuracy),y.storyDifficulty),e=y.isStoryMode?(n.sound.playMusic(K.getPath("music/freakyMenu.ogg","MUSIC",null)),T.changeBPM(102),new fe):new vb,n.game._state.switchTo(e)&&(n.game._requestedState=e)}if((e=n.keys.justPressed).keyManager.checkStatus(112,e.status)&&!y.loadRep){switch(Ea.trace(y.rep.path,{fileName:"source/ResultsScreen.hx",lineNumber:215,className:"ResultsScreen",methodName:"update"}),y.rep=ng.LoadReplay(y.rep.path),y.loadRep=!0,y.isSM=y.rep.replay.sm,Y.replace(y.rep.replay.songName," ","-"),e=Y.replace(y.SONG.song," ","-")){case"Dad-Battle":e="Dadbattle";break;case"Philly-Nice":e="Philly"}Gb.saveScore(e,Math.round(y.instance.songScore),y.storyDifficulty),Gb.saveCombo(e,If.GenerateLetterRank(y.instance.accuracy),y.storyDifficulty);var i=Gb.formatSong(y.rep.replay.songName,y.rep.replay.songDiff);null==(s=.3)&&(s=1),null!=(e=this.music).fadeTween&&e.fadeTween.cancel(),e.fadeTween=Ta.num(e._volume,0,s,{onComplete:null},z(e,e.volumeTween)),y.SONG=y.isSM?nf.loadFromJsonRAW(i):nf.loadFromJson(i,y.rep.replay.songName),y.isStoryMode=!1,y.storyDifficulty=y.rep.replay.songDiff,e=md.getNextState(new y,!1),n.game._state.switchTo(e)&&(n.game._requestedState=e)}if((e=n.keys.justPressed).keyManager.checkStatus(113,e.status)&&!y.loadRep){switch(y.rep=null,y.loadRep=!1,e=Y.replace(y.SONG.song," ","-")){case"Dad-Battle":e="Dadbattle";break;case"Philly-Nice":e="Philly"}switch(Gb.saveScore(e,Math.round(y.instance.songScore),y.storyDifficulty),Gb.saveCombo(e,If.GenerateLetterRank(y.instance.accuracy),y.storyDifficulty),e=Y.replace(y.SONG.song," ","-")){case"Dad-Battle":e="Dadbattle";break;case"Philly-Nice":e="Philly";break;case"dad-battle":e="Dadbattle";break;case"philly-nice":e="Philly"}i=Gb.formatSong(e,y.storyDifficulty),null!=this.music&&(null==(s=.3)&&(s=1),null!=(e=this.music).fadeTween&&e.fadeTween.cancel(),e.fadeTween=Ta.num(e._volume,0,s,{onComplete:null},z(e,e.volumeTween))),y.SONG=nf.loadFromJson(i,y.SONG.song),y.isStoryMode=!1,y.storyDifficulty=y.storyDifficulty,e=md.getNextState(new y,!1),n.game._state.switchTo(e)&&(n.game._requestedState=e)}Vc.prototype.update.call(this,t)},__class__:Jl});var mr=function(t){null==t&&(t=16),this.mustHitSection=!0,this.typeOfSection=0,this.lengthInSteps=16,this.sectionNotes=[],this.startTime=this.endTime=0,this.lengthInSteps=t};r.Section=mr,mr.__name__="Section",mr.prototype={startTime:null,endTime:null,sectionNotes:null,lengthInSteps:null,typeOfSection:null,mustHitSection:null,__class__:mr};var an=function(t,e,s,i){null==i&&(i=16),O.call(this,t,e),this.makeGraphic(8*s,s*i,-1579290),t=s,Math.floor(t)!=t&&(t=s),n.save.data.editor&&Rj.overlay(this,s,0|t,8*s,s*i)};r.SectionRender=an,an.__name__="SectionRender",an.__super__=O,an.prototype=E(O.prototype,{section:null,icon:null,lastUpdated:null,update:function(t){},__class__:an});var Xh=function(t,e,n,s){this.name=t,this.position=e,this.value=n,this.type=s};r.Event=Xh,Xh.__name__="Event",Xh.prototype={name:null,position:null,value:null,type:null,__class__:Xh};var nf=function(t,e,n){this.gfVersion=this.noteStyle=this.stage="",this.player2="dad",this.player1="bf",this.speed=1,this.needsVoices=!0,this.song=t,this.notes=e,this.bpm=n};r.Song=nf,nf.__name__="Song",nf.loadFromJsonRAW=function(t){for(;!Y.endsWith(t,"}");)t=ma.substr(t,0,t.length-1);return nf.parseJSONshit(t)},nf.loadFromJson=function(t,e){switch(e=Y.replace(e," ","-").toLowerCase()){case"dad-battle":e="dadbattle";break;case"philly-nice":e="philly"}for(Ea.trace("loading "+e+"/"+t.toLowerCase(),{fileName:"source/Song.hx",lineNumber:87,className:"Song",methodName:"loadFromJson"}),t=Y.trim(Ma.getText(K.getPath("data/"+e+"/"+t.toLowerCase()+".json","TEXT",null)));!Y.endsWith(t,"}");)t=ma.substr(t,0,t.length-1);return nf.parseJSONshit(t)},nf.parseJSONshit=function(t){return(t=JSON.parse(t).song).validScore=!0,t},nf.prototype={chartVersion:null,song:null,notes:null,bpm:null,needsVoices:null,eventObjects:null,speed:null,player1:null,player2:null,gfVersion:null,noteStyle:null,stage:null,__class__:nf};var U=function(){};r.Std=U,U.__name__="Std",U.string=function(t){return za.__string_rec(t,"")},U.parseInt=function(t){if(null!=t)for(var e=0,n=t.length;e<n;){var s=e++,i=t.charCodeAt(s);if(i<=8||14<=i&&32!=i&&45!=i){if(e=t.charCodeAt(1+s),t=parseInt(t,120==e||88==e?16:10),isNaN(t))break;return t}}return null};var ge=function(t,e){this.lerpScore=this.intendedScore=0,this.movedBack=this.selectedWeek=this.stopspamming=!1,this.curWeek=0,this.weekNames=cd.coolTextFile(K.getPath("data/weekNames.txt","TEXT",null)),this.weekCharacters=[["","bf","gf"]],this.curDifficulty=1,da.call(this,t,e)};r.StoryMenuState=ge,ge.__name__="StoryMenuState",ge.weekData=function(){return[["Dream-Of-Peace","Diagraphephobia","Post-Mortal"]]},ge.unlockNextWeek=function(t){t<=ge.weekData().length-1&&n.save.data.weekUnlocked==t&&(ge.weekUnlocked.push(!0),Ea.trace("Week "+t+" beat (Week "+(t+1)+" unlocked)",{fileName:"source/StoryMenuState.hx",lineNumber:472,className:"StoryMenuState",methodName:"unlockNextWeek"})),n.save.data.weekUnlocked=ge.weekUnlocked.length-1,n.save.flush()},ge.__super__=da,ge.prototype=E(da.prototype,{scoreText:null,curDifficulty:null,weekCharacters:null,weekNames:null,txtWeekTitle:null,curWeek:null,txtTracklist:null,grpWeekText:null,grpWeekCharacters:null,grpLocks:null,difficultySelectors:null,sprDifficulty:null,leftArrow:null,rightArrow:null,unlockWeeks:function(){var t=[];t.push(!0);for(var e=0,s=n.save.data.weekUnlocked;e<s;)e++,t.push(!0);return t},create:function(){ge.weekUnlocked=this.unlockWeeks(),this.transIn=F.defaultTransIn,this.transOut=F.defaultTransOut,null!=n.sound.music&&null==n.sound.music._channel&&(n.sound.playMusic(K.getPath("music/freakyMenu.ogg","MUSIC",null)),T.changeBPM(102)),this.persistentUpdate=this.persistentDraw=!0,this.scoreText=new ub(10,10,0,"SCORE: 49324858",36),this.scoreText.setFormat("VCR OSD Mono",32),this.txtWeekTitle=new ub(.7*n.width,10,0,"",32),this.txtWeekTitle.setFormat("VCR OSD Mono",32,-1,"right"),this.txtWeekTitle.set_alpha(.7);var t=new ub(0,10);t.set_text("RANK: GREAT"),t.setFormat("assets/fonts/vcr.ttf",32),t.set_size(0|this.scoreText._defaultFormat.size),t.screenCenter(Ce.X);var e=La.fromSparrow(K.getPath("images/campaign_menu_UI_assets.png","IMAGE",null),K.getPath("images/campaign_menu_UI_assets.xml","TEXT",null)),s=new O(0,56).makeGraphic(n.width,400,-14209735);this.grpWeekText=new yb,this.add(this.grpWeekText),this.grpLocks=new yb,this.add(this.grpLocks);var i=(new O).makeGraphic(n.width,56,-16777216);this.add(i),this.grpWeekCharacters=new yb,Ea.trace("Line 70",{fileName:"source/StoryMenuState.hx",lineNumber:127,className:"StoryMenuState",methodName:"create"});for(var i=0,a=ge.weekData().length;i<a;){var r=i++,l=new zn(0,s.y+s.get_height()+10,r),o=l;o.set_y(o.y+(l.get_height()+20)*r),l.targetY=r,this.grpWeekText.add(l),l.screenCenter(Ce.X),n.save.data.antialiasing&&l.set_antialiasing(!0),ge.weekUnlocked[r]||(Ea.trace("locking week "+r,{fileName:"source/StoryMenuState.hx",lineNumber:146,className:"StoryMenuState",methodName:"create"}),(l=new O(l.get_width()+10+l.x)).set_frames(e),l.animation.addByPrefix("lock","lock"),l.animation.play("lock"),l.ID=r,n.save.data.antialiasing&&l.set_antialiasing(!0),this.grpLocks.add(l))}for(Ea.trace("Line 96",{fileName:"source/StoryMenuState.hx",lineNumber:160,className:"StoryMenuState",methodName:"create"}),this.grpWeekCharacters.add(new vj(0,100,.5,!1)),this.grpWeekCharacters.add(new vj(450,25,.9,!0)),this.grpWeekCharacters.add(new vj(850,100,.5,!0)),this.difficultySelectors=new yb,this.add(this.difficultySelectors),Ea.trace("Line 124",{fileName:"source/StoryMenuState.hx",lineNumber:169,className:"StoryMenuState",methodName:"create"}),this.leftArrow=new O(this.grpWeekText.members[0].x+this.grpWeekText.members[0].get_width()+10,this.grpWeekText.members[0].y+10),this.leftArrow.set_frames(e),this.leftArrow.animation.addByPrefix("idle","arrow left"),this.leftArrow.animation.addByPrefix("press","arrow push left"),this.leftArrow.animation.play("idle"),this.difficultySelectors.add(this.leftArrow),this.sprDifficulty=new O(this.leftArrow.x+130,this.leftArrow.y),this.sprDifficulty.set_frames(e),this.sprDifficulty